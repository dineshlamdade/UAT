<div class="tabview-contents">
  <div>
    <div class="row mt-15">
      <div class="col-12">
        <div class="table-responsive Custom_Table">
          <table class="table table-striped table-hover table-bordered m-b-0">
            <thead class="thead-dark" *ngIf="previousEmployeeList?.length">
              <tr>

                <th rowspan="2" class="wd-6">
                  <label
                    class="custom-control custom-checkbox checkbox-center"
                    placement="bottom" [adaptivePosition]="false"
                    tooltip="Select All"
                  >
                    <input
                      type="checkbox"
                      class="custom-control-input"
                      [ngModel]="isCheckAll"
                      [disabled]="isDisabled"
                      name="select"
                      (change)="checkUncheckAll()"
                    />
                    <span class="custom-control-label"></span>
                  </label>
                </th>
<!-- 
                <th rowspan="2" class="wd-10 font700">
                  Previous Employer Name
                </th>
                <th rowspan="2" class="wd-10 font700">
                  <span tooltip="Institution">Institution</span>
                </th>
                <th rowspan="2" class="wd-11 font700">
                  <span tooltip="Account No">Account No</span>
                  </th>
                <th rowspan="2" class="wd-9 font700">
                  <span tooltip="Declared">Declared</span>
              </th>
                <th rowspan="2" class="wd-11 font700">
                  <span tooltip="Date of Payment">Date of Payment</span>
                </th>
                <th rowspan="2" class="wd-9 font700">
                  <span tooltip="Actual">Actual</span>
                 </th>
                <th colspan="2" class="wd-17 font700">
                  <span tooltip="Receipt Amount">Receipt Amount</span>
                  </th>
                <th rowspan="2" class="wd-7 font700">
                  <span tooltip="Remark">Remark</span>
                  </th>
                <th rowspan="2" class="wd-8">
                  <span tooltip="PS ID">PS ID</span>
                  </th>
              
                <th rowspan="2" class="wd-10 font700">
                  <span tooltip="Status">Status</span>
                  </th> -->
                  <th rowspan="2" class="wd-10 font700">
                    <span tooltip="Institution">Institution</span>
                </th>
                <th rowspan="2" class="wd-11 font700"><span tooltip="Account No">Account No</span></th>
                <th rowspan="2" class="wd-9 font700"><span tooltip="Declared Amount">Declared Amount</span></th>
                <th rowspan="2" class="wd-11 font700"><span tooltip="Date of Payment">Date of Payment</span></th>
                <th rowspan="2" class="wd-10 font700">
                  <span tooltip="Previous Employer Name">Previous Employer Name</span>
                </th>
                <!-- <th rowspan="2" class="wd-11 font700">Date of Payment</th> -->
                <th rowspan="2" class="wd-9 font700"><span tooltip="Actual Amount">Actual Amount</span></th>
                <th colspan="2" class="wd-17 font700"><span tooltip="Approval Amount">Approval Amount</span></th>
                <th rowspan="2" class="wd-7 font700"><span tooltip="Remark">Remark</span></th>
                <!-- <th rowspan="2" class="wd-8">Proof Submission ID</th> -->
                <th rowspan="2" class="wd-7"><span tooltip=">PS. ID.">PS. ID.</span></th>
                <th rowspan="2" class="wd-10 font700"><span tooltip="Status">Status</span></th>
                <th rowspan="2" class=" font700"><span tooltip="Action">Action</span></th>
              </tr>
              <tr>
                <th>Rejected</th>
                <th>Approved</th>
              </tr>
            </thead>
            <thead class="thead-dark" *ngIf="!previousEmployeeList.length">
              <tr>
                <th rowspan="2" class="wd-6">
                  <label class="custom-control custom-checkbox checkbox-center" placement="bottom" [adaptivePosition]="false"
                  tooltip="Select All">
                    <input type="checkbox" class="custom-control-input" name="select" />
                    <span class="custom-control-label"></span>
                  </label>
                </th>
                <!-- <th rowspan="2" class="wd-15 font700">
                  <span>Institution</span>
                </th>
                <th rowspan="2" class="wd-11 font700">Account No</th>
                <th rowspan="2" class="wd-9 font700">Declared</th>
                <th rowspan="2" class="wd-11 font700">Date of Payment</th>
                <th rowspan="2" class="wd-9 font700">Actual</th>
                <th colspan="2" class="wd-17 font700">Receipt Amount</th>
                <th rowspan="2" class="wd-10 font700">Remark</th>
                <th rowspan="2" class="wd-10">PS ID</th>
              
                <th rowspan="2" class="wd-10 font700">Status</th> -->
                <th rowspan="2" class="wd-10 font700">
                  <span tooltip="Institution">Institution</span>
              </th>
              <th rowspan="2" class="wd-11 font700"><span tooltip="Account No">Account No</span></th>
              <th rowspan="2" class="wd-9 font700"><span tooltip="Declared Amount">Declared Amount</span></th>
              <th rowspan="2" class="wd-11 font700"><span tooltip="Date of Payment">Date of Payment</span></th>
              <!-- <th rowspan="2" class="wd-10 font700">
                <span tooltip="Previous Employer Name">Previous Employer Name</span>
              </th> -->
              <!-- <th rowspan="2" class="wd-11 font700">Date of Payment</th> -->
              <th rowspan="2" class="wd-9 font700"><span tooltip="Actual Amount">Actual Amount</span></th>
              <th colspan="2" class="wd-17 font700"><span tooltip="Approval Amount">Approval Amount</span></th>
              <th rowspan="2" class="wd-7 font700"><span tooltip="Remark">Remark</span></th>
              <!-- <th rowspan="2" class="wd-8">Proof Submission ID</th> -->
              <th rowspan="2" class="wd-7"><span tooltip=">PS. ID.">PS. ID.</span></th>
              <th rowspan="2" class="wd-10 font700"><span tooltip="Status">Status</span></th>
              <th rowspan="2" class=" font700"><span tooltip="Action">Action</span></th>
              </tr>
              <tr>
                <th>Rejected</th>
                <th>Approved</th>
              </tr>
            </thead>
            <tbody>
              <tr
                *ngFor="
                  let summary of transactionDetail;
                  let i = index;
                  count as c
                " [ngClass]="{ 'highlight': this.selectrow == summary.accountNumber }">
              <td scope="row">
                <label
                  class="custom-control custom-checkbox checkbox-center"
                  *ngIf="isDisabled && summary.transactionStatus !== 'Submitted'"
                  tooltip="Select institution for proof submission"
                >
                  <input
                    type="checkbox"
                    [ngModel]="enableSelectAll"
                    [disabled]="isDisabled || summary.proofSubmissionId"
                    (change)="
                      onSelectCheckBox(summary, $event, i);
                      enableCheckboxFlag = i
                    "
                    class="custom-control-input"

                  />
                  <span class="custom-control-label"></span>
                </label>
                <label
                *ngIf="!isDisabled && summary.transactionStatus !== 'Submitted'"
                  class="custom-control custom-checkbox checkbox-center"
                >
                  <input
                    type="checkbox"
                    [ngModel]="enableSelectAll"
                    [disabled]="isDisabled || summary.proofSubmissionId"
                    (change)="
                      onSelectCheckBox(summary, $event, i);
                      enableCheckboxFlag = i
                    "
                    class="custom-control-input"

                  />
                  <span class="custom-control-label"></span>
                </label>
              </td>
                <!-- <td *ngIf="previousEmployeeList?.length">
                  <select
                    name="Previous Employer Name"
                    class="form-control custom-select"
                    (change)="updatePreviousEmpId($event, i)"
                    [disabled]="
                      isDisabled || summary.transactionStatus === 'Submitted' || dateOfJoining < summary.dueDate
                      ">
                    "
                  >
                    <option [ngValue]="0">Select Previous Emp.</option>
                    <option
                      *ngFor="let previousEmployee of previousEmployeeList"
                      [value]="previousEmployee.value"
                      [selected]="
                        previousEmployee.value == summary.previousEmployerId
                      "
                    >
                      {{ previousEmployee.label }}
                    </option>
                  </select>
                </td> -->
                <td>
                  <input
                    type="text"
                    class="form-control"
                    [ngModel]="summary.institution"
                    [disabled]="summary.institution"
                  />
                </td>
                <td>
                  <div class="custom_icon_badge">
                    <input
                      type="text"
                      class="form-control"
                      onkeypress="return /[0-9 ]/i.test(event.key)"
                      [ngModel]="summary.accountNumber"
                      [disabled]="summary.accountNumber"
                    />
                  </div>
                </td>
                <td>
                  <div class="custom_icon_badge">
                    <input
                      type="text"
                      id="declaredAmount{{
                        summary.investmentGroup3TransactionId
                      }}"
                      onkeypress="return /[0-9 ]/i.test(event.key)"
                      name="declaredAmount{{
                        summary.investmentGroup3TransactionId
                      }}"
                      [(ngModel)]="summary.declaredAmount"
                      [disabled]=" isDisabled || summary.transactionStatus === 'Submitted'"
                      class="form-control align-right"
                    />
                  </div>
                </td>
                <td>
                  <input
                    type="text"
                    [ngModel]="summary.dateOfPayment | date: 'dd-MMM-yy'"
                    [maxDate]="today"
                    [bsConfig]="{ dateInputFormat: 'DD-MMM-YY' }"
                    data-provide="datepicker"
                    data-date-autoclose="true"
                    (ngModelChange)="
                      summary.dateOfPayment = $event.toLocaleDateString();
                      onChangeDateOfPayment(summary, i, 1)
                    "
                    [disabled]="
                      isDisabled || summary.transactionStatus === 'Submitted'
                    "
                    class="form-control"
                    bsDatepicker
                  />
                </td>
                <td *ngIf="previousEmployeeList?.length">
                  <select
                    name="Previous Employer Name"
                    class="form-control custom-select"
                    (change)="updatePreviousEmpId($event, i)"
                    [disabled]="
                      isDisabled || summary.transactionStatus === 'Submitted' || dateOfJoining < summary.dueDate
                      ">
                    "
                  >
                    <option [ngValue]="0">Select Previous Emp.</option>
                    <option
                      *ngFor="let previousEmployee of previousEmployeeList"
                      [value]="previousEmployee.value"
                      [selected]="
                        previousEmployee.value == summary.previousEmployerId
                      "
                    >
                      {{ previousEmployee.label }}
                    </option>
                  </select>
                </td>

                <!-- <td>
                  <input
                    type="text"
                    id="actualAmount{{ summary.investmentGroup3TransactionId }}"
                    onkeypress="return /[0-9 ]/i.test(event.key)"
                    name="actualAmount{{
                      summary.investmentGroup3TransactionId
                    }}"
                    [(ngModel)]="summary.actualAmount"
                    maxlength="22"
                    [disabled]=" isDisabled || summary.transactionStatus === 'Submitted'"
                    class="form-control align-right"
                  />
                </td> -->
                <td class="wd-4 align-right">
      
                  <span  class="padding-right-5" tooltip="{{summary.actualAmount | number: '1.2-2'}}">
                   {{summary.actualAmount | number: '1.2-2'}}
                   </span>
         </td>
                <!-- <td>
                  <input
                    type="text"
                    [ngModel]="summary.amountRejected | number: '1.2-2'"
                    class="form-control align-right"
                    disabled
                  />
                </td>
                <td>
                  <input
                    type="text"
                    [ngModel]="summary.amountApproved | number: '1.2-2'"
                    class="form-control align-right"
                    disabled
                  />
                </td> -->
                <td class="wd-6 align-right">
                  <span  class="padding-right-5" tooltip="{{summary.amountRejected | number:'1.2-2'}}">
                  {{summary.amountRejected | number:'1.2-2'}}
                  </span>
               </td>
                <!-- <td>
                    <input type="text" [ngModel]="summary.amountApproved | number: '1.2-2'" class="form-control align-right" disabled />
                </td> -->
                <td class="wd-6 align-right">
                  <span  class="padding-right-5" tooltip="{{summary.amountApproved | number:'1.2-2'}}">
                  {{summary.amountApproved | number:'1.2-2'}}
                  </span>
               </td>
                <!-- <td>
                  <span tooltip="{{ summary.remark }}">
                    {{ summary.remark }}
                  </span>
                </td> -->
                <td>
                  <div class="d-flex">
                    <!-- <input
                    style="width:100px;"
                      type="text"
                      class="form-control"
                      
                      (change)="
                      onChangeDocumentRemark(
                          summary, i,
                          $event
                        )
                      "
                    
                    /> -->
                    <div
                      _ngcontent-ykc-c443=""
                      class="
                        custom_Label_badge
                        mr-2
                        ml-2
                      "
                    >
                      <b>
                        <i
                          (click)="
                            docRemarkModal(
                              template8,
                              documentDetailIndex,
                              summary?.investmentGroup3TransactionId,
                              summary, i
                            )
                          "
                          class="
                            fa fa-commenting
                            text-dark-green
                            fa-2x
                            cursor-pointer
                          "
                        >
                        </i
                      ></b>
                      <span
                        _ngcontent-ykc-c443=""
                        class="Label_badge"
                        >{{
                          summary?.bubbleRemarkCount
                        }}</span
                      >
                    </div>
                  </div>
                </td>
               <!--  <td>
                  <span tooltip="{{ summary.proofSubmissionId }}">
                    {{ summary.proofSubmissionId }}
                  </span>
                </td> -->
                <td>
                  <span tooltip="{{ summary.proofSubmissionId }}" *ngIf="summary.transactionStatus === 'Submitted' || summary.transactionStatus === 'Approved' || summary.transactionStatus === 'Re-Open' || summary.transactionStatus === 'SendBack'">
                    <i class="fa fa-clipboard font-16 text-cyan" aria-hidden="true"></i>
                    <!-- {{ summary.proofSubmissionId }} -->
                  </span>
                </td>
                <td class="wd-6">
                  <span class="badge" [ngClass]="{'badge-primary': summary.transactionStatus=='Re-Open',
                                  ' badge-success': summary.transactionStatus=='Approved',
                                  'badge-danger': summary.transactionStatus=='SendBack',
                                  'badge-info': summary.transactionStatus=='Submitted',
                                  'badge-warning': summary.transactionStatus=='Pending'}" tooltip="{{ summary.transactionStatus }}">
                    {{ summary.transactionStatus }}
                  </span>
                </td>
                <td class="align-left">
                  <i class="fa fa-eye font-16 text-blue cursor-pointer" (click)="
declarationEditUpload(
  template2,
  documentSummary?.proofSubmissionId
);
viewDocumentDetail = false
" tooltip="View"></i
>&nbsp;&nbsp;
<!-- <i
class="fa fa-download font-16 text-blue cursor-pointer"
tooltip="Download"
></i> -->
                  <!-- <div *ngFor="let doc of urlArray" hidden>
                      <iframe style="height: 100vh; width: 100%; display: block" [src]="doc.blobURI" provider="google"></iframe>
                  </div> -->
                  &nbsp;&nbsp;
                  <i class="fa fa-edit font-16 text-dark-green cursor-pointer" (click)="
  declarationEditUpload(
    template2,
    documentSummary?.proofSubmissionId
  );
  viewDocumentDetail = true
" tooltip="Edit"
*ngIf="!enableButton"></i>
              </td>
              </tr>
              <tr *ngFor="let addRowSummary of investmentGroup3TransactionDetailList;
              let i = index;
              count as c
              ">


              <td scope="row">
                <label
                  class="custom-control custom-checkbox checkbox-center"
                  *ngIf="isDisabled"
                  tooltip="Select institution for proof submission"
                >
                  <input
                    type="checkbox"
                    [ngModel]="enableSelectAll"
                    [disabled]="isDisabled"
                    (change)="
                      onSelectCheckBox($event, i, addRowSummary);
                      enableCheckboxFlag = i
                    "
                    class="custom-control-input"
                    value="option"
                  />
                  <span class="custom-control-label"></span>
                </label>
                <label
                  *ngIf="!isDisabled"
                  class="custom-control custom-checkbox checkbox-center"
                >
                  <input
                    type="checkbox"
                    [ngModel]="enableSelectAll"
                    [disabled]="isDisabled "
                    (change)="
                      onSelectCheckBox($event, i, addRowSummary);
                      enableCheckboxFlag = i

                    "
                    class="custom-control-input"
                    value="option"
                  />
                  <span class="custom-control-label"></span>
                </label>
              </td>
                <!-- <td *ngIf="previousEmployeeList?.length">
                 <select
                    name="Previous Employer Name"
                    class="form-control custom-select"
                    (change)="updatePreviousEmpId($event, i)"
                    [disabled]="isDisabled || addRowSummary.transactionStatus === 'Submitted'" >
                    <option [ngValue]="0">Select Previous Emp.</option>
                    <option
                      *ngFor="let previousEmployee of previousEmployeeList"
                      [value]="previousEmployee.value"
                      [selected]="
                        previousEmployee.value == addRowSummary.previousEmployerId">
                      {{ previousEmployee.label }}
                    </option>
                  </select>
                </td> -->
                <td>
                  <input
                    type="text"
                    [(ngModel)]="addRowSummary.institution"
                    class="form-control"
                    placeholder="Institution"
                    (change)="onInstitutionChange(addRowSummary, i)"
                    [ngClass]="{ 'is-invalid': this.requiredInstitution }"
                  />
                </td>
                <td>
                  <div class="custom_icon_badge">
                    <input
                      type="text"
                      [(ngModel)]="addRowSummary.accountNumber"
                      class="form-control" onkeypress="return /[0-9 ]/i.test(event.key)"
                      placeholder="Account No."
                      (change)="onAccountNoChange(addRowSummary, i)"
                      [ngClass]="{ 'is-invalid': this.requiredaccountNumber }"
                      />

                  </div>
                </td>
                <td>
                  <div class="custom_icon_badge">
                    <input
                      type="text"
                      [(ngModel)]="addRowSummary.declaredAmount"
                      onkeypress="return /[0-9 ]/i.test(event.key)"
                      class="form-control align-right"
                      placeholder="Declared"
                      (change)="onDeclearedAmountChange(addRowSummary, i)"
                      [ngClass]="{ 'is-invalid': this.requireddeclaredAmount }"
                    


                    />
                  </div>
                </td>
                <td>
                  <input
                    type="text"
                    [ngModel]="addRowSummary.dateOfPayment | date: 'dd-MMM-yyyy'"
                    [maxDate]="today"
                    [bsConfig]="{ dateInputFormat: 'DD-MMM-YYYY' }"
                    data-provide="datepicker"
                    data-date-autoclose="true"
                    (ngModelChange)="
                    addRowSummary.dateOfPayment = $event.toLocaleDateString();
                    onChangeDateOfPayment(addRowSummary, i)
                    "
                    class="form-control"
                    bsDatepicker
                    [ngClass]="{ 'is-invalid': this.requireddateOfPayment }"
                  />
                </td>
                <td *ngIf="previousEmployeeList?.length">
                  <select
                     name="Previous Employer Name"
                     class="form-control custom-select"
                     (change)="updatePreviousEmpId($event, i)"
                     [disabled]="isDisabled || addRowSummary.transactionStatus === 'Submitted'" >
                     <option [ngValue]="0">Select Previous Emp.</option>
                     <option
                       *ngFor="let previousEmployee of previousEmployeeList"
                       [value]="previousEmployee.value"
                       [selected]="
                         previousEmployee.value == addRowSummary.previousEmployerId">
                       {{ previousEmployee.label }}
                     </option>
                   </select>
                 </td>
                <!-- <td>
                  <input
                    type="text"
                    [(ngModel)]="addRowSummary.actualAmount"
                    onkeypress="return /[0-9 ]/i.test(event.key)"
                    class="form-control align-right"
                    maxlength="22"
                    (change)="onActualAmountChange(addRowSummary, i)"
                    
                  />
                </td> -->
                <td class="align-right">
                  <!-- <input type="text" [(ngModel)]="addRowSummary.actualAmount" onkeypress="return /[0-9 ]/i.test(event.key)" 
                  maxlength="22" class="form-control align-right" (change)="onActualAmountChange(addRowSummary, i)" disabled /> -->
               {{addRowSummary.actualAmount | number: '1.2-2'}}
                </td>

                <td class="align-right">
                  <!-- <input type="text" [ngModel]="summary.amountRejected | number: '1.2-2'"
                      class="form-control align-right" disabled /> -->
                      {{addRowSummary.amountRejected | number: '1.2-2'}}
                </td>
                <td class="align-right">
                  <!-- <input type="text" [ngModel]="summary.amountApproved | number: '1.2-2'"
                      class="form-control align-right" disabled /> -->
                      {{addRowSummary.amountApproved | number: '1.2-2'}}
                </td>
                <td>
                  <!-- <span tooltip="{{ summary.remark }}">
                      {{ summary.remark }}
                    </span> -->
                </td>
                <td>
                  <!-- <span tooltip="{{ summary.proofSubmissionId }}">
                      {{ summary.proofSubmissionId }}
                    </span> -->
                </td>
                <td class="text-orange font700">
                  <!-- <span tooltip="{{ summary.transactionStatus }}">
                      {{ summary.transactionStatus }}
                    </span> -->
                    {{addRowSummary.transactionStatus}}
                </td>
                <!-- </form> -->
              </tr>

             <!--  <tr *ngIf="!isDisabled && canEdit"> -->
               <tr>
                <!--   <td
                  *ngIf="previousEmployeeList?.length"
                  colspan="12"
                  class="align-right font700 font-16 text-light-green cursor-pointer"
                > -->
                <td
                  colspan="13"
                class="align-right font700 font-16 text-light-green cursor-pointer">
                  <i
                    class="fa fa-plus-circle font-20"
                    tooltip="Add"
                    *ngIf="!enableButton"
                    (click)="addRowInList(declarationService)"
                  ></i>
                  <span *ngIf="!enableButton"
                  tooltip="Add Row">Add</span>&nbsp;&nbsp;<i
                    class="fa fa-times font-16 text-red cursor-pointer"
                    *ngIf="showDeleteButton"
                    tooltip="Delete Row"
                    (click)="deleteRow()"
                  ></i>
                </td>
                <!-- <td
                  *ngIf="!previousEmployeeList?.length"
                  colspan="11"
                  class="align-right font700 font-16 text-light-green cursor-pointer"
                >
                  <i
                    class="fa fa-plus-circle font-20"
                    tooltip="Add"
                    (click)="addRowInList(declarationService)"
                  ></i>
                  <span tooltip="Add Row">Add</span>&nbsp;&nbsp;
                  <i
                    class="fa fa-times font-16 text-red cursor-pointer"
                    *ngIf="hideRemoveRow"
                    tooltip="Cancel"
                    (click)="deleteRow()"
                  ></i>
                </td> -->
              </tr>


              <tr>
                <!-- <td *ngIf="previousEmployeeList?.length"
                class="bg-lightgray font-18 font700 align-left"></td> -->
                <td *ngIf="previousEmployeeList?.length" class="bg-lightgray font-18 font700 align-left">Total</td>
<td *ngIf="!previousEmployeeList?.length" class="bg-lightgray font-18 font700 align-left">Total</td>
                <td *ngIf="previousEmployeeList?.length" class="bg-lightgray font-18 font700 align-left"></td>
                <td class="bg-lightgray font-18 font700 align-right"></td>
                <!-- <td class="bg-lightgray font-18 font700 align-right"></td> -->
                <!-- <td class="bg-lightgray font-18 font700 align-right"></td> -->
                <td class="bg-lightgray font-18 font700 align-right">
                  <span tooltip=" {{ grandDeclarationTotal | number: '1.2-2' }}" class="padding-right-9">
                    {{ grandDeclarationTotal | number: "1.2-2" }}
                  </span>
                </td>
                <td class="bg-lightgray font-18 font700 align-right"></td>
                <td class="bg-lightgray font-18 font700 align-right"></td>
                <!-- <td class="bg-lightgray font-18 font700 align-right"></td> -->
                <td class="bg-lightgray font-18 font700 align-right">
                  <span tooltip="{{ grandActualTotal | number: '1.2-2' }}" class="padding-right-9">
                    {{ grandActualTotal | number: "1.2-2" }}
                  </span>
                </td>
                <td class="bg-lightgray font-18 font700 align-right">
                  <span tooltip=" {{ grandRejectedTotal | number: '1.2-2' }}" class="padding-right-9">
                    {{ grandRejectedTotal | number: "1.2-2" }}
                  </span>
                </td>
                <td class="bg-lightgray font-18 font700 align-right">
                  <span tooltip="{{ grandApprovedTotal | number: '1.2-2' }}" class="padding-right-9">
                    {{ grandApprovedTotal | number: "1.2-2" }}
                  </span>
                </td>
                <td class="bg-lightgray font-18 font700"></td>
                <td class="bg-lightgray font-18 font700"></td>
                <td class="bg-lightgray font-18 font700"></td>
                <td class="bg-lightgray font-18 font700"></td>
                <!-- <td class="bg-lightgray font-18 font700"></td> -->
              </tr>

            </tbody>
          </table>
        </div>
      </div>
    </div>
    <hr />
  </div>
  <div class="row mt-30">
    <div class="col-12">
      <div class="card">
        <div class="mb-10 row">
          <div class="col-md-6">
            <h3 class="font-14 text-purple font-bold">Upload Documents</h3>
          </div>
          <div class="col-md-6">
            <span class="font-bold text-link float-right"></span>
          </div>
        </div>
        <div class="row">
          <div class="col-md-12">
            <div class="table-responsive Custom_Table">
              <table
                class="table table-striped table-hover table-bordered m-b-0"
              >
                <thead class="thead-dark">
                  <tr>
                    <th scope="col" class="font700 wd-8">Sr No.</th>
                    <th scope="col" class="font700 wd-40">Document Type</th>
                    <th scope="col" class="font700 wd-20">Attachments</th>
                    <th scope="col" class="font700 wd-16">
                      Total Selected Amount
                    </th>
                    <th scope="col" class="font700 wd-16">Receipt Amount</th>
                    <th scope="col" class="font700 wd-12">Action</th>
                  </tr>
                </thead>
                <tbody>
                  <tr>
                    <th scope="row"><span tooltip="1">1</span></th>
                    <td>
                      <span tooltip="Scheme Certificate "></span>
                      Scheme Certificate 
                    </td>
                    <td>
                      <span
                        *ngFor="let item of filesArray; let j = index"
                        class="text-orange"
                        tooltip="{{ item.name }}">
                        <i class="fa fa-paperclip" aria-hidden="true"></i>&nbsp;
                        {{ item.name }},
                      </span>
                    </td>
                    <td>
                      <span>
                        <input
                          type="text"
                          class="form-control align-right"
                          [(ngModel)]="globalSelectedAmounts"
                          [disabled]="true"
                        />
                      </span>
                    </td>
                    <td>
                      <span>
                        <input
                          type="text"
                          class="form-control align-right"
                          onkeypress="return /[0-9]/i.test(event.key)"
                          (change)="changeReceiptAmountFormat()"
                          [(ngModel)]="receiptAmount"
                          [disabled] ="isDisabled"
                        />
                      </span>
                    </td>
                    <td [disabled] ="isDisabled">
                      <i [ngClass]="{ 'disabled': isDisabled}"
                        class="fa fa-upload font-16 text-blue cursor-pointer"
                        tooltip="Upload"
                        (click)="uploadModal(template4)"
                      ></i>
                    </td>
                  </tr>
                </tbody>
              </table>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>


  <div class="row" *ngIf="isVisibleTable" >
    <div class="col-md-12">
      <div class="border-box">
        <div class="row mt-30">
          <div class="col-12">
            <div class="card">
              <div class="mb-0">
                <h3 class="font-14 text-purple font-bold">
                  Document
                </h3>
              </div>
              <div class="col-12 col-md-12 col-sm-12">
                <div
                  class="table-responsive Custom_Table"
                >
                  <p-table
                    *ngIf="documentArray"
                    #dt2
                    [value]="documentArray"
                    [paginator]="true"
                    [rows]="10"
                    [showCurrentPageReport]="true"
                    (sortFunction)="customSort($event)"
                    [customSort]="true"
                    currentPageReportTemplate="Showing {first} to {last} of {totalRecords} entries"
                    [rowsPerPageOptions]="[10, 25, 50]"
                    [globalFilterFields]="[
                      'empcode',
                      'empName',
                      'Group',
                      'Frequency',
                      'Type',
                      'proofsubmission',
                      'PSIdDetails',
                      'SubmissionDate',
                      'Status'
                    ]"
                  >
                    <ng-template pTemplate="header">
                      <tr>
                        <!-- <th style="width: 3rem">
                          <p-tableHeaderCheckbox></p-tableHeaderCheckbox>
                        </th> -->

                        <th>
                          <div
                            class="
                              p-d-flex
                              p-jc-between
                              p-ai-center
                            "
                          >
                            Date Of Submission
                            <div
                              class="Sort_Filter_Position"
                            >
                              <p-sortIcon
                                field="empcode"
                                pSortableColumn="empcode"
                              ></p-sortIcon>
                              <p-columnFilter
                                field="empcode"
                                display="menu"
                                class="p-ml-auto"
                              >
                              </p-columnFilter>
                            </div>
                          </div>
                        </th>
                        <th>
                          <div
                            class="
                              p-d-flex
                              p-jc-between
                              p-ai-center
                            "
                          >
                            Document Name
                            <div
                              class="Sort_Filter_Position"
                            >
                              <p-sortIcon
                                field="documentName"
                                pSortableColumn="documentName"
                              ></p-sortIcon>
                              <p-columnFilter
                                field="documentName"
                                display="menu"
                                class="p-ml-auto"
                              >
                              </p-columnFilter>
                            </div>
                          </div>
                        </th>
                        <th>
                          <div
                            class="
                              p-d-flex
                              p-jc-between
                              p-ai-center
                            "
                          >
                            Document Type
                            <div
                              class="Sort_Filter_Position"
                            >
                              <p-sortIcon
                                field="documentType"
                                pSortableColumn="documentType"
                              ></p-sortIcon>
                              <p-columnFilter
                                field="documentType"
                                display="menu"
                                class="p-ml-auto"
                              >
                              </p-columnFilter>
                            </div>
                          </div>
                        </th>
                        <th>
                          <div
                            class="
                              p-d-flex
                              p-jc-between
                              p-ai-center
                            "
                          >
                            Password
                            <div
                              class="Sort_Filter_Position"
                            >
                              <p-sortIcon
                                field="empcode"
                                pSortableColumn="empcode"
                              ></p-sortIcon>
                              <p-columnFilter
                                field="empcode"
                                display="menu"
                                class="p-ml-auto"
                              >
                              </p-columnFilter>
                            </div>
                          </div>
                        </th>
                        <th>
                          <div
                            class="
                              p-d-flex
                              p-jc-between
                              p-ai-center
                            "
                          >
                            Remark
                            <div
                              class="Sort_Filter_Position"
                            >
                              <p-sortIcon
                                field="empcode"
                                pSortableColumn="empcode"
                              ></p-sortIcon>
                              <p-columnFilter
                                field="empcode"
                                display="menu"
                                class="p-ml-auto"
                              >
                              </p-columnFilter>
                            </div>
                          </div>
                        </th>
                        <th>
                          <div
                            class="
                              p-d-flex
                              p-jc-between
                              p-ai-center
                            "
                          >
                            Status
                            <div
                              class="Sort_Filter_Position"
                            >
                              <p-sortIcon
                                field="empcode"
                                pSortableColumn="empcode"
                              ></p-sortIcon>
                              <p-columnFilter
                                field="empcode"
                                display="menu"
                                class="p-ml-auto"
                              >
                              </p-columnFilter>
                            </div>
                          </div>
                        </th>
                        <th>
                          <div
                            class="
                              p-d-flex
                              p-jc-between
                              p-ai-center
                            "
                          >
                            Approver Name
                            <div
                              class="Sort_Filter_Position"
                            >
                              <p-sortIcon
                                field="empcode"
                                pSortableColumn="empcode"
                              ></p-sortIcon>
                              <p-columnFilter
                                field="empcode"
                                display="menu"
                                class="p-ml-auto"
                              >
                              </p-columnFilter>
                            </div>
                          </div>
                        </th>
                        <th>
                          <div
                            class="
                              p-d-flex
                              p-jc-between
                              p-ai-center
                            "
                          >
                            Time
                            <div
                              class="Sort_Filter_Position"
                            >
                              <p-sortIcon
                                field="empcode"
                                pSortableColumn="empcode"
                              ></p-sortIcon>
                              <p-columnFilter
                                field="empcode"
                                display="menu"
                                class="p-ml-auto"
                              >
                              </p-columnFilter>
                            </div>
                          </div>
                        </th>
                      </tr>
                    </ng-template>
                    <ng-template
                      pTemplate="body"
                      let-document
                      let-documentIndex = "rowIndex"
                    >
                      <tr class="p-selectable-row">
                        <!-- <td>
                          <p-tableCheckbox
                            [value]="customer"
                          >
                          </p-tableCheckbox>
                        </td> -->
                        <td>
                          {{ document.dateofsubmission | date:'dd-MMM-yyyy' }}
                        </td>
                        <td>
                          <a
                            (click)=" docViewer(template3,documentIndex)"

                          >
                            <i
                              class="
                                fa fa-paperclip
                                text-orange
                              "
                            ></i>
                            &nbsp;
                            {{ document.documentName }}
                          </a>
                        </td>
                        <td>{{ document.documentType }}</td>
                        <td>{{ document.documentPassword }}</td>
                        <td>
                          <!-- <div class="custom_Label_badge">
                            <button
                              class="
                                btn btn-bg-green
                                text-white
                              "
                              (click)="
                                docViewer(template3)
                              "
                            >
                              PSEmp
                            </button>
                            <span class="Label_badge"
                              >2</span
                            >
                          </div> -->
                          {{document.documentRemark}}
                        </td>
                        <td>{{ document.status }}</td>
                        <td>{{ document.lastModifiedBy }}</td>
                        <td>{{ document.lastModifiedTime | date:'dd-MMM-yyyy HH:mm'  }}</td>
                      </tr>
                    </ng-template>
                  </p-table>
                </div>
              </div>
              <!-- <div class="row mt-25">
                <div class="col-md-12">
                  <div class="float-right">
                    <button
                      type="submit"
                      class="
                        custom_button custom_btn
                        btn-bg-green
                        btn-labeled
                        btn-labeled-left
                        ripple
                        mr-2
                      "
                      tooltip="Approve"
                    >
                      <b>
                        <i class="fa fa-floppy-o"></i
                      ></b>
                      Approve
                    </button>

                    <button
                      type="button"
                      tooltip="Send Back"
                      class="
                        custom_button custom_btn
                        bg-btn-red
                        btn-labeled btn-labeled-left
                        mr-2
                      "
                    >
                      <b><i class="fa fa-times"></i></b>
                      Discard
                    </button>
                  </div>
                </div>
              </div> -->
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>

  <div class="row mt-15">
    <div class="col-12">
      <div class="float-right mb-15">
        <button *ngIf="!enableButton"
          type="button"
          (click)="
            receiptAmount < globalSelectedAmount
              ? sweetalertError(
                  'Receipt Amount should be equal or greater than Actual Amount of Selected lines'
                )
            :upload()
          "
          class="custom_button custom_btn btn-bg-green btn-labeled btn-labeled-left ripple"
          tooltip="Save" [disabled]="this.requiredField"
        >
          <b> <i class="fa fa-floppy-o"></i></b> Save
        </button>
      </div>
    </div>
  </div>
  <div class="row mt-30">
    <div class="col-12">
      <div class="card">
        <div class="mb-0">
          <h3 class="font-14 text-purple font-bold">Summary - PS. ID.</h3>
      </div>
        <div class="">
          <div class="table-responsive Custom_Table">
            <table class="table table-striped table-hover table-bordered m-b-0">
              <thead class="thead-dark">
                <tr>
                  <th scope="col" class="font700 wd-15">PS. ID.</th>
                  <th scope="col" class="font700 wd-15">Date of Submission</th>
                  <th scope="col" class="font700 wd-20">Institution</th>
                 
                  <th scope="col" class="font700 wd-15">Account No.</th>
                  <!-- <th scope="col" class="font700 wd-10">Receipt Amount</th>
                  <th scope="col" class="font700 wd-15">Document Name</th> -->
                  <th scope="col" class="font700 wd-10">Actual Amount</th>
                  <th scope="col" class="font700 wd-10">Rejected Amount</th>
                <th scope="col" class="font700 wd-10">Approved Amount</th>
                
                <th scope="col" class="font700 wd-15"> No. of Document</th>
                <th scope="col" class="font700 wd-15">PS. ID. Status</th>
                  <th scope="col" class="font700 wd-10">Action</th>
                </tr>
              </thead>
              <tbody>
                <tr
                  *ngFor="
                    let documentSummary of documentDetailList;
                    let documentIndex = index
                  "
                >
                  <td class="align-left">
                    <span tooltip="{{ documentSummary.proofSubmissionId }}">
                      {{ documentSummary.proofSubmissionId }}
                    </span>
                  </td>
                  <td class="align-left">
                    <span
                      tooltip="{{
                        documentSummary.dateOfSubmission | date: 'dd-MMM-yyyy'
                      }}"
                    >
                      {{
                        documentSummary.dateOfSubmission | date: "dd-MMM-yyyy"
                      }}</span
                    >
                  </td>
                  <td class="align-left">
                    {{ documentSummary.institutionName }}
                  </td>
                  <!-- <td>
                    <span
                      tooltip="{{
                        documentSummary.dateOfSubmission | date: 'dd-MMM-yyyy'
                      }}"
                    >
                      {{
                        documentSummary.dateOfSubmission | date: "dd-MMM-yyyy"
                      }}</span
                    >
                  </td> -->
                  <td class="align-left">
                    {{ documentSummary.policyNo }}
                  </td>
                  <!-- <td>
                    <span
                      tooltip="{{
                        documentSummary.receiptAmount | number: '1.2-2'
                      }}"
                    >
                      {{ documentSummary.receiptAmount | number: "1.2-2" }}
                    </span>
                  </td> -->
                  <td class="align-right">
                    <span tooltip="{{
                      documentSummary.actualAmount | number: '1.2-2'
                    }}">
                      {{ documentSummary.actualAmount | number: "1.2-2" }}
                      </span>
                    <!-- <span
                      tooltip="{{ documentSummary.actualAmount}}">{{documentSummary.actualAmount}}
                            
                    </span> -->
                    <!-- <span tooltip="{{
                      documentSummary.globalSelectedAmount | number: '1.2-2'
                    }}">
                      {{ documentSummary.globalSelectedAmount | number: "1.2-2" }}
                    </span> -->
                </td>
                <td class="align-right">
                  <!-- <span tooltip="{{
                    documentSummary.receiptAmount | number: '1.2-2'
                  }}">
                    {{ documentSummary.receiptAmount | number: "1.2-2" }}
                  </span> -->
                  <span tooltip="{{documentSummary.rejectedAmount | number:'1.2-2'}}">
                    {{documentSummary.rejectedAmount | number:'1.2-2'}}
                    </span>
              </td>
              <td class="align-right">
                <span tooltip="{{
                  documentSummary.approvedAmount | number: '1.2-2'
                }}">
                  {{ documentSummary.approvedAmount | number: "1.2-2" }}
                </span>
            </td>
            <td>
              <div class="custom_Label_badge"  style="top: -8px;">
                <a  class="changeColor"
                      (click)="docViewer(template3, documentSummary.documentDetailList)">
                      <span class="Label_badge">{{
                        documentSummary.documentDetailList.length
                        }}</span>
                        

                      </a>
                <!-- <button
                class="btn btn-bg-green text-white"
                
                  (click)="docViewer(template3, documentSummary.documentDetailList)"
                >
                  Documents
                </button> -->
                <!-- <span class="Label_badge">{{
                  documentSummary.documentDetailList.length
                }}</span> -->
              </div>
            </td>
                <!--   <td>
                    <div class="custom_Label_badge">
                      <button
                        class="btn bg-color-lightgray text-000"
                        (click)="
                          UploadedDocumentModal1(template1, documentIndex)
                        "
                      >
                        Documents
                      </button>
                      <span class="Label_badge">{{
                        documentSummary.documentDetailList.length
                      }}</span>
                    </div>
                  </td> -->
                 <!--  <td>
                    <div class="custom_Label_badge">
                      <button
                        class="btn bg-color-lightgray text-000"
                        (click)="docViewer(template3, documentSummary.documentDetailList)"

                      >
                        Documents
                      </button>
                      <span class="Label_badge">{{
                        documentSummary.documentDetailList.length
                      }}</span>
                    </div>
                  </td>
                  <td>
                    <i
                    class="fa fa-eye font-16 text-blue cursor-pointer"
                    (click)="
                      declarationEditUpload(
                        template2,
                        documentSummary.proofSubmissionId
                      );
                      viewDocumentDetail = false
                    "
                    tooltip="View"
                    ></i
                    >&nbsp;&nbsp;
                    <div *ngFor="let doc of urlArray" hidden>
                      <iframe
                        style="height: 100vh; width: 100%; display: block"
                        [src]="doc.blobURI"
                        provider="google"
                      ></iframe>
                    </div>
                    &nbsp;&nbsp;
                    <i
                      class="fa fa-edit font-16 text-dark-green cursor-pointer"
                      (click)="
                        declarationEditUpload(
                          template2,
                          documentSummary.proofSubmissionId
                        );
                        viewDocumentDetail = true
                      "
                      tooltip="Edit"
                    ></i>
                  </td> -->

                  <!-- <td>
                    <div class="custom_Label_badge">
                      <button class="btn btn-bg-green text-white"
                        (click)="docViewer(template3, documentSummary.documentDetailList)">
                        Documents
                      </button>
                      <span class="Label_badge">{{
                        documentSummary.documentDetailList.length
                        }}</span>
                    </div>
                  </td> -->
                  <!-- <td>
                    <div class="custom_Label_badge"  style="top: -8px;">
                      <a  class="changeColor"
                            (click)="docViewer(template3, documentSummary.documentDetailList)">
                            <span class="Label_badge">{{
                              documentSummary.documentDetailList.length
                              }}</span>
                              
    
                            </a> -->
                      <!-- <button
                      class="btn btn-bg-green text-white"
                      
                        (click)="docViewer(template3, documentSummary.documentDetailList)"
                      >
                        Documents
                      </button> -->
                      <!-- <span class="Label_badge">{{
                        documentSummary.documentDetailList.length
                      }}</span> -->
                    <!-- </div>
                  </td> -->
                  <td class="align-right">
                    <span class="badge" [ngClass]="{'badge-primary': documentSummary.transactionStatus=='Re-Open',
                    ' badge-success': documentSummary.transactionStatus=='Approved',
                    'badge-danger': documentSummary.transactionStatus=='SendBack',
                    'badge-info': documentSummary.transactionStatus=='Submitted',
                    'badge-warning': documentSummary.transactionStatus=='Pending'}" tooltip="{{documentSummary.transactionStatus}}">
                      {{documentSummary.transactionStatus}}
                      </span>
                </td>

                  <td>
                    <i class="fa fa-eye font-16 text-blue cursor-pointer" (click)="
                    declarationEditUpload(
                        template2,
                        documentSummary.proofSubmissionId
                      );
                      viewDocumentDetail = false
                    " tooltip="view"></i>



                    &nbsp;&nbsp;
                    <i class="fa fa-edit font-16 text-dark-green cursor-pointer" (click)="
                    declarationEditUpload(
                          template2,
                          documentSummary.proofSubmissionId
                        );
                        viewDocumentDetail = true
                      " tooltip="Edit"
                      *ngIf="!enableButton"></i>
                  </td>
                </tr>
              </tbody>
            </table>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>

<ng-template #template1>
  <div class="modal-header">
    <h5 class="modal-title" id="UploadedDocumentModalLabel">
      Uploaded Document Details
    </h5>
    <button
      type="button"
      (click)="modalRef.hide()"
      class="close"
      data-dismiss="modal"
      aria-label="Close"
    >
      <span aria-hidden="true"></span>
    </button>
  </div>
  <div class="modal-body">
    <div class="card">
      <div class="card-body pb-0 mt-0 mb-0">
        <div
          class="row clearfix"
          *ngFor="let proofSubmissionFile of proofSubmissionFileList"
        >
          <div class="col-md-11">
            <div class="labelbox" tooltip="Document 1">
              <i class="fa fa-paperclip text-orange"></i> &nbsp;
              {{ proofSubmissionFile.fileName }}
            </div>
          </div>
          <div class="col-md-1">
            <i
              class="fa fa-eye font-16 text-blue font-900 mt-2"
              tooltip="View Document"
            ></i>
          </div>
        </div>
      </div>
    </div>
  </div>
  <div class="modal-footer">
    <button type="button" class="btn btn-secondary" (click)="modalRef.hide()">
      Ok
    </button>
  </div>
</ng-template>

<!-- <ng-template #template2>
  <div class="modal-header">
    <h5 class="modal-title" id="jasdjgh" *ngIf="viewDocumentDetail">
      Edit Document Details
    </h5>
    <h5 class="modal-title" id="jasdjgh" *ngIf="!viewDocumentDetail">
      View Document Details
    </h5>
    <button
      type="button"
      (click)="modalRef.hide()"
      class="close"
      data-dismiss="modal"
      aria-label="Close"
    >
      <span aria-hidden="true"></span>
    </button>
  </div>
  <div class="card-body Box-Spacing">
    <div>
      <div class="row mt-15">
        <div class="col-12">
          <div class="table-responsive Custom_Table">
            <table class="table table-striped table-hover table-bordered m-b-0">
              <thead class="thead-dark" *ngIf="previousEmployeeList?.length">
                <tr>

                  <th rowspan="2" class="wd-10 font700">
                    Previous Employer Name
                  </th>
                  <th rowspan="2" class="wd-10 font700">
                    <span tooltip="Electronic Clearing Service">Institution</span>
                  </th>
                  <th rowspan="2" class="wd-11 font700">Account No</th>
                  <th rowspan="2" class="wd-9 font700">Declared</th>
                  <th rowspan="2" class="wd-11 font700">Date of Payment</th>
                  <th rowspan="2" class="wd-9 font700">Actual</th>
                  <th colspan="2" class="wd-17 font700">Receipt Amount</th>
                  <th rowspan="2" class="wd-7 font700">Remark</th>
                 <th rowspan="2" class="wd-7">PS ID</th>
                  <th rowspan="2" class="wd-10 font700">Transaction Status</th>
                </tr>
                <tr>
                  <th>Rejected</th>
                  <th>Approved</th>
                </tr>
              </thead>
              <thead class="thead-dark" *ngIf="!previousEmployeeList.length">
                <tr>
                  <th rowspan="2" class="wd-15 font700">
                    <span>Institution</span>
                  </th>
                  <th rowspan="2" class="wd-11 font700">Account No</th>
                  <th rowspan="2" class="wd-9 font700">Declared</th>
                  <th rowspan="2" class="wd-11 font700">Date of Payment</th>
                  <th rowspan="2" class="wd-9 font700">Actual</th>
                  <th colspan="2" class="wd-17 font700">Receipt Amount</th>
                  <th rowspan="2" class="wd-10 font700">Remark</th>
                  <th rowspan="2" class="wd-7">PS ID</th>
                  <th rowspan="2" class="wd-10 font700">Transaction Status</th>
                </tr>
                <tr>
                  <th>Rejected</th>
                  <th>Approved</th>
                </tr>
              </thead>
              <tbody>
                <tr
                  *ngFor="
                    let summary of editTransactionUpload;
                    let i = index;
                    count as c
                  "
                >


                  <td *ngIf="previousEmployeeList?.length">
                    <select
                      name="Previous Employer Name"
                      class="form-control custom-select"
                      (change)="updatePreviousEmpId($event, i)"
                      [disabled]="
                        isDisabled || summary.transactionStatus === 'Submitted'
                      "
                    >
                      <option [ngValue]="0">Select Previous Emp.</option>
                      <option
                        *ngFor="let previousEmployee of previousEmployeeList"
                        [value]="previousEmployee.value"
                        [selected]="
                          previousEmployee.value == summary.previousEmployerId
                        "
                      >
                        {{ previousEmployee.label }}
                      </option>
                    </select>
                  </td>
                  <td>
                    <input
                      type="text"
                      class="form-control"
                      [ngModel]="summary.institution"

                    />
                  </td>
                  <td>
                    <div class="custom_icon_badge">
                      <input
                        type="text"
                        class="form-control"
                        onkeypress="return /[0-9 ]/i.test(event.key)"
                        [ngModel]="summary.accountNumber"

                      />
                    </div>
                  </td>
                  <td>
                    <div class="custom_icon_badge">
                      <input
                        type="text"
                        id="declaredAmount{{
                          summary.investmentGroup3TransactionId
                        }}"
                        onkeypress="return /[0-9 ]/i.test(event.key)"
                        name="declaredAmount{{
                          summary.investmentGroup3TransactionId
                        }}"
                        [(ngModel)]="summary.declaredAmount"
                        (change)="setActualAmoutInEditModal($event)"
                        class="form-control align-right"
                      />
                     
                    </div>
                  </td>
                  <td>
                    <input
                      type="text"
                      [ngModel]="summary.dateOfPayment | date: 'dd-MMM-yyyy'"
                      [maxDate]="today"
                      [bsConfig]="{ dateInputFormat: 'DD-MMM-YYYY' }"
                      data-provide="datepicker"
                      data-date-autoclose="true"
                      (ngModelChange)="
                        summary.dateOfPayment = $event.toLocaleDateString();
                        onChangeDateOfPayment(summary, i)
                      "
                      [disabled]="
                        isDisabled || summary.transactionStatus === 'Submitted'
                      "
                      class="form-control"
                      bsDatepicker
                    />
                  </td>
                  <td>
                    <input
                      type="text"
                      id="actualAmount{{ summary.investmentGroup3TransactionId }}"
                      onkeypress="return /[0-9 ]/i.test(event.key)"
                      name="actualAmount{{
                        summary.investmentGroup3TransactionId
                      }}"
                      [(ngModel)]="summary.actualAmount"

                      class="form-control align-right"
                    />
                 
                  </td>
                  <td>
                    <input
                      type="text"
                      [ngModel]="summary.amountRejected | number: '1.2-2'"
                      class="form-control align-right"
                      disabled
                    />
                  </td>
                  <td>
                    <input
                      type="text"
                      [ngModel]="summary.amountApproved | number: '1.2-2'"
                      class="form-control align-right"
                      disabled
                    />
                  </td>
                  <td>
                    <span tooltip="{{ summary.remark }}">
                      {{ summary.remark }}
                    </span>
                  </td>
                  <td>
                    <span tooltip="{{ summary.proofSubmissionId }}">
                      {{ summary.proofSubmissionId }}
                    </span>
                  </td>
                  <td class="text-orange font700">
                    <span tooltip="{{ summary.transactionStatus }}">
                      {{ summary.transactionStatus }}
                    </span>
                  </td>
                </tr>

                <tr>
                  <td class="bg-lightgray font-18 font700 align-left">Total</td>
                  <td class="bg-lightgray font-18 font700 align-right"></td>
                  <td class="bg-lightgray font-18 font700 align-right">
                    <span tooltip=" {{ grandDeclarationTotalEditModal | number: '1.2-2' }}" class="padding-right-12">
                      {{ grandDeclarationTotalEditModal | number: "1.2-2" }}
                    </span>
                  </td>
                  <td class="bg-lightgray font-18 font700 align-right"></td> 
                  <td class="bg-lightgray font-18 font700 align-right">
                    <span tooltip="{{ grandActualTotalEditModal | number: '1.2-2' }}" class="padding-right-12">
                      {{ grandActualTotalEditModal | number: "1.2-2" }}
                    </span>
                  </td>
                  <td class="bg-lightgray font-18 font700 align-right">
                    <span tooltip=" {{ grandRejectedTotalEditModal | number: '1.2-2' }}" class="padding-right-12">
                      {{ grandRejectedTotalEditModal | number: "1.2-2" }}
                    </span>
                  </td>
                  <td class="bg-lightgray font-18 font700 align-right">
                    <span tooltip="{{ grandApprovedTotalEditModal | number: '1.2-2' }}" class="padding-right-12">
                      {{ grandApprovedTotalEditModal | number: "1.2-2" }}
                    </span>
                  </td>

                  <td class="bg-lightgray font-18 font700"></td>
                  <td class="bg-lightgray font-18 font700"></td>
                  <td class="bg-lightgray font-18 font700"></td>
                </tr>
              </tbody>
            </table>
          </div>
        </div>
      </div>
      <hr />
    </div>

    <hr />
    <div class="row" *ngIf="viewDocumentDetail">
      <div class="col-12">
        <h3 class="font-14 text-purple font-bold" id="UploadModalLabel">
          Upload Documents
        </h3>
      </div>
    </div>
    <div class="row clearfix mt-10" *ngIf="viewDocumentDetail">
      <div class="col-md-12">
        <div class="row clearfix">
          <div class="col-md-3">
            <div class="fileuploadbox bg-color-lightgray">
              <label class="filelabel">
                <i class="fa fa-upload"> </i>
                <span class="title"> Choose file </span>
                <input
                  class="FileUpload1"
                  class="dropify"
                  (change)="onUploadInEditCase($event)"
                  accept=".jpg , .jpeg, .pdf , .png"
                  id="FileInput"
                  type="file"
                  multiple
                />
              </label>
            </div>

            <div *ngIf="editfilesArray.length > 0" class="fileuploadbox">
              Selected Files
              <label
                *ngFor="let item of editfilesArray; let index = index"
                class="filelabeldisplay"
              >
                <div class="text-ellipsis">
                  <i class="fa fa-paperclip"> </i>
                  <span class="title">
                    {{ item.name }}
                  </span>
                </div>
                <div>
                  <i
                    class="fa fa-times text-red font-18"
                    (click)="removeSelectedTransactionDocumentInEditCase(index)"
                  ></i>
                </div>
              </label>
            </div>
          </div>
          <div class="col-md-12 mt-6">
            <label class="form-label">Remark</label>
          </div>
          <div class="col-md-6">
            <textarea
              class="form-control"
              [(ngModel)]="documentRemark"
              rows="2"
            ></textarea>
          </div>
        </div>
      </div>
    </div>

    <hr class="mt-20" />
    <div class="row mt-20">
      <div class="col-12">
        <h3 class="font-14 text-purple font-bold" id="UploadModalLabel">
          Uploaded Documents
        </h3>
      </div>
    </div>
    <div class="row">
      <div class="col-md-12">
        <div class="row clearfix mt-10">
          <div class="col-md-12" *ngFor="let doc of urlArray">
            <div class="labelbox" placement="left" tooltip="{{ doc.fileName }}">
              <i class="fa fa-paperclip text-orange"></i> &nbsp;
              {{ doc.fileName }}
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
  <div class="modal-footer">
    <button
      type="button"
      tooltip="View Document"
      (click)="modalRef.hide(); docViewer(template3)"
      class="custom_button custom_btn btn-bg-green btn-labeled btn-labeled-left"
    >
      <b><i class="fa fa-eye"></i></b> View
    </button>
    &nbsp;&nbsp;
    <button
      *ngIf="viewDocumentDetail"
      type="button"
      tooltip="View Document"
      (click)="modalRef.hide(); uploadUpdateTransaction()"
      class="custom_button custom_btn btn-bg-green btn-labeled btn-labeled-left"
    >
      <b><i class="fa fa-save"></i></b> Save
    </button>
  </div>
</ng-template> -->

<ng-template #template2>
  <div class="modal-header">
    <!-- <h5 class="modal-title" id="jasdjgh" *ngIf="viewDocumentDetail">
      
      Edit Document Details
    </h5>
    <h5 class="modal-title" id="jasdjgh" *ngIf="!viewDocumentDetail">
      View Document Details
    </h5> -->
    <h6 class="modal-title" style="margin: auto;"><b>PS.ID. : </b>
      <label>
        {{ editProofSubmissionId }}</label>
    </h6>
    <h6 class="modal-title" style="margin: auto;"><b>Creation Date : </b>
      <label>
        {{ createDateTime | date:'dd-MMM-yyyy' }}</label>
    </h6>
    <h6 class="modal-title" style="margin: auto;"><b>Last Modified Date & Time : </b>
      <label>
        {{ lastModifiedDateTime | date: 'dd-MMM-yyyy HH:mm' }}</label>
    </h6>
    <h6 class="modal-title" style="margin: auto;" ><b>Status : </b>
      <label>
        <span class="badge" [ngClass]="{'badge-primary': transactionStatus=='Re-Open',
        ' badge-success': transactionStatus=='Approved',
        'badge-danger': transactionStatus=='SendBack',
        'badge-info': transactionStatus=='Submitted',
        'badge-warning': transactionStatus=='Pending'}" tooltip="{{transactionStatus}}"> {{ transactionStatus }}</span></label>
    </h6>
    <button
      type="button"
      (click)="modalRef1.hide()"
      class="close"
      data-dismiss="modal"
      aria-label="Close"
    >
      <span aria-hidden="true"></span>
    </button>
  </div>
  <div class="card-body Box-Spacing">
    <div *ngFor="
    let summary of editTransactionUpload;
    let i = index;
    count as c
  ">
      <div class="row mt-15">
        <div class="col-12">
          <div class="table-responsive Custom_Table">
            <table class="table table-striped table-hover table-bordered m-b-0">
              <thead class="thead-dark" *ngIf="previousEmployeeList?.length">
                <tr>
                  <!-- <th rowspan="2" class="wd-4">
                    <label
                      class="custom-control custom-checkbox checkbox-center"
                      tooltip="Select All"
                    >
                      <input
                        type="checkbox"
                        class="custom-control-input"
                        [ngModel]="isCheckAll"
                        [disabled]="isDisabled"
                        name="select"                     
                        (change)="checkUncheckAll()"
                      />
                      <span class="custom-control-label"></span>
                    </label>
                  </th> -->

                  <!-- <th rowspan="2" class="wd-10 font700">
                    <span tooltip="Previous Employer Name">Previous Employer Name</span>
                  </th>
                  <th rowspan="2" class="wd-10 font700">
                    <span tooltip="Institution">Institution</span>
                  </th>
                  <th rowspan="2" class="wd-11 font700">
                    <span tooltip="Account No">Account No</span>
                    </th>
                  <th rowspan="2" class="wd-9 font700">
                    <span tooltip="Declared">Declared</span>
                    </th>
                  <th rowspan="2" class="wd-11 font700">
                    <span tooltip="Date of Payment">Date of Payment</span>
                    </th>
                  <th rowspan="2" class="wd-9 font700">
                    <span tooltip="Actual">Actual</span>
                    </th>
                  <th colspan="2" class="wd-17 font700">
                    <span tooltip="Receipt Amount">Receipt Amount</span>
                    </th>
                  <th rowspan="2" class="wd-7 font700">
                    <span tooltip="Remark">Remark</span>
                    </th>
                  <th rowspan="2" class="wd-8">
                    <span tooltip="PS ID">PS ID</span>
                    </th>
               
                  <th rowspan="2" class="wd-10 font700">
                    <span tooltip="Status">Status</span>
                    </th> -->
                    <th rowspan="2" class="wd-10 font700">
                      <span tooltip="Electronic Clearing Service">Institution</span>
                  </th>
                  <th rowspan="2" class="wd-11 font700">Account No</th>
                  <th rowspan="2" class="wd-9 font700">Declared Amount</th>
                  <th rowspan="2" class="wd-11 font700">Date of Payment</th>
                  <th rowspan="2" class="wd-14 font700">
                    Previous Employer Name
                </th>
                  <th rowspan="2" class="wd-9 font700">Actual Amount</th>
                  <th colspan="2" class="wd-17 font700">Approval Amount</th>
                  <th rowspan="2" class="wd-7 font700">Remark</th>
                  <th rowspan="2" class="wd-4">PS. ID.</th>
                  <!-- <th rowspan="2" class="wd-10 font700">Transaction Status</th> -->
                  <th rowspan="2" class="wd-10 font700">Status</th>
                </tr>
                <tr>
                  <th>Rejected</th>
                  <th>Approved</th>
                </tr>
              </thead>
              <thead class="thead-dark" *ngIf="!previousEmployeeList.length">
                <tr>
                  <!-- <th rowspan="2" class="wd-15 font700">
                    <span>Institution</span>
                  </th>
                  <th rowspan="2" class="wd-11 font700">Account No</th>
                  <th rowspan="2" class="wd-9 font700">Declared</th>
                  <th rowspan="2" class="wd-11 font700">Date of Payment</th>
                  <th rowspan="2" class="wd-9 font700">Actual</th>
                  <th colspan="2" class="wd-17 font700">Receipt Amount</th>
                  <th rowspan="2" class="wd-10 font700">Remark</th>
                  <th rowspan="2" class="wd-10">PS ID</th> -->
                  <!-- <th rowspan="2" class="wd-10 font700">Transaction Status</th> -->
                  <!-- <th rowspan="2" class="wd-10 font700">Status</th> -->
                  <th rowspan="2" class="wd-10 font700">
                    <span tooltip="Electronic Clearing Service">Institution</span>
                </th>
                <th rowspan="2" class="wd-11 font700">Account No</th>
                <th rowspan="2" class="wd-9 font700">Declared Amount</th>
                <th rowspan="2" class="wd-11 font700">Date of Payment</th>
                <!-- <th rowspan="2" class="wd-14 font700">
                  Previous Employer Name
              </th> -->
                <th rowspan="2" class="wd-9 font700">Actual Amount</th>
                <th colspan="2" class="wd-17 font700">Approval Amount</th>
                <th rowspan="2" class="wd-7 font700">Remark</th>
                <th rowspan="2" class="wd-4">PS. ID.</th>
                <!-- <th rowspan="2" class="wd-10 font700">Transaction Status</th> -->
                <th rowspan="2" class="wd-10 font700">Status</th>
                </tr>
                <tr>
                  <th>Rejected</th>
                  <th>Approved</th>
                </tr>
              </thead>
              <tbody>
                <tr
                  *ngFor="
                    let summary of editTransactionUpload;
                    let i = index;
                    count as c
                  "
                >

              <!--   <td scope="row">
                  <label
                    class="custom-control custom-checkbox checkbox-center"
                    *ngIf="isDisabled"
                    tooltip="Select institution for proof submission"
                  >
                    <input
                      type="checkbox"
                      [ngModel]="enableSelectAll"
                      [disabled]="isDisabled || summary.proofSubmissionId"
                      (change)="
                        onSelectCheckBox(summary, $event, i);
                        enableCheckboxFlag = i
                      "
                      class="custom-control-input"
                    
                    />
                    <span class="custom-control-label"></span>
                  </label>
                  <label
                    *ngIf="!isDisabled"
                    class="custom-control custom-checkbox checkbox-center"
                  >
                    <input
                      type="checkbox"
                      [ngModel]="enableSelectAll"
                      [disabled]="isDisabled || summary.proofSubmissionId"
                      (change)="
                        onSelectCheckBox(summary, $event, i);
                        enableCheckboxFlag = i
                      "
                      class="custom-control-input"
                    
                    />
                    <span class="custom-control-label"></span>
                  </label>
                </td> -->
                  <!-- <td *ngIf="previousEmployeeList?.length">
                    <select
                      name="Previous Employer Name"
                      class="form-control custom-select"
                      (change)="updatePreviousEmpId($event, i)"
                      [disabled]="
                        isDisabled || summary.transactionStatus === 'Submitted'
                      "
                    >
                      <option [ngValue]="0">Select Previous Emp.</option>
                      <option
                        *ngFor="let previousEmployee of previousEmployeeList"
                        [value]="previousEmployee.value"
                        [selected]="
                          previousEmployee.value == summary.previousEmployerId
                        "
                      >
                        {{ previousEmployee.label }}
                      </option>
                    </select>
                  </td> -->
                  <td>
                    <input
                      type="text"
                      class="form-control"
                      [ngModel]="summary.institution"
                      [disabled]="summary.institution"
                      [disabled]=" isDisabled || summary.transactionStatus === 'Submitted'" 

                    />
                    <!-- [disabled]="summary.institution" -->
                  </td>
                  <td>
                    <div class="custom_icon_badge">
                      <input
                        type="text"
                        class="form-control"
                        onkeypress="return /[0-9 ]/i.test(event.key)"
                        [ngModel]="summary.accountNumber"
                        [disabled]=" isDisabled || summary.transactionStatus === 'Submitted'"

                      />
                      <!-- [disabled]="summary.accountNumber" -->
                    </div>
                  </td>
                  <td>
                    <div class="custom_icon_badge">
                      <input
                        type="text"
                        id="declaredAmount{{
                          summary.investmentGroup3TransactionId
                        }}"
                        onkeypress="return /[0-9 ]/i.test(event.key)"
                        name="declaredAmount{{
                          summary.investmentGroup3TransactionId
                        }}"
                        [(ngModel)]="summary.declaredAmount"
                        (change)="setActualAmoutInEditModal($event)"
                        class="form-control align-right"
                        [disabled]="summary.transactionStatus === 'Approved' || !viewDocumentDetail"
                      />
                     
                    </div>
                  </td>
                  <td>
                    <input
                    type="text"
                    [ngModel]="summary.dateOfPayment | date: 'dd-MMM-yyyy'"
                    [disabled]="(summary.transactionStatus === 'Approved') || (!viewDocumentDetail)"
                    
                    [maxDate]="today"
                    [bsConfig]="{ dateInputFormat: 'DD-MMM-YYYY' }"
                    data-provide="datepicker"
                    data-date-autoclose="true"
                    (ngModelChange)="
                      summary.dateOfPayment = $event.toLocaleDateString();
                      onChangeDateOfPayment(summary, i)
                    "
                   
                    class="form-control"
                    bsDatepicker
                  />
                  </td>
                  <td *ngIf="previousEmployeeList?.length">
                    <select
                      name="Previous Employer Name"
                      class="form-control custom-select"
                      (change)="updatePreviousEmpId($event, i)"
                      [disabled]="summary.transactionStatus === 'Submitted' || summary.transactionStatus === 'Approved' || !viewDocumentDetail"
                    >
                      <option [ngValue]="0">Select Previous Emp.</option>
                      <option
                        *ngFor="let previousEmployee of previousEmployeeList"
                        [value]="previousEmployee.value"
                        [selected]="
                          previousEmployee.value == summary.previousEmployerId
                        "
                      >
                        {{ previousEmployee.label }}
                      </option>
                    </select>
                  </td>
                  <!-- <td>
                    <input
                      type="text"
                      id="actualAmount{{ summary.investmentGroup3TransactionId }}"
                      onkeypress="return /[0-9 ]/i.test(event.key)"
                      name="actualAmount{{
                        summary.investmentGroup3TransactionId
                      }}"
                      [disabled]="!summary.additionalPayment=='Approved' || !viewDocumentDetail"
                      [(ngModel)]="summary.actualAmount"

                      class="form-control align-right"
                    
                    />
                 
                  </td> -->
                  <!-- <td>
                    <input
                      type="text"
                      [ngModel]="summary.amountRejected | number: '1.2-2'"
                      class="form-control align-right"
                      disabled
                    />
                  </td>
                  <td>
                    <input
                      type="text"
                      [ngModel]="summary.amountApproved | number: '1.2-2'"
                      class="form-control align-right"
                      disabled
                    />
                  </td> -->
                  <!-- <td class="wd-4 align-right">
      
                    <span  class="padding-right-5" tooltip="{{summary.actualAmount}}">
                     {{summary.actualAmount}}
                     </span>
           </td>
           <td class="wd-6 align-right">
            <span  class="padding-right-5" tooltip="{{summary.amountRejected | number:'1.2-2'}}">
            {{summary.amountRejected | number:'1.2-2'}}
            </span>
         </td>
            <td class="wd-6 align-right">
              <span  class="padding-right-5" tooltip="{{summary.amountApproved | number:'1.2-2'}}">
              {{summary.amountApproved | number:'1.2-2'}}
              </span>
           </td> -->
           <td class="wd-4 align-right">
      
            <span  class="padding-right-5" tooltip="{{summary.actualAmount}}">
             {{summary.actualAmount}}
             </span>
   </td>
   <td class="wd-6 align-right">
    <span  class="padding-right-5" tooltip="{{summary.amountRejected | number:'1.2-2'}}">
    {{summary.amountRejected | number:'1.2-2'}}
    </span>
 </td>
    <td class="wd-6 align-right">
      <span  class="padding-right-5" tooltip="{{summary.amountApproved | number:'1.2-2'}}">
      {{summary.amountApproved | number:'1.2-2'}}
      </span>
   </td>
   <td>
    <div class="d-flex"
    class="align-center">
      <!-- <input
      style="width:100px;"
        type="text"
        class="form-control"
        
        (change)="
        onChangeDocumentRemark(
            summary, i,
            $event
          )
        "
      
      /> -->
      <div
        _ngcontent-ykc-c443=""
        class="
          custom_Label_badge
          mr-2
          ml-2
        "
      >
        <b>
          <i
            (click)="
              docRemarkModal(
                template8,
                documentDetailIndex,
                summary?.investmentGroup3TransactionId,
                summary, i
              )
            "
            class="
              fa fa-commenting
              text-dark-green
              fa-2x
              cursor-pointer
            "
          >
          </i
        ></b>
        <span
          _ngcontent-ykc-c443=""
          class="Label_badge"
          >{{
            summary?.bubbleRemarkCount
          }}</span
        >
      </div>
    </div>
  </td>
                  <td>
                    <span tooltip="{{ summary.proofSubmissionId }}" *ngIf="summary.transactionStatus === 'Submitted' || summary.transactionStatus === 'Approved' || summary.transactionStatus === 'SendBack' || summary.transactionStatus === 'Re-Open'">
                      <i class="fa fa-clipboard font-16 text-cyan" aria-hidden="true"></i>
                      <!-- {{ summary.proofSubmissionId }} -->
                    </span>
                  </td>
                  <td class="wd-6">
                    <span class="badge" [ngClass]="{'badge-primary': summary.transactionStatus=='Re-Open',
                    ' badge-success': summary.transactionStatus=='Approved',
                    'badge-danger': summary.transactionStatus=='SendBack',
                    'badge-info': summary.transactionStatus=='Submitted',
                    'badge-warning': summary.transactionStatus=='Pending'}"  tooltip="{{ summary.transactionStatus }}">
  {{ summary.transactionStatus }}
</span>
                </td>
                </tr>

                <tr>
                <!--   <td
                    *ngIf="previousEmployeeList?.length"
                    class="bg-lightgray font-18 font700 align-right"
                  ></td> -->
                  <td
                  *ngIf="previousEmployeeList?.length"
                  class="bg-lightgray font-18 font700 align-right"
                >Total</td>
                <td
                  *ngIf="!previousEmployeeList?.length"
                  class="bg-lightgray font-18 font700 align-right"
                >Total</td>
                <!-- <td *ngIf="previousEmployeeList?.length" class="bg-lightgray font-18 font700 align-"></td>
                  <td class="bg-lightgray font-18 font700 align-right"></td> -->
                  <td class="bg-lightgray font-18 font700 align-right"></td>
                  <!-- <td class="bg-lightgray font-18 font700 align-right"></td> -->
                  <td class="bg-lightgray font-18 font700 align-right">
                    <span tooltip=" {{ summary.declaredAmount }}" class="padding-right-9">
                      {{ summary.declaredAmount}}
                    </span>
                  </td>
                  <td class="bg-lightgray font-18 font700 align-right"></td>
                  
                  <td class="bg-lightgray font-18 font700 align-right"></td>
                 
                  
                  <td class="bg-lightgray font-18 font700 align-right">
                    <span tooltip="{{ summary.actualAmount }}" class="padding-right-9">
                      {{ summary.actualAmount }}
                    </span>
                  </td>
                  <td class="bg-lightgray font-18 font700 align-right">
                    <span tooltip=" {{ grandRejectedTotalEditModal | number: '1.2-2' }}" class="padding-right-9">
                      {{ grandRejectedTotalEditModal | number: "1.2-2" }}
                    </span>
                  </td>
                  <td class="bg-lightgray font-18 font700 align-right">
                    <span tooltip="{{ grandApprovedTotalEditModal | number: '1.2-2' }}" class="padding-right-9">
                      {{ grandApprovedTotalEditModal | number: "1.2-2" }}
                    </span>
                  </td>
                  
                  <td class="bg-lightgray font-18 font700"></td>
                  <td class="bg-lightgray font-18 font700"></td>
                  <td class="bg-lightgray font-18 font700"></td>
                  <!-- <td class="bg-lightgray font-18 font700"></td> -->
                  <!-- <td class="bg-lightgray font-18 font700"></td> -->
                </tr>
              </tbody>
            </table>
          </div>
        </div>
      </div>
      <hr />
    </div>

    <hr />
    <div class="row" *ngIf="viewDocumentDetail">
      <div class="col-12">
        <h3 class="font-14 text-purple font-bold" id="UploadModalLabel">
          Upload Documents
        </h3>
      </div>
    </div>
    <div class="row clearfix mt-10" *ngIf="viewDocumentDetail">
      <div class="col-md-12">
        <div class="row clearfix">
          <div class="col-md-3">
            <div class="fileuploadbox bg-color-lightgray">
              <label class="filelabel">
                <i class="fa fa-upload"> </i>
                <span class="title"> Choose file </span>
                <input
                  class="FileUpload1"
                  class="dropify"
                  (change)="onUploadInEditCase($event)"
                  accept=".jpg , .jpeg, .pdf , .png"
                  id="FileInput"
                  type="file"
                  multiple
                />
              </label>
            </div>

            <div *ngIf="editfilesArray.length > 0" class="fileuploadbox">
              Selected Files
              <label
                *ngFor="let item of editfilesArray; let index = index"
                class="filelabeldisplay"
              >
                <div class="text-ellipsis">
                  <i class="fa fa-paperclip"> </i>
                  <span class="title">
                    {{ item.name }}
                  </span>
                  <div>
                    <div style="float: left; width: 40%;">
                     <div class="col-md-8 mt-10">
                          <label class="form-label">Password</label>
                        </div>
                    <div class="col-md-12">
                    <input class="form-control" [(ngModel)]="editdocumentPassword[index]" rows="1">
                    </div>
                    </div>
                    <div  style="float: right; width: 40%; margin-right: 15px">
                     <div class="col-md-8 mt-10">
                          <label class="form-label">Remark</label>
                        </div>
                    <div class="col-md-12">
                    <input class="form-control" [(ngModel)]="editremarkList[index]" rows="1" [disabled] = "this.disableRemark =='Approved' || this.disableRemark =='WIP'">
                  </div>
                    </div>
                    </div>
                </div>
                <div>
                  <i
                    class="fa fa-times text-red font-18"
                    (click)="removeSelectedTransactionDocumentInEditCase(index)"
                  ></i>
                </div>
              </label>
            </div>
          </div>
          <div class="col-md-12 mt-6">
            <label class="form-label">Remark</label>
          </div>
          <div class="col-md-6">
            <textarea
              class="form-control"
              [(ngModel)]="documentRemark"
              rows="2"
            ></textarea>
          </div>
        </div>
      </div>
    </div>

    <!-- <hr class="mt-20" />
    <div class="row mt-20">
      <div class="col-12">
        <h3 class="font-14 text-purple font-bold" id="UploadModalLabel">
          Uploaded Documents
        </h3>
      </div>
    </div> -->
    <div class="row">
      <div class="col-md-12">
        <!-- <div class="row clearfix mt-10">
          <div class="col-md-12" *ngFor="let doc of urlArray">
            <div class="labelbox" placement="left" tooltip="{{ doc.fileName }}">
              <i class="fa fa-paperclip text-orange"></i> &nbsp;
              {{ doc.fileName }}
            </div>
          </div>
        </div> -->
        <div class="row">
          <div class="col-md-12">
            <div class="border-box">
              <div class="row mt-30">
                <div class="col-12">
                  <div class="card">
                    <div class="col-md-12">
                      <h3 class="font-14 text-purple font-bold">
                        Document Summary
                      </h3>
                    </div>
                    <div class="col-9 col-md-10 col-sm-12">
                      <div
                        class="table-responsive Custom_Table"
                      >
                        <p-table
                          *ngIf="documentArray"
                          #dt2
                          [value]="documentArray"
                          [paginator]="true"
                          [rows]="10"
                          [showCurrentPageReport]="true"
                          (sortFunction)="customSort($event)"
                          [customSort]="true"
                          currentPageReportTemplate="Showing {first} to {last} of {totalRecords} entries"
                          [rowsPerPageOptions]="[10, 25, 50]"
                          [globalFilterFields]="[
                        'empcode',
                        'empName',
                        'Group',
                        'Frequency',
                        'Type',
                        'proofsubmission',
                        'PSIdDetails',
                        'SubmissionDate',
                        'Status'
                      ]"
                        >
                          <ng-template pTemplate="header">
                            <tr>
                              <!-- <th style="width: 3rem">
                                <p-tableHeaderCheckbox></p-tableHeaderCheckbox>
                              </th> -->

                              <!-- <th>
                                <div
                                  class="
                                p-d-flex
                                p-jc-between
                                p-ai-center
                              "
                                > -->
                                  <!-- Date Of Submission -->
                                  <!-- Creation Date
                                  <div
                                    class="Sort_Filter_Position"
                                  >
                                    <p-sortIcon
                                      field="empcode"
                                      pSortableColumn="empcode"
                                    ></p-sortIcon>
                                    <p-columnFilter
                                      field="empcode"
                                      display="menu"
                                      class="p-ml-auto"
                                    >
                                    </p-columnFilter>
                                  </div>
                                </div>
                              </th> -->
                              <th>
                                <div
                                  class="
                                p-d-flex
                                p-jc-between
                                p-ai-center
                              "
                                >
                                  <!-- Time -->
                                  Document Submission Date & Time
                                  <div
                                    class="Sort_Filter_Position"
                                  >
                                    <p-sortIcon
                                      field="empcode"
                                      pSortableColumn="empcode"
                                    ></p-sortIcon>
                                    <p-columnFilter
                                      field="empcode"
                                      display="menu"
                                      class="p-ml-auto"
                                    >
                                    </p-columnFilter>
                                  </div>
                                </div>
                              </th>
                              <th>
                                <div
                                  class="
                                p-d-flex
                                p-jc-between
                                p-ai-center
                              "
                                >
                                  Document Type
                                  <div
                                    class="Sort_Filter_Position"
                                  >
                                    <p-sortIcon
                                      field="documentType"
                                      pSortableColumn="documentType"
                                    ></p-sortIcon>
                                    <p-columnFilter
                                      field="documentType"
                                      display="menu"
                                      class="p-ml-auto"
                                    >
                                    </p-columnFilter>
                                  </div>
                                </div>
                              </th>
                              <th>
                                <div
                                  class="
                                p-d-flex
                                p-jc-between
                                p-ai-center
                              "
                                >
                                  Document Name
                                  <div
                                    class="Sort_Filter_Position"
                                  >
                                    <p-sortIcon
                                      field="documentName"
                                      pSortableColumn="documentName"
                                    ></p-sortIcon>
                                    <p-columnFilter
                                      field="documentName"
                                      display="menu"
                                      class="p-ml-auto"
                                    >
                                    </p-columnFilter>
                                  </div>
                                </div>
                              </th>
                              <!-- <th>
                                <div
                                  class="
                                p-d-flex
                                p-jc-between
                                p-ai-center
                              "
                                >
                                  Document Type
                                  <div
                                    class="Sort_Filter_Position"
                                  >
                                    <p-sortIcon
                                      field="documentType"
                                      pSortableColumn="documentType"
                                    ></p-sortIcon>
                                    <p-columnFilter
                                      field="documentType"
                                      display="menu"
                                      class="p-ml-auto"
                                    >
                                    </p-columnFilter>
                                  </div>
                                </div>
                              </th> -->
                              <th>
                                <div
                                  class="
                                p-d-flex
                                p-jc-between
                                p-ai-center
                              "
                                >
                                  Password
                                  <div
                                    class="Sort_Filter_Position"
                                  >
                                    <p-sortIcon
                                      field="empcode"
                                      pSortableColumn="empcode"
                                    ></p-sortIcon>
                                    <p-columnFilter
                                      field="empcode"
                                      display="menu"
                                      class="p-ml-auto"
                                    >
                                    </p-columnFilter>
                                  </div>
                                </div>
                              </th>
                              <th>
                                <div
                                  class="
                                p-d-flex
                                p-jc-between
                                p-ai-center
                              "
                                >
                                  Remark
                                  <div
                                    class="Sort_Filter_Position"
                                  >
                                    <p-sortIcon
                                      field="empcode"
                                      pSortableColumn="empcode"
                                    ></p-sortIcon>
                                    <p-columnFilter
                                      field="empcode"
                                      display="menu"
                                      class="p-ml-auto"
                                    >
                                    </p-columnFilter>
                                  </div>
                                </div>
                              </th>
                              <th>
                                <div
                                  class="
                                p-d-flex
                                p-jc-between
                                p-ai-center
                              "
                                >
                                  Status
                                  <div
                                    class="Sort_Filter_Position"
                                  >
                                    <p-sortIcon
                                      field="empcode"
                                      pSortableColumn="empcode"
                                    ></p-sortIcon>
                                    <p-columnFilter
                                      field="empcode"
                                      display="menu"
                                      class="p-ml-auto"
                                    >
                                    </p-columnFilter>
                                  </div>
                                </div>
                              </th>
                              <!-- <th>
                                <div
                                  class="
                                p-d-flex
                                p-jc-between
                                p-ai-center
                              "
                                >
                                  Approver Name
                                  <div
                                    class="Sort_Filter_Position"
                                  >
                                    <p-sortIcon
                                      field="empcode"
                                      pSortableColumn="empcode"
                                    ></p-sortIcon>
                                    <p-columnFilter
                                      field="empcode"
                                      display="menu"
                                      class="p-ml-auto"
                                    >
                                    </p-columnFilter>
                                  </div>
                                </div>
                              </th> -->
                              <!-- <th>
                                <div
                                  class="
                                p-d-flex
                                p-jc-between
                                p-ai-center
                              "
                                > -->
                                  <!-- Time -->
                                  <!-- Last Modified Date & Time
                                  <div
                                    class="Sort_Filter_Position"
                                  >
                                    <p-sortIcon
                                      field="empcode"
                                      pSortableColumn="empcode"
                                    ></p-sortIcon>
                                    <p-columnFilter
                                      field="empcode"
                                      display="menu"
                                      class="p-ml-auto"
                                    >
                                    </p-columnFilter>
                                  </div>
                                </div>
                              </th> -->
                            </tr>
                          </ng-template>
                          <ng-template
                            pTemplate="body"
                            let-document
                            let-documentIndex = "rowIndex"
                          >
                            <tr class="p-selectable-row">
                              <!-- <td>
                                <p-tableCheckbox
                                  [value]="customer"
                                >
                                </p-tableCheckbox>
                              </td> -->
                              <!-- <td>
                                {{dateofsubmission | date:'dd-MMM-yyyy' }}
                              </td> -->
                              <!-- <td>{{ document.lastModifiedTime| date:'dd-MMM-yyyy, h:mm a'  }}</td> -->
                              <td>{{ document.lastModifiedTime| date: 'dd-MMM-yyyy HH:mm'}}</td>
                              <!-- {{ todayDate | date: 'dd/MM/yyyy HH:mm'}} -->
                              <td>{{ document.documentType }}</td>
                              <td>
                                <a
                                  (click)=" docViewer1(template3,documentIndex, document)"

                                >
                                  <i
                                    class="
                                  fa fa-paperclip
                                  text-orange
                                "
                                  ></i>
                                  &nbsp;
                                  {{ document.documentName }}
                                </a>
                              </td>
                              <!-- <td>{{ document.documentType }}</td> -->
                              <td>{{ document.documentPassword }}</td>
                              <td>
                                <!-- <div class="custom_Label_badge">
                                  <button
                                    class="
                                      btn btn-bg-green
                                      text-white
                                    "
                                    (click)="
                                      docViewer(template3)
                                    "
                                  >
                                    PSEmp
                                  </button>
                                  <span class="Label_badge"
                                    >2</span
                                  >
                                </div> -->
                                {{document.documentRemark}}
                              </td>
                              <td class="wd-6"><span class="badge" [ngClass]="{'badge-primary': document.status=='Re-Open',
                                ' badge-success': document.status=='Approved',
                                'badge-danger': document.status=='SendBack',
                                'badge-info': document.status=='Submitted',
                                'badge-warning': document.status=='Pending'}">{{ document.status }}</span></td>
                              <!-- <td>{{ document.lastModifiedBy }}</td> -->
                              <!-- <td>{{ document.lastModifiedTime| date:'h:mm a'  }}</td> -->
                              <!-- <td>{{ document.lastModifiedTime| date:'dd-MMM-yyyy, h:mm a'  }}</td> -->
                              
                            </tr>
                          </ng-template>
                        </p-table>
                      </div>
                    </div>
                    <!-- <div class="row mt-25">
                      <div class="col-md-12">
                        <div class="float-right">
                          <button
                            type="submit"
                            class="
                              custom_button custom_btn
                              btn-bg-green
                              btn-labeled
                              btn-labeled-left
                              ripple
                              mr-2
                            "
                            tooltip="Approve"
                          >
                            <b>
                              <i class="fa fa-floppy-o"></i
                            ></b>
                            Approve
                          </button>

                          <button
                            type="button"
                            tooltip="Send Back"
                            class="
                              custom_button custom_btn
                              bg-btn-red
                              btn-labeled btn-labeled-left
                              mr-2
                            "
                          >
                            <b><i class="fa fa-times"></i></b>
                            Discard
                          </button>
                        </div>
                      </div>
                    </div> -->
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
  <!-- <div class="modal-footer">
    <button
      type="button"
      tooltip="View Document"
      (click)="modalRef.hide(); docViewer(template3, documentSummary.documentDetailList)"
      class="custom_button custom_btn btn-bg-green btn-labeled btn-labeled-left"
    >
      <b><i class="fa fa-eye"></i></b> View
    </button>
    &nbsp;&nbsp;
    <button
      *ngIf="viewDocumentDetail"
      type="button"
      tooltip="View Document" 
      (click)="modalRef.hide(); uploadUpdateTransaction()"
      class="custom_button custom_btn btn-bg-green btn-labeled btn-labeled-left"
    >
      <b><i class="fa fa-save"></i></b> Save
    </button>
  </div> -->
  <div class="modal-footer">
    <button type="button" tooltip="View Document" (click)="modalRef.hide(); docViewer(template3,urlArray)"
    class="custom_button custom_btn btn-bg-blue btn-labeled btn-labeled-left">
      <b><i class="fa fa-eye"></i></b> View All
    </button>
    &nbsp;&nbsp;
    <button *ngIf="viewDocumentDetail" type="button" tooltip="Save Document"
      (click)="modalRef1?.hide(); uploadUpdateTransaction()"
      class="custom_button custom_btn btn-bg-green btn-labeled btn-labeled-left">
      <b><i class="fa fa-save"></i></b> Save
    </button>
    <button
  
    type="button"
    tooltip="Close Document"
    (click)="modalRef1?.hide()"
    class="custom_button custom_btn btn-bg-grey btn-labeled btn-labeled-left"
  >
  <b><i class="fa fa-times"></i></b> Close
  </button>
  </div>

</ng-template>

<!-- dOC VIEWER -->
<ng-template #template3>
  <div class="modal-header">
    <!-- <h5 class="modal-title" id="jasdjgh">Document Viewer</h5> -->
    <div class="row">
      <div class="col-sm-6 col-md-6 align-right">
          <label class="form-label">Document Name</label>
           {{this.viewDocumentName}}
      </div>
      <div class="col-sm-6 col-md-6 align-right">
          <label class="form-label">Document Type</label>
          
          {{this.viewDocumentType}}
      </div>
    
      </div>
      <div class="align-right">
        <button type="button" (click)="zoomin()" ><i class="fa fa-search-plus" aria-hidden="true"></i></button>
<button type="button" (click)="zoomout()"><i class="fa fa-search-minus" aria-hidden="true"></i></button>
    <button type="button" (click)="modalRef.hide()" class="close" data-dismiss="modal" aria-label="Close">
      <span aria-hidden="true"></span>
    </button>
  </div>
  </div>
  <div class="card-body">
    <div class="row">
      <div class="col-md-1">
        <button type="button" class="btn active Next_Previous_Btn" tooltip="Previous Document"
          (click)="previousDocViewer()" [disabled]="urlIndex == 0">
          <i class="fa fa-angle-left text-white font-30 p-10"></i>
        </button>
      </div>
      <div class="col-md-10">
        <iframe style="height: 100vh; width: 100%; display: block" [src]="urlSafe" provider="google"></iframe>
        <!-- <img id = 'map' style="height: 100vh; width: 100%; display: block" [src]="urlSafe" provider="google"> -->
      </div>
      <div class="col-md-1">
        <button type="button" class="btn active Next_Previous_Btn" tooltip="Next Document" (click)="nextDocViewer()"
          [disabled]="urlIndex == urlArray.length - 1">
          <i class="fa fa-angle-right text-white font-30 p-10"></i>
        </button>
      </div>
    </div>
  </div>
  <div class="modal-footer">
    <!-- <button type="button" class="btn btn-primary">Save</button>  -->
    <button type="button" class="btn btn-secondary" (click)="modalRef.hide()">
      Ok
    </button>
  </div>
</ng-template>
<ng-template #template4>
  <div class="modal-header">
    <h5 class="modal-title" id="UploadModalLabel">Upload Document</h5>
    <button type="button" (click)="modalRef.hide()" class="close" data-dismiss="modal" aria-label="Close">
      <span aria-hidden="true"></span>
    </button>
  </div>
  <div class="modal-body">
    <div class="card">
      <div class="card-body">
        <div class="row clearfix">
          <!-- <div class="col-md-12">
           <label class="form-label">Upload File here :</label>
        </div> -->
          <div class="col-md-12">
            <div class="fileuploadbox bg-color-lightgray">
              <label class="filelabel">
                <i class="fa fa-upload"> </i>
                <span class="title"> Choose file </span>
                <input class="FileUpload1" class="dropify" (change)="onUpload($event)"
                  accept=".jpg , .jpeg, .pdf , .png" id="FileInput" type="file" multiple />
              </label>
            </div>
            <div *ngIf="filesArray.length > 0" class="fileuploadbox">
              Selected Files
              <label *ngFor="let item of filesArray; let index = index" class="filelabeldisplay">
                <div class="text-ellipsis">
                  <i class="fa fa-paperclip"> </i>
                  <span class="title">
                    {{ item.name }}
                  </span>
                  <div>
                    <div style="float: left; width: 40%;">
                      <div class="col-md-8 mt-10">
                        <label class="form-label">Password</label>
                      </div>
                      <div class="col-md-12">
                        <input class="form-control" [(ngModel)]="documentPassword[index]" rows="1">
                      </div>
  
                    </div>
                    <div style="float: right; width: 40%; margin-right: 59px">
                      <div class="col-md-8 mt-10">
                        <label class="form-label">Remark</label>
                      </div>
                      <div class="col-md-12">
                        <input class="form-control" [(ngModel)]="remarkList[index]" rows="1" [disabled] = "this.disableRemarkList">
                      </div>
                    </div>
                  </div>
                </div>
                <div>
                  <i class="fa fa-times text-red font-18" (click)="removeSelectedTransactionDocument(index)"></i>
                </div>
              </label>
            </div>
          </div>
          <!-- <div class="col-md-12 mt-10">
            <label class="form-label">Remark</label>
          </div>
          <div class="col-md-12">
            <textarea class="form-control" [(ngModel)]="documentRemark" rows="2"></textarea>
          </div> -->
        </div>
      </div>
    </div>
  </div>
  <div class="modal-footer">
    <!-- <button type="button" class="btn btn-primary">Save</button>  -->
    <button type="button" class="btn btn-secondary" (click)="modalRef.hide()">
      Ok
    </button>
  </div>
</ng-template>
<ng-template #template>
  <div class="modal-header">
    <h5 class="modal-title" id="UploadModalLabel">Upload Document</h5>
    <button type="button" (click)="modalRef.hide()" class="close" data-dismiss="modal" aria-label="Close"><span
      aria-hidden="true"></span></button>
  </div>
  <div class="modal-body">
    <div class="card">
      <div class="card-body">
        <div class="row clearfix">
          <!-- <div class="col-md-12">
         <label class="form-label">Upload File here :</label>
      </div> -->
          <div class="col-md-12">
            <div class="fileuploadbox bg-color-lightgray">
              <label class="filelabel">
                <i class="fa fa-upload">
                </i>
                <span class="title">
                    Choose file
                  </span>
                <input class="FileUpload1" class="dropify" (change)="onMasterUpload($event);"
                       accept=".jpg , .jpeg, .pdf , .png" id="FileInput" type="file" multiple />
              </label>
            </div>
            <div *ngIf="masterfilesArray.length > 0 " class="fileuploadbox">
              <span class="text-purple font-14 font700">Selected Files</span>
              <label *ngFor="let item of masterfilesArray;  let index = index;" class="filelabeldisplay">
                <div class="text-ellipsis"><i class="fa fa-paperclip">
                </i>
                  <span class="title" tooltip="{{item.name}}">
                      {{ item.name }}
                    </span>
                  <div>
                    <div style="float: left; width: 40%;">
                      <div class="col-md-8 mt-10">
                        <label class="form-label">Password</label>
                      </div>
                      <div class="col-md-12">
                        <input class="form-control" [(ngModel)]="documentPassword[index]" rows="1">
                      </div>

                    </div>
                    <div style="float: right; width: 40%; margin-right: 59px">
                      <div class="col-md-8 mt-10">
                        <label class="form-label">Remark</label>
                      </div>
                      <div class="col-md-12">
                        <input class="form-control" [(ngModel)]="remarkList[index]" rows="1">
                      </div>
                    </div>
                  </div>
                </div>
                <div>
                  <i class="fa fa-times text-red font-18" (click)="removeSelectedLicTransactionDocument(index)"></i>
                </div>
              </label>


            </div>
          </div>
          <!-- <div class="col-md-12 mt-10">
              <label class="form-label">Remark</label>
          </div>
          <div class="col-md-12">
              <textarea class="form-control" [(ngModel)]="documentRemark" rows="2"></textarea>
          </div> -->
        </div>
      </div>
    </div>
  </div>
  <div class="modal-footer">
    <button type="button" class="btn btn-secondary" (click)="modalRef.hide()">Ok</button>
  </div>
</ng-template>

<!-- Remark Modal started -->
<ng-template #template8>
  <div class="modal-header">
    <h5 class="modal-title" id="jasdjgh">Remark</h5>
    <button
      type="button"
      (click)="modalRef.hide()"
      class="close"
      data-dismiss="modal"
      aria-label="Close"
    >
      <span aria-hidden="true"></span>
    </button>
  </div>

  <div class="card-body">
    <div *ngFor="let documentRemark of documentRemarkList">
      <div class="row">
        <div class="col-md-6">
          <span class="form-label"
            >{{ documentRemark.role }}:
            <b class="text-gray">{{
              documentRemark.remarkBy
            }}</b></span >
        </div>
        <div class="col-md-6">
          <div class="float-right">
            <span class="form-label">
              Date:
              <b class="text-gray">{{
                documentRemark.remarkDate
                  | date: "dd-MMM-yyyy HH:mm"
              }}</b>
            </span>
          </div>
        </div>
      </div>
      <div class="row">
        <textarea class="form-control remarktext" disabled [ngClass]="{'admin-class':documentRemark.role=='Approval Admin'}">
        {{ documentRemark.remark }}
        </textarea>
      </div>
    </div>
    <div class="row mt-25">
      <div class="col-md-12">
        <h6 class="modal-title" id="jasdjgh">Enter New Remark</h6>
        <textarea type="text" [(ngModel)]="enteredRemark"
        (change)= "
        onChangeDocumentRemark(
          this.summaryDetails, this.indexCount,
            $event
          )
        " class="form-control" placeholder="Remark"></textarea>
      </div>
    </div>
  </div>
<!-- 
  <div *ngIf="!this.summaryDetails?.proofSubmissionId" class="modal-footer">
    <button
      type="button"
      class="btn btn-secondary"
      (click)="modalRef.hide()"
    >
      Ok
    </button>
  </div> -->
  <div *ngIf="this.summaryDetails?.proofSubmissionId" class="modal-footer">
    <button
    type="button"
    class="btn btn-secondary"
    (click)="onResetRemarkDetails()"
  >
    Reset
  </button>
    <button
      type="button"
      class="btn btn-secondary"
      (click)="onSaveRemarkDetails(this.summaryDetails,this.indexCount)"
    >
      Save
    </button>
  </div>
</ng-template>


