<form class="card" role="form" (ngSubmit)="addMaster(form,formDirective)" [formGroup]="form" #formDirective="ngForm" method="post" novalidate>
  <!-- <div class="tabview-contents"> -->
  <br>
    <fieldset>
      <legend>Property Details</legend>
     <div class="row">
        <div class="col-sm-6 col-md-3">
           <label class="form-label">Property Name</label>
           <input type="text" formControlName="propertyName" class="form-control"
           onkeypress="return /[0-9a-zA-Z ']/i.test(event.key)"
              placeholder="Enter Property Name"
              [ngClass]="{ 'is-invalid': submitted && masterForm.propertyName.errors }"  >
           <div *ngIf="submitted && masterForm.propertyName.errors" class="invalid-feedback">
              <div *ngIf="masterForm.propertyName.errors.required">Property Name is mandatory</div>
           </div>
        </div>
        <div class="col-sm-6 col-md-3">
          <label class="form-label">Possesion Date</label>
          <div class="form-group">
             <div class="input-group">
                <div class="input-group-prepend">
                   <span class="input-group-text"><i class="fa fa-calendar"></i></span>
                </div>
                <input [bsConfig]="{ dateInputFormat: 'DD-MMM-YYYY' }" formControlName="possessionDate"
                 data-provide="datepicker" data-date-autoclose="true" class="form-control"
                  placeholder="Possession Date" bsDatepicker
                 [ngClass]="{ 'is-invalid': submitted && masterForm.possessionDate.errors }"
                 [maxDate]="today">
                <div *ngIf="submitted && masterForm.possessionDate.errors" class="invalid-feedback">
                   <div *ngIf="masterForm.possessionDate.errors.required">Possesion Date is mandatory</div>
                </div>
             </div>
          </div>
       </div>
     </div>
     <div class="row mt-10">
      <div class="col-sm-6 col-md-3">
        <label class="form-label"><b> Address</b> (Copy From)</label>
        <select name="Address_Copy_From" id="copyFrom" placeholder="Copy Address" (change)='onSelectAddressType()'
            formControlName="copyFrom"  class="form-control custom-select"
            [ngClass]="{ 'is-invalid': submitted && masterForm.copyFrom.errors }"
            #CopyFrom
            >
            <option *ngFor="let addressType of employeeAddressType"
            [value]="addressType.value">
            {{addressType.label}}
          </option>
        </select>
     </div>
   </div>
   <div class="row mt-20">
    <div class="col-sm-6 col-md-3">
       <label class="form-label">Address 1</label>
       <input type="text" formControlName="address1" class="form-control"
       onkeypress="return /[0-9a-zA-Z']/i.test(event.key)"
          placeholder="Enter Property Name"
          [ngClass]="{ 'is-invalid': submitted && masterForm.address1.errors }"  >
       <div *ngIf="submitted && masterForm.address1.errors" class="invalid-feedback">
          <div *ngIf="masterForm.address1.errors.required">Address 1 Name is mandatory</div>
       </div>
    </div>
    <div class="col-sm-6 col-md-3">
      <label class="form-label">Address 2</label>
      <input type="text" formControlName="address2" class="form-control"
      onkeypress="return /[0-9a-zA-Z']/i.test(event.key)"
         placeholder="Enter Property Name"
         [ngClass]="{ 'is-invalid': submitted && masterForm.address2.errors }"  >
      <div *ngIf="submitted && masterForm.address2.errors" class="invalid-feedback">
         <div *ngIf="masterForm.address2.errors.required">Address 2 Name is mandatory</div>
      </div>
   </div>
   <div class="col-sm-6 col-md-3">
    <label class="form-label">Address 3</label>
    <input type="text" formControlName="address3" class="form-control"
    onkeypress="return /[0-9a-zA-Z']/i.test(event.key)"
       placeholder="Enter Property Name"
       [ngClass]="{ 'is-invalid': submitted && masterForm.address3.errors }"  >
    <div *ngIf="submitted && masterForm.address3.errors" class="invalid-feedback">
       <div *ngIf="masterForm.address3.errors.required">Address 3 Name is mandatory</div>
    </div>
 </div>
 <div class="col-sm-6 col-md-3">
  <label class="form-label">Country</label>
  <select name="Address_Copy_From" id="country" placeholder="Copy Address"
      formControlName="country" class="form-control custom-select"
      [ngClass]="{ 'is-invalid': submitted && masterForm.country.errors }"
      #country
      >

    <option *ngFor="let country of countriesList"
      [value]="country">
      {{country}}
    </option>
  </select>
   <div *ngIf="submitted && masterForm.country.errors" class="invalid-feedback">
     <div *ngIf="masterForm.country.errors.required">country mandatory</div>
  </div>
</div>

 </div>
 <div class="row mt-20">
  <div class="col-sm-6 col-md-3">
    <label class="form-label">PIN</label>
    <input name="pinCode" id="pinCode" placeholder="PIN" (change)='getPermanentAddressFromPIN()'
        formControlName="pinCode" minlength="6" maxlength="6"   class="form-control custom-select" pattern="[0-9]{6}"
        [ngClass]="{ 'is-invalid': submitted && masterForm.pinCode.errors }"
        #pinCode
        >
    <div *ngIf="submitted && masterForm.pinCode.errors" class="invalid-feedback">
       <div *ngIf="masterForm.pinCode.errors.required">PIN is mandatory</div>
    </div>
    </div>
  <div class="col-sm-6 col-md-3">
     <label class="form-label">State</label>
     <input type="text" formControlName="state" class="form-control"
        placeholder=""
        [ngClass]="{ 'is-invalid': submitted && masterForm.state.errors }"   >
     <div *ngIf="submitted && masterForm.state.errors" class="invalid-feedback">
        <div *ngIf="masterForm.state.errors.required">State is mandatory</div>
     </div>
  </div>
  <div class="col-sm-6 col-md-3">
    <label class="form-label">City</label>
    <input type="text" formControlName="city" class="form-control"
       placeholder=""
       [ngClass]="{ 'is-invalid': submitted && masterForm.city.errors }" disabled  >
    <div *ngIf="submitted && masterForm.city.errors" class="invalid-feedback">
       <div *ngIf="masterForm.city.errors.required">City Name is mandatory</div>
    </div>
 </div>
 <div class="col-sm-6 col-md-3">
  <label class="form-label">Town/Village</label>
  <input type="text" formControlName="townOrVillage" class="form-control"
     placeholder=""
     [ngClass]="{ 'is-invalid': submitted && masterForm.townOrVillage.errors }" disabled>
  <div *ngIf="submitted && masterForm.townOrVillage.errors" class="invalid-feedback">
     <div *ngIf="masterForm.townOrVillage.errors.required">Town/Village Name is mandatory</div>
  </div>
</div>
</div>
<div class="row mt-20">
  <div class="col-sm-6 col-md-3">
    <label class="form-label">Stamp Duty & Registration Payment Date</label>
    <div class="form-group">
       <div class="input-group">
          <div class="input-group-prepend">
             <span class="input-group-text"><i class="fa fa-calendar"></i></span>
          </div>
          <input [bsConfig]="{ dateInputFormat: 'DD-MMM-YYYY' }" formControlName="stampDutyRegistrationDate" data-provide="datepicker"
             data-date-autoclose="true" class="form-control" (bsValueChange)="checkRegistrationDateValid()"
             [ngClass]="{ 'is-invalid': (submitted   && masterForm.stampDutyRegistrationDate.errors) || stampDutyDateValid }"
             [maxDate]="today" placeholder="Registration Date" bsDatepicker
            >
           <div *ngIf="(submitted && masterForm.stampDutyRegistrationDate.errors) ||  stampDutyDateValid" class="invalid-feedback">
             <div *ngIf="(masterForm.stampDutyRegistrationDate.errors.required) || stampDutyDateValid ">Stamp Duty & Registration Date is mandatory</div>
          </div>
       </div>
    </div>
  </div>
  <div class="col-sm-6 col-md-3">
    <label class="form-label">Stamp Duty & Registration Amount(&#8377;)</label>
    <!-- <input type="text" formControlName="stampDutyRegistrationAmount" class="form-control"
       placeholder="Enter Property Name"
       [ngClass]="{ 'is-invalid': submitted && masterForm.stampDutyRegistrationAmount.errors }"  > -->
       <p-inputNumber   class="form-control align-right" formControlName="stampDutyRegistrationAmount"
       [ngClass]="{ 'is-invalid': submitted && masterForm.stampDutyRegistrationAmount.errors }"
       (onBlur) = "checkPaymentDate()"
        mode="decimal" locale="en-IN" [minFractionDigits]="2"></p-inputNumber>
    <div *ngIf="submitted && masterForm.stampDutyRegistrationAmount.errors" class="invalid-feedback">
       <div *ngIf="masterForm.stampDutyRegistrationAmount.errors.required">Stamp Duty & Registration Amount is mandatory</div>
    </div>
 </div>
 <div class="col-sm-6 col-md-3">
  <label class="form-label">Property Registration Amount(&#8377;)</label>
  <input type="text" formControlName="propertyRegistrationValue" class="form-control"
     placeholder="Enter Property Name"
     [ngClass]="{ 'is-invalid': submitted && masterForm.propertyRegistrationValue.errors }"  >
  <div *ngIf="submitted && masterForm.propertyRegistrationValue.errors" class="invalid-feedback">
     <div *ngIf="masterForm.propertyRegistrationValue.errors.required">Property Registration Amount is mandatory</div>
  </div>
  </div>
</div>

<div class="row">
  <div class="col-md-12"   >
    <fieldset >

      <div class="col-12" formArrayName="housePropertyOwnerDetailList"
       *ngFor="let item of form.get('housePropertyOwnerDetailList')['controls']; index as i;
        last as l; first as f"
       >
        <div class="row"   [formGroupName]="i" >

          <div class="col-sm-6 col-md-3">
            <label class="form-label">Name Of Owner/s{{i}}</label>
            <input type="text" formControlName="ownerName"  class="form-control"
            onkeypress="return /[0-9a-zA-Z']/i.test(event.key)"
               placeholder="Enter Owner Name"
             >
             <!-- <div *ngIf="submitted && masterForm.ownerName.errors" class="invalid-feedback">
               <div *ngIf="masterForm.ownerName.errors.required">Property Name is mandatory</div>
            </div> -->
         </div>
          <div class="col-sm-6 col-md-3">
            <label class="form-label ml-15" tooltip="1st Time Home Buyer"
            placement="left">1<sup>st</sup> Time Home Buyer</label>
            <div class="custom-controls-stacked ml-15 mt-10">
              <div class="custom-control custom-radio custom-control-inline">
               <label class="custom-control custom-radio custom-control-inline">
               <input  type="radio"
                  class="custom-control-input" formControlName="firstTimeHomeBuyer"
                  [value]="true" checked >
               <span class="custom-control-label">Yes</span>
               </label>
              </div>
              <div class="custom-control custom-radio custom-control-inline">
               <label class="custom-control custom-radio custom-control-inline">
               <input  type="radio"
                  class="custom-control-input"  formControlName="firstTimeHomeBuyer"
                  [value]="false">
               <span class="custom-control-label">No</span>
               </label>
              </div>
            </div>

          </div>
          <div class="custom-controls-stacked ml-15 mt-20">
            <button class="btn btn-primary btn-sm" type="button"  (click) ="addOwner(i)" *ngIf = "l"><i class="fa fa-plus" aria-hidden="true" ></i> Add</button> &nbsp;&nbsp;&nbsp;
            <button class="btn btn-primary btn-sm" type="button"   (click) ="removeOwner(i)" *ngIf = "form.get('housePropertyOwnerDetailList')['controls'].length>1 || (i !=0)" >Remove</button>
          </div>
         </div>
        </div>
    </fieldset>
  </div>
</div>
<div class="row  mt-20" >
  <div class="col-md-12" >
    <fieldset >

      <div class="col-12" formArrayName="housePropertyUsageTypeList"
      *ngFor="let item of housePropertyUsageTypeList.controls; index as i ; last as l; first as f">
        <div class="row" [formGroupName]="i">

          <div class="col-sm-6 col-md-3">
            <label class="form-label">Usage Type</label>
            <select name="usageType"  placeholder=""
                formControlName="usageType" class="form-control custom-select"

                #UsageType
                >

              <option *ngFor="let usageType of usageTypeList"
                [value]="usageType.value">
                {{usageType.label}}
              </option>
            </select>
            <!-- <div *ngIf="submitted && masterForm.usageType.errors" class="invalid-feedback">
               <div *ngIf="masterForm.usageType.errors.required">Usage Type is mandatory</div>
            </div> -->
         </div>
         <div class="col-sm-6 col-md-3">
          <label class="form-label">From Date</label>
          <div class="form-group">
             <div class="input-group">
                <div class="input-group-prepend">
                   <span class="input-group-text"><i class="fa fa-calendar"></i></span>
                </div>
                <input [bsConfig]="{ dateInputFormat: 'DD-MMM-YYYY' }" formControlName="fromDate"
                [minDate]="financialYearStartDate"
                      [maxDate]="financialYearEndDate"
                 data-provide="datepicker" data-date-autoclose="true" class="form-control"
                 placeholder="From Date" bsDatepicker

                 [maxDate]="today">
                <!-- <div *ngIf="submitted && masterForm.fromDate.errors" class="invalid-feedback">
                   <div *ngIf="masterForm.fromDate.errors.required">From Date is mandatory</div>
                </div> -->
             </div>
          </div>
       </div>
       <div class="col-sm-6 col-md-3">
        <label class="form-label">To Date</label>
        <div class="form-group">
           <div class="input-group">
              <div class="input-group-prepend">
                 <span class="input-group-text"><i class="fa fa-calendar"></i></span>
              </div>
              <input [bsConfig]="{ dateInputFormat: 'DD-MMM-YYYY' }" formControlName="toDate"
              [minDate]="financialYearStartDate"
              [maxDate]="financialYearEndDate"
               data-provide="datepicker" data-date-autoclose="true" class="form-control"
               placeholder="To Date" bsDatepicker

              >
              <!-- <div *ngIf="submitted && masterForm.toDate.errors" class="invalid-feedback">
                 <div *ngIf="masterForm.toDate.errors.required">To Date is mandatory</div>
              </div> -->
           </div>
        </div>
        </div>
         <div class="custom-controls-stacked ml-15 mt-20">
          <button class="btn btn-primary btn-sm" type="button"  (click) ="addUsageType(i)" *ngIf="l"><i class="fa fa-plus" aria-hidden="true"></i> Add</button> &nbsp;&nbsp;&nbsp;
          <button class="btn btn-primary" type="button"   (click) ="removeUsageType(i)" *ngIf= "this.housePropertyUsageTypeList.length>1 || (i !=0)">Remove</button>
        </div>
        </div>
      </div>
    </fieldset>
  </div>
</div>
<div class="row mt-20">
  <div class="col-sm-6 col-md-3">
    <label class="form-label">Have you taken loan against this property ?</label>
 </div>
 <div class="col-sm-3 col-md-3">
  <div class="custom-controls-stacked">
     <label class="custom-control custom-radio custom-control-inline">
     <input formControlName="loanTaken" type="radio"  [(ngModel)]="loanTaken" [checked]="loanTaken"
        class="custom-control-input" name="loanTaken"  [value]="true" checked>
     <span class="custom-control-label">Yes</span>
     </label>
     <label class="custom-control custom-radio custom-control-inline">
     <input formControlName="loanTaken" type="radio"  [(ngModel)]="loanTaken" [checked]="!loanTaken"
        class="custom-control-input" name="loanTaken"  [value]="false">
     <span class="custom-control-label">No</span>
     </label>
  </div>
</div>
</div>
     <div class="row mt-25" *ngIf= "loanTaken" >
        <div class="col-12"  >
           <fieldset>
              <legend>Loan Details</legend>
              <div formGroupName="housePropertyLoanDetailList"  [formGroup]="form" #formDirective_="ngForm" >
              <div class="row">
                 <div class="col-sm-6 col-md-3">
                    <label class="form-label">Purpose Of Loan</label>
                    <select   placeholder="Select"
                        formControlName="purposeOfLoan" class="form-control custom-select"
                        [ngClass]="{ 'is-invalid': loansubmitted && loanForm.lenderName.errors }"
                        #purposeOfLoan
                        >
                      <option *ngFor="let purpose of purposeOfLoanList"
                        [value]="purpose.value">
                        {{purpose.label}}
                      </option>
                    </select>
                    <div *ngIf="loansubmitted && loanForm.purposeOfLoan.errors" class="invalid-feedback">
                       <div *ngIf="loanForm.purposeOfLoan.errors.required">purposeOfLoan is mandatory</div>
                    </div>
                 </div>
                 <div class="col-sm-6 col-md-3">
                    <label class="form-label">Lender Name</label>
                    <input type="text" formControlName="lenderName" placeholder="Lender Name" class="form-control"
                    onkeypress="return /[0-9a-zA-Z']/i.test(event.key)"
                      name="Premium Amount" [ngClass]="{ 'is-invalid': loansubmitted && loanForm.lenderName.errors }">
                    <div *ngIf="loansubmitted && loanForm.lenderName.errors" class="invalid-feedback">
                       <div *ngIf="loanForm.lenderName.errors.required">Lender Name is mandatory</div>
                    </div>
                 </div>
                 <div class="col-sm-6 col-md-3">
                  <label class="form-label">Lender Type</label>
                  <select  id="lenderType" placeholder="Select Lender"
                      formControlName="lenderType" class="form-control custom-select"
                      [ngClass]="{ 'is-invalid': loansubmitted && loanForm.lenderType.errors }"
                      #lenderType
                      >
                    <option *ngFor="let lender of lenderTypeList"
                      [value]="lender.value">
                      {{lender.label}}
                    </option>
                  </select>
                  <div *ngIf="loansubmitted && loanForm.lenderType.errors" class="invalid-feedback">
                     <div *ngIf="loanForm.lenderType.errors.required">Lender Type is mandatory</div>
                  </div>
                  </div>
                 <div class="col-sm-6 col-md-3" >
                  <label class="custom-switch">
                    <input type="checkbox" name="custom-switch-checkbox" class="custom-switch-input">
                    <span class="custom-switch-indicator"></span>&nbsp;
                    <span class="form-label">PAN Or Aadhar</span>
                    </label>
                    <input type="text" maxlength="12" minlength="10" formControlName="lenderPANOrAadhar" placeholder="Enter PAN Number"
                      class="form-control" pattern="^[A-Za-z]{5}[0-9]{4}[A-Za-z]$" name="PAN"
                      [ngClass]="{ 'is-invalid': loansubmitted && loanForm.lenderPANOrAadhar.errors }" >
                    <div *ngIf="loansubmitted && loanForm.lenderPANOrAadhar.errors" class="invalid-feedback">
                       <div *ngIf="loanForm.lenderPANOrAadhar.errors.required">PAN Number is Mandatory</div>
                       <div *ngIf="loanForm.lenderPANOrAadhar.errors?.pattern">Enter valid PAN Number</div>
                    </div>
                 </div>

              </div>
              <div class="row mt-4 mb-10"  >
                <div class="col-sm-6 col-md-3">
                  <label class="form-label">Account No.</label>
                  <input type="text" formControlName="loanAccountNumber" class="form-control"
                  onkeypress="return /[0-9a-zA-Z']/i.test(event.key)"
                     [ngClass]="{ 'is-invalid': loansubmitted && loanForm.loanAccountNumber.errors }">
                  <div *ngIf="loansubmitted && loanForm.loanAccountNumber.errors" class="invalid-feedback">
                     <div *ngIf="loanForm.loanAccountNumber.errors.required">Account No. is mandatory</div>
                  </div>
               </div>
               <div class="col-sm-6 col-md-3">
                <label class="form-label">Loan Amount</label>
                <!-- <input type="text" formControlName="loanAmount"
                class="form-control align-right"
                  [ngClass]="{ 'is-invalid': submitted && masterForm.loanAmount.errors }"> -->

                  <p-inputNumber   class="form-control align-right"   onkeypress="return /[0-9a-zA-Z']/i.test(event.key)"
                  formControlName="loanAmount"

                  mode="decimal" locale="en-IN" [minFractionDigits]="2"
                  [ngClass]="{ 'is-invalid': loansubmitted && loanForm.loanAmount.errors }"></p-inputNumber>
                <div *ngIf="loansubmitted && loanForm.loanAmount.errors" class="invalid-feedback">
                   <div *ngIf="loanForm.loanAmount.errors.required">Loan Amount is mandatory</div>
                </div>
             </div>
             <div class="col-sm-6 col-md-3">
              <label class="form-label">Pre EMI Intrest Paid</label>
              <input type="number" formControlName="preEMIInterestPaid" class="form-control align-right"
                [ngClass]="{ 'is-invalid': loansubmitted && loanForm.preEMIInterestPaid.errors }">
              <div *ngIf="loansubmitted && loanForm.preEMIInterestPaid.errors" class="invalid-feedback">
                 <div *ngIf="loanForm.preEMIInterestPaid.errors.required">Pre EMI Intrest is mandatory</div>
              </div>
           </div>
           <div class="col-sm-6 col-md-3">
            <label class="form-label">% Claimed By Employee</label>
            <input type="number" formControlName="percentageClaimedByEmployee"  min="0" max="100" class="form-control "
              [ngClass]="{ 'is-invalid': loansubmitted && loanForm.percentageClaimedByEmployee.errors }">
            <div *ngIf="loansubmitted && loanForm.percentageClaimedByEmployee.errors" class="invalid-feedback">
               <div *ngIf="loanForm.percentageClaimedByEmployee.errors.required">Percent Claim is mandatory</div>
               <div *ngIf="loanForm.percentageClaimedByEmployee.errors?.max">Max 100 is allowed</div>
            </div>
         </div>
              </div>
         <div class="row mt-4 mb-10"  >
                 <div class="col-sm-6 col-md-3">
                    <label class="form-label">Sanction Date</label>
                    <div class="form-group">
                       <div class="input-group">
                          <div class="input-group-prepend">
                             <span class="input-group-text"><i
                                class="fa fa-calendar"></i></span>
                          </div>
                          <input [bsConfig]="{ dateInputFormat: 'DD-MMM-YYYY' }" formControlName="loanSanctionedDate" data-provide="datepicker"
                            data-date-autoclose="true" class="form-control"
                            [minDate]="minFormDate"
                            [maxDate]="maxFromDate" placeholder="Sanction Date" bsDatepicker
                            [ngClass]="{ 'is-invalid': loansubmitted && loanForm.loanSanctionedDate.errors }">
                          <div *ngIf="loansubmitted && loanForm.loanSanctionedDate.errors" class="invalid-feedback">
                             <div *ngIf="loanForm.loanSanctionedDate.errors.required">From Date is mandatory</div>
                          </div>
                       </div>
                    </div>
                 </div>

                 <div class="col-sm-6 col-md-3">
                  <label class="form-label">End Date</label>
                  <div class="form-group">
                     <div class="input-group">
                        <div class="input-group-prepend">
                           <span class="input-group-text"><i
                              class="fa fa-calendar"></i></span>
                        </div>
                        <input [bsConfig]="{ dateInputFormat: 'DD-MMM-YYYY' }" formControlName="loanEndDate" data-provide="datepicker"
                          data-date-autoclose="true" class="form-control"
                          [minDate]="minFormDate"
                          [maxDate]="maxFromDate" placeholder="End Date" bsDatepicker
                          [ngClass]="{ 'is-invalid': loansubmitted && loanForm.loanEndDate.errors }"
                        >
                        <div *ngIf="loansubmitted && loanForm.loanEndDate.errors" class="invalid-feedback">
                           <div *ngIf="loanForm.loanEndDate.errors.required">From Date is mandatory</div>
                        </div>
                     </div>
                  </div>
               </div>
              </div>
              <div class="row mt-15">

                <div class="col-12">
                   <div class="float-right mb-15">
                      <button type="button" class="btn btn-primary btn-sm " tooltip="Add " (click) ="addLoanDetails()"><b>
                        <i class="fa fa-plus"></i></b> Add</button>
                   </div>
                </div>
             </div>
              </div>
              <div class="row mt-30" >
                 <div class="col-12 col-md-12 col-sm-12">
                    <div class="table-responsive Custom_Table ">
                       <table class="table table-striped table-bordered table-hover m-b-0">
                          <thead class="thead-dark">
                             <tr>
                                <th scope="col" class="wd-9">Sr No.</th>
                                <th scope="col" class="wd-14">Lender Name</th>
                                <th scope="col" class="wd-14">Loan Amount</th>
                                <th scope="col" class="wd-20">Sanction Date</th>
                                <th scope="col" class="wd-19">End Date</th>
                                <th scope="col" class="wd-14">Action</th>

                             </tr>
                          </thead>
                          <tbody>
                             <tr *ngFor="let loanDetail of loanDetailGridData ;  let i = index">
                                <td class="wd-9">
                                   <span tooltip="{{i+1}}">
                                   {{i+1}}
                                   </span>
                                </td>
                                <td class="wd-14">
                                   <span tooltip="{{loanDetail.lenderName}}">
                                   {{loanDetail.lenderName}}
                                   </span>
                                </td>
                                <td class="wd-14">
                                   <span tooltip="{{loanDetail.loanAmount| number:'1.2-2'}}">
                                   {{loanDetail.loanAmount| number:'1.2-2'}}
                                   </span>
                                </td>
                                <td class="wd-20">
                                   <span tooltip="{{loanDetail.loanSanctionedDate | date :'dd-MMM-yyyy'  }}">
                                   {{loanDetail.loanSanctionedDate | date :"dd-MMM-yyyy"}}
                                   </span>
                                </td>
                                <td class="wd-19 align-right">
                                  <span tooltip="{{loanDetail.loanEndDate | date :'dd-MMM-yyyy'  }}">
                                    {{loanDetail.loanEndDate | date :"dd-MMM-yyyy"}}
                                    </span>
                                </td>

                             </tr>
                             <tr *ngIf="!loanDetailGridData?.length">
                                <td colspan="7">
                                   <span class="font-14 font500 align-center text-red">No
                                   Data Available</span>
                                </td>
                             </tr>
                          </tbody>
                       </table>
                    </div>
                 </div>
              </div>
           </fieldset>
        </div>
     </div>
     <div class="row mt-30">
        <div class="col-12">
           <div class="card">
              <div class="mb-10 row">
                 <div class="col-md-6">
                    <h3 class="font-14 text-purple font-bold">Upload Documents</h3>
                 </div>
                 <div class="col-md-6">
                    <span class="font-bold text-link float-right"></span>
                 </div>
              </div>
              <div class="row">
                 <div class="col-md-9">
                    <div class="table-responsive Custom_Table">
                       <table class="table table-striped table-hover table-bordered m-b-0">
                          <thead class="thead-dark">
                             <tr>
                                <th scope="col" class="font700 wd-8">Sr No.</th>
                                <th scope="col" class="font700 wd-40">Document Name</th>
                                <th scope="col" class="font700 wd-40">Attachment</th>
                                <th scope="col" class="font700 wd-12">Action</th>
                             </tr>
                          </thead>
                          <tbody>
                             <tr>
                                <th scope="row"><span tooltip="1">1</span></th>
                                <td><span tooltip="Premium Receipt/ Premium Statement"></span>Property(Index 2)</td>
                                <td><span *ngFor ="let item of propertyIndex"  class="text-orange" tooltip="{{item.name}},"><i
                                   class="fa fa-paperclip"
                                   aria-hidden="true"></i>&nbsp;{{item.name}},</span></td>
                                <td>
                                   <i class="fa fa-upload font-16 text-blue cursor-pointer" tooltip="Upload" (click)="UploadModal(tempPropertyIndex)"
                                    data-toggle="modal" data-target="#UploadModal"></i>&nbsp;&nbsp;
                                </td>
                             </tr>
                             <tr>
                              <th scope="row"><span tooltip="2">2</span></th>
                              <td><span tooltip="Premium Receipt/ Premium Statement"></span>Stamp Duty And Registration Charges Document</td>
                              <td><span *ngFor ="let item of stampDutyRegistration"  class="text-orange" tooltip="{{item.name}},"><i
                                 class="fa fa-paperclip"
                                 aria-hidden="true"></i>&nbsp;{{item.name}},</span></td>
                              <td>
                                 <i class="fa fa-upload font-16 text-blue cursor-pointer" tooltip="Upload" (click)="UploadModal(tempStampDuty)"
                                  data-toggle="modal" data-target="#UploadModal"></i>&nbsp;&nbsp;
                              </td>
                           </tr>
                           <tr>
                            <th scope="row"><span tooltip="3">3</span></th>
                            <td><span tooltip="Premium Receipt/ Premium Statement"></span>Loan Sanction Letter</td>
                            <td><span *ngFor ="let item of loanSanctionLetter"  class="text-orange" tooltip="{{item.name}},"><i
                               class="fa fa-paperclip"
                               aria-hidden="true"></i>&nbsp;{{item.name}},</span></td>
                            <td>
                               <i class="fa fa-upload font-16 text-blue cursor-pointer" tooltip="Upload" (click)="UploadModal(tempLoanLetter)"
                                data-toggle="modal" data-target="#UploadModal"></i>&nbsp;&nbsp;
                            </td>
                         </tr>
                         <tr>
                          <th scope="row"><span tooltip="4">4</span></th>
                          <td><span tooltip="Premium Receipt/ Premium Statement"></span>Possession Letter</td>
                          <td><span *ngFor ="let item of possessionLetter"  class="text-orange" tooltip="{{item.name}},"><i
                             class="fa fa-paperclip"
                             aria-hidden="true"></i>&nbsp;{{item.name}},</span></td>
                          <td>
                             <i class="fa fa-upload font-16 text-blue cursor-pointer" tooltip="Upload" (click)="UploadModal(tempPossessionLetter)"
                              data-toggle="modal" data-target="#UploadModal"></i>&nbsp;&nbsp;
                          </td>
                       </tr>

                          </tbody>
                       </table>
                    </div>
                 </div>
              </div>
           </div>
        </div>
     </div>
     <!-- <div class="row mt-25">
        <div class="col-md-3">
           <label class="custom-control custom-checkbox custom-control-inline pl-45">
           <input formControlName="active" type="checkbox" class="custom-control-input"
              name="example-inline-checkbox1" value="option1" checked
              (change)="deactivateRemark()">
           <span class="custom-control-label">Active </span>
           </label>
        </div>
        <div class="col-md-3" *ngIf="hideRemarkDiv">
           <label class="form-label pl-10">Remark</label>
           <textarea formControlName="remark" [ngClass]="{'form-submitted': formDirective.submitted}" class="form-control ml-10" rows="1"></textarea>
        </div>
     </div> -->
     <div class="row mt-15">
        <div class="col-12">
           <div class="float-right mb-15">
              <button type="submit" class="custom_button custom_btn btn-bg-green btn-labeled btn-labeled-left ripple" tooltip="Save"><b>
                <i class="fa fa-floppy-o"></i></b> Save</button>
           </div>
        </div>
     </div>
     <div class="row mt-20">
        <div class="col-12">
           <div class="card">
              <div class="mb-0">
                 <h3 class="font-14 text-purple font-bold">Summary</h3>
              </div>
              <div class="">
                 <div class="table-responsive Custom_Table">
                  <table class="table table-striped table-hover table-bordered m-b-0">
                    <thead class="thead-dark">
                        <tr>
                          <th scope="col" class="font700 wd-8">Sr No.</th>
                            <th scope="col" class="wd-15">Property Name</th>
                            <th scope="col" class="wd-10">Possession Date</th>
                            <th scope="col" class="wd-10">Action</th>


                        </tr>
                    </thead>
                    <tbody>
                        <tr *ngFor="let summary of masterGridData; let i = index">
                          <td class="wd-2">
                            <span tooltip="{{i+1}}">
                            {{i+1}}
                            </span>
                         </td>
                            <td class="align-left wd-12"><span tooltip="{{summary.propertyName}}">{{summary.propertyName}}</span>
                            </td>
                            <td class="wd-10"><span tooltip="{{summary.possessionDate | date : 'dd-MMM-yyyy'}} ">{{summary.possessionDate| date : 'dd-MMM-yyyy'}}</span>
                            </td>

                            <td class="wd-5">
                                <i class="fa fa-edit font-16 text-dark-green cursor-pointer" (click)="editMaster(i)" tooltip="Edit"></i> &nbsp;&nbsp;
                            </td>
                        </tr>
                        <tr *ngIf="!masterGridData?.length">
                            <td colspan="10">
                                <span class="font-14 font500 align-center text-red">No Data
                    Available</span>
                            </td>
                        </tr>
                    </tbody>
                </table>
                 </div>
              </div>
           </div>
        </div>
     </div>
     </fieldset>
  <!-- </div> -->
  </form>
  <ng-template #tempPropertyIndex>
    <div class="modal-header">
       <h5 class="modal-title" id="UploadModalLabel">Upload Document</h5>
       <button type="button" (click)="modalRef.hide()" class="close" data-dismiss="modal" aria-label="Close"><span
          aria-hidden="true">×</span></button>
    </div>
    <div class="modal-body">
       <div class="card">
          <div class="card-body">
             <div class="row clearfix">
                <!-- <div class="col-md-12">
                   <label class="form-label">Upload File here :</label>
                </div> -->
                <div class="col-md-12">
                   <div class="fileuploadbox bg-color-lightgray">
                      <label class="filelabel">
                      <i class="fa fa-upload">
                      </i>
                      <span class="title">
                      Choose file
                      </span>
                      <input class="FileUpload1" class="dropify" (change)="onMasterUpload($event,'propertyIndex');" accept=".jpg , .jpeg, .pdf , .png"
                         id="FileInput" type="file" multiple/>
                      </label>
                   </div>
                   <div *ngIf="propertyIndex.length > 0 " class="fileuploadbox">
                     Selected files
                      <label *ngFor="let item of propertyIndex;  let index = index;" class="filelabeldisplay">
                         <div class="text-ellipsis"><i class="fa fa-paperclip">
                            </i>
                            <span class="title">
                            {{ item.name }}
                            </span>
                         </div>
                         <div>
                            <i class="fa fa-times text-red font-18" (click)="removeSelectedLicMasterDocument(index , 'propertyIndex')"></i>
                         </div>
                      </label>
                   </div>
                </div>
                <div class="col-md-12 mt-10">
                   <label class="form-label">Remark</label>
                </div>
                <div class="col-md-12">
                   <textarea class="form-control" [(ngModel)]="documentRemark" rows="2"></textarea>
                </div>
             </div>
          </div>
       </div>
    </div>
    <div class="modal-footer">
       <button type="button" class="btn btn-secondary" (click)="modalRef.hide()">Ok</button>
    </div>
 </ng-template>
 <ng-template #tempStampDuty>
  <div class="modal-header">
     <h5 class="modal-title" id="UploadModalLabel">Upload Document</h5>
     <button type="button" (click)="modalRef.hide()" class="close" data-dismiss="modal" aria-label="Close"><span
        aria-hidden="true">×</span></button>
  </div>
  <div class="modal-body">
     <div class="card">
        <div class="card-body">
           <div class="row clearfix">
              <!-- <div class="col-md-12">
                 <label class="form-label">Upload File here :</label>
              </div> -->
              <div class="col-md-12">
                 <div class="fileuploadbox bg-color-lightgray">
                    <label class="filelabel">
                    <i class="fa fa-upload">
                    </i>
                    <span class="title">
                    Choose file
                    </span>
                    <input class="FileUpload1" class="dropify" (change)="onMasterUpload($event,'stampDutyRegistration');" accept=".jpg , .jpeg, .pdf , .png"
                       id="FileInput" type="file" multiple/>
                    </label>
                 </div>
                 <div *ngIf="stampDutyRegistration.length > 0 " class="fileuploadbox">
                   Selected files
                    <label *ngFor="let item of stampDutyRegistration;  let index = index;" class="filelabeldisplay">
                       <div class="text-ellipsis"><i class="fa fa-paperclip">
                          </i>
                          <span class="title">
                          {{ item.name }}
                          </span>
                       </div>
                       <div>
                          <i class="fa fa-times text-red font-18" (click)="removeSelectedLicMasterDocument(index , 'stampDutyRegistration')"></i>
                       </div>
                    </label>
                 </div>
              </div>
              <div class="col-md-12 mt-10">
                 <label class="form-label">Remark</label>
              </div>
              <div class="col-md-12">
                 <textarea class="form-control" [(ngModel)]="documentRemark" rows="2"></textarea>
              </div>
           </div>
        </div>
     </div>
  </div>
  <div class="modal-footer">
     <button type="button" class="btn btn-secondary" (click)="modalRef.hide()">Ok</button>
  </div>
</ng-template>
<ng-template #tempLoanLetter>
  <div class="modal-header">
     <h5 class="modal-title" id="UploadModalLabel">Upload Document</h5>
     <button type="button" (click)="modalRef.hide()" class="close" data-dismiss="modal" aria-label="Close"><span
        aria-hidden="true">×</span></button>
  </div>
  <div class="modal-body">
     <div class="card">
        <div class="card-body">
           <div class="row clearfix">
              <!-- <div class="col-md-12">
                 <label class="form-label">Upload File here :</label>
              </div> -->
              <div class="col-md-12">
                 <div class="fileuploadbox bg-color-lightgray">
                    <label class="filelabel">
                    <i class="fa fa-upload">
                    </i>
                    <span class="title">
                    Choose file
                    </span>
                    <input class="FileUpload1" class="dropify" (change)="onMasterUpload($event,'loanSanctionLetter');" accept=".jpg , .jpeg, .pdf , .png"
                       id="FileInput" type="file" multiple/>
                    </label>
                 </div>
                 <div *ngIf="loanSanctionLetter.length > 0 " class="fileuploadbox">
                   Selected files
                    <label *ngFor="let item of loanSanctionLetter;  let index = index;" class="filelabeldisplay">
                       <div class="text-ellipsis"><i class="fa fa-paperclip">
                          </i>
                          <span class="title">
                          {{ item.name }}
                          </span>
                       </div>
                       <div>
                          <i class="fa fa-times text-red font-18" (click)="removeSelectedLicMasterDocument(index , 'loanSanctionLetter')"></i>
                       </div>
                    </label>
                 </div>
              </div>
              <div class="col-md-12 mt-10">
                 <label class="form-label">Remark</label>
              </div>
              <div class="col-md-12">
                 <textarea class="form-control" [(ngModel)]="documentRemark" rows="2"></textarea>
              </div>
           </div>
        </div>
     </div>
  </div>
  <div class="modal-footer">
     <button type="button" class="btn btn-secondary" (click)="modalRef.hide()">Ok</button>
  </div>
</ng-template>
<ng-template #tempPossessionLetter>
  <div class="modal-header">
     <h5 class="modal-title" id="UploadModalLabel">Upload Document</h5>
     <button type="button" (click)="modalRef.hide()" class="close" data-dismiss="modal" aria-label="Close"><span
        aria-hidden="true">×</span></button>
  </div>
  <div class="modal-body">
     <div class="card">
        <div class="card-body">
           <div class="row clearfix">
              <!-- <div class="col-md-12">
                 <label class="form-label">Upload File here :</label>
              </div> -->
              <div class="col-md-12">
                 <div class="fileuploadbox bg-color-lightgray">
                    <label class="filelabel">
                    <i class="fa fa-upload">
                    </i>
                    <span class="title">
                    Choose file
                    </span>
                    <input class="FileUpload1" class="dropify" (change)="onMasterUpload($event,'possessionLetter');" accept=".jpg , .jpeg, .pdf , .png"
                       id="FileInput" type="file" multiple/>
                    </label>
                 </div>
                 <div *ngIf="possessionLetter.length > 0 " class="fileuploadbox">
                   Selected files
                    <label *ngFor="let item of possessionLetter;  let index = index;" class="filelabeldisplay">
                       <div class="text-ellipsis"><i class="fa fa-paperclip">
                          </i>
                          <span class="title">
                          {{ item.name }}
                          </span>
                       </div>
                       <div>
                          <i class="fa fa-times text-red font-18" (click)="removeSelectedLicMasterDocument(index , 'possessionLetter')"></i>
                       </div>
                    </label>
                 </div>
              </div>
              <div class="col-md-12 mt-10">
                 <label class="form-label">Remark</label>
              </div>
              <div class="col-md-12">
                 <textarea class="form-control" [(ngModel)]="documentRemark" rows="2"></textarea>
              </div>
           </div>
        </div>
     </div>
  </div>
  <div class="modal-footer">
     <button type="button" class="btn btn-secondary" (click)="modalRef.hide()">Ok</button>
  </div>
</ng-template>

