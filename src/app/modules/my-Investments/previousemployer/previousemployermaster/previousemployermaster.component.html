<div class="row mb-15 mt-4">
    <div class="col-md-12">
        <label class="mt-2 highlightlabel font-13 font600"><span class="text-red">*</span>Note :
       Details of benefits availed under Chapter VI-A (including section 80-C) to be updated in the respective forms in
       the portal
     </label>
    </div>
</div>
<!-- previous EmployerDetails Master Form -->
<form class="card" role="form" (ngSubmit)="addMaster(previousEmployerDetailsform,formDirective)" [formGroup]="previousEmployerDetailsform" #formDirective="ngForm" method="post" novalidate>
    <!-- <div class="tabview-contents"> -->
    <br>
    <fieldset id="contentToConvert">
        <legend>Previous Employer Details</legend>
        <!--    <div formGroupName="previousEmployerDetailsMaster"[formGroup]="previousEmployerDetailsform" #formDirective_="ngForm"> -->
        <div class="row">
            <div class="col-sm-6 col-md-3">
                <label class="form-label"><b>Previous Employer Name</b></label>
                    <select name="previousEmployerName" id="previousEmployerName" formControlName="name" (change)='OnSelectionPreviousEmployment()'
                    class="form-control custom-select" >
                    <option [ngValue]="null">Select</option>
                    <option *ngFor="let employelist of previousEmployList" [value]="employelist.value" >
                        {{employelist.label}}
                      </option>
                  </select>
               
            </div>
            <div class="col-sm-6 col-md-3">
                <label class="form-label"><b> Address </b></label>
                <input type="text" formControlName="address" class="form-control" onkeypress="return /[0-9a-zA-Z ' ]/i.test(event.key)" placeholder="Enter Address" [ngClass]="{'is-invalid': previousEmployerDetailssubmitted && previousEmployerDetailsMaster.address.errors }">
                <div *ngIf="previousEmployerDetailssubmitted && previousEmployerDetailsMaster.address.errors" class="invalid-feedback">
                    <div *ngIf="previousEmployerDetailsMaster.address.errors.required"> Address is mandatory</div>
                </div>
            </div>
            <div class="col-sm-6 col-md-3">
                <label class="form-label"><b> PAN </b></label>
                <input type="text" maxlength="12" minlength="10" formControlName="pan" placeholder="Enter PAN Number" class="form-control" onkeypress="return /[0-9a-zA-Z ]/i.test(event.key)" pattern="^[A-Za-z]{5}[0-9]{4}[A-Za-z]$" name="PAN" [ngClass]="{'is-invalid': previousEmployerDetailssubmitted && previousEmployerDetailsMaster.pan.errors }">
                <div *ngIf="previousEmployerDetailssubmitted && previousEmployerDetailsMaster.pan.errors" class="invalid-feedback">
                    <div *ngIf="previousEmployerDetailsMaster.pan.errors.required">PAN Number is Mandatory</div>
                    <div *ngIf="previousEmployerDetailsMaster.pan.errors?.pattern">Enter valid PAN Number</div>
                </div>
            </div>
            <div class="col-sm-6 col-md-3">
                <label class="form-label"><b> TAN </b></label>
                <input type="text" maxlength="12" minlength="10" formControlName="tan" placeholder="Enter TAN Number" class="form-control" onkeypress="return /[0-9a-zA-Z ]/i.test(event.key)" pattern="^[A-Za-z]{5}[0-9]{4}[A-Za-z]$" name="TAN" [ngClass]="{ 'is-invalid': previousEmployerDetailssubmitted && previousEmployerDetailsMaster.tan.errors }">
                <div *ngIf="previousEmployerDetailssubmitted && previousEmployerDetailsMaster.tan.errors" class="invalid-feedback">
                    <div *ngIf="previousEmployerDetailsMaster.tan.errors.required">TAN Number is Mandatory</div>
                    <div *ngIf="previousEmployerDetailsMaster.tan.errors?.pattern">Enter valid TAN Number</div>
                </div>
            </div>
        </div>
        <div class="row mb-15 mt-4">
            <div class="col-md-12">
                <h3 class="font-14 text-purple font-bold"><span>*</span> Period Of Employment</h3>             
            </div>
        </div>
        <div class="row">
            <div class="col-sm-6 col-md-3">
                <label class="form-label">Date Of Joining</label>
                <div class="form-group">
                    <div class="input-group">
                        <div class="input-group-prepend">
                            <span class="input-group-text"><i class="fa fa-calendar"></i></span>
                        </div>
                        <input [bsConfig]="{ dateInputFormat: 'DD-MMM-YYYY' }" formControlName="dateOfJoining" data-provide="datepicker" data-date-autoclose="true" class="form-control" (bsValueChange)="setPaymentDetailToDate()" placeholder="Date Of Joining" bsDatepicker 
                            [ngClass]="{ 'is-invalid': previousEmployerDetailssubmitted && previousEmployerDetailsMaster.dateOfJoining.errors }">
                        <div *ngIf="previousEmployerDetailssubmitted && previousEmployerDetailsMaster.dateOfJoining.errors" class="invalid-feedback">
                            <div *ngIf="previousEmployerDetailsMaster.dateOfJoining.errors.required">Date Of Joining mandatory</div>
                        </div>
                    </div>
                </div>
            </div>
            <div class="col-sm-6 col-md-3">
                <label class="form-label"><b> Date Of Leaving </b></label>
                <div class="form-group">
                    <div class="input-group">
                        <div class="input-group-prepend">
                            <span class="input-group-text"><i class="fa fa-calendar"></i></span>
                        </div>
                        <input [bsConfig]="{ dateInputFormat: 'DD-MMM-YYYY' }" formControlName="dateOfLeaving" data-provide="datepicker" data-date-autoclose="true" class="form-control" (bsValueChange)="checkFinancialYearStartDateWithPaymentDetailToDate()" placeholder="Date of Leaving"
                            bsDatepicker [minDate]="paymentDetailMinDate" [maxDate]="previousDate" [ngClass]="{ 'is-invalid': previousEmployerDetailssubmitted && previousEmployerDetailsMaster.dateOfLeaving.errors }">
                        <div *ngIf="previousEmployerDetailssubmitted && previousEmployerDetailsMaster.dateOfLeaving.errors" class="invalid-feedback">
                            <div *ngIf="previousEmployerDetailsMaster.dateOfLeaving.errors.required">Date of Leaving mandatory</div>
                        </div>
                    </div>
                </div>
            </div>
            <div class="col-sm-6 col-md-3">
                <label class="form-label"><b> Type Of Regime </b></label>
                <select name="Address_Copy_From" id="regime" placeholder="Copy Address" formControlName="typeOfRegime" class="form-control custom-select">
              <option>Old</option>
              <option>New</option>
           </select>
            </div>
        </div>
      
    </fieldset>
    <div class="row mt-30">
        <div class="col-12">
            <div class="card">
                <div class="mb-10 row">
                    <div class="col-md-6">
                        <h3 class="font-14 text-purple font-bold">Upload Documents</h3>
                    </div>
                    <div class="col-md-6">
                        <span class="font-bold text-link float-right"></span>
                    </div>
                </div>
                <div class="row">
                    <div class="col-md-9">
                        <div class="table-responsive Custom_Table">
                            <table class="table table-striped table-hover table-bordered m-b-0">
                                <thead class="thead-dark">
                                    <tr>
                                        <th scope="col" class="font700 wd-8">Sr No.</th>
                                        <th scope="col" class="font700 wd-30">Document Name</th>
                                        <th scope="col" class="font700 wd-40">Attachment</th>
                                        <th scope="col" class="font700 wd-12">Action</th>
                                    </tr>
                                </thead>
                                <tbody>
                                    <tr>
                                        <th scope="row"><span tooltip="1">1</span></th>

                                        <td><span tooltip="Tax Computation Statement"></span>Tax Computation Statement</td>
                                        <td>
                                            <span *ngFor="let item of masterfilesArray; let j = index" class="text-orange"
                                              tooltip="{{ item.name }}">
                                              <i class="fa fa-paperclip" aria-hidden="true"></i>&nbsp; {{ item.name }},
                                            </span>
                                          </td>

                                        <td>
                                            <i class="fa fa-upload font-16 text-blue cursor-pointer" tooltip="Upload" (click)="UploadModal(previousEmployerDetailsIndex)" data-toggle="modal" data-target="#UploadModal">
                     </i>&nbsp;&nbsp;
                                        </td>
                                    </tr>
                                </tbody>
                            </table>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <div class="row mt-15">
        <div class="col-12">
            <div class="float-right mb-15">
                <button type="submit" class="custom_button custom_btn btn-bg-green btn-labeled btn-labeled-left ripple" tooltip="Save"><b><i class="fa fa-floppy-o"></i></b> Save</button> &nbsp;
                <button type="button" tooltip="Cancel" class="custom_button custom_btn bg-btn-red btn-labeled btn-labeled-left" (click)="cancelEdit()"><b><i class="fa fa-times"></i></b> Cancel</button>
     
            </div>
        </div>
    </div>
    <div class="mb-0 row">
        <div class="col-md-6">
            <h3 class="font-14 text-purple font-bold">Summary</h3>
        </div>
        <div class="col-md-6">
            <span class="font-bold text-link float-right"></span>
        </div>
    </div>
    <div class="row mt-10">
        <div class="col-12">
            <div class="table-responsive Custom_Table">
                <table class="table table-striped table-hover table-bordered m-b-0">
                    <thead class="thead-dark">
                        <tr>
                            <th scope="col" class="wd-10">Sr.No.</th>
                            <th scope="col" class="wd-15">Employer Name</th>
                            <th scope="col" class="wd-20">Date Of Joining</th>
                            <th scope="col" class="wd-20">Date Of Leaving</th>
                            <th scope="col" class="wd-15">Regime</th>
                            <th scope="col" class="wd-15">Action</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr *ngFor="let summary of masterGridData; let i = index">
                            <td class="wd-2">
                                <span tooltip="{{i+1}}">
                   {{i+1}}
                </span>
                            </td>
                            <td class="wd-10">
                                <span><span tooltip="{{summary.name}}">{{summary.name}}</span></span>
                            </td>
                            <td>
                                <span><span tooltip="{{summary.dateOfJoining | date :'dd-MMM-yyyy' }}">{{summary.dateOfJoining | date :'dd-MMM-yyyy'}}</span></span>
                            </td>
                            <td class="wd-15">
                                <span><span tooltip="{{summary.dateOfLeaving | date :'dd-MMM-yyyy' }}">{{summary.dateOfLeaving | date :'dd-MMM-yyyy' }}</span></span>
                            </td>
                            <td class="wd-15 align-right">
                                <span><span tooltip="{{summary.typeOfRegime}}">{{summary.typeOfRegime}}</span></span>
                            </td>
                            <td class="wd-10">
                                <i class="fa fa-edit font-16 text-dark-green cursor-pointer" (click)="editMaster(i)" tooltip="Edit"></i> &nbsp;
                            </td>
                        </tr>
                        <tr *ngIf="!masterGridData?.length">
                            <td colspan="10">
                                <span class="font-14 font500 align-center text-red">No Data Available</span>
                            </td>
                        </tr>
                    </tbody>
                </table>
            </div>
        </div>
    </div>
</form>


<ng-template #previousEmployerDetailsIndex>
    <div class="modal-header">
        <h5 class="modal-title" id="UploadModalLabel">Upload Document</h5>
        <button type="button" (click)="modalRef.hide()" class="close" data-dismiss="modal" aria-label="Close"><span
         aria-hidden="true">Ã—</span></button>
    </div>
    <div class="modal-body">
        
        <div class="card">
            <div class="card-body">
               <div class="row clearfix">
                  <!-- <div class="col-md-12">
                        <label class="form-label">Upload File here :</label>
                        </div> -->
                  <div class="col-md-12">
                     <div class="fileuploadbox bg-color-lightgray">
                        <label class="filelabel">
                           <i class="fa fa-upload">
                           </i>
                           <span class="title">
                              Choose file
                           </span>
                           <input class="FileUpload1" class="dropify"
                              (change)="onMasterUpload($event);"
                              accept=".jpg , .jpeg, .pdf , .png" id="FileInput" type="file" multiple />
                        </label>
                     </div>
                     <div *ngIf="masterfilesArray.length > 0 " class="fileuploadbox">
                        Selected files
                        <label *ngFor="let item of masterfilesArray;  let index = index;"
                           class="filelabeldisplay">
                           <div class="text-ellipsis"><i class="fa fa-paperclip">
                              </i>
                              <span class="title">
                                 {{ item.name }}
                              </span>
                           </div>
                           <div>
                              <i class="fa fa-times text-red font-18"
                                 (click)="removeSelectedRentAgreementDocumentDetailDocument(index)"></i>
                                 
                           </div>
                        </label>
                     </div>
                  </div>
                  <div class="col-md-12 mt-10">
                     <label class="form-label">Remark</label>
                  </div>
                  <div class="col-md-12">
                     <textarea class="form-control" [(ngModel)]="documentRemark" rows="2"></textarea>
                  </div>
               </div>
            </div>
         </div>
    </div>
    <div class="modal-footer">
        <button type="button" class="btn btn-secondary" (click)="modalRef.hide()">Ok</button>
    </div>
</ng-template>
