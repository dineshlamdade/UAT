<div class="tabview-contents">
  <div class="row mb-15" *ngIf="isDisabled">
    <div class="col-md-12">
      <label class="mt-2 highlightlabel font-13 font600"><span class="text-red">*</span> Select Property for prof
        submission
      </label>
    </div>
  </div>
  <div class="row d-flex">
    <!-- <div class="col-12 mr-0 pr-0" *ngIf="isDisabled">
 </div> -->
    <div class="ml-2 pl-1 pr-0">
      <label class="form-label mt-2">Previous Employer Name
        <span class="text-red"></span></label>
    </div>
    <div class="col-md-3 pr-0">
      <select name="HouseName " class="form-control custom-select"
      (change)="selectedTransactionInstName($event.target.value)">
      <option *ngFor="let previousEmployer of previousEmployerTransactionDetailList" [value]="previousEmployer.value"
        [selected]="previousEmployer.value == globalInstitution">
        {{ previousEmployer.label }}
      </option>
    </select>
    </div>  
  </div>
  <div *ngFor="let item of transactionDetail; let j = index">
    <div class="row pt-10 mt-10 bg-color-light_gray d-flex">
      <div class="ml-2 pl-1 pr-0">
        <label class="form-label mt-1">Previous Employer Name:</label>
      </div>
      <div class="ml-2 pl-1 pr-0 col-md-1">
        <label class="font-12 text-ellipsis mt-1" placement="top" [adaptivePosition]="false"
          tooltip="{{ item.propertyName }}">
          {{ item.name }}
        </label>
      </div>
      <div class="ml-2 pl-1 pr-0">
        <label class="form-label mt-1 pl-10">Address:</label>
      </div>
      <div class="ml-2 pl-1 pr-0 col-md-1">
        <label class="font-12 text-ellipsis mt-1" placement="top" [adaptivePosition]="false"
          tooltip="{{ item.address }}">
          {{ item.address }}
        </label>
      </div>
      <div class="ml-4 pl-1 pr-0">
        <label class="form-label mt-1">PAN:</label>
      </div>
      <div class="ml-2 pl-1 pr-0 col-md-1">
        <label class="font-12 text-ellipsis mt-1" placement="top" [adaptivePosition]="false"
          tooltip="{{ item.pan }}">
          {{ item.pan }}
        </label>
      </div>

      <div class="ml-4 pl-1 pr-0">
        <label class="form-label mt-1">TAN:</label>
      </div>
      <div class="ml-2 pl-1 pr-0 col-md-1">
        <label class="font-12 text-ellipsis mt-1" placement="top" [adaptivePosition]="false"
          tooltip="{{ item.tan }}">
          {{ item.tan }}
        </label>
      </div>

      <!-- <div class="ml-2 pl-1 pr-0">
        <label class="form-label mt-1 pl-10">Date Of Joining</label>
      </div>
      <div class="ml-1 pl-1 pr-0 col-md-1">
        <label class="font-12 text-ellipsis mt-1" placement="top" [adaptivePosition]="false"
          tooltip="{{ item.dateOfJoining }}">
          {{ item.dateOfJoining | date: 'dd-MMM-yyyy'}}
        </label>
      </div>
      <div class="ml-2 pl-1 pr-0">
        <label class="form-label mt-1 pl-10">Date Of Leaving</label>
      </div>
      <div class="ml-1 pl-1 pr-0 col-md-1">
        <label class="font-12 text-ellipsis mt-1" placement="top" [adaptivePosition]="false"
          tooltip="{{ item.dateOfLeaving }}">
          {{ item.dateOfLeaving | date: 'dd-MMM-yyyy'}}
        </label>
      </div> -->
      </div>
    <div class="row mt-15">
      <div class="col-12">
        <div class="table-responsive Custom_Table">
          <table class="table table-striped table-hover table-bordered m-b-0">
            <thead class="thead-dark">
              <tr>
                <th rowspan="2" class="wd-18 font700">Actual</th>
                <th colspan="2" class="wd-24 font700">Receipt Amount</th>
                <th rowspan="2" class="wd-16 font700">Remark</th>
                <th rowspan="2" class="wd-14">PS.ID.</th>
                <th rowspan="2" class="wd-16 font700">Transaction Status</th>
              </tr>
              <tr>
                <th>Rejected</th>
                <th>Approved</th>
              </tr>
            </thead>
            <tbody>
              <tr *ngFor="
                   let summary of item.previousEmployerTransactionDetailList;
                   let i = index;
                   count as c ">    
                   <td>
                    <input type="text" id="actualAmountPerMonth{{ summary.houseRentalTransactionDetailId }}"
                      name="actualAmountPerMonth{{ summary.houseRentalTransactionDetailId }}"
                      [(ngModel)]="summary.actualAmountPerMonth"
                      (change)="onActualAmountChange(summary, i, j)" class="form-control align-right" />
                  </td>           
             <!--    <td>
                  <input type="text" id="actualAmountPerMonth{{ summary.houseRentalTransactionDetailId }}"
                    name="actualAmountPerMonth{{ summary.houseRentalTransactionDetailId }}"
                    [disabled]="initialArrayIndex[j] > i" [(ngModel)]="summary.actualAmountPerMonth"
                    (change)="onActualAmountChange(summary, i, j)" class="form-control align-right" />
                </td> -->
                <td>
                  <input type="text" [ngModel]="summary.rejectedAmountPerMonth | number: '1.2-2'"
                    class="form-control align-right" disabled />
                </td>
                <td>
                  <input type="text" [ngModel]="summary.approvedAmountPerMonth | number: '1.2-2'"
                    class="form-control align-right" disabled />
                </td>
                <td>
                  <span tooltip="{{ summary.remark }}">
                    {{ summary.remark }}
                  </span>
                </td>
                <td>
                  <span tooltip="{{ summary.proofSubmissionId }}" *ngIf="summary.transactionStatus === 'Submitted'">
                    <i class="fa fa-clipboard font-16 text-cyan" aria-hidden="true"></i>
                    <!-- {{ summary.proofSubmissionId }} -->
                  </span>
                </td>
                <td class="text-orange font700">
                  <span tooltip="{{ summary.transactionStatus }}">
                    {{ summary.transactionStatus }}
                  </span>
                </td>
              </tr>
              <tr *ngIf="!isDisabled && canEdit">
                <!--    <td *ngIf="previousEmployeeList?.length" colspan="12" -->
                <td colspan="12" class="align-right font700 font-16 text-light-green cursor-pointer">
                  <i class="fa fa-plus-circle font-20" tooltip="Add" (click)="addRowInList(declarationService, j)"></i>
                  <span tooltip="Add Row">Add</span>&nbsp;&nbsp;
                  <i class="fa fa-times font-16 text-red cursor-pointer" *ngIf="hideRemoveRow" tooltip="Cancel"
                    (click)="deleteRow(j)"></i>
                </td>
              </tr>
              <tr>
                <td colspan="1" class="bg-lightgray font-18 font700">Total</td>
                  <td class="bg-lightgray font-18 font700 align-right">
                  <span tooltip=" {{ item.declarationTotal | number: '1.2-2' }}" class="padding-right-12">
                    {{ item.declarationTotal | number: "1.2-2" }}
                  </span>
                </td>
                <td class="bg-lightgray font-18 font700 align-right"></td>
                <td class="bg-lightgray font-18 font700 align-right">
                  <span tooltip="{{ item.actualTotal | number: '1.2-2' }}" class="padding-right-12">
                    {{ item.actualTotal | number: "1.2-2" }}
                  </span>
                </td>
                <td class="bg-lightgray font-18 font700 align-right">
                  <span tooltip=" {{ item.rejectedAmountPerMonth | number: '1.2-2' }}" class="padding-right-12">
                    {{ item.rejectedAmountPerMonth | number: "1.2-2" }}
                  </span>
                </td>
                <td class="bg-lightgray font-18 font700 align-right">
                  <span tooltip="{{ item.approvedAmountPerMonth | number: '1.2-2' }}" class="padding-right-12">
                    {{ item.approvedAmountPerMonth | number: "1.2-2" }}
                  </span>
                </td>
                
              </tr>
            </tbody>
          </table>
        </div>
      </div>
    </div>
    <hr />
  </div>

  <div class="row mt-15" *ngIf="transactionDetail?.length">
    <div class="col-12">
      <div class="table-responsive Custom_Table">
        <!-- <table class="table table-striped table-hover table-bordered m-b-0" *ngIf="previousEmployeeList?.length"> -->
        <table class="table table-striped table-hover table-bordered m-b-0">
          <tbody>
            <tr>
              <td class="bg-gray font-18 font700 wd-10">Grand Total</td>
              <td class="bg-gray font-18 font700 align-right wd-9">
                <span class="padding-right-12" placement="left" tooltip="{{ grandDeclarationTotal | number: '1.2-2' }}">
                  {{ grandDeclarationTotal | number: "1.2-2" }}
                </span>
              </td>
              <td class="bg-gray font-18 font700 align-right wd-11"></td>
              <td class="bg-gray font-18 font700 align-right wd-9">
                <span class="padding-right-12" placement="left" tooltip="{{ grandActualTotal | number: '1.2-2' }}">
                  {{ grandActualTotal | number: "1.2-2" }}
                </span>
              </td>
              <td class="bg-gray font-18 font700 align-right wd-9">
                <span class="padding-right-12" placement="left" tooltip=" {{ grandRejectedTotal | number: '1.2-2' }}">
                  {{ grandRejectedTotal | number: "1.2-2" }}
                </span>
              </td>
              <td class="bg-gray font-18 font700 align-right wd-9">
                <span class="padding-right-12" placement="left" tooltip="{{ grandApprovedTotal | number: '1.2-2' }}">
                  {{ grandApprovedTotal | number: "1.2-2" }}
                </span>
              </td>           
            </tr>
          </tbody>
        </table>
      </div>
    </div>
  </div>

  <div class="row mt-30">
    <div class="col-12">
      <div class="card">
        <div class="mb-10 row">
          <div class="col-md-6">
            <h3 class="font-14 text-purple font-bold">Upload Documents</h3>
          </div>
          <div class="col-md-6">
            <span class="font-bold text-link float-right"></span>
          </div>
        </div>
        <div class="row">
          <div class="col-md-12">
            <div class="table-responsive Custom_Table">
              <table class="table table-striped table-hover table-bordered m-b-0">
                <thead class="thead-dark">
                  <tr>
                    <th scope="col" class="font700 wd-8">Sr No.</th>
                    <th scope="col" class="font700 wd-40">Document Name</th>
                    <th scope="col" class="font700 wd-20">Attachment</th>                    
                    <th scope="col" class="font700 wd-12">Action</th>
                  </tr>
                </thead>
                <tbody>
                  <tr>
                    <th scope="row"><span tooltip="1">1</span></th>
                    <td>
                      <span tooltip="Premium Receipt/ Premium Statement"></span>Form 12B
                    </td>
                    <td>
                      <span *ngFor="let item of rentReciept; let j = index" class="text-orange"
                        tooltip="{{ item.name }}">
                        <i class="fa fa-paperclip" aria-hidden="true"></i>&nbsp;
                        {{ item.name }},
                      </span>
                    </td>                 
                 <!--    <td>
                      <i class="fa fa-upload font-16 text-blue cursor-pointer" tooltip="Upload" (click)="
                           !enableFileUpload
                             ? sweetalertWarning(
                                 'Please select transaction to Upload Document')
                             : UploadModal(template4)
                         "></i>&nbsp;&nbsp;
                      <i class="fa fa-times font-16 text-red cursor-pointer" tooltip="Cancel" (click)="removeDocument()"></i>
                    </td> -->
                    <td>
                      <i class="fa fa-files-o  font-16 text-dark-green cursor-pointer"tooltip="File Download"(click)="openForm12BModal(template4)" ></i>&nbsp;&nbsp;&nbsp;
                      <i class="fa fa-upload  font-16 text-dark-green cursor-pointer"tooltip="File Generate"(click)=" UploadModal(previousEmployerDetailsIndex)" ></i>&nbsp;&nbsp;&nbsp;
                      
                      </td>
                  </tr>
                </tbody>
              </table>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
  <div class="row mt-10" *ngIf="transactionDetail?.length && !isDisabled && canEdit">
    <div class="col-12">
      <div class="float-right mb-15">
        <button type="button" (click)="
             receiptAmount < globalSelectedAmount
               ? sweetalertError('Receipt Amount should be equal or greater than Actual Amount of Selected lines')
               : upload()" class="custom_button custom_btn btn-bg-green btn-labeled btn-labeled-left ripple">
          <b><i class="fa fa-floppy-o"></i></b> Save
        </button>
      </div>
    </div>
  </div>
  <div class="row mt-30">
    <div class="col-12">
      <div class="card">
        <div class="mb-0">
          <h3 class="font-14 text-purple font-bold">Document Details</h3>
        </div>
        <div class="">
          <div class="table-responsive Custom_Table">
            <table class="table table-striped table-hover table-bordered m-b-0">
              <thead class="thead-dark">
                <tr>
                  <th scope="col" class="font700 wd-15">PS.ID.</th>
                  <th scope="col" class="font700 wd-20">Previous Employer Name</th>
                  <th scope="col" class="font700 wd-15">Date Of Joining</th>
                  <th scope="col" class="font700 wd-10">Date Of Leaving</th>
                  <th scope="col" class="font700 wd-15">Document Name</th>
                  <th scope="col" class="font700 wd-10">Action</th>
                </tr>
              </thead>
              <tbody>
                <tr *ngFor="
                     let documentSummary of documentDetailList;
                     let documentIndex = index
                   ">
                  <td>
                    <span tooltip="{{ documentSummary.proofSubmissionId }}">
                      {{ documentSummary.proofSubmissionId }}
                    </span>
                  </td>
                  <td>

                    <span tooltip="{{ documentSummary.particular }}">
                      {{ documentSummary.particular }}
                    </span>
                    <!--  {{ documentSummary.licMasterList[0].institution }} -->
                  </td>
                  <td>
                    <span tooltip="{{
                         documentSummary.dateOfSubmission | date: 'dd-MMM-yyyy'
                       }}">
                      {{
                      documentSummary.dateOfSubmission | date: "dd-MMM-yyyy"
                      }}</span>
                  </td>
                  <td>
                    <span tooltip="{{
                         documentSummary.receiptAmount | number: '1.2-2'
                       }}">
                      {{ documentSummary.receiptAmount | number: "1.2-2" }}
                    </span>
                  </td>                 
                  <td>
                    <div class="custom_Label_badge">
                      <button class="btn btn-bg-green text-white"
                        (click)="docViewer(template3, documentSummary.documentDetailList)">
                        Documents
                      </button>
                      <span class="Label_badge">{{
                        documentSummary.documentDetailList.length
                        }}</span>
                    </div>
                  </td>
                  <td>
                    <i class="fa fa-eye font-16 text-blue cursor-pointer" tooltip="View"></i>&nbsp;&nbsp;
                    <i class="fa fa-download font-16 text-blue cursor-pointer" tooltip="Download"></i>
                    <div *ngFor="let doc of urlArray" hidden>
                      <iframe style="height: 100vh; width: 100%; display: block" [src]="doc.blobURI"
                        provider="google"></iframe>
                    </div>
                    &nbsp;&nbsp;
                    <i *ngIf="canEdit" class="fa fa-edit font-16 text-dark-green cursor-pointer" (click)="
                         declarationEditUpload(
                           template2,
                           documentSummary.proofSubmissionId
                         );
                         viewDocumentDetail = true
                       " tooltip="Edit"></i>
                  </td>
                </tr>
              </tbody>
            </table>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>


<ng-template #template1>
  <div class="modal-header">
    <h5 class="modal-title" id="jasdjgh">View Documents</h5>
    <button type="button" (click)="modalRef.hide()" class="close" data-dismiss="modal" aria-label="Close">
      <span aria-hidden="true">×</span>
    </button>
  </div>
  <!-- <button (click)="previousDocViewer()" [disabled]="urlIndex == 0">previous</button>
<button (click)="nextDocViewer()" [disabled]="urlIndex == (urlArray.length-1)">next</button> -->
  <div class="card-body">
    <div class="row">
      <div class="col-md-1">
        <button type="button" class="btn active Next_Previous_Btn" tooltip="Previous Document"
          (click)="previousDocViewer()" [disabled]="urlIndex == 0">
          <i class="fa fa-angle-left text-white font-30 p-10"></i>
        </button>
      </div>
      <div class="col-md-10">
        <iframe style="height: 100vh; width: 100%; display: block" [src]="urlSafe" provider="google"></iframe>
      </div>
      <div class="col-md-1">
        <button type="button" class="btn active Next_Previous_Btn" tooltip="Next Document" (click)="nextDocViewer()"
          [disabled]="urlIndex == urlArray.length - 1">
          <i class="fa fa-angle-right text-white font-30 p-10"></i>
        </button>
      </div>
    </div>
  </div>
  <div class="modal-footer">
    <!-- <button type="button" class="btn btn-primary">Save</button>  -->
    <button type="button" class="btn btn-secondary" (click)="modalRef.hide()">
      Ok
    </button>
  </div>
</ng-template>


<ng-template #template2>
  <div class="modal-header">
    <h5 class="modal-title" id="jasdjgh" *ngIf="viewDocumentDetail">
      Edit Document Details
    </h5>
    <h5 class="modal-title" id="jasdjgh" *ngIf="!viewDocumentDetail">
      View Document Details
    </h5>
    <button type="button" (click)="modalRef.hide()" class="close" data-dismiss="modal" aria-label="Close">
      <span aria-hidden="true">×</span>
    </button>
  </div>
  <div class="card-body Box-Spacing">

    <div *ngFor="let item of editTransactionUpload; let j = index">
      <div class="row pt-10 mt-10 bg-color-light_gray d-flex">
        <div class="ml-2 pl-1 pr-0">
          <label class="form-label mt-1">House Name :</label>
        </div>
        <div class="ml-2 pl-1 pr-0 col-md-1">
          <label class="font-12 text-ellipsis mt-1" placement="top" [adaptivePosition]="false"
            tooltip="{{ item.propertyName }}">
            {{ item.propertyName }}
          </label>
        </div>
        <div class="ml-2 pl-1 pr-0">
          <label class="form-label mt-1 pl-10">House Address:</label>
        </div>
        <div class="ml-2 pl-1 pr-0 col-md-1">
          <label class="font-12 text-ellipsis mt-1" placement="top" [adaptivePosition]="false"
            tooltip="{{ item.address }}">
            {{ item.address }}
          </label>
        </div>
        <div class="ml-2 pl-1 pr-0">
          <label class="form-label mt-1">Landlord Name:</label>
        </div>
        <div class="ml-2 pl-1 pr-0 col-md-1">
          <label class="font-12 text-ellipsis mt-1" placement="top" [adaptivePosition]="false"
            tooltip="{{ item.landLordName }}">
            {{ item.landLordName }}
          </label>
        </div>

        <div class="ml-2 pl-1 pr-0">
          <label class="form-label mt-1 pl-10">Date Range</label>
        </div>
        <div class="ml-1 pl-1 pr-0 col-md-1">
          <label class="font-12 text-ellipsis mt-1" placement="top" [adaptivePosition]="false"
            tooltip="{{ item.fromDate }}">
            {{ item.fromDate | date: 'dd-MMM-yyyy'}}
          </label>
        </div>
        <div class="ml-2 pl-1 pr-0">
          <label class="form-label mt-1 pl-10">To</label>
        </div>
        <div class="ml-1 pl-1 pr-0 col-md-1">
          <label class="font-12 text-ellipsis mt-1" placement="top" [adaptivePosition]="false"
            tooltip="{{ item.toDate }}">
            {{ item.toDate | date: 'dd-MMM-yyyy'}}
          </label>
        </div>
      </div>
      <div class="row mt-15">
        <div class="col-12">
          <div class="table-responsive Custom_Table">
            <table class="table table-striped table-hover table-bordered m-b-0">
              <thead class="thead-dark">
                <tr>
                  <th rowspan="2" class="wd-9 font700">Actual</th>
                  <th colspan="2" class="wd-17 font700">Receipt Amount</th>
                  <th rowspan="2" class="wd-7 font700">Remark</th>
                  <th rowspan="2" class="wd-8">PS.ID.</th>
                  <th rowspan="2" class="wd-10 font700">Transaction Status</th>
                </tr>
                <tr>
                  <th>Rejected</th>
                  <th>Approved</th>
                </tr>
              </thead>
              <tbody>
                <tr *ngFor="
                     let summary of item.previousEmployerTransactionDetailList;
                     let i = index;
                     count as c
                   ">
                  <td>
                 
                  <td>
                    <input type="text" id="actualAmountPerMonth{{ summary.houseRentalTransactionDetailId }}"
                      name="actualAmountPerMonth{{ summary.houseRentalTransactionDetailId }}"
                      [disabled]="initialArrayIndex[j] > i" [(ngModel)]="summary.actualAmountPerMonth"
                      (change)="onActualAmountChange(summary, i, j)" class="form-control align-right" />
                  </td>
                  <td>
                    <input type="text" [ngModel]="summary.rejectedAmountPerMonth | number: '1.2-2'"
                      class="form-control align-right" disabled />
                  </td>
                  <td>
                    <input type="text" [ngModel]="summary.approvedAmountPerMonth | number: '1.2-2'"
                      class="form-control align-right" disabled />
                  </td>
                  <td>
                    <span tooltip="{{ summary.remark }}">
                      {{ summary.remark }}
                    </span>
                  </td>
                  <td>
                    <span tooltip="{{ summary.proofSubmissionId }}" *ngIf="summary.transactionStatus === 'Submitted'">
                      <i class="fa fa-clipboard font-16 text-cyan" aria-hidden="true"></i>
                      <!-- {{ summary.proofSubmissionId }} -->
                    </span>
                  </td>
                  <td class="text-orange font700">
                    <span tooltip="{{ summary.transactionStatus }}">
                      {{ summary.transactionStatus }}
                    </span>
                  </td>
                </tr>
                <tr>
                  <td colspan="1" class="bg-lightgray font-18 font700">Total</td>
                  <td class="bg-lightgray font-18 font700 align-right"></td>
                 <td class="bg-lightgray font-18 font700 align-right">
                    <span tooltip="{{ item.actualTotal | number: '1.2-2' }}" class="padding-right-12">
                      {{ item.actualTotal | number: "1.2-2" }}
                    </span>
                  </td>
                  <td class="bg-lightgray font-18 font700 align-right">
                    <span tooltip=" {{ item.rejectedAmountPerMonth | number: '1.2-2' }}" class="padding-right-12">
                      {{ item.rejectedAmountPerMonth | number: "1.2-2" }}
                    </span>
                  </td>
                  <td class="bg-lightgray font-18 font700 align-right">
                    <span tooltip="{{ item.approvedAmountPerMonth | number: '1.2-2' }}" class="padding-right-12">
                      {{ item.approvedAmountPerMonth | number: "1.2-2" }}
                    </span>
                  </td>
                  <td class="bg-lightgray font-18 font700"></td>
                  <td class="bg-lightgray font-18 font700"></td>
                  <td class="bg-lightgray font-18 font700"></td>
                </tr>
              </tbody>
            </table>
          </div>
        </div>
      </div>
      <hr />
    </div>

    <div class="row mt-15" *ngIf="transactionDetail?.length">
      <div class="col-12">
        <div class="table-responsive Custom_Table">
          <!-- <table class="table table-striped table-hover table-bordered m-b-0" *ngIf="previousEmployeeList?.length"> -->
          <table class="table table-striped table-hover table-bordered m-b-0">
            <tbody>
              <tr>
                <td class="bg-gray font-18 font700 wd-11">Grand Total</td>
                <!-- <td class="bg-gray font-18 font700 align-right wd-4"></td> -->
                <!--    <td class="bg-gray font-18 font700 wd-4"></td> -->
                <td class="bg-gray font-18 font700 align-right wd-8"></td>
                <td class="bg-gray font-18 font700 align-right wd-9">
                  <span class="padding-right-12" placement="left" tooltip="{{
                    grandDeclarationTotal | number: '1.2-2'
                     }}">
                    {{ grandDeclarationTotal | number: "1.2-2" }}
                    <!-- {{ grandDeclarationTotalEditModal | number: "1.2-2" }} -->
                  </span>
                </td>
                <td class="bg-gray font-18 font700 align-right wd-11"></td>
                <td class="bg-gray font-18 font700 align-right wd-9">
                  <span class="padding-right-12" placement="left" tooltip="{{ grandActualTotal | number: '1.2-2' }}">
                    {{ grandActualTotal | number: "1.2-2" }}
                    <!-- tooltip="{{ grandActualTotalEditModal | number: '1.2-2' }}">
                    {{ grandActualTotalEditModal | number: "1.2-2" }} -->
                  </span>
                </td>
                <td class="bg-gray font-18 font700 align-right wd-9">
                  <span class="padding-right-12" placement="left" tooltip=" {{
                    grandRejectedTotal | number: '1.2-2'
                     }}">
                    {{ grandRejectedTotal | number: "1.2-2" }}
                    <!-- {{ grandRejectedTotalEditModal | number: "1.2-2" }} -->
                  </span>
                </td>
                <td class="bg-gray font-18 font700 align-right wd-9">
                  <span class="padding-right-12" placement="left" tooltip="{{
                    grandApprovedTotal | number: '1.2-2'
                     }}">
                    {{ grandApprovedTotal | number: "1.2-2" }}
                    <!-- {{ grandApprovedTotalEditModal | number: "1.2-2" }} -->
                  </span>
                </td>
                <td class="bg-gray font-18 font700 wd-7"></td>
                <td class="bg-gray font-18 font700 wd-7"></td>
                <td class="bg-gray font-18 font700 wd-10"></td>
              </tr>
            </tbody>
          </table>
        </div>
      </div>
    </div>
    <hr />
    <div class="row" *ngIf="viewDocumentDetail">
      <div class="col-12">
        <h3 class="font-14 text-purple font-bold" id="UploadModalLabel">
          Upload Documents
        </h3>
      </div>
    </div>
    <div class="row clearfix mt-10" *ngIf="viewDocumentDetail">
      <div class="col-md-12">
        <div class="row clearfix">
          <div class="col-md-3">
            <div class="fileuploadbox bg-color-lightgray">
              <label class="filelabel">
                <i class="fa fa-upload"> </i>
                <span class="title"> Choose file </span>
                <input class="FileUpload1" class="dropify" (change)="onUploadInEditCase($event)"
                  accept=".jpg , .jpeg, .pdf , .png" id="FileInput" type="file" multiple />
              </label>
            </div>

            <div *ngIf="editrentRecieptArray.length > 0" class="fileuploadbox">
              <span class="text-purple font-14 font700">Selected Files</span>
              <label *ngFor="let item of editrentRecieptArray; let index = index" class="filelabeldisplay">
                <div class="text-ellipsis">
                  <i class="fa fa-paperclip"> </i>
                  <span class="title" tooltip="{{ item.name }}">
                    {{ item.name }}
                  </span>
                </div>
                <div>
                  <i class="fa fa-times text-red font-18"
                    (click)="removeSelectedLicTransactionDocumentInEditCase(index)"></i>
                </div>
              </label>
            </div>
          </div>
          <div class="col-md-12 mt-6">
            <label class="form-label">Remark</label>
          </div>
          <div class="col-md-6">
            <textarea class="form-control" [(ngModel)]="documentRemark" rows="2"></textarea>
          </div>
        </div>
      </div>
    </div>

    <hr class="mt-20" />
    <div class="row mt-20">
      <div class="col-12">
        <h3 class="font-14 text-purple font-bold" id="UploadModalLabel">
          Uploaded Documents
        </h3>
      </div>
    </div>
    <div class="row">
      <div class="col-md-12">
        <div class="row clearfix mt-10">
          <div class="col-md-12" *ngFor="let doc of urlArray">
            <div class="labelbox" placement="left" tooltip="{{ doc.fileName }}">
              <i class="fa fa-paperclip text-orange"></i> &nbsp; {{ doc.fileName }}
            </div>
          </div>
          <!-- <div class="col-md-1">
              <i class="fa fa-eye font-16 text-blue font-900 mt-2" tooltip="View Document" (click)='modalRef.hide(); docViewer(template3)'></i>
              </div> -->
        </div>
      </div>
    </div>
  </div>

  <div class="modal-footer">
    <button
      type="button"
      tooltip="View Document"
      (click)="modalRef.hide(); docViewer(template1,urlArray)"
      class="custom_button custom_btn btn-bg-green btn-labeled btn-labeled-left"
    >
      <b><i class="fa fa-eye"></i></b> View
    </button>
    &nbsp;&nbsp;
    <button
      *ngIf="viewDocumentDetail"
      type="button"
      tooltip="Save Document"
      (click)="modalRef.hide(); uploadUpdateTransaction()"
      class="custom_button custom_btn btn-bg-green btn-labeled btn-labeled-left">
      <b><i class="fa fa-save"></i></b> Save
    </button>
  </div>

</ng-template>


<ng-template #template3>
  <div class="modal-header">
    <h5 class="modal-title" id="jasdjgh">Document Viewer</h5>
    <button type="button" (click)="modalRef.hide()" class="close" data-dismiss="modal" aria-label="Close">
      <span aria-hidden="true">×</span>
    </button>
  </div>
  <!-- <button (click)="previousDocViewer()" [disabled]="urlIndex == 0">previous</button>
 <button (click)="nextDocViewer()" [disabled]="urlIndex == (urlArray.length-1)">next</button> -->
  <div class="card-body">
    <div class="row">
      <div class="col-md-1">
        <button type="button" class="btn active Next_Previous_Btn" tooltip="Previous Document"
          (click)="previousDocViewer()" [disabled]="urlIndex == 0">
          <i class="fa fa-angle-left text-white font-30 p-10"></i>
        </button>
      </div>
      <div class="col-md-10">
        <iframe style="height: 100vh; width: 100%; display: block" [src]="urlSafe" provider="google"></iframe>
      </div>
      <div class="col-md-1">
        <button type="button" class="btn active Next_Previous_Btn" tooltip="Next Document" (click)="nextDocViewer()"
          [disabled]="urlIndex == urlArray.length - 1">
          <i class="fa fa-angle-right text-white font-30 p-10"></i>
        </button>
      </div>
    </div>
  </div>
  <div class="modal-footer">
    <!-- <button type="button" class="btn btn-primary">Save</button>  -->
    <button type="button" class="btn btn-secondary" (click)="modalRef.hide()">
      Ok
    </button>
  </div>
</ng-template>

<ng-template #template4>
  <div class="row mt-20">
      <div class="col-md-12">
          <div class="float-right">
              <button type="button" tooltip="Sign & Upload Form 12B" class="custom_button custom_btn btn-bg-green btn-labeled btn-labeled-left mr-10" (click)="openFormSign(template5)"><b><i class="fa fa-upload"></i></b>Sign & Upload Form 12B</button>
              <button type="submit" tooltip="download" class="custom_button custom_btn btn-bg-green btn-labeled btn-labeled-left mr-10" (click)="download()"><b><i class="fa fa-download"></i></b> Download </button>
              <button type="button" tooltip="Close" class="custom_button custom_btn btn-bg-green btn-labeled btn-labeled-left mr-10" (click)="modalRef.hide()"><b><i class="fa fa-times"></i></b>Close </button>
          </div>
      </div>
  </div>
  <div class="section-body mt-3">
      <div class="container-fluid" id="htmlData" #htmlData>
          <div class="row clearfix">
              <div class="col-12">
                  <div class="card">
                      <!--
                      <table  #htmlData> -->
                      <div class="card-body">
                          <div class="row mt-20">
                              <div class="col-md-12">
                                  <h5 class="text-center mb-0 mt-20 font-14">Form No. 12 B</h5>
                                  <label class="text-center form-label mb-0 mt-0">(See rule 26A)</label>
                              </div>
                          </div>


                          <div class="row mt-10">
                              <div class="col-md-8">
                                  <label class="mt-10 mb-0 form-label">Name and Address of the employee:.......................</label>
                              </div>
                              <div class="col-md-9">
                                  <span class="font-14 font700 text-purple">
                                
                                   </span>
                              </div>
                          </div>
                          <div class="row mt-10">
                              <div class="col-md-8">
                                  <label class="mt-10 mb-0 form-label">Permanent Account Number:........................</label>
                              </div>
                              <div class="col-md-9">
                                  <span class="font-14 font700 text-purple">

                                   </span>
                              </div>
                          </div>
                          <div class="row mt-10">
                              <div class="col-md-8">
                                  <label class="mt-10 mb-0 form-label">Residential Status....................</label>
                              </div>
                              <div class="col-md-9">
                                  <span class="font-14 font700 text-purple"></span>
                              </div>
                          </div>
                          <div class="row mt-20">
                              <div class="col-md-12">
                                  <div class="table-responsive Custom_Table">
                                      <table class="table table-bordered m-b-0">
                                          <thead class="thead-light">
                                              <tr>
                                                  <th rowspan="2" class="wd-5 text-bold">Sr. No.</th>
                                                  <th rowspan="2" class="text-bold">Name and address of employer(s)</th>
                                                  <th rowspan="2" class="text-bold">TAN of the employer(s) as alloted by the ITO</th>
                                                  <th rowspan="2" class="text-bold">Permanent Account Number of the employer(s)</th>
                                                  <th rowspan="2" class="text-bold">Period of employment</th>
                                                  <th colspan="3" class="text-bold">Particulars of salary as defined in section 17, paid or due to be paid to the employee during the year</th>
                                                  <th rowspan="2" class="text-bold">Total of columns 6,7 and 8</th>
                                                  <th rowspan="2" class="text-bold">Amount deducted in respect of life insurance premium, provident fund contribution, etc., to which section 80c applies (Give details)</th>
                                                  <th rowspan="2" class="text-bold">Total amount of tax deducted during the year (enclose certificate issued under section 203)</th>
                                                  <th rowspan="2" class="text-bold">Remarks</th>
                                              </tr>
                                              <tr>
                                                  <th class="text-bold">Total amount of salary excluding amounts required to be shown in columns 7 and 8</th>
                                                  <th class="text-bold">Total amount of house rent allowance, conveyance allowance and other allowances to the extent chargeable to tax [See section 10(13A) read with rule 2A and section 10(14)]</th>
                                                  <th class="text-bold">Value of perquisites and amount of accretion to employee's provident fund account (give details in the Annexure)</th>
                                              </tr>
                                              <tr>
                                                  <th class="text-bold text-center">(1)</th>
                                                  <th class="text-bold text-center">(2)</th>
                                                  <th class="text-bold text-center">(3)</th>
                                                  <th class="text-bold text-center">(4)</th>
                                                  <th class="text-bold text-center">(5)</th>
                                                  <th class="text-bold text-center">(6)</th>
                                                  <th class="text-bold text-center">(7)</th>
                                                  <th class="text-bold text-center">(8)</th>
                                                  <th class="text-bold text-center">(9)</th>
                                                  <th class="text-bold text-center">(10)</th>
                                                  <th class="text-bold text-center">(11)</th>
                                                  <th class="text-bold text-center">(12)</th>

                                              </tr>
                                          </thead>
                                          <tbody>
                                              <tr *ngFor="let summary of masterSummaryGridData; let i = index">
                                                  <td>
                                                      <span tooltip="{{i+1}}">
                                                       {{i+1}}
                                                    </span>
                                                  </td>
                                                  <td>
                                                      {{summary.name}} {{summary.address}}
                                                  </td>
                                                  <td>
                                                      {{summary.tan}}
                                                  </td>
                                                  <td>
                                                      {{summary.pan}}
                                                  </td>
                                                  <td>
                                                      {{summary.dateOfJoining | date :'dd-MMM-yyyy'}} <b>To</b> {{summary.dateOfLeaving | date :'dd-MMM-yyyy' }}
                                                  </td>
                                                  <td>
                                                      {{summary.fullyTaxableHeadsIncome}}
                                                  </td>
                                                  <td>
                                                      {{summary.headsWithExemptionIncome}}
                                                  </td>
                                                  <td>
                                                      {{summary.headsWithExemptionIncome}}
                                                  </td>
                                                  <td>
                                                      {{summary.taxableIncome}}
                                                  </td>
                                                  <td>
                                                      {{summary.benefitGivenUnder80C}}
                                                  </td>
                                                  <td>
                                                      {{summary.taxDeductedAtSource}}
                                                  </td>
                                                  <td>
                                                      {{summary.typeOfRegime}}
                                                  </td>
                                              </tr>
                                              <tr>
                                                  <td colspan="12" class="text-center text-bold">Verification</td>
                                              </tr>
                                              <tr>
                                                  <td colspan="12" class="align-left">
                                                      I, <span class="text-bold">  .................</span>,do hereby declare that what is stated above is true to the best of my knowledge and belief.
                                                  </td>
                                              </tr>
                                              <tr>
                                                  <td colspan="12" class="align-left">
                                                      <div>Place:</div>

                                                  </td>
                                              </tr>
                                              <tr>
                                                  <td colspan="12" class="align-right">
                                                      <div>Signature of the employee:</div>
                                                      <div class="preview" *ngIf="  ">
                                                          <img [src]="imageFile" style="width:200px; height:38px;float:right">
                                                      </div>
                                                      <div class="preview" *ngIf="imgFile">
                                                          <img [src]="imgFile" style="width:200px; height:38px;float: right;">
                                                      </div>
                                                  </td>
                                              </tr>
                                          </tbody>
                                      </table>
                                  </div>

                              </div>
                          </div>
                          <!--     <div class="row mt-20">
                               <div class="col-md-12">
                                   <div class="float-right">
                                       <button type="button" tooltip="Sign & Upload Form 12B" class="custom_button custom_btn btn-bg-green btn-labeled btn-labeled-left mr-10"><b><i class="fa fa-upload"></i></b>  Upload Form 12B </button>
                                       <button type="button" tooltip="Print" class="custom_button custom_btn btn-bg-green btn-labeled btn-labeled-left mr-10"><b><i class="fa fa-print"></i></b> Print </button>
                                       <button type="button" tooltip="Close" class="custom_button custom_btn btn-bg-green btn-labeled btn-labeled-left mr-10"><b><i class="fa fa-times"></i></b>Close </button>
                                   </div>
                               </div>
                           </div> -->

                      </div>
                      <!--
                      </table> -->
                  </div>
              </div>
          </div>
      </div>
      <!-- <div class="preview" *ngIf="imageFile">
          <img [src]="imageFile" style="width:200px; height:200px;float:right">
        </div> -->
  </div>

  <!--  <div class="preview" *ngIf="imgFile">
    <img [src]="imgFile" style="width:200px; height:200px;float: right;">
  </div> -->


  <!-- </div> -->
</ng-template>

<ng-template #previousEmployerDetailsIndex>
  <div class="modal-header">
    <h5 class="modal-title" id="UploadModalLabel">Upload Document</h5>
    <button type="button" (click)="modalRef.hide()" class="close" data-dismiss="modal" aria-label="Close">
      <span aria-hidden="true">×</span>
    </button>
  </div>
  <div class="modal-body">
    <div class="card">
      <div class="card-body">
        <div class="row clearfix">
          <div class="col-md-12">
            <div class="fileuploadbox bg-color-lightgray">
              <label class="filelabel">
                <i class="fa fa-upload"> </i>
                <span class="title"> Choose file </span>
                <input class="FileUpload1" class="dropify" (change)="onUpload($event)"
                  accept=".jpg , .jpeg, .pdf , .png" id="FileInput" type="file" multiple />
              </label>
            </div>
            <div *ngIf="rentReciept.length > 0" class="fileuploadbox">
              <span class="text-purple font-14 font700">Selected Files</span>
              <label *ngFor="let item of rentReciept; let index = index" class="filelabeldisplay">
                <div class="text-ellipsis">
                  <i class="fa fa-paperclip"> </i>
                  <span class="title" tooltip="{{ item.name }}">
                    {{ item.name }}
                  </span>
                </div>
                <div>
                  <i class="fa fa-times text-red font-18" (click)="removeSelectedLicTransactionDocument(index)"></i>
                </div>
              </label>
            </div>
          </div>
          <div class="col-md-12 mt-10">
            <label class="form-label">Remark</label>
          </div>
          <div class="col-md-12">
            <textarea class="form-control" [(ngModel)]="documentRemark" rows="2"></textarea>
          </div>
        </div>
      </div>
    </div>
  </div>
  <div class="modal-footer">
    <button type="button" class="btn btn-secondary" (click)="modalRef.hide()">
      Ok
    </button>
  </div>
</ng-template>

<ng-template #template5>
  <div class="modal-header">
      <h5 class="modal-title" id="UploadModalLabel">Upload Document</h5>
      <button type="button" (click)="modalRef.hide()" class="close" data-dismiss="modal" aria-label="Close"><span
        aria-hidden="true">×</span></button>
  </div>
  <div class="row ml-4">
      <section class=" col col-8">
          <label class="input input-file">
             <span class="button">
                 <input id="file1" type="file" name="file1" accept="image/*" file-actual="emp.empImagePath"
                 allowed-format="jpg,jpeg,png" (change)="onImageChange($event)">
              </span>
           </label>
      </section>
  </div>
  OR
  <div class="row ml-4">
      <span><h6>Your Signature Please</h6></span>
  </div>
  <div class="row ml-4">


      <!-- <signature-pad #signatureCanvas [options] ="signaturePadOptions" id ="signatureCanvas" (onBeginEvent) ="drawStart()"
    (onEndEvent) ="drawComplete()"> </signature-pad> -->

      <app-signature-pad [imagefile]=imagefile (imageFile)="getImageFile($event)"></app-signature-pad>

      <!-- <signature-pad [options]="signaturePadOptions" (onBeginEvent)="drawStart()" (onEndEvent)="drawComplete()"></signature-pad>' -->

      <!-- <div class="preview" *ngIf="imgFile">
       <img [src]="imgFile" style="width:400px; height:250px">
     </div> -->

  </div>
  <div class="modal-footer">
      <button type="button" class="btn btn-secondary" (click)="modalRef.hide()">Ok</button>
  </div>
</ng-template>