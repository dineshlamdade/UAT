<div class="tabview-contents">
  <div>
    <div class="row mt-15">
      <div class="col-12">
        <div class="table-responsive Custom_Table">
          <table class="table table-striped table-hover table-bordered m-b-0">
            <thead class="thead-dark"*ngIf="previousEmployeeList.length > 0">
              <tr>
                <th rowspan="2" class="wd-4">
                  <label class="custom-control custom-checkbox checkbox-center" tooltip="Select All">
                    <input type="checkbox" class="custom-control-input" name="select" />
                    <span class="custom-control-label"></span>
                  </label>
                </th>
                <th rowspan="2" class="wd-10 font700" *ngIf="previousEmployeeList?.length">
                  Previous Employer Name
                </th>
                <th rowspan="2" class="wd-10 font700">
                  <span tooltip="Donee">Donee</span>
                </th>
                <th rowspan="2" class="wd-11 font700">Purpose</th>
                <th rowspan="2" class="wd-9 font700">Declared</th>
                <th rowspan="2" class="wd-11 font700">Date of Payment</th>
                <th rowspan="2" class="wd-9 font700">Actual</th>
                <th colspan="2" class="wd-17 font700">Receipt Amount</th>
                <th rowspan="2" class="wd-7 font700">Remark</th>
                <th rowspan="2" class="wd-5">PS.ID.</th>
                <th rowspan="2" class="wd-12 font700">Transaction Status</th>
                <!-- <th rowspan="2" class="wd-10 font700">Action</th> -->
              </tr>
              <tr>
                <th>Rejected</th>
                <th>Approved</th>
              </tr>
            </thead>
            <thead class="thead-dark" *ngIf="!previousEmployeeList.length">
              <tr>
                <th rowspan="2" class="wd-4">
                  <label class="custom-control custom-checkbox checkbox-center" tooltip="Select All">
                    <input type="checkbox" class="custom-control-input" name="select" />
                    <span class="custom-control-label"></span>
                  </label>
                </th>
                <th rowspan="2" class="wd-10 font700">
                  <span tooltip="Donee">Donee</span>
                </th>
                <th rowspan="2" class="wd-11 font700">Purpose</th>
                <th rowspan="2" class="wd-9 font700">Declared</th>
                <th rowspan="2" class="wd-11 font700">Date of Payment</th>
                <th rowspan="2" class="wd-9 font700">Actual</th>
                <th colspan="2" class="wd-17 font700">Receipt Amount</th>
                <th rowspan="2" class="wd-7 font700">Remark</th>
                <th rowspan="2" class="wd-5">PS.ID.</th>
                <th rowspan="2" class="wd-12 font700">Transaction Status</th>
                <!-- <th rowspan="2" class="wd-10 font700">Action</th> -->
              </tr>
              <tr>
                <th>Rejected</th>
                <th>Approved</th>
              </tr>
            </thead>
            <tbody>
              <tr *ngFor="
                  let summary of transactionDetail;
                  let i = index; let j = index;
                  count as c
                ">
                <td>
                  <label class="custom-control custom-checkbox checkbox-center" *ngIf="isDisabled"
                    tooltip="Select donee for proof submission">
                    <input type="checkbox" [ngModel]="enableSelectAll"
                      [disabled]="isDisabled || summary.proofSubmissionId" (change)="
                      onSelectCheckBox(summary, $event, i);
                    " class="custom-control-input" value="option{{ summary.donations80GGTransactionId }}" />
                    <span class="custom-control-label"></span>
                  </label>
                  <label *ngIf="!isDisabled" class="custom-control custom-checkbox checkbox-center">
                    <input type="checkbox" [ngModel]="enableSelectAll"
                      [disabled]="isDisabled || summary.proofSubmissionId" (change)="
                      onSelectCheckBox(summary, $event, i);" class="custom-control-input"
                      value="option{{ summary.donations80GGTransactionId }}" />
                    <span class="custom-control-label"></span>
                  </label>
                </td>
                <td *ngIf="previousEmployeeList?.length">
                  <select name="Previous Employer Name" class="form-control custom-select"
                    (change)="updatePreviousEmpId($event, i)" [disabled]="
                      isDisabled || summary.transactionStatus === 'Submitted'
                    ">
                    <option [ngValue]="0">Select</option>
                    <option *ngFor="let previousEmployee of previousEmployeeList" [value]="previousEmployee.value"
                      [selected]="
                        previousEmployee.value == summary.previousEmployerId
                      ">
                      {{ previousEmployee.label }}
                    </option>
                  </select>
                </td>
                <td>
                  <input type="text"  class="form-control" onkeypress="return /[a-zA-Z' ]/i.test(event.key)" [ngModel]="summary.donee" [disabled]="summary.donee" />
                </td>
                <td>
                  <select name="Purpose" class="form-control custom-select" [disabled]="summary.purpose"
                    [ngModel]="summary.purpose">
                    <option [ngValue]="0">Select</option>
                    <option *ngFor="let purpose of purposeList" [value]="purpose.value">
                      {{purpose.label}}
                    </option>
                  </select>
                </td>


                <td>
                  <div class="custom_icon_badge">
                    <input type="text" id="declaredAmount{{
                        summary.donations80GGTransactionId
                      }}" name="declaredAmount{{
                        summary.donations80GGTransactionId
                      }}" [(ngModel)]="summary.declaredAmount"
                      [disabled]=" isDisabled || summary.transactionStatus === 'Submitted'"
                      class="form-control align-right" />
                  </div>
                </td>
                <td>
                  <input type="text" [ngModel]="summary.dateOfPayment | date: 'dd-MMM-yyyy'"
                    [minDate]="financialYearStartDate" [maxDate]="financialYearEndDate"
                    [bsConfig]="{ dateInputFormat: 'DD-MMM-YYYY' }" data-provide="datepicker" data-date-autoclose="true"
                    (ngModelChange)="summary.dateOfPayment = $event.toLocaleDateString();
                      setDateOfPaymentInEditCase(summary, i, j)" [disabled]="summary.transactionStatus=='Approved'"
                    class="form-control" bsDatepicker [disabled]="summary.dateOfPayment" />
                </td>

                <!-- <td>
                  <input type="text" [ngModel]="summary.dueDate | date: 'dd-MMM-yyyy'"
                    [minDate]="financialYearStartDate" [maxDate]="financialYearEndDate"
                    [bsConfig]="{ dateInputFormat: 'DD-MMM-YYYY' }" data-provide="datepicker" data-date-autoclose="true"
                    (ngModelChange)="
                      summary.dueDate = $event.toLocaleDateString();
                      setDateOfPayment(summary, i, j)
                    " [disabled]="
                      isDisabled || summary.transactionStatus === 'Submitted'
                    " class="form-control" bsDatepicker />
                </td> -->
                <td>
                  <input type="text" id="actualAmount{{ summary.donations80GGTransactionId }}" name="actualAmount{{
                      summary.donations80GGTransactionId
                    }}" [(ngModel)]="summary.actualAmount"
                    [disabled]=" isDisabled || summary.transactionStatus === 'Submitted'"
                    class="form-control align-right" />
                </td>
                <td>
                  <input type="text" [ngModel]="summary.amountRejected | number: '1.2-2'"
                    class="form-control align-right" disabled />
                </td>
                <td>
                  <input type="text" [ngModel]="summary.amountApproved | number: '1.2-2'"
                    class="form-control align-right" disabled />
                </td>
                <td>
                  <span tooltip="{{ summary.remark }}">
                    {{ summary.remark }}
                  </span>
                </td>
                <td>
                  <span tooltip="{{ summary.proofSubmissionId }}" *ngIf="summary.transactionStatus === 'Submitted'">
                    <i class="fa fa-clipboard font-16 text-cyan" aria-hidden="true"></i>
                    <!-- {{ summary.proofSubmissionId }} -->
                  </span>
                </td>
                <td class="text-orange font700">
                  <span tooltip="{{ summary.transactionStatus }}">
                    {{ summary.transactionStatus }}
                  </span>
                </td>
              </tr>
              <!-- <tr [formGroup]="tuitionFeesFormForm"> -->
              <tr role="form" (ngSubmit)="saveTransaction(formDirective)" [formGroup]="eightyGGAForm"
                #formDirective="ngForm" method="post" novalidate>
                <td>
                  <label class="custom-control custom-checkbox checkbox-center"
                    tooltip="Select donee for proof submission">
                    <input type="checkbox" formControlName="reactiveCheckbox"
                      (change)="onSelectReactiveCheckbox($event)" class="custom-control-input" />
                    <span class="custom-control-label"></span>
                  </label>
                  <!-- onSelectCheckBoxNew(); -->
                </td>

                <td *ngIf="previousEmployeeList?.length">
                  <select name="Previous Employer Name" formControlName="previousEmployerId"
                    class="form-control custom-select"
                    [ngClass]="{ 'is-invalid': submitted && masterForm.previousEmployerId.errors }">
                    <option [ngValue]="null">Select</option>
                    <option *ngFor="let previousEmployee of previousEmployeeList" [value]="previousEmployee.value">
                      {{previousEmployee.label}}
                    </option>
                  </select>
                </td>
                <td>
                  <input type="text"  onkeypress="return /[a-zA-Z' ]/i.test(event.key)" formControlName="donee"
                    class="form-control" placeholder="Enter donee Name" [ngClass]="{
                      'is-invalid': submitted && masterForm.donee.errors
                    }" />
                </td>
                <td>
                  <select class="form-control custom-select" formControlName="purpose"
                    [ngClass]="{'is-invalid': submitted && masterForm.purpose.errors}">
                    <option [ngValue]="null">Select</option>
                    <option *ngFor="let purpose of purposeList" [value]="purpose.value">
                      {{purpose.label}}
                    </option>
                  </select>
                </td>

                <td>
                  <div class="custom_icon_badge">
                    <input type="text" onkeypress="return /[0-9 ]/i.test(event.key)" formControlName="declaredAmount"
                      class="form-control" placeholder="Enter Declared Amount" [ngClass]="{
                        'is-invalid':
                          submitted && masterForm.declaredAmount.errors
                      }" />
                  </div>
                  <!-- (change)="setActualAmout($event)" -->
                </td>
                <td>
                  <input [bsConfig]="{ dateInputFormat: 'DD-MMM-YYYY' }" formControlName="dateOfPayment"
                    data-provide="datepicker" data-date-autoclose="true" class="form-control"
                    [ngClass]="{'is-invalid': submitted && masterForm.dateOfPayment.errors}" [maxDate]="today"
                    placeholder="Select Date" bsDatepicker>
                  <!-- [minDate]="minFormDate" [maxDate]="maxFromDate" placeholder="Select Date" bsDatepicker> -->
                </td>
                <td>
                  <input type="text" formControlName="actualAmount" class="form-control" [ngClass]="{
                      'is-invalid': submitted && masterForm.actualAmount.errors
                    }" disabled />
                </td>
                <td>
                  <input type="text" formControlName="amountApproved" class="form-control" disabled />
                </td>
                <td>
                  <input type="text" formControlName="amountRejected" class="form-control" disabled />
                </td>
                <td></td>
                <td></td>
                <td class="text-orange font700">
                  <input type="text" formControlName="transactionStatus" class="form-control" disabled />
                </td>
              </tr>
              <!-- <tr>
                <td colspan="12"
                  class="align-right font700 font-16 text-light-green cursor-pointer">
                  <i class="fa fa-plus-circle font-20" tooltip="Add" (click)="addRowInList(declarationService, transactionDetail.length + 1)"></i>
                  <span tooltip="Add Row">Add</span>&nbsp;&nbsp;
                  <i class="fa fa-times font-16 text-red cursor-pointer" *ngIf="hideRemoveRow" tooltip="Cancel"
                    (click)="deleteRow(transactionDetail.length + 1)"></i>
                </td>
              </tr> -->
              <tr>
                <td *ngIf="previousEmployeeList?.length" class="bg-lightgray font-18 font700 align-left">Total</td>
                <td *ngIf="!previousEmployeeList?.length" class="bg-lightgray font-18 font700 align-left">Total</td>
                <td *ngIf="previousEmployeeList?.length" class="bg-lightgray font-18 font700 align-left"></td>
                <td class="bg-lightgray font-18 font700 align-right"></td>
                <td class="bg-lightgray font-18 font700 align-right"></td>
                <td class="bg-lightgray font-18 font700 align-right">
                  <span tooltip=" {{ grandDeclarationTotal | number: '1.2-2' }}" class="padding-right-12">
                    {{ grandDeclarationTotal | number: "1.2-2" }}
                  </span>
                </td>
                <td class="bg-lightgray font-18 font700 align-right"></td>

                <td class="bg-lightgray font-18 font700 align-right">
                  <span tooltip="{{ grandActualTotal | number: '1.2-2' }}" class="padding-right-12">
                    {{ grandActualTotal | number: "1.2-2" }}
                  </span>
                </td>
                <td class="bg-lightgray font-18 font700 align-right">
                  <span tooltip=" {{ grandRejectedTotal | number: '1.2-2' }}" class="padding-right-12">
                    {{ grandRejectedTotal | number: "1.2-2" }}
                  </span>
                </td>
                <td class="bg-lightgray font-18 font700 align-right">
                  <span tooltip="{{ grandApprovedTotal | number: '1.2-2' }}" class="padding-right-12">
                    {{ grandApprovedTotal | number: "1.2-2" }}
                  </span>
                </td>
                <td class="bg-lightgray font-18 font700"></td>
                <td class="bg-lightgray font-18 font700"></td>
                <td class="bg-lightgray font-18 font700"></td>
              </tr>
            </tbody>
          </table>
        </div>
      </div>
    </div>
    <hr />
  </div>
  <div class="row mt-30">
    <div class="col-12">
      <div class="card">
        <div class="mb-0 row">
          <div class="col-md-6">
            <h3 class="font-14 text-purple font-bold">Upload Documents</h3>
          </div>
          <div class="col-md-6">
            <span class="font-bold text-link float-right"></span>
          </div>
        </div>
        <div class="row">
          <div class="col-md-12">
            <div class="table-responsive Custom_Table">
              <table class="table table-striped table-hover table-bordered m-b-0">
                <thead class="thead-dark">
                  <tr>
                    <th scope="col" class="font700 wd-8">Sr No.</th>
                    <th scope="col" class="font700 wd-40">Document Name</th>
                    <th scope="col" class="font700 wd-20">Attachment</th>
                    <th scope="col" class="font700 wd-16">
                      Total Selected Amount
                    </th>
                    <th scope="col" class="font700 wd-16">Receipt Amount</th>
                    <th scope="col" class="font700 wd-12">Action</th>
                  </tr>
                </thead>
                <tbody>
                  <tr>
                    <th scope="row"><span tooltip="1">1</span></th>
                    <td>
                      <span tooltip="Donation Certificate / Receipt"></span>Donation Certificate / Receipt
                    </td>
                    <td>
                      <span *ngFor="let item of filesArray; let j = index" class="text-orange"
                        tooltip="{{ item.name }}">
                        <i class="fa fa-paperclip" aria-hidden="true"></i>&nbsp;
                        {{ item.name }},
                      </span>
                    </td>
                    <td>
                      <span>
                        <input type="text" class="form-control align-right" [(ngModel)]="globalSelectedAmount"
                          [disabled]="true" />
                      </span>
                    </td>

                    <td>
                      <span>
                        <input type="text" onkeypress="return /[0-9]/i.test(event.key)" class="form-control align-right"
                          (blur)="changeReceiptAmountFormat()" [(ngModel)]="receiptAmount" />
                      </span>
                    </td>
                    <td>
                      <i class="fa fa-upload font-16 text-blue cursor-pointer" tooltip="Upload"
                        (click)="UploadModal(template4)" data-toggle="modal" data-target="#uploadModal"></i>&nbsp;&nbsp;
                    </td>
                  </tr>
                </tbody>
              </table>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>

  <div class="row mt-15">
    <div class="col-12">
      <div class="float-right mb-15">
        <button type="button" (click)="formDirective.ngSubmit.emit()"
          class="custom_button custom_btn btn-bg-green btn-labeled btn-labeled-left ripple" tooltip="Save">
          <b> <i class="fa fa-floppy-o"></i></b> Save
        </button>
      </div>
    </div>
  </div>
  <div class="row mt-30">
    <div class="col-12">
      <div class="card">
        <div class="mb-0">
          <h3 class="font-14 text-purple font-bold">Document Details</h3>
        </div>
        <div class="">
          <div class="table-responsive Custom_Table">
            <table class="table table-striped table-hover table-bordered m-b-0">
              <thead class="thead-dark">
                <tr>
                  <th scope="col" class="font700 wd-15">PS.ID.</th>
                  <th scope="col" class="font700 wd-15">Purpose</th>
                  <!-- <th scope="col" class="font700 wd-20">Document Name</th> -->

                  <th scope="col" class="font700 wd-15">Date Of Submission</th>
                  <th scope="col" class="font700 wd-10">Receipt Amount</th>
                  <th scope="col" class="font700 wd-15">Document Name</th>
                  <th scope="col" class="font700 wd-10">Action</th>
                </tr>
              </thead>
              <tbody>
                <tr *ngFor="
                  let documentSummary of documentDetailList;
                  let documentIndex = index let i = index">
                  <td>
                    <span tooltip="{{ documentSummary.proofSubmissionId }}"></span> {{ documentSummary.proofSubmissionId
                    }}
                  </td>
                  <td>
                    <span tooltip="{{ documentSummary.institutionName}}">
                      {{ documentSummary.institutionName}}
                    </span>
                  </td>

                  <td>
                    <span tooltip="{{
                      documentSummary.dateOfSubmission | date: 'dd-MMM-yyyy'
                    }}">
                      {{
                      documentSummary.dateOfSubmission | date: "dd-MMM-yyyy"
                      }}</span>
                  </td>
                  <td>
                    <span tooltip="{{
                      documentSummary.receiptAmount | number: '1.2-2'
                    }}">
                      {{ documentSummary.receiptAmount | number: "1.2-2" }}
                    </span>
                  </td>

                  <td>
                    <div class="custom_Label_badge">
                      <button class="btn btn-bg-green text-white"
                        (click)="docViewer(template3, documentSummary.documentDetailList)">
                        Documents
                      </button>
                      <span class="Label_badge">{{
                        documentSummary.documentDetailList.length
                        }}</span>
                    </div>
                  </td>
                  <td>
                    <i *ngIf="canEdit" class="fa fa-eye font-16 text-blue cursor-pointer" (click)="
                  editViewTransaction(
                      template2,
                      documentSummary.proofSubmissionId
                    );
                    viewTransactionDetail = false
                  " tooltip="view"></i> &nbsp;&nbsp;
                    <i *ngIf="canEdit" class="fa fa-edit font-16 text-dark-green cursor-pointer" (click)="
                    editViewTransaction(
                        template2,
                        documentSummary.proofSubmissionId
                      );
                      viewTransactionDetail = true
                    " tooltip="Edit"></i>
                  </td>
                </tr>
              </tbody>
            </table>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>

<ng-template #template1>
  <div class="modal-header">
    <h5 class="modal-title" id="UploadedDocumentModalLabel">
      Uploaded Document Details
    </h5>
    <button type="button" (click)="modalRef.hide()" class="close" data-dismiss="modal" aria-label="Close">
      <span aria-hidden="true">×</span>
    </button>
  </div>
  <div class="modal-body">
    <div class="card">
      <div class="card-body pb-0 mt-0 mb-0">
        <div class="row clearfix" *ngFor="let proofSubmissionFile of proofSubmissionFileList">
          <div class="col-md-11">
            <div class="labelbox" tooltip="Document 1">
              <i class="fa fa-paperclip text-orange"></i> &nbsp; {{ proofSubmissionFile.fileName }}
            </div>
          </div>
          <div class="col-md-1">
            <i class="fa fa-eye font-16 text-blue font-900 mt-2" tooltip="View Document"></i>
          </div>
        </div>
      </div>
    </div>
  </div>
  <div class="modal-footer">
    <button type="button" class="btn btn-secondary" (click)="modalRef.hide()">
      Ok
    </button>
  </div>
</ng-template>

<ng-template #template2>
  <div class="modal-header">
    <h5 class="modal-title" id="jasdjgh" *ngIf="viewTransactionDetail">
      Edit Document Details
    </h5>
    <h5 class="modal-title" id="jasdjgh" *ngIf="!viewTransactionDetail">
      View Document Details
    </h5>
    <button type="button" (click)="modalRef.hide()" class="close" data-dismiss="modal" aria-label="Close">
      <span aria-hidden="true">×</span>
    </button>
  </div>
  <div class="card-body Box-Spacing">
    <div class="col-12">
      <div class="table-responsive Custom_Table">
        <table class="table table-striped table-hover table-bordered m-b-0">
          <thead class="thead-dark" *ngIf="previousEmployeeList?.length">
            <tr>

              <th rowspan="2" class="wd-10 font700">
                Previous Employer Name
              </th>
              <th rowspan="2" class="wd-10 font700">
                <span tooltip="Donee">Donee</span>
              </th>
              <th rowspan="2" class="wd-11 font700">Purpose</th>
              <th rowspan="2" class="wd-11 font700">Date of Payment</th>
              <th rowspan="2" class="wd-9 font700">Declared</th>
              <th rowspan="2" class="wd-9 font700">Actual</th>
              <th colspan="2" class="wd-17 font700">Receipt Amount</th>
              <th rowspan="2" class="wd-7 font700">Remark</th>
              <th rowspan="2" class="wd-5">PS.ID.</th>
              <th rowspan="2" class="wd-12 font700">Transaction Status</th>
              <!-- <th rowspan="2" class="wd-10 font700">Action</th> -->
            </tr>
            <tr>
              <th>Rejected</th>
              <th>Approved</th>
            </tr>
          </thead>
          <thead class="thead-dark" *ngIf="!previousEmployeeList.length">
            <tr>
              <th rowspan="2" class="wd-15 font700">
                <span>Donee</span>
              </th>
              <th rowspan="2" class="wd-11 font700">Purpose</th>
              <th rowspan="2" class="wd-11 font700">Date of Payment</th>
              <th rowspan="2" class="wd-9 font700">Declared</th>
              <th rowspan="2" class="wd-9 font700">Actual</th>
              <th colspan="2" class="wd-17 font700">Receipt Amount</th>
              <th rowspan="2" class="wd-7 font700">Remark</th>
              <th rowspan="2" class="wd-5">PS.ID.</th>
              <th rowspan="2" class="wd-12 font700">Transaction Status</th>
            </tr>
            <tr>
              <th>Rejected</th>
              <th>Approved</th>
            </tr>
          </thead>
          <tbody>
            <tr *ngFor="
                let summary of editTransactionUpload;
                let i = index; let j = index;
                count as c
              ">
              <td *ngIf="previousEmployeeList?.length">
                <select name="Previous Employer Name" class="form-control custom-select"
                  (change)="updatePreviousEmpId($event, i)" [disabled]="
                    isDisabled || summary.transactionStatus === 'Submitted'
                  ">
                  <option [ngValue]="0">Select</option>
                  <option *ngFor="let previousEmployee of previousEmployeeList" [value]="previousEmployee.value"
                    [selected]="
                      previousEmployee.value == summary.previousEmployerId
                    ">
                    {{ previousEmployee.label }}
                  </option>
                </select>
              </td>
              <td>
                <input type="text" class="form-control" [ngModel]="summary.donee" [disabled]="
                  isDisabled || summary.transactionStatus === 'Submitted'
                " />
                <!-- [disabled]="summary.donee" -->

              </td>
              <td>
                <select name="Purpose" class="form-control custom-select" [ngModel]="summary.purpose" [disabled]="
                isDisabled || summary.transactionStatus === 'Submitted'
              ">
                  <option [ngValue]="0">Select</option>
                  <option *ngFor="let purpose of purposeList" [value]="purpose.value">
                    {{purpose.label}}
                  </option>
                </select>
                <!-- [disabled]="summary.purpose" -->
              </td>
              <td>
                <input type="text" [ngModel]="summary.dateOfPayment | date: 'dd-MMM-yyyy'"
                  [minDate]="financialYearStartDate" [maxDate]="financialYearEndDate"
                  [bsConfig]="{ dateInputFormat: 'DD-MMM-YYYY' }" data-provide="datepicker" data-date-autoclose="true"
                  (ngModelChange)="summary.dateOfPayment = $event.toLocaleDateString();
                    setDateOfPaymentInEditCase(summary, i, j)" [disabled]="summary.transactionStatus=='Approved'"
                  class="form-control" bsDatepicker [disabled]="
                  isDisabled || summary.transactionStatus === 'Submitted'
                " />
                <!-- [disabled]="summary.dateOfPayment" -->

              </td>
              <!-- <td>
                <input type="text" [ngModel]="summary.dueDate | date: 'dd-MMM-yyyy'"
                  [minDate]="financialYearStartDate" [maxDate]="financialYearEndDate"
                  [bsConfig]="{ dateInputFormat: 'DD-MMM-YYYY' }" data-provide="datepicker" data-date-autoclose="true"
                  (ngModelChange)="
                    summary.dueDate = $event.toLocaleDateString();
                    setDateOfPayment(summary, i, j)
                  " [disabled]="
                    isDisabled || summary.transactionStatus === 'Submitted'
                  " class="form-control" bsDatepicker />
              </td> -->
              <td>
                <div class="custom_icon_badge">
                  <input type="text" id="declaredAmount{{
                      summary.donations80GGTransactionId
                    }}" name="declaredAmount{{
                      summary.donations80GGTransactionId
                    }}" [(ngModel)]="summary.declaredAmount" class="form-control align-right" [disabled]="
                    isDisabled || summary.transactionStatus === 'Submitted'
                  " />
                  <!-- [disabled]=" isDisabled || summary.transactionStatus === 'Submitted'" -->
                </div>
              </td>
              <!-- <td>
                <input
                  type="text"
                  id="actualAmount{{ summary.donations80GGTransactionId }}"
                  onkeypress="return /[0-9 ]/i.test(event.key)"
                  name="actualAmount{{ summary.donations80GGTransactionId }}"
                  [disabled]="!summary.additionalPayment=='Approved' || !viewDocumentDetail"
                  [(ngModel)]="summary.actualAmount"
                  (change)="onActualAmountChangeInEditCase(summary, i, j)"
                  class="form-control align-right"
                />
              </td> -->
              <td>
                    <input type="text" onkeypress="return /[0-9 ]/i.test(event.key)"
                      id="actualAmount{{ summary.donations80GGTransactionId }}"
                      name="actualAmount{{ summary.donations80GGTransactionId }}"
                      [(ngModel)]="summary.actualAmount" (change)="onActualAmountChangeInEditCase(summary, i, j)"
                      [disabled]="summary.additionalPayment=='Approved' || !viewTransactionDetail"
                      class="form-control align-right" />
                  </td>
            <!--   <td>
                <input
                  type="text"
                  id="actualAmount{{ summary.donations80GGTransactionId }}"
                  onkeypress="return /[0-9 ]/i.test(event.key)"
                  name="actualAmount{{ summary.donations80GGTransactionId }}"
                  [disabled]="!summary.additionalPayment=='Approved'"
                  [(ngModel)]="summary.actualAmount"
                  (change)="onActualAmountChangeInEditCase(summary, j)"
                  class="form-control align-right"
                />
              </td> -->


              <td>
                <input type="text" [ngModel]="summary.amountRejected | number: '1.2-2'" class="form-control align-right"
                  [disabled]="
                  isDisabled || summary.transactionStatus === 'Submitted'" />
              </td>
              <td>
                <input type="text" [ngModel]="summary.amountApproved | number: '1.2-2'" class="form-control align-right"
                  [disabled]="
                  isDisabled || summary.transactionStatus === 'Submitted'" />
              </td>
              <td>
                <span tooltip="{{ summary.remark }}">
                  {{ summary.remark }}
                </span>
              </td>
              <td>
                <span tooltip="{{ summary.proofSubmissionId }}" *ngIf="summary.transactionStatus === 'Submitted'">
                  <i class="fa fa-clipboard font-16 text-cyan" aria-hidden="true"></i>
                  <!-- {{ summary.proofSubmissionId }} -->
                </span>
              </td>
              <td class="text-orange font700">
                <span tooltip="{{ summary.transactionStatus }}">
                  {{ summary.transactionStatus }}
                </span>
              </td>
            </tr>
            <!-- <tr [formGroup]="tuitionFeesFormForm"> -->
            <!-- <tr
              role="form"
              (ngSubmit)="saveTransaction(formDirective)"
              [formGroup]="eightyGGAForm"
              #formDirective="ngForm"
              method="post"
              novalidate
            >
            <td>
              <label class="custom-control custom-checkbox checkbox-center"
                tooltip="Select donee for proof submission">
                <input type="checkbox"
                (change)="
                onSelectCheckBoxNew();
              "
                class="custom-control-input" />
                <span class="custom-control-label"></span>
              </label>
            </td>

            <td *ngIf="previousEmployeeList?.length">
              <select name="Previous Employer Name"
                    formControlName="previousEmployerId" class="form-control custom-select"
                    [ngClass]="{ 'is-invalid': submitted && masterForm.previousEmployerId.errors }">
                    <option [ngValue]="null">Select</option>
                    <option *ngFor="let previousEmployee of previousEmployeeList"
                    [value]="previousEmployee.value">
                    {{previousEmployee.label}}
                  </option>
                </select>
            </td>
              <td>
                <input
                  type="text"
                  formControlName="donee"
                  class="form-control"
                  placeholder="Enter donee Name"
                  [ngClass]="{
                    'is-invalid': submitted && masterForm.donee.errors
                  }"
                />
              </td>
              <td>
                <select  class="form-control custom-select" formControlName="purpose"
                [ngClass]="{'is-invalid': submitted && masterForm.purpose.errors}">
                  <option [ngValue]="null">Select</option>
                  <option
                  *ngFor="let purpose of purposeList"
                  [value]="purpose.value">
                  {{purpose.label}}
                </option>
                </select>
              </td>
              <td>
                <input [bsConfig]="{ dateInputFormat: 'DD-MMM-YYYY' }" formControlName="dateOfPayment" data-provide="datepicker"
                data-date-autoclose="true" class="form-control"
                [ngClass]="{'is-invalid': submitted && masterForm.dateOfPayment.errors}"
                [minDate]="minFormDate" [maxDate]="maxFromDate" placeholder="Select Date" bsDatepicker>
              </td>
              <td>
                <div class="custom_icon_badge">
                  <input
                    type="text"
                    formControlName="declaredAmount"
                    class="form-control"
                    placeholder="Enter Declared Amount"
                    [ngClass]="{
                      'is-invalid':
                        submitted && masterForm.declaredAmount.errors
                    }"
                    (change)="setActualAmout($event)"
                  />
                </div>
              </td>
              <td>
                <input
                  type="text"
                  formControlName="actualAmount"
                  class="form-control"
                  [ngClass]="{
                    'is-invalid': submitted && masterForm.actualAmount.errors
                  }"
                  disabled
                />
              </td>
              <td>
                <input
                type="text"
                formControlName="amountApproved"
                class="form-control"
                disabled
              />
              </td>
              <td>
                <input
                type="text"
                formControlName="amountRejected"
                class="form-control"
                disabled
              />
              </td>
              <td></td>
              <td></td>
              <td class="text-orange font700">
                <input
                type="text"
                formControlName="transactionStatus"
                class="form-control"
                disabled
              />
              </td>
            </tr> -->
            <!-- <tr>
              <td colspan="12"
                class="align-right font700 font-16 text-light-green cursor-pointer">
                <i class="fa fa-plus-circle font-20" tooltip="Add" (click)="addRowInList(declarationService, transactionDetail.length + 1)"></i>
                <span tooltip="Add Row">Add</span>&nbsp;&nbsp;
                <i class="fa fa-times font-16 text-red cursor-pointer" *ngIf="hideRemoveRow" tooltip="Cancel"
                  (click)="deleteRow(transactionDetail.length + 1)"></i>
              </td>
            </tr> -->
            <tr>
              <td *ngIf="previousEmployeeList?.length" class="bg-lightgray font-18 font700 align-left">Total</td>
              <td *ngIf="!previousEmployeeList?.length" class="bg-lightgray font-18 font700 align-left">Total</td>
              <!-- <td *ngIf="previousEmployeeList?.length" class="bg-lightgray font-18 font700 align-left"></td> -->
              <!-- <td class="bg-lightgray font-18 font700 align-right"></td> -->
              <td class="bg-lightgray font-18 font700 align-right"></td>
              <td class="bg-lightgray font-18 font700 align-right"></td>
              <td class="bg-lightgray font-18 font700 align-right"></td>
              <!-- <td class="bg-lightgray font-18 font700 align-right"></td>
              <td class="bg-lightgray font-18 font700 align-right"></td> -->
              <td class="bg-lightgray font-18 font700 align-right">
                <span tooltip=" {{ grandDeclarationTotal | number: '1.2-2' }}" class="padding-right-12">
                  {{ grandDeclarationTotal | number: "1.2-2" }}
                </span>
              </td>
              <td class="bg-lightgray font-18 font700 align-right">
                <span tooltip="{{ grandActualTotal | number: '1.2-2' }}" class="padding-right-12">
                  {{ grandActualTotal | number: "1.2-2" }}
                </span>
              </td>
              <td class="bg-lightgray font-18 font700 align-right">
                <span tooltip=" {{ grandRejectedTotal | number: '1.2-2' }}" class="padding-right-12">
                  {{ grandRejectedTotal | number: "1.2-2" }}
                </span>
              </td>
              <td class="bg-lightgray font-18 font700 align-right">
                <span tooltip="{{ grandApprovedTotal | number: '1.2-2' }}" class="padding-right-12">
                  {{ grandApprovedTotal | number: "1.2-2" }}
                </span>
              </td>
              <td class="bg-lightgray font-18 font700"></td>
              <td class="bg-lightgray font-18 font700"></td>
              <td class="bg-lightgray font-18 font700"></td>
            </tr>
          </tbody>
        </table>
      </div>
    </div>

    <hr />
    <div class="row" *ngIf="viewTransactionDetail">
      <div class="col-12">
        <h3 class="font-14 text-purple font-bold" id="UploadModalLabel">
          Upload Documents
        </h3>
      </div>
    </div>
    <div class="row clearfix mt-10" *ngIf="viewTransactionDetail">
      <div class="col-md-12">
        <div class="row clearfix">
          <div class="col-md-3">
            <div class="fileuploadbox bg-color-lightgray">
              <label class="filelabel">
                <i class="fa fa-upload"> </i>
                <span class="title"> Choose file </span>
                <input class="FileUpload1" class="dropify" (change)="onUploadInEditCase($event)"
                  accept=".jpg , .jpeg, .pdf , .png" id="FileInput" type="file" multiple />
              </label>
            </div>

            <div *ngIf="editfilesArray.length > 0" class="fileuploadbox">
              <span class="text-purple font-14 font700">Selected Files</span>
              <label *ngFor="let item of editfilesArray; let index = index" class="filelabeldisplay">
                <div class="text-ellipsis">
                  <i class="fa fa-paperclip"> </i>
                  <span class="title" tooltip="{{ item.name }}">
                    {{ item.name }}
                  </span>
                </div>
                <div>
                  <i class="fa fa-times text-red font-18"
                    (click)="removeSelectedTransactionDocumentInEditCase(index)"></i>
                </div>
              </label>
            </div>
          </div>
          <div class="col-md-12 mt-6">
            <label class="form-label">Remark</label>
          </div>
          <div class="col-md-6">
            <textarea class="form-control" [(ngModel)]="documentRemark" rows="2"></textarea>
          </div>
        </div>
      </div>
    </div>

    <hr class="mt-20" />
    <div class="row mt-20">
      <div class="col-12">
        <h3 class="font-14 text-purple font-bold" id="UploadModalLabel">
          Uploaded Documents
        </h3>
      </div>
    </div>
    <div class="row">
      <div class="col-md-12">
        <div class="row clearfix mt-10">
          <div class="col-md-12" *ngFor="let doc of urlArray">
            <div class="labelbox" placement="left" tooltip="{{ doc.fileName }}">
              <i class="fa fa-paperclip text-orange"></i> &nbsp; {{ doc.fileName }}
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
  <div class="modal-footer">
    <button type="button" tooltip="View Document" (click)="modalRef.hide(); docViewer(template3,urlArray)"
      class="custom_button custom_btn btn-bg-green btn-labeled btn-labeled-left">
      <b><i class="fa fa-eye"></i></b> View
    </button> &nbsp;&nbsp;
    <button *ngIf="viewTransactionDetail" type="button" tooltip="Save"
      (click)="modalRef.hide(); uploadUpdateTransaction()"
      class="custom_button custom_btn btn-bg-green btn-labeled btn-labeled-left">
      <b><i class="fa fa-save"></i></b> Save
    </button>
  </div>
</ng-template>

<!-- dOC VIEWER -->
<ng-template #template3>
  <div class="modal-header">
    <h5 class="modal-title" id="jasdjgh">View Documents</h5>
    <button type="button" (click)="modalRef.hide()" class="close" data-dismiss="modal" aria-label="Close">
      <span aria-hidden="true">×</span>
    </button>
  </div>
  <!-- <button (click)="previousDocViewer()" [disabled]="urlIndex == 0">previous</button>
<button (click)="nextDocViewer()" [disabled]="urlIndex == (urlArray.length-1)">next</button> -->
  <div class="card-body">
    <div class="row">
      <div class="col-md-1">
        <button type="button" class="btn active Next_Previous_Btn" tooltip="Previous Document"
          (click)="previousDocViewer()" [disabled]="urlIndex == 0">
          <i class="fa fa-angle-left text-white font-30 p-10"></i>
        </button>
      </div>
      <div class="col-md-10">
        <iframe style="height: 100vh; width: 100%; display: block" [src]="urlSafe" provider="google"></iframe>
      </div>
      <div class="col-md-1">
        <button type="button" class="btn active Next_Previous_Btn" tooltip="Next Document" (click)="nextDocViewer()"
          [disabled]="urlIndex == urlArray.length - 1">
          <i class="fa fa-angle-right text-white font-30 p-10"></i>
        </button>
      </div>
    </div>
  </div>
  <div class="modal-footer">
    <!-- <button type="button" class="btn btn-primary">Save</button>  -->
    <button type="button" class="btn btn-secondary" (click)="modalRef.hide()">
      Ok
    </button>
  </div>
</ng-template>
<ng-template #template4>
  <div class="modal-header">
    <h5 class="modal-title" id="UploadModalLabel">Upload Document</h5>
    <button type="button" (click)="modalRef.hide()" class="close" data-dismiss="modal" aria-label="Close">
      <span aria-hidden="true">×</span>
    </button>
  </div>
  <div class="modal-body">
    <div class="card">
      <div class="card-body">
        <div class="row clearfix">
          <!-- <div class="col-md-12">
         <label class="form-label">Upload File here :</label>
      </div> -->
          <div class="col-md-12">
            <div class="fileuploadbox bg-color-lightgray">
              <label class="filelabel">
                <i class="fa fa-upload"> </i>
                <span class="title"> Choose file </span>
                <input class="FileUpload1" class="dropify" (change)="onUpload($event)"
                  accept=".jpg , .jpeg, .pdf , .png" id="FileInput" type="file" multiple />
              </label>
            </div>
            <div *ngIf="filesArray.length > 0" class="fileuploadbox">
              <span class="text-purple font-14 font700">Selected Files</span>
              <label *ngFor="let item of filesArray; let index = index" class="filelabeldisplay">
                <div class="text-ellipsis">
                  <i class="fa fa-paperclip"> </i>
                  <span class="title">
                    {{ item.name }}
                  </span>
                </div>
                <div>
                  <i class="fa fa-times text-red font-18" (click)="removeSelectedTransactionDocument(index)"></i>
                </div>
              </label>
            </div>
          </div>
          <div class="col-md-12 mt-10">
            <label class="form-label">Remark</label>
          </div>
          <div class="col-md-12">
            <textarea class="form-control" [(ngModel)]="documentRemark" rows="2"></textarea>
          </div>
        </div>
      </div>
    </div>
  </div>
  <div class="modal-footer">
    <!-- <button type="button" class="btn btn-primary">Save</button>  -->
    <button type="button" class="btn btn-secondary" (click)="modalRef.hide()">
      Ok
    </button>
  </div>
</ng-template>
