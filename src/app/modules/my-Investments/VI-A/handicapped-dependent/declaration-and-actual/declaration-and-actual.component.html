
<div class="tabview-contents">
   <div>
    <div class="row mt-15">
      <div class="col-12">
        <div class="table-responsive Custom_Table">
          <table class="table table-striped table-hover table-bordered m-b-0">
            <thead class="thead-dark">
              <tr>
                <th rowspan="2" class="wd-4">
                  <label class="custom-control custom-checkbox checkbox-center" tooltip="Select All">
                    <input type="checkbox" class="custom-control-input" [ngModel]="isCheckAll" [disabled]="isDisabled"
                      name="select" (change)="checkUncheckAll()" />
                    <span class="custom-control-label"></span>
                  </label>
                </th>
                <!-- <th rowspan="2" class="wd-4 font700">Select</th> -->
                <th rowspan="2" class="wd-11 font700">Family Member Name</th>
                <th rowspan="2" class="wd-11 font700">Severity Lavel % and Disability Type</th>
                <th rowspan="2" class="wd-9 font700">Declared</th>
                <th rowspan="2" class="wd-9 font700">Actual</th>
                <th colspan="2" class="wd-11 font700">Receipt Amount</th>
                <th rowspan="2" class="wd-7 font700">Remark</th>
                <th rowspan="2" class="wd-10">Proof Submission ID</th>
                <th rowspan="2" class="wd-7 font700">Transaction Status</th>
                <th rowspan="2" class="wd-7 font700">Action</th>
              </tr>
              <tr>
                <th>Rejected</th>
                <th>Approved</th>
              </tr>
            </thead>

            <tbody>
              <tr *ngFor="let element of currentEmployerHandicappedDependentResponseList;
                  let i = index; let j = index">
                <td >
                  <label class="custom-control custom-checkbox checkbox-center"
                    tooltip="Select institution for proof submission">
                    <input type="checkbox" [ngModel]="enableSelectAll"
                      [disabled]="element.transactionStatus == 'Submitted'" (change)="
                        onSelectCheckBox(element, $event, i);
                      " class="custom-control-input" value="option{{ element.handicappedDependentTransactionId }}" />
                    <span class="custom-control-label"></span>
                  </label>
                </td>
                <td>
                  <select class="form-control custom-select" [(ngModel)]="element.handicappedDependentDetailMaster.familyMemberInfoId">
                    <option >Select</option>
                    <option *ngFor="let familyMember of familyMemberName"
                      [value]="familyMember.value">
                      {{ familyMember.label }} </option>
                  </select>
                </td>
                <td>
                  {{ element.handicappedDependentDetailMaster.severity }} <br/>
                  {{ element.handicappedDependentDetailMaster.disabilityType }}
                </td>
                <td>
                   <input type="text" value="{{element.limit}}" disabled
                  class="form-control align-right" (change)="onDeclaredAmountChange(element, i, j)" />
                  {{ element.limit}}
                </td>



                <td>
                <!-- <input type="text" value="{{element.actualAmount}}" disabled
                  class="form-control align-right" />
                </td> -->
                  {{element.limit}}
                <td>
                    <!-- <input  type="text"
                      [ngModel]="element.handicappedDependentDetailMaster.amountRejected | number: '1.2-2'"
                      class="form-control align-right" disabled/> -->
                      <input  type="text" value="{{ element.amountRejected | number: '1.2-2' }}"
                      class="form-control align-right" disabled/>
                </td>
                <td>
                  <!-- <input type="text"
                    [ngModel]="element.handicappedDependentDetailMaster.amountApproved | number: '1.2-2'"
                    class="form-control align-right" disabled/> -->
                    <input  type="text" value="{{ element.amountApproved | number: '1.2-2' }}"
                      class="form-control align-right" disabled/>
                </td>
                <td>
                  <span tooltip="{{ element.remark }}">
                    {{ element.remark }}
                  </span>
                </td>
                <td>
                  <span tooltip="{{ element.proofSubmissionId }}">
                    {{ element.proofSubmissionId }}
                  </span>
                </td>
                <td class="text-orange font700">
                  <span tooltip="{{ element.transactionStatus }}">
                    {{ element.transactionStatus }}
                  </span>
                </td>
              </tr>
              <tr role="form" (ngSubmit)="upload(formDirective)" #formDirective="ngForm" method="post" novalidate
              *ngFor="let currEmpFormArrayElement of currEmpFormArray['controls']; let i=index" [formGroup]="currEmpFormArrayElement">
                <td>
                  <label class="custom-control custom-checkbox checkbox-center"
                    tooltip="Select institution for proof submission">
                    <input type="checkbox"
                    (change)="onEmployerCheckboxSelect(currEmpFormArrayElement, currEmpFormArrayElement.value.handicappedDependentDetailMasterId, $event)"
                    class="custom-control-input" formControlName="checkboxx" />
                    <span class="custom-control-label"></span>
                  </label>
                </td>
                <td>
                    <select formControlName="familyMemberInfoId" class="form-control custom-select"
                    (change)="OnSelectionfamilyMemberGroup(currEmpFormArrayElement, $event)" [ngClass]="{
                      'is-invalid': submitted && currEmpFormArrayElement.get('familyMemberInfoId').hasError('required') }">
                      <option [ngValue]="null">Select</option>
                      <option *ngFor="let element of familyMemberName"  [value]="element.value">
                        {{ element.label }}
                      </option>
                    </select>
                 </td>
                 <td>
                  <span>
                    {{ currEmpFormArrayElement.value.severity }} <br/>
                    {{ currEmpFormArrayElement.value.disabilityType }}
                  </span>
                </td>
                 <!-- <td>
                  <div class="custom_icon_badge">
                    <input  type="text" formControlName="declaredAmount" class="form-control align-right"/>
                  </div>
                </td> -->
                <td>
                  <span tooltip="{{ currEmpFormArrayElement.value.limit }}">
                    {{ currEmpFormArrayElement.value.limit }}
                  </span>
                </td>
                <!-- <td>
                  <input type="text" formControlName="actualAmount" class="form-control align-right" />
                </td> -->
                <td>
                  <span tooltip="{{ currEmpFormArrayElement.value.limit }}">
                    <!-- <span tooltip="{{ grandApprovedTotal | number: '1.2-2' }}" class="padding-right-12"></span> -->
                    {{ currEmpFormArrayElement.value.limit }}
                  </span>
                </td>
                <td>
                    <input  type="text" formControlName="accepted" class="form-control align-right"/>
                </td>
                  <td>
                    <input type="text" formControlName="rejected" class="form-control align-right"/>
                  </td>
                  <td>
                    <!-- <span tooltip="{{ element.remark }}">
                      {{ element.remark }}
                    </span> -->
                  </td>
                  <td>
                    <span tooltip="{{ currEmpFormArrayElement.value.proofSubmissionId }}">
                      {{ currEmpFormArrayElement.value.proofSubmissionId }}
                    </span>
                  </td>
                  <td class="text-orange font700">
                    <span tooltip="{{ currEmpFormArrayElement.value.transactionStatus }}">
                      {{ currEmpFormArrayElement.value.transactionStatus }}
                    </span>
                  </td>
                  <td>
                     <button id="remove" (click)="deleteRow(currentEmployerHandicappedDependentResponseList.length - 1)">DELETE</button>
                  </td>
              </tr>
              <tr>
                <td colspan="11"
                  class="align-right font700 font-16 text-light-green cursor-pointer">
                  <i class="fa fa-plus-circle font-20" tooltip="Add" (click)="addCurrentEmployerRow()"></i>
                  <span tooltip="Add Row">Add</span>&nbsp;&nbsp;
                  <!-- <i class="fa fa-times font-16 text-red cursor-pointer" *ngIf="hideRemoveRow" tooltip="Cancel"
                    (click)="deleteRow(currentEmployerHandicappedDependentResponseList.length + 1)"></i> -->
                </td>
              </tr>
              <!-- <tr>
                <td
                  *ngIf="previousEmployeeList?.length"
                  class="bg-lightgray font-18 font700 align-right"
                ></td>
                <td class="bg-lightgray font-18 font700 align-right">Total</td>
                <td class="bg-lightgray font-18 font700 align-right"></td>
                <td class="bg-lightgray font-18 font700 align-right">
                  <span tooltip=" {{ grandDeclarationTotal | number: '1.2-2' }}" class="padding-right-12">
                    {{ grandDeclarationTotal | number: "1.2-2" }}
                  </span>
                </td>
                <td class="bg-lightgray font-18 font700 align-right">
                  <span tooltip="{{ grandActualTotal | number: '1.2-2' }}" class="padding-right-12">
                    {{ grandActualTotal | number: "1.2-2" }}
                  </span>
                </td>
                <td class="bg-lightgray font-18 font700 align-right">
                  <span tooltip=" {{ grandRejectedTotal | number: '1.2-2' }}" class="padding-right-12">
                    {{ grandRejectedTotal | number: "1.2-2" }}
                  </span>
                </td>
                <td class="bg-lightgray font-18 font700 align-right">
                  <span tooltip="{{ grandApprovedTotal | number: '1.2-2' }}" class="padding-right-12">
                    {{ grandApprovedTotal | number: "1.2-2" }}
                  </span>
                </td>
                <td class="bg-lightgray font-18 font700"></td>
                 <td class="bg-lightgray font-18 font700"></td>
                 <td class="bg-lightgray font-18 font700"></td>
              </tr> -->
            </tbody>
          </table>
        </div>
      </div>
    </div>
    <hr />
  </div>
  <h3 class="font-14 text-purple font-bold">Previous Employer</h3>
  <div>
    <div class="row mt-15">
      <div class="col-12">
        <div class="table-responsive Custom_Table">
          <table class="table table-striped table-hover table-bordered m-b-0">
            <thead class="thead-dark">
              <tr>
                <th rowspan="2" class="wd-4">
                  <label class="custom-control custom-checkbox checkbox-center" tooltip="Select All">
                    <input type="checkbox" class="custom-control-input" [ngModel]="isCheckAll" [disabled]="isDisabled"
                      name="select" (change)="checkUncheckAll()" />
                    <span class="custom-control-label"></span>
                  </label>
                </th>
                <!-- <th rowspan="2" class="wd-4 font700">Select</th> -->
                <th rowspan="2" class="wd-10 font700">Previous Employer Name</th>
                <th rowspan="2" class="wd-11 font700">Family Member Name</th>
                <th rowspan="2" class="wd-11 font700">Severity Lavel % and Disability Type</th>
                <th rowspan="2" class="wd-9 font700">Actual</th>
                <th colspan="2" class="wd-11 font700">Receipt Amount</th>
                <th rowspan="2" class="wd-7 font700">Remark</th>
                <th rowspan="2" class="wd-10">Proof Submission ID</th>
                <th rowspan="2" class="wd-10 font700">Transaction Status</th>

              </tr>
              <tr>
                <th>Rejected</th>
                <th>Approved</th>
              </tr>
            </thead>

            <tbody>
              <tr
                *ngFor="let summary of previousEmployerHandicappedDependentResponseList;
                  let i = index;  count as c">
              <td >
                <label class="custom-control custom-checkbox checkbox-center" *ngIf="isDisabled"
                  tooltip="Select institution for proof submission">
                  <input type="checkbox" [ngModel]="enableSelectAll"
                    [disabled]="summary.transactionStatus == 'Submitted'" (change)="
                      onSelectCheckBox(summary, $event, i);
                    " class="custom-control-input" value="option{{ summary.handicappedDependentTransactionId }}" />
                  <span class="custom-control-label"></span>
                </label>
                <!-- <label *ngIf="!isDisabled" class="custom-control custom-checkbox checkbox-center">
                  <input type="checkbox" [ngModel]="enableSelectAll"
                    [disabled]="isDisabled || summary.proofSubmissionId" (change)="
                      onSelectCheckBox(summary, $event, i);"
                      class="custom-control-input" value="option{{ summary.handicappedDependentTransactionId }}" />
                  <span class="custom-control-label"></span>
                </label> -->
              </td>
                <td *ngIf="previousEmployeeList?.length">
                  <select class="form-control custom-select" disabled [(ngModel)]="summary.previousEmployerId">
                    <option [ngValue]="0">Select</option>
                    <option *ngFor="let previousEmployee of previousEmployeeList"
                      [value]="previousEmployee.value">
                      {{ previousEmployee.label }}
                    </option>
                  </select>
                </td>
                <td>
                  <select class="form-control custom-select" disabled [(ngModel)]="summary.handicappedDependentDetailMaster.familyMemberInfoId">
                    <option >Select</option>
                    <option *ngFor="let familyMember of familyMemberName"
                      [value]="familyMember.value">
                      {{ familyMember.label }} </option>
                  </select>
               </td>
                <td>
                  <span>
                    {{ summary.handicappedDependentDetailMaster.severity }} <br/>
                    {{ summary.handicappedDependentDetailMaster.disabilityType }}
                  </span>
                </td>
                <td>
                  <input type="text"  value="{{ summary.actualAmount }}"
                    class="form-control align-right" disabled/>
                </td>
                <td>
                    <input  type="text" value="{{ summary.amountRejected | number: '1.2-2' }}"
                    class="form-control align-right" disabled/>
                </td>
                <td>
                  <input type="text" value="{{ summary.amountApproved | number: '1.2-2' }}"
                    class="form-control align-right" disabled/>
                </td>
                <td>
                  <span tooltip="{{ summary.remark }}">
                    {{ summary.remark }}
                  </span>
                </td>
                <td>
                  <span tooltip="{{ summary.handicappedDependentDetailMaster.proofSubmissionId }}">
                    {{ summary.handicappedDependentDetailMaster.proofSubmissionId }}
                  </span>
                </td>
                <td class="text-orange font700">
                  <span tooltip="{{ summary.transactionStatus }}">
                    {{ summary.transactionStatus }}
                  </span>
                </td>
              </tr>

              <tr role="form" (ngSubmit)="upload(formDirective)" #formDirective="ngForm" method="post" novalidate
              *ngFor="let priviousEmpFormArrayElement of priviousEmpFormArray['controls']; let i=index" [formGroup]="priviousEmpFormArrayElement">
                <td>
                  <label class="custom-control custom-checkbox checkbox-center"
                    tooltip="Select institution for proof submission">
                    <input type="checkbox"
                    (change)="onEmployerCheckboxSelect(priviousEmpFormArrayElement, priviousEmpFormArrayElement.value.handicappedDependentDetailMasterId, $event)"
                    class="custom-control-input" formControlName="checkbox1" />
                    <span class="custom-control-label"></span>
                  </label>
                </td>
                  <td>
                    <select formControlName="previousEmployerId" class="form-control custom-select"
                      (change)="updatePreviousEmpId(priviousEmpFormArrayElement, $event)"[ngClass]="{
                        'is-invalid': submitted && priviousEmpFormArrayElement.get('previousEmployerId').hasError('required') }">
                      <option [ngValue]="null">Select</option>
                      <option
                        *ngFor="let previousEmployee of previousEmployeeList" [value]="previousEmployee.value">
                        {{ previousEmployee.label }}
                      </option>
                    </select>
                  </td>
                 <td>
                    <select formControlName="familyMemberInfoId" class="form-control custom-select"
                    (change)="OnSelectionPreviousfamilyMemberGroup(priviousEmpFormArrayElement, $event)" [ngClass]="{
                      'is-invalid': submitted && priviousEmpFormArrayElement.get('familyMemberInfoId').hasError('required') }">
                      <option [ngValue]="null">Select</option>
                      <option *ngFor="let element of familyMemberName"  [value]="element.value">
                        {{ element.label }}
                      </option>
                    </select>
                 </td>
                 <td>
                  <span>
                    {{ priviousEmpFormArrayElement.value.severity }} <br/>
                    {{ priviousEmpFormArrayElement.value.disabilityType }}
                  </span>
                </td>
                <td>
                  <input type="text" formControlName="actualAmount" class="form-control align-right"
                  (change)="onEmployerActualAmountChange(priviousEmpFormArrayElement, $event)"
                  [ngClass]="{
                    'is-invalid': submitted && priviousEmpFormArrayElement.get('actualAmount').hasError('required') }"/>
                </td>
                <td>
                    <input  type="text" formControlName="accepted" class="form-control align-right"/>
                </td>
                  <td>
                    <input type="text" formControlName="rejected" class="form-control align-right"/>
                  </td>
                  <td>
                    <!-- <span tooltip="{{ element.remark }}">
                      {{ element.remark }}
                    </span> -->
                  </td>
                  <td>
                    <span tooltip="{{ priviousEmpFormArrayElement.value.proofSubmissionId }}">
                      {{ priviousEmpFormArrayElement.value.proofSubmissionId }}
                    </span>
                  </td>
                  <td class="text-orange font700">
                    <span tooltip="{{ priviousEmpFormArrayElement.value.transactionStatus }}">
                      {{ priviousEmpFormArrayElement.value.transactionStatus }}
                    </span>
                  </td>
              </tr>
                <tr>
                  <td colspan="10"
                    class="align-right font700 font-16 text-light-green cursor-pointer">
                    <i class="fa fa-plus-circle font-20" tooltip="Add" (click)="addPreviousEmployerRow()"></i>
                    <span tooltip="Add Row">Add</span>&nbsp;&nbsp;
                    <i class="fa fa-times font-16 text-red cursor-pointer" *ngIf="hideRemoveRow" tooltip="Cancel"
                      (click)="deleteRow(previousEmployerHandicappedDependentResponseList.length + 1)"></i>
                  </td>
                </tr>
            </tbody>
          </table>
        </div>
      </div>
    </div>
    <hr />
  </div>
  <!-- <div class="row mt-30">
    <div class="col-12">
      <div class="card">
        <div class="mb-10 row">
          <div class="col-md-6">
            <h3 class="font-14 text-purple font-bold">Upload Documents</h3>
          </div>
          <div class="col-md-6">
            <span class="font-bold text-link float-right"></span>
          </div>
        </div>
        <div class="row">
          <div class="col-md-9">
            <div class="table-responsive Custom_Table">
              <table
                class="table table-striped table-hover table-bordered m-b-0"
              >
                <thead class="thead-dark">
                  <tr>
                    <th scope="col" class="font700 wd-8">Sr No.</th>
                    <th scope="col" class="font700 wd-40">Document Name</th>
                    <th scope="col" class="font700 wd-40">Attachment</th>
                    <th scope="col" class="font700 wd-12">Action</th>
                  </tr>
                </thead>
                <tbody>
                  <tr>
                    <th scope="row"><span tooltip="1">1</span></th>
                    <td>
                      <span tooltip="Premium Receipt/ Premium Statement"></span>
                      Medical Certificate/Form 10-1A
                    </td>
                     <td>
                      <span
                        *ngFor="let item of filesArray; let j = index"
                        class="text-orange"
                        tooltip="{{ item.name }}">
                        <i class="fa fa-paperclip" aria-hidden="true"></i>&nbsp;
                        {{ item.name }},
                      </span>
                    </td>
                    <td>
                      <i
                        class="fa fa-upload font-16 text-blue cursor-pointer"
                        tooltip="Upload"
                        (click)="uploadModal(template4)"
                        data-toggle="modal"
                        data-target="#uploadModal"
                      ></i
                      >&nbsp;&nbsp;
                    </td>
                  </tr>
                </tbody>
              </table>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div> -->

  <div class="row mt-15">
    <div class="col-12">
      <div class="float-right mb-15">
        <!-- (click)="formDirective.ngSubmit.emit() "  -->
        <button (click)="upload()"
          type="button" class="custom_button custom_btn btn-bg-green btn-labeled btn-labeled-left ripple"
          tooltip="Save"
        >
          <b> <i class="fa fa-floppy-o"></i></b> Save
        </button>
        <!-- <input (click)="upload()" type="button" value="Save"> -->
      </div>
    </div>
  </div>
  <div class="row mt-10" *ngIf="transactionDetail?.length && !isDisabled">
    <div class="col-12">
      <div class="float-right mb-15">
        <button
          type="button"
          (click)="upload()"
          class="custom_button custom_btn btn-bg-green btn-labeled btn-labeled-left ripple"
        >
          <b><i class="fa fa-floppy-o"></i></b> Save
        </button>
      </div>
    </div>
  </div>
  <!-- <div class="row mt-10">
   <div class="col-12">
      <p-messages [(value)]="msgs2" [enableService]="false" width=100></p-messages>
   </div>
   </div> -->
   <div class="row mt-30">
     <div class="col-12">
      <div class="card">
        <div class="mb-10">
          <h3 class="card-title text-cyan font-bold">Document Details</h3>
        </div>
        <div class="">
          <div class="table-responsive Custom_Table">
            <table class="table table-striped table-hover table-bordered m-b-0">
              <thead class="thead-dark">
                <tr>
                  <th scope="col" class="font700 wd-15">Proof Submission ID</th>
                  <th scope="col" class="font700 wd-15">Family Member Name</th>
                  <th scope="col" class="font700 wd-20">Disability Type & Severity % </th>
                  <th scope="col" class="font700 wd-15">Date of Submission</th>
                  <!-- <th scope="col" class="font700 wd-15">Policy No.</th> -->
                  <!-- <th scope="col" class="font700 wd-10">Receipt Amount</th> -->
                  <th scope="col" class="font700 wd-15">Document Name</th>
                  <th scope="col" class="font700 wd-10">Action</th>
                </tr>
              </thead>
              <tbody>
                <tr
                  *ngFor="
                    let documentSummary of documentDetailList;
                    let documentIndex = index
                  "
                >
                  <td>
                    <span tooltip="{{ documentSummary.proofSubmissionId }}">
                      {{ documentSummary.proofSubmissionId }}
                    </span>
                  </td>
                  <td>
                    <span tooltip="{{ documentSummary.familyMemberName }}">
                      {{ documentSummary.familyMemberName }}
                    </span>
                  </td>
                  <td>
                    <span>
                      <!-- {{documentSummary.severity}} <br/> {{documentSummary.disabilityType}} -->
                    </span>
                  </td>
                  <td>
                    <span
                      tooltip="{{
                        documentSummary.dateOfSubmission | date: 'dd-MMM-yyyy'
                      }}"
                    >
                      {{
                        documentSummary.dateOfSubmission | date: "dd-MMM-yyyy"
                      }}</span
                    >
                  </td>
                  <td>
                    <div class="custom_Label_badge">
                      <button
                        class="btn bg-color-lightgray text-000"
                        (click)="
                          UploadedDocumentModal1(template1, documentIndex)
                        "
                      >
                        Documents
                      </button>
                      <!-- <span class="Label_badge">{{
                        documentSummary.documentDetailList.length
                      }}</span> -->
                    </div>
                  </td>
                  <td>
                    <i
                      class="fa fa-eye font-16 text-blue cursor-pointer"
                      tooltip="View"
                    ></i
                    >&nbsp;&nbsp;
                    <i
                      class="fa fa-download font-16 text-blue cursor-pointer"
                      tooltip="Download"
                    ></i>
                    <div *ngFor="let doc of urlArray" hidden>
                      <iframe
                        style="height: 100vh; width: 100%; display: block"
                        [src]="doc.blobURI"
                        provider="google"
                      ></iframe>
                    </div>
                    &nbsp;&nbsp;
                    <i
                      class="fa fa-edit font-16 text-dark-green cursor-pointer"
                      (click)="
                        declarationEditUpload(
                          template2,
                          documentSummary.proofSubmissionId
                        );
                        viewDocumentDetail = true
                      "
                      tooltip="Edit"
                    ></i>
                  </td>
                </tr>
                <tr *ngIf="!documentDetailList?.length">
                  <td colspan="6">
                    <span class="font-14 font500 align-center text-red">No Data
                      Available</span>
                  </td>
                </tr>
              </tbody>
            </table>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>

<ng-template #template1>
  <div class="modal-header">
    <h5 class="modal-title" id="UploadedDocumentModalLabel">
      Uploaded Document Details
    </h5>
    <button
      type="button"
      (click)="modalRef.hide()"
      class="close"
      data-dismiss="modal"
      aria-label="Close"
    >
      <span aria-hidden="true">×</span>
    </button>
  </div>
  <div class="modal-body">
    <div class="card">
      <div class="card-body pb-0 mt-0 mb-0">
        <div
          class="row clearfix"
          *ngFor="let proofSubmissionFile of proofSubmissionFileList"
        >
          <div class="col-md-11">
            <div class="labelbox" tooltip="Document 1">
              <i class="fa fa-paperclip text-orange"></i> &nbsp;
              {{ proofSubmissionFile.fileName }}
            </div>
          </div>
          <div class="col-md-1">
            <i
              class="fa fa-eye font-16 text-blue font-900 mt-2"
              tooltip="View Document"
            ></i>
          </div>
        </div>
      </div>
    </div>
  </div>
  <div class="modal-footer">
    <button type="button" class="btn btn-secondary" (click)="modalRef.hide()">
      Ok
    </button>
  </div>
</ng-template>

<ng-template #template2>
  <div class="modal-header">
    <h5 class="modal-title" id="jasdjgh" *ngIf="viewDocumentDetail">
      Edit Document Details
    </h5>
    <h5 class="modal-title" id="jasdjgh" *ngIf="!viewDocumentDetail">
      View Document Details
    </h5>
    <button
      type="button"
      (click)="modalRef.hide()"
      class="close"
      data-dismiss="modal"
      aria-label="Close"
    >
      <span aria-hidden="true">×</span>
    </button>
  </div>
  <div class="card-body Box-Spacing">
    <div>
      <div class="row mt-15">
        <div class="col-12">
          <div class="table-responsive Custom_Table">

            <table class="table table-striped table-hover table-bordered m-b-0">
              <thead class="thead-dark" *ngIf="previousEmployeeList?.length">
                <tr>
                  <th rowspan="2" class="wd-10 font700">
                    Previous Employer Name
                  </th>
                  <th rowspan="2" class="wd-10 font700">
                    <span tooltip="Electronic Clearing Service">Disability Type</span>
                  </th>
                  <th rowspan="2" class="wd-11 font700">Severity</th>
                  <th rowspan="2" class="wd-9 font700">Declared</th>
                  <th rowspan="2" class="wd-9 font700">Actual</th>
                  <th colspan="2" class="wd-17 font700">Receipt Amount</th>
                  <th rowspan="2" class="wd-7 font700">Remark</th>
                  <th rowspan="2" class="wd-8">Proof Submission ID</th>
                  <th rowspan="2" class="wd-10 font700">Transaction Status</th>
                </tr>
                <tr>
                  <th>Rejected</th>
                  <th>Approved</th>
                </tr>
              </thead>
              <thead class="thead-dark" *ngIf="!previousEmployeeList.length">
                <tr>
                  <th rowspan="2" class="wd-10 font700">
                    <span tooltip="Electronic Clearing Service">Disability Type</span>
                  </th>
                  <th rowspan="2" class="wd-11 font700">Severity</th>
                  <th rowspan="2" class="wd-9 font700">Declared</th>
                  <th rowspan="2" class="wd-9 font700">Actual</th>
                  <th colspan="2" class="wd-17 font700">Receipt Amount</th>
                  <th rowspan="2" class="wd-7 font700">Remark</th>
                  <th rowspan="2" class="wd-8">Proof Submission ID</th>
                  <th rowspan="2" class="wd-10 font700">Transaction Status</th>

                </tr>
                <tr>
                  <th>Rejected</th>
                  <th>Approved</th>
                </tr>
              </thead>
              <tbody>
                <tr
                  *ngFor="
                    let summary of editTransactionUpload;
                    let i = index;
                    count as c
                  "
                >
                  <td *ngIf="previousEmployeeList?.length">
                    <select
                      name="Previous Employer Name"
                      class="form-control custom-select"
                      (change)="updatePreviousEmpId($event, i)"
                      [disabled]="
                        isDisabled || summary.transactionStatus === 'Submitted'
                      "
                      [(ngModel)]="summary.previousEmployerId"
                    >
                      <option [ngValue]="0">Select Previous Emp.</option>
                      <option
                        *ngFor="let previousEmployee of previousEmployeeList"
                        [value]="previousEmployee.value"
                      >
                        {{ previousEmployee.label }}
                      </option>
                    </select>
                  </td>
                  <td>
                  <td>
                    <input
                      type="text"
                      [ngModel]="summary.disabilityType"
                      disabled
                    />
                  </td>
                  <td>
                    <div class="custom_icon_badge">
                      <input
                        type="text"
                        class="form-control"
                        [ngModel]="summary.severity"

                      />
                      <!-- [disabled]="summary.accountNumber" -->
                    </div>
                  </td>
                  <td>
                    <div class="custom_icon_badge">
                      <input
                        type="text"
                        id="declaredAmount{{
                          summary.handicappedDependentDetailMasterId
                        }}"
                        name="declaredAmount{{
                          summary.handicappedDependentDetailMasterId
                        }}"
                        [(ngModel)]="summary.declaredAmount"
                        (change)="setActualAmoutInEditModal($event)"
                        class="form-control align-right"
                      />
                      <!-- [disabled]=" summary.transactionStatus === 'Submitted'" -->
                    </div>
                  </td>

                  <td>
                    <input
                      type="text"
                      id="actualAmount{{ summary.handicappedDependentDetailMasterId }}"
                      name="actualAmount{{
                        summary.handicappedDependentDetailMasterId
                      }}"
                      [(ngModel)]="summary.actualAmount"

                      class="form-control align-right"
                    />
                    <!-- [disabled]=" isDisabled || summary.transactionStatus === 'Submitted'" -->
                  </td>
                  <td>
                    <input
                      type="text"
                      [ngModel]="summary.amountRejected | number: '1.2-2'"
                      class="form-control align-right"
                      disabled
                    />
                  </td>
                  <td>
                    <input
                      type="text"
                      [ngModel]="summary.amountApproved | number: '1.2-2'"
                      class="form-control align-right"
                      disabled
                    />
                  </td>
                  <td>
                    <span tooltip="{{ summary.remark }}">
                      {{ summary.remark }}
                    </span>
                  </td>
                  <td>
                    <span tooltip="{{ summary.proofSubmissionId }}">
                      {{ summary.proofSubmissionId }}
                    </span>
                  </td>
                  <td class="text-orange font700">
                    <span tooltip="{{ summary.transactionStatus }}">
                      {{ summary.transactionStatus }}
                    </span>
                  </td>
                </tr>
              </tbody>
            </table>

          </div>
        </div>
      </div>
      <hr />
    </div>

    <hr />
    <div class="row" *ngIf="viewDocumentDetail">
      <div class="col-12">
        <h3 class="font-14 text-purple font-bold" id="UploadModalLabel">
          Upload Documents
        </h3>
      </div>
    </div>
    <div class="row clearfix mt-10" *ngIf="viewDocumentDetail">
      <div class="col-md-12">
        <div class="row clearfix">
          <div class="col-md-3">
            <div class="fileuploadbox bg-color-lightgray">
              <label class="filelabel">
                <i class="fa fa-upload"> </i>
                <span class="title"> Choose file </span>
                <input
                  class="FileUpload1"
                  class="dropify"
                  (change)="onUploadInEditCase($event)"
                  accept=".jpg , .jpeg, .pdf , .png"
                  id="FileInput"
                  type="file"
                  multiple
                />
              </label>
            </div>

            <div *ngIf="editfilesArray.length > 0" class="fileuploadbox">
              Selected Files
              <label
                *ngFor="let item of editfilesArray; let index = index"
                class="filelabeldisplay"
              >
                <div class="text-ellipsis">
                  <i class="fa fa-paperclip"> </i>
                  <span class="title">
                    {{ item.name }}
                  </span>
                </div>
                <div>
                  <i
                    class="fa fa-times text-red font-18"
                    (click)="removeSelectedTransactionDocumentInEditCase(index)"
                  ></i>
                </div>
              </label>
            </div>
          </div>
          <div class="col-md-12 mt-6">
            <label class="form-label">Remark</label>
          </div>
          <div class="col-md-6">
            <textarea
              class="form-control"
              [(ngModel)]="documentRemark"
              rows="2"
            ></textarea>
          </div>
        </div>
      </div>
    </div>

    <hr class="mt-20" />
    <div class="row mt-20">
      <div class="col-12">
        <h3 class="font-14 text-purple font-bold" id="UploadModalLabel">
          Uploaded Documents
        </h3>
      </div>
    </div>
    <div class="row">
      <div class="col-md-12">
        <div class="row clearfix mt-10">
          <div class="col-md-12" *ngFor="let doc of urlArray">
            <div class="labelbox" placement="left" tooltip="{{ doc.fileName }}">
              <i class="fa fa-paperclip text-orange"></i> &nbsp;
              {{ doc.fileName }}
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
  <div class="modal-footer">
    <button
      type="button"
      tooltip="View Document"
      (click)="modalRef.hide(); docViewer(template3)"
      class="custom_button custom_btn btn-bg-green btn-labeled btn-labeled-left"
    >
      <b><i class="fa fa-eye"></i></b> View
    </button>
    &nbsp;&nbsp;
    <button
      *ngIf="viewDocumentDetail"
      type="button"
      tooltip="View Document"
      (click)="modalRef.hide(); uploadUpdateTransaction()"
      class="custom_button custom_btn btn-bg-green btn-labeled btn-labeled-left"
    >
      <b><i class="fa fa-save"></i></b> Save
    </button>
  </div>
</ng-template>


<ng-template #template3>
  <div class="modal-header">
    <h5 class="modal-title" id="jasdjgh">Document Viewer</h5>
    <button
      type="button"
      (click)="modalRef.hide()"
      class="close"
      data-dismiss="modal"
      aria-label="Close"
    >
      <span aria-hidden="true">×</span>
    </button>
  </div>
  <!-- <button (click)="previousDocViewer()" [disabled]="urlIndex == 0">previous</button>
     <button (click)="nextDocViewer()" [disabled]="urlIndex == (urlArray.length-1)">next</button> -->
  <div class="card-body">
    <div class="row">
      <div class="col-md-1">
        <button
          type="button"
          class="btn active Next_Previous_Btn"
          tooltip="Previous Document"
          (click)="previousDocViewer()"
          [disabled]="urlIndex == 0"
        >
          <i class="fa fa-angle-left text-white font-30 p-10"></i>
        </button>
      </div>
      <div class="col-md-10">
        <iframe
          style="height: 100vh; width: 100%; display: block"
          [src]="urlSafe"
          provider="google"
        ></iframe>
      </div>
      <div class="col-md-1">
        <button
          type="button"
          class="btn active Next_Previous_Btn"
          tooltip="Next Document"
          (click)="nextDocViewer()"
          [disabled]="urlIndex == urlArray.length - 1"
        >
          <i class="fa fa-angle-right text-white font-30 p-10"></i>
        </button>
      </div>
    </div>
  </div>
  <div class="modal-footer">
    <!-- <button type="button" class="btn btn-primary">Save</button>  -->
    <button type="button" class="btn btn-secondary" (click)="modalRef.hide()">
      Ok
    </button>
  </div>
</ng-template>

<ng-template #template4>
  <div class="modal-header">
    <h5 class="modal-title" id="UploadModalLabel">Upload Document</h5>
    <button
      type="button"
      (click)="modalRef.hide()"
      class="close"
      data-dismiss="modal"
      aria-label="Close"
    >
      <span aria-hidden="true">×</span>
    </button>
  </div>
  <div class="modal-body">
    <div class="card">
      <div class="card-body">
        <div class="row clearfix">
          <div class="col-md-12">
            <div class="fileuploadbox bg-color-lightgray">
              <label class="filelabel">
                <i class="fa fa-upload"> </i>
                <span class="title"> Choose file </span>
                <input
                  class="FileUpload1"
                  class="dropify"
                  (change)="onUpload($event)"
                  accept=".jpg , .jpeg, .pdf , .png"
                  id="FileInput"
                  type="file"
                  multiple
                />
              </label>
            </div>
            <div *ngIf="filesArray.length > 0" class="fileuploadbox">
              Selected Files
              <label
                *ngFor="let item of filesArray; let index = index"
                class="filelabeldisplay"
              >
                <div class="text-ellipsis">
                  <i class="fa fa-paperclip"> </i>
                  <span class="title">
                    {{ item.name }}
                  </span>
                </div>
                <div>
                  <i
                    class="fa fa-times text-red font-18"
                    (click)="removeSelectedTransactionDocument(index)"
                  ></i>
                </div>
              </label>
            </div>
          </div>
          <div class="col-md-12 mt-10">
            <label class="form-label">Remark</label>
          </div>
          <div class="col-md-12">
            <textarea
              class="form-control"
              [(ngModel)]="documentRemark"
              rows="2"
            ></textarea>
          </div>
        </div>
      </div>
    </div>
  </div>
  <div class="modal-footer">
    <!-- <button type="button" class="btn btn-primary">Save</button>  -->
    <button type="button" class="btn btn-secondary" (click)="modalRef.hide()">
      Ok
    </button>
  </div>
</ng-template>

