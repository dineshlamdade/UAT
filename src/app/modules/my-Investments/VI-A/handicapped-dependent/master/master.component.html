<form class="card" role="form" (ngSubmit)="addMaster(form,formDirective)" [formGroup]="form" #formDirective="ngForm"
  method="post" novalidate>
  <div class="tabview-contents">
    <div class="row">
    </div>
    <div class="row mt-25">
      <div class="col-12">
       
        <fieldset>
          <legend>Disabled Family Member Details</legend>
          <div class="row" >
            <div class="col-sm-6 col-md-3" >
              <label class="form-label">Famliy Member Name</label>
              <span *ngIf="!isEdit">
              <select name="family_Member_Name" id="familyMemberName" formControlName="familyMemberName"
                (change)='OnSelectionfamilyMemberGroup()' class="form-control custom-select"
                [ngClass]="{ 'is-invalid': submitted && masterForm.familyMemberName.errors }">
                <option [ngValue]="null">Select</option>
                <option *ngFor="let familyMemberName of familyMemberNameList" [value]="familyMemberName.value">
                  {{familyMemberName.label}}
                </option>
              </select>
            </span>
            <div *ngIf="isEdit">
              <input type="text" formControlName="familyMemberName" class="form-control" disabled
             >
            </div>

              <div *ngIf="submitted && masterForm.familyMemberName.errors" class="invalid-feedback">
                <div *ngIf="masterForm.familyMemberName.errors.required">family Member Name Is Mandatory</div>
              </div>
            </div>

            <div class="col-sm-6 col-md-3" *ngIf="isSaveVisible">
              <label class="form-label">Relationship</label>
              <input type="text" formControlName="relationship" class="form-control"
                [ngClass]="{ 'is-invalid': submitted && masterForm.relationship.errors }">
              <div *ngIf="submitted && masterForm.relationship.errors" class="invalid-feedback">
                <div *ngIf="masterForm.relationship.errors.required">Relationship Is Mandatory</div>
              </div>
            </div>
            <div class="col-sm-6 col-md-4" >
              <label class="form-label ml-15" tooltip="Is Claiming Deduction [Sec.80-U]?"
                placement="left">Is Claiming Deduction [Sec.80-U]?</label>
              <div class="custom-controls-stacked ml-15 mt-10">
                <label class="custom-control custom-radio custom-control-inline">
                  <input type="radio" class="custom-control-input" name="isClaiming80U" value=1 [disabled]="isRadioButtonDisabled"
                    (change)="onRadioChange(true)">
                  <span class="custom-control-label">Yes</span>
                </label>
                <label class="custom-control custom-radio custom-control-inline">
                  <input type="radio" class="custom-control-input" name="isClaiming80U" value=0 checked [disabled]="isRadioButtonDisabled"
                    (change)="onRadioChange(false)">
                  <span class="custom-control-label">No</span>
                </label>
              </div>
            </div>
          </div>
          <div class="row mt-4 mb-10" *ngIf="isSaveVisible">
            <div class="col-sm-6 col-md-3">
              <label class="form-label">Disability Type</label>
              <select name="Frequency_of_Payment" id="disabilityType" formControlName="disabilityType"
                class="form-control custom-select"
                [ngClass]="{ 'is-invalid': submitted && masterForm.disabilityType.errors }">
                <option [ngValue]="null">Select</option>
                <option *ngFor="let disabilityType of disabilityTypeList" [value]="disabilityType.value">
                  {{disabilityType.label}}
                </option>
              </select>
              <div *ngIf="submitted && masterForm.disabilityType.errors" class="invalid-feedback">
                <div *ngIf="masterForm.disabilityType.errors.required">Disability Type Is Mandatory</div>
              </div>
            </div>
            <div class="col-sm-6 col-md-3">
              <label class="form-label">Severity Level</label>
              <select name="Severity_Level" id="severity" formControlName="severity" class="form-control custom-select"
                [ngClass]="{ 'is-invalid': submitted && masterForm.severity.errors }">
                <option [ngValue]="null">Select</option>
                <option *ngFor="let severity of severityLevelList" [value]="severity.value">
                  {{severity.label}}
                </option>
              </select>
              <div *ngIf="submitted && masterForm.severity.errors" class="invalid-feedback">
                <div *ngIf="masterForm.severity.errors.required">Severity Level Is Mandatory</div>
              </div>
            </div>
          </div>
          <div class="row mt-30" *ngIf="paymentDetailGridData?.length">
            <div class="col-12 col-md-12 col-sm-12" >
              <div class="table-responsive Custom_Table ">
                <table class="table table-striped table-bordered table-hover m-b-0">
                  <thead class="thead-dark">
                    <tr>
                      <th scope="col" class="wd-9">Sr No.</th>
                      <th scope="col" class="wd-15">Family Member Name</th>
                      <th scope="col" class="wd-15">Relationship</th>
                      <th scope="col" class="wd-15">Is Family Member Claiming Deduction</th>
                      <th scope="col" class="wd-15">Disablity Type</th>
                      <th scope="col" class="wd-15">Severity Level</th>
                    </tr>
                  </thead>
                  <tbody>
                    <tr *ngFor="let summary of paymentDetailGridData; let i = index">
                      <td class="wd-9">
                        <span tooltip="{{i+1}}">
                          {{i+1}}
                        </span>
                      </td>
                      <td class="wd-20">
                        <span tooltip="{{summary.familyMemberName}}">
                          {{summary.familyMemberName}}
                        </span>
                      </td>
                      <td class="wd-20">
                        <span tooltip="{{summary.relationship}}">
                          {{summary.relationship}}
                        </span>
                      </td>
                      <td class="wd-10">
                        <span tooltip="{{summary.isClaiming80U==1?'Yes':'No'}}">
                          {{summary.isClaiming80U==1?'Yes':'No'}}
                        </span>
                      </td>
                      <td class="wd-20">
                        <span tooltip="{{summary.disabilityType}}">
                          {{summary.disabilityType}}
                        </span>
                      </td>
                      <td class="wd-20">
                        <span tooltip="{{summary.severity}}">
                          {{summary.severity}}
                        </span>
                      </td>
                    </tr>
                    <tr *ngIf="!paymentDetailGridData?.length">
                      <td colspan="7">
                        <span class="font-14 font500 align-center text-red">No
                          Data Available</span>
                      </td>
                    </tr>
                  </tbody>
                </table>
              </div>
            </div>
          </div>
        </fieldset>
      </div>
    </div>
    <!-- <div class="row mt-30" *ngIf="isSaveVisible">
      <div class="col-md-6">
        <h3 class="font-14 text-purple font-bold">Remark</h3>
      </div>
      <div class="col-md-7">
        <textarea class="form-control" formControlName="remark" [(ngModel)]="remark" rows="1"></textarea>
      </div>
    </div> -->
    <div class="row mt-30">
      <div class="col-md-6">
        <h3 class="font-14 text-purple font-bold">Remark</h3>
      </div>
      <div class="col-md-7">
        <textarea class="form-control" formControlName="remark" [(ngModel)]="remark" rows="1" style="width:45%;"></textarea>
      </div>
      
    </div>
    <div class="row mt-30" *ngIf="isSaveVisible">
      <div class="col-12">
        <div class="card">
          <div class="mb-10 row">
            <div class="col-md-6">
              <h3 class="font-14 text-purple font-bold">Upload Documents</h3>
              <div class="float-left" *ngIf="submitted && masterfilesArray.length == 0">
                <label class="text-red mb-0">Please upload document</label>
            </div>
            </div>
            <div class="col-md-6">
              <span class="font-bold text-link float-right"></span>
            </div>
          </div>
          <div class="row">
            <div class="col-md-9">
              <div class="table-responsive Custom_Table">
                <table class="table table-striped table-hover table-bordered m-b-0">
                  <thead class="thead-dark">
                    <tr>
                      <th scope="col" class="font700 wd-8">Sr No.</th>
                      <th scope="col" class="font700 wd-40">Document Type</th>
                      <th scope="col" class="font700 wd-40">Attachments</th>
                      <th scope="col" class="font700 wd-12">Action</th>
                    </tr>
                  </thead>
                  <tbody>
                    <tr>
                      <th scope="row"><span tooltip="1">1</span></th>
                      <td><span tooltip="Doctor's certificate / Form 10-IA"></span>Doctor's certificate / Form 10-IA</td>
                      <td><span *ngFor="let item of masterfilesArray" class="text-orange" tooltip="{{item.name}},"><i
                            class="fa fa-paperclip" aria-hidden="true"></i>&nbsp;{{item.name}},</span>
                        <div class="col-md-12" *ngFor="let doc of urlArray; let i = index">
                          <div class="labelbox" placement="top" tooltip="{{ doc.fileName }}">
                            <i class="fa fa-paperclip text-orange" (click)="docViewer(template3,i)"></i> &nbsp; {{
                            doc.fileName }}
                          </div>
                        </div>
                      </td>
                      <td *ngIf="isSaveShow">
                        <i class="fa fa-upload font-16 text-blue cursor-pointer" tooltip="Upload"
                          (click)="UploadModal(template)" data-toggle="modal"
                          data-target="#UploadModal"></i>&nbsp;&nbsp;
                      </td>
                    </tr>
                  </tbody>
                </table>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
      <!-- <pre>{{ documentArray | json }}</pre> -->
      <div class="row" *ngIf="isVisibleTable" >
        <div class="col-md-12">
          <div class="border-box">
            <div class="row mt-30">
              <div class="col-12">
                <div class="card">
                  <div class="col-md-12">
                    <h3 class="font-14 text-purple font-bold">
                      Document Summary
                    </h3>
                  </div>
                  <div class="col-9 col-md-10 col-sm-12">
                    <div
                      class="table-responsive Custom_Table"
                    >
                      <p-table
                      *ngIf="documentArray"
                        #dt2
                        [value]="documentArray"
                        [paginator]="true"
                        [rows]="10"
                        [showCurrentPageReport]="true"
                        (sortFunction)="customSort($event)"
                        [customSort]="true"
                        currentPageReportTemplate="Showing {first} to {last} of {totalRecords} entries"
                        [rowsPerPageOptions]="[10, 25, 50]"
                        [globalFilterFields]="[
                          'empcode',
                          'empName',
                          'Group',
                          'Frequency',
                          'Type',
                          'proofsubmission',
                          'PSIdDetails',
                          'SubmissionDate',
                          'Status'
                        ]"
                      >
                        <ng-template pTemplate="header">
                          <tr>
                           
  
                            <th>
                              <div
                                class="
                                  p-d-flex
                                  p-jc-between
                                  p-ai-center
                                "
                              >
                              Document Submission Date & Time
                                <div
                                  class="Sort_Filter_Position"
                                >
                                  <p-sortIcon
                                    field="empcode"
                                    pSortableColumn="empcode"
                                  ></p-sortIcon>
                                  <p-columnFilter
                                    field="empcode"
                                    display="menu"
                                    class="p-ml-auto"
                                  >
                                  </p-columnFilter>
                                </div>
                              </div>
                            </th>
                        
                            <th>
                              <div
                                class="
                                  p-d-flex
                                  p-jc-between
                                  p-ai-center
                                "
                              >
                                Document Type
                                <div
                                  class="Sort_Filter_Position"
                                >
                                  <p-sortIcon
                                    field="documentType"
                                    pSortableColumn="documentType"
                                  ></p-sortIcon>
                                  <p-columnFilter
                                    field="documentType"
                                    display="menu"
                                    class="p-ml-auto"
                                  >
                                  </p-columnFilter>
                                </div>
                              </div>
                            </th>
                            <th>
                              <div
                                class="
                                  p-d-flex
                                  p-jc-between
                                  p-ai-center
                                "
                              >
                                Document Name
                                <div
                                  class="Sort_Filter_Position"
                                >
                                  <p-sortIcon
                                    field="documentName"
                                    pSortableColumn="documentName"
                                  ></p-sortIcon>
                                  <p-columnFilter
                                    field="documentName"
                                    display="menu"
                                    class="p-ml-auto"
                                  >
                                  </p-columnFilter>
                                </div>
                              </div>
                            </th>
                            <th>
                              <div
                                class="
                                  p-d-flex
                                  p-jc-between
                                  p-ai-center
                                "
                              >
                                Password
                                <div
                                  class="Sort_Filter_Position"
                                >
                                  <p-sortIcon
                                    field="empcode"
                                    pSortableColumn="empcode"
                                  ></p-sortIcon>
                                  <p-columnFilter
                                    field="empcode"
                                    display="menu"
                                    class="p-ml-auto"
                                  >
                                  </p-columnFilter>
                                </div>
                              </div>
                            </th>
                            <th>
                              <div
                                class="
                                  p-d-flex
                                  p-jc-between
                                  p-ai-center
                                "
                              >
                                Remark
                                <div
                                  class="Sort_Filter_Position"
                                >
                                  <p-sortIcon
                                    field="empcode"
                                    pSortableColumn="empcode"
                                  ></p-sortIcon>
                                  <p-columnFilter
                                    field="empcode"
                                    display="menu"
                                    class="p-ml-auto"
                                  >
                                  </p-columnFilter>
                                </div>
                              </div>
                            </th>
                            <th>
                              <div
                                class="
                                  p-d-flex
                                  p-jc-between
                                  p-ai-center
                                "
                              >
                                Status
                                <div
                                  class="Sort_Filter_Position"
                                >
                                  <p-sortIcon
                                    field="empcode"
                                    pSortableColumn="empcode"
                                  ></p-sortIcon>
                                  <p-columnFilter
                                    field="empcode"
                                    display="menu"
                                    class="p-ml-auto"
                                  >
                                  </p-columnFilter>
                                </div>
                              </div>
                            </th>
                            <!-- <th>
                              <div
                                class="
                                  p-d-flex
                                  p-jc-between
                                  p-ai-center
                                "
                              >
                                Approver Name
                                <div
                                  class="Sort_Filter_Position"
                                >
                                  <p-sortIcon
                                    field="empcode"
                                    pSortableColumn="empcode"
                                  ></p-sortIcon>
                                  <p-columnFilter
                                    field="empcode"
                                    display="menu"
                                    class="p-ml-auto"
                                  >
                                  </p-columnFilter>
                                </div>
                              </div>
                            </th> -->
                            <!-- <th>
                              <div
                                class="
                                  p-d-flex
                                  p-jc-between
                                  p-ai-center
                                "
                              >
                                Time
                                <div
                                  class="Sort_Filter_Position"
                                >
                                  <p-sortIcon
                                    field="empcode"
                                    pSortableColumn="empcode"
                                  ></p-sortIcon>
                                  <p-columnFilter
                                    field="empcode"
                                    display="menu"
                                    class="p-ml-auto"
                                  >
                                  </p-columnFilter>
                                </div>
                              </div>
                            </th> -->
                          </tr>
                        </ng-template>
                        <ng-template
                          pTemplate="body"
                          let-document
                          let-documentIndex = "rowIndex"
                        >
                          <tr class="p-selectable-row">
                           
                            <!-- <td>
                              {{ document.dateofsubmission | date:'dd-MMM-yyyy' }}
                            </td> -->
                            <td>{{ document.lastModifiedTime| date: 'dd-MMM-yyyy HH:mm'}}</td>
                            <td>{{ document.documentType }}</td>
                            <td>
                              <a
                              (click)=" docViewer(template3,documentIndex, document)"

                              >
                                <i
                                  class="
                                    fa fa-paperclip
                                    text-orange
                                  "
                                ></i>
                                &nbsp;
                                {{ document.documentName }}
                              </a>
                            </td>
                           
                            <td>{{ document.documentPassword }}</td>
                            <td>
                              <!-- <div class="custom_Label_badge">
                                <button
                                  class="
                                    btn btn-bg-green
                                    text-white
                                  "
                                  (click)="
                                    docViewer(template3)
                                  "
                                >
                                  PSEmp
                                </button>
                                <span class="Label_badge"
                                  >2</span
                                >
                              </div> -->
                              {{document.documentRemark}}
                            </td>
                            <!-- <td>{{ document.status }}</td> -->
                            <td><span class="badge" [ngClass]="{'badge-primary': document.status=='Re-Open',
                              ' badge-success': document.status=='Approved',
                              'badge-danger': document.status=='SendBack',
                              'badge-info': document.status=='Submitted',
                              'badge-warning': document.status=='Pending'}">{{ document.status }}</span></td>
                            <!-- <td>{{ document.lastModifiedBy }}</td>
                            <td>{{ document.lastModifiedTime | date:'dd-MMM-yyyy HH:mm'  }}</td> -->
                          </tr>
                        </ng-template>
                      </p-table>
                    </div>
                  </div>
                  <!-- <div class="row mt-25">
                    <div class="col-md-12">
                      <div class="float-right">
                        <button
                          type="submit"
                          class="
                            custom_button custom_btn
                            btn-bg-green
                            btn-labeled
                            btn-labeled-left
                            ripple
                            mr-2
                          "
                          tooltip="Approve"
                        >
                          <b>
                            <i class="fa fa-floppy-o"></i
                          ></b>
                          Approve
                        </button>

                        <button
                          type="button"
                          tooltip="Send Back"
                          class="
                            custom_button custom_btn
                            bg-btn-red
                            btn-labeled btn-labeled-left
                            mr-2
                          "
                        >
                          <b><i class="fa fa-times"></i></b>
                          Discard
                        </button>
                      </div>
                    </div>
                  </div> -->
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
    <div class="row mt-15"  *ngIf="isSaveVisible">
      <div class="col-12" *ngIf="isSaveShow">
        <div class="float-right mb-15">
          <button type="submit"
            class="custom_button custom_btn btn-bg-green btn-labeled btn-labeled-left ripple" tooltip="Save" [ngClass]="{'disabled-btn-bg-green' : form.invalid,'btn-bg-green': !form.invalid}"><b>
              <i class="fa fa-floppy-o"></i></b> Save</button>&nbsp;
          <button type="button" (click)="resetView()"
            class="custom_button custom_btn bg-teal-400 btn-labeled btn-labeled-left " tooltip="Reset"><b>
              <i class=" fa fa-refresh"></i></b> Reset</button>
        </div>
      </div>
      <div class="col-12" *ngIf="isUpdateShow">
        <div class="float-right mb-15">
          <button type="submit"
            class="custom_button custom_btn btn-bg-green btn-labeled btn-labeled-left ripple" tooltip="Update"><b>
              <i class="fa fa-floppy-o"></i></b> Update</button>&nbsp;
          <button type="button" (click)="cancelView()"
          class="mr-2 pull-right custom_button custom_btn bg-btn-red btn-labeled btn-labeled-left ml-10" tooltip="Cancel"><b>
              <i class=" fa fa-refresh"></i></b> Cancel</button>
        </div>
      </div>
      <div class="col-12" *ngIf="isCancelShow">
        <div class="float-right mb-15">
          <button type="button" (click)="cancelView()"
          class="mr-2 pull-right custom_button custom_btn bg-btn-red btn-labeled btn-labeled-left ml-10" tooltip="Cancel"><b>
              <i class=" fa fa-refresh"></i></b> Cancel</button>
        </div>
      </div>
    </div>
    <div class="row mt-20" *ngIf="isSaveVisible">
      <div class="col-12">
        <div class="card">
          <div class="mb-0">
            <h3 class="font-14 text-purple font-bold">Summary</h3>
          </div>
          <div class="">
            <div class="table-responsive Custom_Table">
              <table class="table table-striped table-hover table-bordered m-b-0">
                <thead class="thead-dark">
                  <tr>
                    <th rowspan="2" scope="col" class="wd-10">PS. ID.</th>
                    <th scope="col" class="wd-15">Family Member Name</th>
                    <th scope="col" class="wd-15">Relationship</th>
                    <th scope="col" class="wd-15">Disablity Type</th>
                    <th scope="col" class="wd-15">Severity Level</th>
                    <th scope="col" class="wd-15">Remark</th>
                    <!-- <th scope="col" class="wd-15">Severity Level</th> -->
                    <th rowspan="2" scope="col" class="wd-10">Status</th>
                    <th scope="col" class="wd-15">Action</th>
                  </tr>
                </thead>
                <tbody>
                  <tr *ngFor="let summary of masterGridData; let i = index">
                    <td class="align-left wd-10"><span
                      tooltip="{{summary.proofSubmissionId}}">{{summary.proofSubmissionId}}</span>
                  </td>
                    <td class="align-left wd-15"><span
                        tooltip="{{summary.familyMemberName}}">{{summary.familyMemberName}}</span>
                    </td>
                    <td class=" align-left wd-10"><span tooltip="{{summary.relationship}}">{{summary.relationship}}</span>
                    </td>
                    <td class="align-left wd-10"><span tooltip="{{summary.disabilityType}}">{{summary.disabilityType}}</span>
                    </td>
                    <!-- <td class="wd-10"><span tooltip="Remark">{{summary.remark}}</span>
                    </td> -->
                    <td class="align-left wd-10"><span tooltip="{{summary.severity}}">{{summary.severity}}</span>
                    </td>
                    <td>
                      <div class="d-flex"
                      class="align-center">
                        <!-- <input
                        style="width:100px;"
                          type="text"
                          class="form-control"
                          disabled
                          
                          (change)="
                          onChangeDocumentRemark(
                              summary, i,
                              $event
                            )
                          "
                        
                        /> -->
                        <div
                          _ngcontent-ykc-c443=""
                          class="
                            custom_Label_badge
                            mr-2
                            ml-2
                          "
                        >
                          <b>
                            <i
                              (click)="
                                docRemarkModal(
                                  template8,
                                  documentDetailIndex,
                                  summary?.handicappedDependentDetailMasterId,
                                  summary, i
                                )
                              "
                              class="
                                fa fa-commenting
                                text-dark-green
                                fa-2x
                                cursor-pointer
                              "
                            >
                            </i
                          ></b>
                          <span
                            _ngcontent-ykc-c443=""
                            class="Label_badge"
                            >{{
                            
                              summary?.bubbleRemarkCount
                            }}</span
                          >
                        </div>
                      </div>
                    </td>
                    <!-- <td class="align-left wd-10"><span tooltip="{{summary.severity}}">{{summary.severity}}</span>
                    </td> -->
                    <td class="wd-6"><span class="badge" [ngClass]="{'badge-primary': summary.masterStatus=='Re-Open',
                      ' badge-success': summary.masterStatus=='Approved',
                      'badge-danger': summary.masterStatus=='SendBack',
                      'badge-info': summary.masterStatus=='Submitted',
                      'badge-warning': summary.masterStatus=='Pending'}" tooltip={{summary.masterStatus}}>{{summary.masterStatus}}</span></td>
                    <td class="wd-5 align-center">
                      <i class="fa fa-edit font-16 text-dark-green cursor-pointer"
                        (click)="editMaster(summary.disabilityType)" tooltip="Edit"></i> &nbsp;&nbsp;
                        <!-- <i class="fa fa-eye font-16 text-blue cursor-pointer"
                        (click)="viewMaster(summary.disabilityType)" tooltip="View"></i> -->
                      </td>
                  </tr>
                  <tr *ngIf="!masterGridData?.length">
                    <td colspan="5">
                      <span class="font-14 font500 align-center text-red">No Data
                        Available</span>
                    </td>
                  </tr>
                </tbody>
              </table>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
</form>
<ng-template #template>
  <div class="modal-header">
    <h5 class="modal-title" id="UploadModalLabel">Upload Document</h5>
    <button type="button" (click)="modalRef.hide()" class="close" data-dismiss="modal" aria-label="Close"><span
        aria-hidden="true">×</span></button>
  </div>
  <div class="modal-body">
    <div class="card">
      <div class="card-body">
        <div class="row clearfix">
          <!-- <div class="col-md-12">
                   <label class="form-label">Upload File here :</label>
                </div> -->
          <div class="col-md-12">
            <div class="fileuploadbox bg-color-lightgray">
              <label class="filelabel">
                <i class="fa fa-upload">
                </i>
                <span class="title">
                  Choose file
                </span>
                <input class="FileUpload1" class="dropify" (change)="onMasterUpload($event);"
                  accept=".jpg , .jpeg, .pdf , .png" id="FileInput" type="file" multiple />
              </label>
            </div>
            <div *ngIf="masterfilesArray.length > 0 " class="fileuploadbox">
              <span class="text-purple font-14 font700">Selected Files</span>
              <label *ngFor="let item of masterfilesArray;  let index = index;" class="filelabeldisplay">
                <div class="text-ellipsis"><i class="fa fa-paperclip">
                  </i>
                  <span class="title" tooltip="{{ item.name }}">
                    {{ item.name }}
                  </span>
                  <div>
                    <div style="float: left; width: 40%;">
                      <div class="col-md-8 mt-10">
                        <label class="form-label">Password</label>
                      </div>
                      <div class="col-md-12">
                        <input class="form-control" [(ngModel)]="documentPassword[index]" rows="1">
                      </div>

                    </div>
                    <div style="float: right; width: 40%; margin-right: 59px">
                      <div class="col-md-8 mt-10">
                        <label class="form-label">Remark</label>
                      </div>
                      <div class="col-md-12">
                        <input class="form-control" [(ngModel)]="remarkList[index]" rows="1">
                      </div>
                    </div>
                  </div>
                </div>
                <div>
                  <i class="fa fa-times text-red font-18" (click)="removeSelectedLicMasterDocument(index)"></i>
                </div>
              </label>
            </div>
          </div>
          <!-- <div class="col-md-12 mt-10">
            <label class="form-label">Remark</label>
          </div>
          <div class="col-md-12">
            <textarea class="form-control" [(ngModel)]="documentRemark" rows="2"></textarea>
          </div> -->
        </div>
      </div>
    </div>
  </div>
  <div class="modal-footer">
    <button type="button" class="btn btn-secondary" (click)="modalRef.hide()">Ok</button>
  </div>
</ng-template>

<ng-template #template>
  <div class="modal-header">
    <h5 class="modal-title" id="UploadModalLabel">Upload Document</h5>
    <button type="button" (click)="modalRef.hide()" class="close" data-dismiss="modal" aria-label="Close"><span
      aria-hidden="true">×</span></button>
  </div>
  <div class="modal-body">
    <div class="card">
      <div class="card-body">
        <div class="row clearfix">
          <!-- <div class="col-md-12">
         <label class="form-label">Upload File here :</label>
      </div> -->
          <div class="col-md-12">
            <div class="fileuploadbox bg-color-lightgray">
              <label class="filelabel">
                <i class="fa fa-upload">
                </i>
                <span class="title">
                    Choose file
                  </span>
                <input class="FileUpload1" class="dropify" (change)="onMasterUpload($event);"
                       accept=".jpg , .jpeg, .pdf , .png" id="FileInput" type="file" multiple />
              </label>
            </div>
            <div *ngIf="masterfilesArray.length > 0 " class="fileuploadbox">
              <span class="text-purple font-14 font700">Selected Files</span>
              <label *ngFor="let item of masterfilesArray;let index = index;" class="filelabeldisplay">
                <div class="text-ellipsis"><i class="fa fa-paperclip">
                </i>
                  <span class="title" tooltip="{{item.name}}">
                      {{ item.name }}
                    </span>
                  <div>
                    <div style="float: left; width: 40%;">
                      <div class="col-md-8 mt-10">
                        <label class="form-label">Password</label>
                      </div>
                      <div class="col-md-12">
                        <input class="form-control" [(ngModel)]="documentPassword[index]" rows="1">

                      </div>

                    </div>
                    <div style="float: right; width: 40%; margin-right: 59px">
                      <div class="col-md-8 mt-10">
                        <label class="form-label">Remark</label>
                      </div>
                      <div class="col-md-12">
                        <input class="form-control" [(ngModel)]="remarkList[index]" rows="1">
                      </div>
                    </div>
                  </div>
                </div>
                <div>
                  <i class="fa fa-times text-red font-18" (click)="removeSelectedLicMasterDocument(index)"></i>
                </div>
              </label>


            </div>
          </div>
          <!-- <div class="col-md-12 mt-10">
              <label class="form-label">Remark</label>
          </div>
          <div class="col-md-12">
              <textarea class="form-control" [(ngModel)]="documentRemark" rows="2"></textarea>
          </div> -->
        </div>
      </div>
    </div>
  </div>
  <div class="modal-footer">
    <button type="button" class="btn btn-secondary" (click)="modalRef.hide()">Ok</button>
  </div>
</ng-template>

<!-- For Doc Viewer  -->
<ng-template #template3>
  <div class="modal-header">
    <!-- <h5 class="modal-title" id="jasdjgh">Document Viewer</h5> -->
    <div class="row">
      <div class="col-sm-6 col-md-6 align-right">
          <label class="form-label">Document Name</label>
           {{this.viewDocumentName}}
      </div>
      <div class="col-sm-6 col-md-6 align-right">
          <label class="form-label">Document Type</label>

          {{this.viewDocumentType}}
      </div>

      </div>
      <div class="align-right">
        <button type="button" (click)="zoomin()" ><i class="fa fa-search-plus" aria-hidden="true"></i></button>
<button type="button" (click)="zoomout()"><i class="fa fa-search-minus" aria-hidden="true"></i></button>
    <button type="button" (click)="modalRef.hide()" class="close" data-dismiss="modal" aria-label="Close">
      <span aria-hidden="true">×</span>
    </button>
  </div>
</div>
  <!-- <button (click)="previousDocViewer()" [disabled]="urlIndex == 0">previous</button>
<button (click)="nextDocViewer()" [disabled]="urlIndex == (urlArray.length-1)">next</button> -->
  <div class="card-body">
    <div class="row">
      <div class="col-md-1">
        <button type="button" class="btn active Next_Previous_Btn" tooltip="Previous Document"
          (click)="previousDocViewer()" [disabled]="urlIndex == 0">
          <i class="fa fa-angle-left text-white font-30 p-10"></i>
        </button>
      </div>
      <div class="col-md-10">
        <!-- <iframe style="height: 100vh; width: 100%; display: block" [src]="urlSafe" provider="google"></iframe> -->
        <img id = 'map' style="height: 100vh; width: 100%; display: block" [src]="urlSafe" provider="google">
        <!-- <img src="https://paysquare-images.s3.ap-south-1.amazonaws.com/download.jpg" alt="not fouund"> -->
      </div>
      <div class="col-md-1">
        <button type="button" class="btn active Next_Previous_Btn" tooltip="Next Document" (click)="nextDocViewer()"
          [disabled]="urlIndex == urlArray.length - 1">
          <i class="fa fa-angle-right text-white font-30 p-10"></i>
        </button>
      </div>
    </div>
  </div>
  <div class="modal-footer">
    <!-- <button type="button" class="btn btn-primary">Save</button>  -->
    <button type="button" class="btn btn-secondary" (click)="modalRef.hide()">
      Ok
    </button>
  </div>
</ng-template>
<!-- Remark Modal started -->
<ng-template #template8>
  <div class="modal-header">
    <h5 class="modal-title" id="jasdjgh">Remark</h5>
    <button
      type="button"
      (click)="modalRef.hide()"
      class="close"
      data-dismiss="modal"
      aria-label="Close"
    >
      <span aria-hidden="true">×</span>
    </button>
  </div>

  <div class="card-body">
    <div *ngFor="let documentRemark of documentRemarkList">
      <div class="row">
        <div class="col-md-6">
          <span class="form-label"
            >{{ documentRemark?.role }}:
            <b class="text-gray">{{
              documentRemark?.remarkBy
            }}</b></span >
        </div>
        <div class="col-md-6">
          <div class="float-right">
            <span class="form-label">
              Date:
              <b class="text-gray">{{
                documentRemark?.remarkDate
                  | date: "dd-MMM-yyyy HH:mm"
              }}</b>
            </span>
          </div>
        </div>
      </div>
      <div class="row">
        <textarea class="form-control remarktext" disabled [ngClass]="{'admin-class':documentRemark.role=='Approval Admin'}">
        {{ documentRemark?.remark }}
        </textarea>
      </div>
    </div>
    <div class="row mt-25">
      <div class="col-md-12">
        <h6 class="modal-title" id="jasdjgh">New Remark</h6>
        <textarea type="text" [(ngModel)]="enteredRemark"
        (change)= "
        onChangeDocumentRemark(
          this?.summaryDetails, this?.indexCount,
            $event
          )
        " class="form-control" placeholder="Enter New Remark"></textarea>
      </div>
    </div>
  </div>
<!-- 
  <div *ngIf="!this.summaryDetails?.proofSubmissionId" class="modal-footer">
    <button
      type="button"
      class="btn btn-secondary"
      (click)="modalRef.hide()"
    >
      Ok
    </button>
  </div> -->
  <div *ngIf="this.summaryDetails?.proofSubmissionId" class="modal-footer">
    <!-- <button
      type="button"
      class="btn btn-secondary"
      (click)="onResetRemarkDetails()"
    >
    Reset
    </button> -->
    <button
      type="button"
      class="btn btn-secondary"
      (click)="onSaveRemarkDetails(this.summaryDetails,this.indexCount)"
    >
      Save
    </button>
    <button
    type="button"
    class="btn btn-secondary"
    (click)="onResetRemarkDetails()"
  >
  Reset
  </button>
  </div>
</ng-template>
