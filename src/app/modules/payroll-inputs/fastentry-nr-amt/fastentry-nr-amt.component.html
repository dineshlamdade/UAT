<!-- <app-leftmenu></app-leftmenu> -->
<!-- Main body part  -->
<!-- <div class="page"> -->
<!-- <app-header></app-header> -->
<!-- <div class="section-body mt-3"> -->
<!-- <div class="container-fluid" style="border: 1px solid #ccc; background-color: #fff;"> -->

<div class="card">
    <div class="card-body">
        <div class="tabview-contents">
            <div class="row">

                <div class="col-12 mt-10">

                    <div class="row ">
                        <div class="col-sm-3">
                            <label class="form-label"> Head</label>
                            <select name="payrollarea" class="form-control custom-select input-icon"
                                (change)="getSelectedHead($event.target.value)">
                                <option value="null"> Select </option>
                                <option *ngFor="let head of headData" value="{{head.headMasterId}}"
                                    [selected]="headMasterId == head.headMasterId">
                                    {{head.displayName}}
                                </option>
                            </select>
                        </div>
                        <div class="col-sm-3">
                            <label class="form-label"> Nature </label>
                            <input type="text" class="form-control" disabled>
                        </div>
                        <div class="col-sm-3">
                            <label class="form-label"> SDM </label>
                            <input type="text" class="form-control" disabled>
                        </div>
                    </div>

                    <div class="row mt-25">
                        <div class="col-lg-12 col-md-12 col-sm-12">
                            <div class="card">
                                <div class="card-body">
                                    <div class="row mt-20">

                                        <div class="col-sm-3">
                                            <label class="form-label">Once Every</label>
                                            <input type="text" class="form-control"
                                            (focusout)="getSelectedOnceEvery($event.target.value)"
                                                onkeypress="return event.charCode >= 48 && event.charCode <= 57"
                                                [(ngModel)]="selectedOnceEvery">
                                        </div>
                                        <div class="col-sm-3">
                                            <label class="form-label">Frequency</label>
                                            <select class="form-control custom-select wd-200"
                                                [(ngModel)]="selectedFrequency"
                                                (change)="getSelectedFrequency($event.target.value)">
                                                <option value="">Select</option>
                                                <option value="Monthly" selected>Month
                                                </option>
                                                <option value="Quarterly">Quarter </option>
                                                <option value="HalfYearly">HalfYear</option>
                                                <option value="Yearly">Year </option>
                                                <option value="SemiMonthly">SemiMonth
                                                </option>
                                                <option value="Weekly">Week </option>
                                                <option value="BiWeekly">BiWeek </option>
                                            </select>
                                        </div>
                                        <div class="col-sm-3">
                                            <label class="form-label">From Date</label>
                                            <div class="input-group">
                                                <div class="input-group-prepend">
                                                    <span class="input-group-text">
                                                        <i class="fa fa-calendar"></i>
                                                    </span>
                                                </div>
                                                <input data-provide="datepicker" data-date-autoclose="true"
                                                    class="form-control" placeholder="From Date"
                                                    [minDate]="effectiveFromDate"
                                                    [maxDate]="effectiveToDate || selectedToDate"
                                                    [value]="selectedFromDate | date :'dd-MMM-yyyy'"
                                                    [bsConfig]="{ dateInputFormat: 'DD-MMM-YYYY' }"
                                                    (bsValueChange)="getFromDate($event)" bsDatepicker>
                                            </div>
                                        </div>
                                        <div class="col-sm-3">
                                            <label class="form-label">Type</label>
                                            <select name="revision type" class="form-control custom-select"
                                                [(ngModel)]="selectedTransactionType"
                                                (change)="getTransactionType($event.target.value)">
                                                <option value="">Select</option>
                                                <option value="NoOfTransaction" title="No. of Transaction">
                                                    No. of Transaction
                                                </option>
                                                <option value="Perpetual" title="Perpetual">
                                                    Perpetual
                                                </option>
                                                <option value="Defined Date" title="Defined Date">
                                                    Def Date
                                                </option>
                                            </select>
                                        </div>
                                    </div>
                                    <div class="row mt-20">


                                        <div class="col-sm-3">
                                            <label class="form-label">No. of Trans</label>
                                            <input type="text" class="form-control"
                                                [(ngModel)]="selectedNoOfTransaction"
                                                onkeypress="return event.charCode >= 48 && event.charCode <= 57"
                                                [disabled]="selectedTransactionType != 'NoOfTransaction'">
                                        </div>
                                        <div class="col-sm-3">
                                            <label class="form-label">To Date</label>
                                            <div class="input-group">
                                                <div class="input-group-prepend">
                                                    <span class="input-group-text">
                                                        <i class="fa fa-calendar"></i>
                                                    </span>
                                                </div>
                                                <input data-provide="datepicker" data-date-autoclose="true"
                                                    [bsConfig]="{ dateInputFormat: 'DD-MMM-YYYY' }" class="form-control"
                                                    placeholder="To Date" [minDate]="setMinToDate"
                                                    [maxDate]="effectiveToDate"
                                                    [value]="selectedToDate | date:'dd-MMM-yyyy'" bsDatepicker
                                                    (bsValueChange)="getToDate($event)"
                                                    [disabled]="selectedTransactionType != 'Defined Date'">
                                            </div>
                                        </div>
                                        <div class="col-sm-3">
                                            <label class="form-label">Amount</label>
                                            <input type="number" class="form-control"
                                                onkeypress="return event.charCode != 69" [(ngModel)]="selectedAmount">
                                        </div>
                                        <div class="col-sm-3">
                                            <label class="form-label">Remark</label>
                                            <input type="text" class="form-control" [(ngModel)]="selectedRemark">
                                        </div>
                                    </div>
                                    <div class="row mt-20">
                                        <div class="col-sm-3">
                                            <label class="form-label">Clawback Applicable
                                                At</label>
                                            <div class="input-group">
                                                <select class="form-control custom-select wd-200"
                                                    (change)="getSelectedApplicable($event.target.value,selectedTransactionClawback)">
                                                    <option value="">Select</option>
                                                    <option [selected]="selectedApplicableAt == 'Group' || showOnlyGroup">
                                                        Group </option>
                                                    <option [selected]="selectedApplicableAt == 'Schedule'" *ngIf="!showOnlyGroup">
                                                        Schedule </option>
                                                </select>
                                            </div>
                                        </div>
                                        <div class="col-md-3">
                                            <label class="form-label">Clawback Input
                                                Type</label>
                                            <div class="input-group">
                                                <select class="form-control custom-select wd-200"
                                                    (change)="getSelectedInputType($event.target.value,selectedTransactionClawback)">
                                                    <option value="">Select</option>
                                                    <option [selected]="selectedClawbackInputType == 'SDM'">
                                                        SDM </option>
                                                    <option [selected]="selectedClawbackInputType == 'Specific Period'">
                                                        Specific
                                                        Period </option>
                                                    <option [selected]="selectedClawbackInputType == 'Specific Date'"
                                                        *ngIf="selectedApplicableAt != 'Schedule'">
                                                        Specific Date {{selectedApplicableAt
                                                        == 'Schedule'}}
                                                    </option>
                                                </select>
                                            </div>
                                        </div>
                                        <div class="col-md-3" *ngIf="selectedClawbackInputType == 'Specific Period'">
                                            <label class="form-label">Clawback
                                                Period</label>
                                            <div class="input-group">
                                                <input type="text" [(ngModel)]="clawbackperiod"
                                                    [ngModelOptions]="{standalone : true}"
                                                    (focusout)="crawBackPeriod($event.target.value,selectedTransactionClawback)"
                                                    class="form-control wd-200">
                                            </div>
                                        </div>
                                        <div class="col-md-3" *ngIf="selectedClawbackInputType == 'Specific Period'">
                                            <label class="form-label">Clawback
                                                Frequency</label>
                                            <div class="input-group">
                                                <select class="form-control custom-select wd-200"
                                                    (change)="getClawbackFrequency($event.target.value,selectedTransactionClawback)">
                                                    <option value="">Select</option>
                                                    <option value="Monthly" [selected]="clawbackFrequency == 'Monthly'">
                                                        Month
                                                    </option>
                                                    <option value="Quarterly"
                                                        [selected]="clawbackFrequency == 'Quarterly'">
                                                        Quarter </option>
                                                    <option value="HalfYearly"
                                                        [selected]="clawbackFrequency == 'HalfYearly'">
                                                        HalfYear </option>
                                                    <option value="Yearly" [selected]="clawbackFrequency == 'Yearly'">
                                                        Year
                                                    </option>
                                                    <option value="SemiMonthly"
                                                        [selected]="clawbackFrequency == 'SemiMonthly'">
                                                        SemiMonth </option>
                                                    <option value="Weekly" [selected]="clawbackFrequency == 'Weekly'">
                                                        Week
                                                    </option>
                                                    <option value="BiWeekly"
                                                        [selected]="clawbackFrequency == 'BiWeekly'">
                                                        BiWeek </option>
                                                </select>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="row mt-25">
                                        <div class="col-md-3" *ngIf="selectedClawbackInputType == 'Specific Date'">
                                            <label class="form-label"> Clawback Date
                                            </label>
                                            <div class="input-group">
                                                <input [bsConfig]="{ dateInputFormat: 'DD-MMM-YYYY' }"
                                                    data-provide="datepicker" data-date-autoclose="true"
                                                    placeholder="Date" bsDatepicker [(ngModel)]="clawbackDate"
                                                    (bsValueChange)="getClawbackDate($event,selectedTransactionClawback)"
                                                    class="form-control wd-200">
                                            </div>
                                        </div>

                                    </div>
                                    <div class="row mt-25">

                                        <div class="col-sm-12">
                                            <div class="float-right">
                                                <button type="submit"
                                                    class="custom_button custom_btn btn-bg-green btn-labeled btn-labeled-left ripple"
                                                    tooltip="Go" (click)="getAllSelectedData()"
                                                    [ngClass]="{'disabled-btn-bg-green' : headMasterId == null || headMasterId == '' 
                                                                        || selectedOnceEvery == '' || selectedFrequency == '' || selectedEmployeeData.length == 0}"
                                                    [disabled]="headMasterId == null || headMasterId == '' || selectedOnceEvery == ''
                                                                        || selectedFrequency == '' || selectedEmployeeData.length == 0 ">
                                                    <b><i class="fa fa-arrow-right"></i></b> Go
                                                </button>
                                                <button type="button"
                                                    class="custom_button custom_btn bg-teal-400 btn-labeled btn-labeled-left ml-2"
                                                    tooltip="Reset" (click)="reset()"><b>
                                                        <i class="fa fa-refresh"></i></b>
                                                    Reset</button>
                                            </div>
                                        </div>
                                    </div>

                                </div>
                            </div>
                        </div>
                    </div>

                </div>

            </div>


            <div class="mb-0">
                <h3 class="font-14 text-purple font-bold">Transactions</h3>
            </div>

            <div class="row">
                <div class="col-md-12">
                    <div class="table-responsive Custom_Table">
                        <p-table [value]="tableData" class="mt-10" [paginator]="true" [rows]="10"
                            [showCurrentPageReport]="true"
                            currentPageReportTemplate="Showing {first} to {last} of {totalRecords} entries"
                            [rowsPerPageOptions]="[10,25,50,100,200]"
                            [style]="{'width':'100%', overflow: auto}" #dt1 
                            [globalFilterFields]="['employeeCode','payrollArea',
                            'employeeName', 'fromDate','toDate',
                            'transactionsType','numberOfTransactions','amount','remark']">

                            <ng-template pTemplate="caption">
                                <div class="row">
                                    <div class="col-md-12">
                                        <div class="float-right">
                                            <div class="d-flex">
                                                <span class="p-input-icon-left p-ml-auto">
                                                    <i class="pi pi-search"
                                                        style="top: 9px !important; margin-right: 20px;"></i>
                                                    <input pInputText type="text"
                                                        (input)="dt1.filterGlobal($event.target.value, 'contains')"
                                                        placeholder="Search " />
                                                </span>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </ng-template>

                            <ng-template pTemplate="header">
                                <tr>
                                    <th rowspan="2" class="wd-2 text-center">Sr. No.</th>
                                    <th rowspan="2" class="wd-4 text-center">
                                        <div class="p-d-flex p-jc-between p-ai-center">Emp. Code
                                            <div class="Sort_Filter_Position">
                                                <p-sortIcon field="employeeCode" pSortableColumn="employeeCode">
                                                </p-sortIcon>
                                                <p-columnFilter type="text" field="employeeCode" display="menu"
                                                    class="p-ml-auto">
                                                </p-columnFilter>
                                            </div>
                                        </div>
                                    </th>
                                    <th rowspan="2" class="wd-4 text-center">
                                        <div class="p-d-flex p-jc-between p-ai-center"> Emp. Name
                                            <div class="Sort_Filter_Position">
                                                <p-sortIcon field="employeeName" pSortableColumn="employeeName">
                                                </p-sortIcon>
                                                <p-columnFilter type="text" field="employeeName" display="menu"
                                                    class="p-ml-auto">
                                                </p-columnFilter>
                                            </div>
                                        </div>
                                    </th>
                                    <th rowspan="2" class="wd-10 text-center">
                                        <div class="p-d-flex p-jc-between p-ai-center" style="margin-left:25px;">
                                            Payroll Area
                                            <div class="Sort_Filter_Position">
                                                <p-sortIcon field="payrollArea" pSortableColumn="payrollArea">
                                                </p-sortIcon>
                                                <p-columnFilter type="text" field="payrollArea" display="menu"
                                                    class="p-ml-auto">
                                                </p-columnFilter>
                                            </div>
                                        </div>
                                    </th>
                                    <th rowspan="2" class="wd-8 text-center">
                                        <div class="p-d-flex justify-content-center p-ai-center">
                                            From Date
                                            <div class="Sort_Filter_Position">
                                                <p-sortIcon field="fromDate" pSortableColumn="fromDate"></p-sortIcon>
                                                <p-columnFilter type="date" field="fromDate" display="menu" class="p-ml-auto">
                                                </p-columnFilter>
                                            </div>
                                        </div>
                                    </th>
                                    <th rowspan="2" class="wd-10 text-center">
                                        <div class="p-d-flex p-jc-between p-ai-center" style="margin-left:58px;">Type
                                            <div class="Sort_Filter_Position">
                                                <p-sortIcon field="transactionsType" pSortableColumn="transactionsType">
                                                </p-sortIcon>
                                                <p-columnFilter field="transactionsType" display="menu" class="p-ml-auto">
                                                </p-columnFilter>
                                            </div>
                                        </div>
                                    </th>
                                    <th rowspan="2" class="wd-10 text-center">
                                        <div class="p-d-flex p-jc-between p-ai-center" style="margin-left:25px;">No. of
                                            Trans.
                                            <div class="Sort_Filter_Position">
                                                <p-sortIcon field="numberOfTransactions" pSortableColumn="numberOfTransactions">
                                                </p-sortIcon>
                                                <p-columnFilter type="numeric" field="numberOfTransactions" display="menu" class="p-ml-auto">
                                                </p-columnFilter>
                                            </div>
                                        </div>
                                    </th>
                                    <th rowspan="2" class="wd-8 text-center">
                                        <div class="p-d-flex p-jc-between p-ai-center">To Date
                                            <div class="Sort_Filter_Position">
                                                <p-sortIcon field="toDate" pSortableColumn="toDate">
                                                </p-sortIcon>
                                                <p-columnFilter type="date" field="toDate" display="menu" class="p-ml-auto">
                                                </p-columnFilter>
                                            </div>
                                        </div>
                                    </th>
                                    <th rowspan="2" class="wd-6 text-center">
                                        <div class="p-d-flex p-jc-between p-ai-center">Clawback
                                        </div>
                                    </th>
                                    <th rowspan="2" class="wd-4 text-center">
                                        <div class="p-d-flex p-jc-between p-ai-center"> Amount

                                            <div class="Sort_Filter_Position">
                                                <p-sortIcon field="amount" pSortableColumn="amount">
                                                </p-sortIcon>
                                                <p-columnFilter type="numeric" field="amount"  display="menu"
                                                    class="p-ml-auto">
                                                </p-columnFilter>
                                            </div>
                                        </div>
                                    </th>
                                    <th rowspan="2" class="wd-4 text-center">
                                        <div class="p-d-flex p-jc-between p-ai-center"> Remark

                                            <div class="Sort_Filter_Position">
                                                <p-sortIcon field="remark" pSortableColumn="remark">
                                                </p-sortIcon>
                                                <p-columnFilter field="remark"  display="menu"
                                                    class="p-ml-auto">
                                                </p-columnFilter>
                                            </div>
                                        </div>
                                    </th>
                                    <!-- <th rowspan="2" class="wd-2 text-center"></th> -->
                                    <th rowspan="2" class="wd-2 text-center"> Action </th>

                                </tr>

                            </ng-template>

                            <ng-template pTemplate="body" let-data let-rowIndex=rowIndex>
                                <tr class="p-selectable-row">
                                    <td class="text-center">{{rowIndex+1}}</td>
                                    <td>
                                        <input type="text" class="form-control" [value]="data.employeeCode"
                                            (focusout)="getEmployeeName($event.target.value)" disabled>
                                    </td>
                                    <td>{{data.employeeName}}</td>
                                    <td>
                                        <select name="payrollarea" class="form-control wd-100"
                                            (change)="getSelectedSavePayroll($event.target.value,data)" disabled>
                                            <option value=""> Select</option>
                                            <option *ngFor="let payroll of parollArea"
                                                [selected]="data.payrollArea == payroll.payrollAreaId">
                                                {{payroll.payrollAreaCode}} </option>
                                        </select>
                                    </td>
                                    <td>
                                        <div class="p-d-inline-flex">
                                            <div class="form-group mb-0  mt-1 SMDatepickerWidth">
                                                <div class="input-group">
                                                    <input data-provide="datepicker"
                                                        [bsConfig]="{ dateInputFormat: 'DD-MMM-YYYY' }"
                                                        data-date-autoclose="true" [minDate]="effectiveFromDate"
                                                        [maxDate]="effectiveToDate || selectedToDate"
                                                        value="{{data.fromDate | date:'dd-MMM-yyyy'}}"
                                                        (bsValueChange)="getSaveFromDate($event,data)"
                                                        class="form-control wd-120" placeholder="Date" bsDatepicker>
                                                </div>
                                            </div>
                                        </div>
                                    </td>
                                    <td>
                                        <select name="revision type" class="form-control custom-select wd-120"
                                            (change)="getsaveTransactionType($event.target.value,rowIndex,data)">
                                            <option value=""
                                                [selected]="data.transactionsType == null || data.transactionsType == ''">
                                                Select</option>
                                            <option value="NoOfTransaction" title="No. of Transaction"
                                                [selected]="data.transactionsType == 'NoOfTransaction'">
                                                No. of Trans
                                            </option>
                                            <option value="Perpetual" title="Perpetual"
                                                [selected]="data.transactionsType == 'Perpetual'">
                                                Perpetual</option>
                                            <option value="Defined Date" title="Defined Date"
                                                [selected]="data.transactionsType == 'Defined Date'">
                                                Def Date
                                            </option>
                                        </select>
                                    </td>
                                    <td>
                                        <input class="form-control wd-100" value="{{data.numberOfTransactions}}"
                                            (focusout)="getsaveNumberTransaction($event.target.value,data)"
                                            onkeypress="return event.charCode >= 48 && event.charCode <= 57"
                                            [disabled]="data.transactionsType != 'NoOfTransaction'">
                                    </td>

                                    <td>
                                        <div class="p-d-inline-flex">
                                            <div class="form-group mb-0  mt-1 SMDatepickerWidth">
                                                <div class="input-group">
                                                    <input data-provide="datepicker" data-date-autoclose="true"
                                                        [minDate]="setMinToDate" [maxDate]="effectiveToDate"
                                                        [bsConfig]="{ dateInputFormat: 'DD-MMM-YYYY' }"
                                                        placeholder="Date" bsDatepicker
                                                        value="{{data.toDate | date : 'dd-MMM-yyyy'}}"
                                                        (bsValueChange)="getSaveToDate($event,data)"
                                                        class="form-control wd-120"
                                                        [disabled]="data.transactionsType != 'Defined Date'">
                                                </div>
                                            </div>
                                        </div>
                                    </td>
                                    <td>
                                        <i class="fa fa-history font-16 text-blue cursor-pointer" aria-hidden="true"
                                            (click)="ViewClawbackpopup(template4,data)"
                                            *ngIf="selectedApplicableAt != ''"></i>
                                    </td>
                                    <td>
                                        <input type="number" class="form-control wd-100" value="{{data.amount}}"
                                            onkeypress="return event.charCode != 69"
                                            (focusout)="saveAmounts($event.target.value,data)">
                                    </td>
                                    <td>
                                        <input type="text" class="form-control wd-100" value="{{data.remark}}"
                                            (focusout)="saveRemarks($event.target.value,data)">
                                    </td>
                                    <td>
                                        <i class="fa fa-times  font-18 text-red cursor-pointer" aria-hidden="true"
                                            (click)="removeDataFromSave(rowIndex)"></i>&nbsp;
                                    </td>
                                    <td>
                                        <div class="col-md-2" *ngIf="data.deviationCount">
                                            <div class="custom_Label_badge bagde1">
                                                <button class="btn defaultbtn"
                                                    (click)="editdeviationPopupOpen(editdeviationPopup,data,rowIndex)">
                                                    <i class="fa fa-deviantart font-16 text-blue cursor-pointer"
                                                        aria-hidden="true">
                                                    </i></button>
                                                <span class="Label_badge"
                                                    style="text-align: center;">{{data.deviationCount}}</span>
                                            </div>
                                        </div>
                                    </td>
                                </tr>
                            </ng-template>

                            <ng-template pTemplate="emptymessage">
                                <tr>
                                    <td colspan="15" class="font-14 font500 text-center text-red">
                                        <span>No Data
                                            Available</span>
                                    </td>
                                </tr>
                            </ng-template>

                        </p-table>
                    </div>

                </div>
            </div>

            <!-- Button-->
            <div class="row mt-15">
                <div class="col-12">
                    <div class="float-right mb-15">
                        <button type="submit"
                            class="custom_button custom_btn btn-bg-green btn-labeled btn-labeled-left ripple"
                            tooltip="Save" (click)="saveFastEntries()"
                            [ngClass]="{'disabled-btn-bg-green' : saveTransactionData.length == 0 || saveDisabledBtn}"
                            [disabled]="saveTransactionData.length == 0 || saveDisabledBtn">
                            <b><i class="fa fa-floppy-o"></i></b> Save
                        </button>&nbsp;
                        <button type="submit"
                            class="custom_button custom_btn  btn-bg-green btn-labeled btn-labeled-left ripple"
                            tooltip="Save & Clear" (click)="saveAndClearFastEntries()"
                            [ngClass]="{'disabled-btn-bg-green' : saveTransactionData.length == 0 || saveDisabledBtn}"
                            [disabled]="saveTransactionData.length == 0 || saveDisabledBtn">
                            <b><i class="fa fa-floppy-o"></i></b>Save & Next
                        </button>&nbsp;
                        <button type="button" class="custom_button custom_btn bg-teal-400 btn-labeled btn-labeled-left "
                            tooltip="Reset" (click)="resetTableData()">
                            <b><i class="fa fa-refresh"></i></b> Reset</button>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>


<!-- </div> -->
<!-- </div> -->
<!-- <app-footer></app-footer> -->


<!-- Clawback data-->
<ng-template #template4>
    <div class="modal-header">
        <h5 class="modal-title" id="UploadModalLabel">Clawback</h5>
        <button type="button" (click)="modalRef.hide()" class="close" data-dismiss="modal" aria-label="Close"><span
                aria-hidden="true">×</span></button>
    </div>
    <div class="modal-body">
        <div class="card">
            <div class="card-body p-0 m-0">
                <div class="row">
                    <div class="col-md-12 ">
                        <div class="border-dark-card radius-10 p-2">
                            <div class="row">
                                <div class="col-md-6">
                                    <div class="row">
                                        <div class="col-md-6">
                                            <label class="form-label">Applicable At</label>
                                            <select class="form-control custom-select"
                                                (change)="getSelectedApplicable($event.target.value,selectedTransactionClawback)">
                                                <option value="">Select</option>
                                                <option [selected]="selectedApplicableAt == 'Group'"> Group </option>
                                                <option [selected]="selectedApplicableAt == 'Schedule'"> Schedule
                                                </option>
                                            </select>
                                        </div>
                                        <div class="col-md-6">
                                            <label class="form-label">Input Type</label>
                                            <select class="form-control custom-select "
                                                (change)="getSelectedInputType($event.target.value,selectedTransactionClawback)">
                                                <option value="">Select</option>
                                                <option [selected]="selectedClawbackInputType == 'SDM'"> SDM </option>
                                                <option [selected]="selectedClawbackInputType == 'Specific Period'">
                                                    Specific
                                                    Period </option>
                                                <option [selected]="selectedClawbackInputType == 'Specific Date'"
                                                    *ngIf="selectedApplicableAt != 'Schedule'">
                                                    Specific Date
                                                </option>
                                            </select>
                                        </div>
                                    </div>
                                </div>
                                <div class="col-md-6" *ngIf="selectedClawbackInputType == 'Specific Period'">
                                    <div class="row">
                                        <div class="col-md-6">
                                            <label class="form-label">Period</label>
                                            <input type="text" [(ngModel)]="clawbackperiod"
                                                [ngModelOptions]="{standalone : true}"
                                                (focusout)="crawBackPeriod($event.target.value,selectedTransactionClawback)"
                                                class="form-control">
                                        </div>
                                        <div class="col-md-6">
                                            <label class="form-label">Frequency</label>
                                            <select class="form-control custom-select "
                                                (change)="getClawbackFrequency($event.target.value,selectedTransactionClawback)">
                                                <option value="">Select</option>
                                                <option value="Monthly" [selected]="clawbackFrequency == 'Monthly'">
                                                    Month
                                                </option>
                                                <option value="Quarterly" [selected]="clawbackFrequency == 'Quarterly'">
                                                    Quarter </option>
                                                <option value="HalfYearly"
                                                    [selected]="clawbackFrequency == 'HalfYearly'">
                                                    HalfYear </option>
                                                <option value="Yearly" [selected]="clawbackFrequency == 'Yearly'"> Year
                                                </option>
                                                <option value="SemiMonthly"
                                                    [selected]="clawbackFrequency == 'SemiMonthly'">
                                                    SemiMonth </option>
                                                <option value="Weekly" [selected]="clawbackFrequency == 'Weekly'"> Week
                                                </option>
                                                <option value="BiWeekly" [selected]="clawbackFrequency == 'BiWeekly'">
                                                    BiWeek </option>
                                            </select>
                                        </div>
                                    </div>

                                </div>
                                <div class="col-md-6 " *ngIf="selectedClawbackInputType == 'Specific Date'">
                                    <div class="row">
                                        <div class="col-md-6">
                                            <label class="form-label">
                                                Date
                                            </label>
                                            <input [bsConfig]="{ dateInputFormat: 'DD-MMM-YYYY' }"
                                                data-provide="datepicker" data-date-autoclose="true" placeholder="Date"
                                                bsDatepicker [(ngModel)]="clawbackDate"
                                                (bsValueChange)="getClawbackDate($event,selectedTransactionClawback)"
                                                class="form-control wd-200">
                                        </div>
                                    </div>
                                </div>


                            </div>

                            <!-- <div class="row mt-25" *ngIf="selectedClawbackInputType == 'Specific Period'">
                                  
                                   <div class="col-md-3">
                                    <label class="form-label">Period</label>
                                    <input type="text" [(ngModel)]="clawbackperiod"
                                    [ngModelOptions]="{standalone : true}"
                                    (focusout)="crawBackPeriod($event.target.value,selectedTransactionClawback)"
                                    class="form-control">
                                   </div>
                                   <div class="col-md-3">
                                       <label class="form-label">Frequency</label>
                                       <select class="form-control custom-select "
                                       (change)="getClawbackFrequency($event.target.value,selectedTransactionClawback)">
                                       <option value="">Select</option>
                                       <option value="Monthly" [selected]="clawbackFrequency == 'Monthly'"> Month
                                       </option>
                                       <option value="Quarterly" [selected]="clawbackFrequency == 'Quarterly'">
                                           Quarter </option>
                                       <option value="HalfYearly" [selected]="clawbackFrequency == 'HalfYearly'">
                                           HalfYear </option>
                                       <option value="Yearly" [selected]="clawbackFrequency == 'Yearly'"> Year
                                       </option>
                                       <option value="SemiMonthly" [selected]="clawbackFrequency == 'SemiMonthly'">
                                           SemiMonth </option>
                                       <option value="Weekly" [selected]="clawbackFrequency == 'Weekly'"> Week
                                       </option>
                                       <option value="BiWeekly" [selected]="clawbackFrequency == 'BiWeekly'">
                                           BiWeek </option>
                                   </select>
                                   </div>


                               </div> -->




                        </div>
                    </div>
                </div>

            </div>
        </div>
    </div>
    <div class="modal-footer">

        <button type="submit" class="custom_button custom_btn btn-bg-green btn-labeled btn-labeled-left"
            (click)="saveClawBack();modalRef.hide()" tooltip="Save">
            <b><i class="fa fa-floppy-o"></i></b> Save </button>
        <button type="button" class="custom_button custom_btn bg-btn-red btn-labeled btn-labeled-left ml-10"
            (click)="modalRef.hide()" tooltip="Cancel"><b><i class="fa fa-times" aria-hidden="true"></i></b>
            Cancel</button>

        <!-- <button type="button" class="custom_button custom_btn bg-teal-400 btn-labeled btn-labeled-left ml-10"
            tooltip="Reset"><b><i class="fa fa-refresh" aria-hidden="true"></i></b>
            Reset</button> -->
    </div>
</ng-template>


<!-- Edit deviation and repeat-->
<ng-template #editdeviationPopup>

    <div class="modal-header">
        <h5 class="modal-title" id="UploadModalLabel">Deviation</h5>
        <button type="button" (click)="modalRef.hide()" class="close" data-dismiss="modal" aria-label="Close"><span
                aria-hidden="true">×</span></button>
    </div>
    <div class="modal-body">
        <div class="card">
            <div class="card-body">
                <div class="row clearfix">
                    <div class="col-md-12">

                        <div class="tabset">
                            <!-- Tab 1 -->
                            <input type="radio" name="tabset" id="tab1" aria-controls="marzen" checked>
                            <!-- <div class="col-md-2" >
                            <div class="custom_Label_badge bagde1"> -->
                            <label for="tab1">Deviation</label>
                            <!-- <span class="Label_badge" style="text-align: center;">{{deviationCount}}</span>
                            </div>
                        </div> -->

                            <!-- Tab 2 -->
                            <input type="radio" name="tabset" id="tab2" aria-controls="rauchbier">
                            <label for="tab2">Repetitive Entry</label>

                            <div class="tab-panels">
                                <section id="marzen" class="tab-panel">
                                    <div class="row mb-10">
                                        <div class="col-sm-6 col-md-3" *ngIf="employeeFinDetailsData">
                                            <label class="form-label">Emp. Code</label>
                                            <input type="text" class="form-control"
                                                value="{{employeeFinDetailsData.employeeCode}}" disabled />
                                        </div>
                                        <div class=" col-sm-6 col-md-3" *ngIf="employeeFinDetailsData">
                                            <label class="form-label">Emp. Name</label>
                                            <input type="text" class="form-control"
                                                value="{{employeeFinDetailsData.fullName}}" disabled />
                                        </div>
                                        <div class="col-sm-6 col-md-3" *ngIf="selectedDevData">
                                            <label class="form-label">Head</label>
                                            <input type="text" class="form-control"
                                                value="{{selectedDevData.headDescription}}" disabled />
                                        </div>
                                        <div class="col-sm-6 col-md-3">
                                            <label class="form-label">Type</label>
                                            <input type="text" class="form-control" value="{{selectedDevData.headType}}"
                                                disabled />
                                        </div>
                                    </div>


                                    <p-table [value]="deviationModeData" [paginator]="true" [rows]="10"
                                        [showCurrentPageReport]="true"
                                        currentPageReportTemplate="Showing {first} to {last} of {totalRecords} entries"
                                        [rowsPerPageOptions]="[10,25,50,100,200]">

                                        <ng-template pTemplate="header">
                                            <tr>

                                                <th rowspan="2">
                                                    <div class="p-d-flex p-jc-between p-ai-center">
                                                        Attribute

                                                        <div class="Sort_Filter_Position">
                                                            <p-sortIcon field="Attribute" pSortableColumn="Attribute">
                                                            </p-sortIcon>
                                                            <p-columnFilter type="text" field="name" display="menu"
                                                                class="p-ml-auto"></p-columnFilter>
                                                        </div>
                                                    </div>
                                                </th>

                                                <th rowspan="2">
                                                    <div class="p-d-flex p-jc-between p-ai-center">
                                                        Nature
                                                        <div class="Sort_Filter_Position">
                                                            <p-sortIcon field="Attribute" pSortableColumn="Attribute">
                                                            </p-sortIcon>
                                                            <p-columnFilter type="text" field="name" display="menu"
                                                                class="p-ml-auto"></p-columnFilter>
                                                        </div>
                                                    </div>
                                                </th>

                                                <th rowspan="2">
                                                    <div class="p-d-flex p-jc-between p-ai-center">
                                                        Group ID

                                                        <div class="Sort_Filter_Position">
                                                            <p-sortIcon field="Attribute" pSortableColumn="Attribute">
                                                            </p-sortIcon>
                                                            <p-columnFilter field="representative" matchMode="in"
                                                                display="menu" [showMatchModes]="false"
                                                                [showOperator]="false" [showAddButton]="false"
                                                                class="p-ml-auto">
                                                                <ng-template pTemplate="header">
                                                                    <div class="p-px-3 p-pt-3 p-pb-0">
                                                                        <span class="p-text-bold">Agent Picker</span>
                                                                    </div>
                                                                </ng-template>

                                                            </p-columnFilter>
                                                        </div>
                                                    </div>
                                                </th>
                                                <th colspan="3">
                                                    <div class="p-d-flex p-jc-between p-ai-center ml-60">
                                                        Deviation Nature

                                                    </div>
                                                </th>
                                                <th colspan="2">
                                                    <div class="p-d-flex p-jc-between p-ai-center ml-50">
                                                        Values

                                                    </div>
                                                </th>
                                                <th colspan="2">
                                                    <div class="p-d-flex p-jc-between p-ai-center">
                                                        Deviation Values

                                                    </div>
                                                </th>
                                                <th rowspan="2">
                                                    <div class="p-d-flex p-jc-between p-ai-center">
                                                        Remark
                                                        <div class="Sort_Filter_Position">
                                                            <p-sortIcon field="Attribute" pSortableColumn="Attribute">
                                                            </p-sortIcon>
                                                            <p-columnFilter type="date" field="date" display="menu"
                                                                class="p-ml-auto"></p-columnFilter>
                                                        </div>
                                                    </div>
                                                </th>
                                                <th rowspan="2">
                                                    <div class="p-d-flex p-jc-between p-ai-center">
                                                        Status
                                                        <div class="Sort_Filter_Position">
                                                            <p-sortIcon field="Attribute" pSortableColumn="Attribute">
                                                            </p-sortIcon>
                                                            <p-columnFilter type="date" field="date" display="menu"
                                                                class="p-ml-auto"></p-columnFilter>
                                                        </div>
                                                    </div>
                                                </th>
                                            </tr>
                                            <tr>
                                                <th rowspan="2">
                                                    <div class="p-d-flex p-jc-between p-ai-center">
                                                        Once Every
                                                        <div class="Sort_Filter_Position">
                                                            <p-sortIcon field="Attribute" pSortableColumn="Attribute">
                                                            </p-sortIcon>
                                                            <p-columnFilter type="date" field="date" display="menu"
                                                                class="p-ml-auto"></p-columnFilter>
                                                        </div>
                                                    </div>
                                                </th>
                                                <th rowspan="2">
                                                    <div class="p-d-flex p-jc-between p-ai-center">
                                                        Frequency
                                                        <div class="Sort_Filter_Position">
                                                            <p-sortIcon field="Attribute" pSortableColumn="Attribute">
                                                            </p-sortIcon>
                                                            <p-columnFilter type="date" field="date" display="menu"
                                                                class="p-ml-auto"></p-columnFilter>
                                                        </div>
                                                    </div>
                                                </th>
                                                <th rowspan="2">
                                                    <div class="p-d-flex p-jc-between p-ai-center">
                                                        Type
                                                        <div class="Sort_Filter_Position">
                                                            <p-sortIcon field="Attribute" pSortableColumn="Attribute">
                                                            </p-sortIcon>
                                                            <p-columnFilter type="date" field="date" display="menu"
                                                                class="p-ml-auto"></p-columnFilter>
                                                        </div>
                                                    </div>
                                                </th>
                                                <th rowspan="2">
                                                    <div class="p-d-flex p-jc-between p-ai-center">
                                                        Amount Entered

                                                        <div class="Sort_Filter_Position">
                                                            <p-sortIcon field="Attribute" pSortableColumn="Attribute">
                                                            </p-sortIcon>
                                                            <p-columnFilter type="date" field="date" display="menu"
                                                                class="p-ml-auto"></p-columnFilter>
                                                        </div>
                                                    </div>
                                                </th>
                                                <th rowspan="2">
                                                    <div class="p-d-flex p-jc-between p-ai-center">
                                                        Limit
                                                        <div class="Sort_Filter_Position">
                                                            <p-sortIcon field="Attribute" pSortableColumn="Attribute">
                                                            </p-sortIcon>
                                                            <p-columnFilter type="date" field="date" display="menu"
                                                                class="p-ml-auto"></p-columnFilter>
                                                        </div>
                                                    </div>
                                                </th>
                                                <th rowspan="2">
                                                    Amount
                                                </th>
                                                <th rowspan="2">
                                                    <div class="p-d-flex p-jc-between p-ai-center">
                                                        %
                                                        <div class="Sort_Filter_Position">
                                                            <p-sortIcon field="Attribute" pSortableColumn="Attribute">
                                                            </p-sortIcon>
                                                            <p-columnFilter type="text" field="name" display="menu"
                                                                class="p-ml-auto"></p-columnFilter>
                                                        </div>
                                                    </div>
                                                </th>
                                            </tr>

                                        </ng-template>

                                        <ng-template pTemplate="body" let-data>
                                            <tr class="p-selectable-row">

                                                <td class="bg-color-light_gray">
                                                    <label class="form-lable mb-0">{{data.attributeName}}</label>
                                                </td>
                                                <td class="bg-color-light_gray">
                                                    <label class="form-lable mb-0">{{data.attributeNature}}</label>
                                                </td>
                                                <td class="bg-color-light_gray">
                                                    <label
                                                        class="form-lable mb-0">{{data.nonRecurringTransactionGroupId}}</label>
                                                </td>
                                                <td class="bg-color-light_gray">
                                                    <label class="form-lable mb-0">{{data.onceEvery}}</label>
                                                </td>
                                                <td class="bg-color-light_gray">
                                                    <label class="form-lable mb-0">{{data.frequency}}</label>
                                                </td>
                                                <td class="bg-color-light_gray">
                                                    <label class="form-lable mb-0">{{data.deviationType}}</label>
                                                </td>
                                                <td class="bg-color-light_gray">
                                                    <label class="form-lable mb-0"
                                                        style="text-align: right;">{{data.actualAmount | number:
                                                        '1.2-2'}}</label>
                                                </td>
                                                <td class="bg-color-light_gray">
                                                    <label class="form-lable mb-0"
                                                        style="text-align: right;">{{data.deviationAmountLimit | number:
                                                        '1.2-2'}}</label>
                                                </td>
                                                <td class="bg-color-light_gray">
                                                    <label class="form-lable mb-0"
                                                        style="text-align: right;">{{data.deviationAmount | number:
                                                        '1.2-2'}}</label>
                                                </td>
                                                <td class="bg-color-light_gray">
                                                    <label class="form-lable mb-0"
                                                        style="text-align: right;">{{getDeviationPercentage(data)}}</label>
                                                </td>
                                                <td class="bg-color-light_gray">
                                                    <input type="" class="form-control" value="{{data.remark}}"
                                                        (focusout)="deviationRemark($event.target.value, data)">
                                                </td>
                                                <td class="bg-color-light_gray">
                                                    {{data.status}}
                                                </td>
                                            </tr>
                                        </ng-template>

                                        <ng-template pTemplate="emptymessage">
                                            <tr>
                                                <td colspan="15" class="font-14 font500 text-center text-red"><span>No
                                                        Data
                                                        Available</span></td>
                                            </tr>
                                        </ng-template>

                                    </p-table>


                                    <div class="row mt-15 float-right">

                                        <div class="float-right ">
                                            <button type="button" [disabled]="devationRemarkText == ''"
                                                (click)="updateDeviationRepeatData(selectedDevData)"
                                                class="custom_button custom_btn bg-teal-400 btn-labeled btn-labeled-left ripple"
                                                [ngClass]="{'disabled-btn' : devationRemarkText == ''}"
                                                tooltip="Save"><b>
                                                    <i class="fa fa-times"></i></b> Save</button>&nbsp;
                                        </div>
                                    </div>
                                </section>

                                <section id="rauchbier" class="tab-panel">
                                    <div class="row">
                                        <div class="col-12">
                                            <div class="card">
                                                <div class="row mb-0">
                                                    <div class="col-md-12">
                                                        <div class="row mb-10">
                                                            <div class="col-sm-6 col-md-3"
                                                                *ngIf="employeeFinDetailsData">
                                                                <label class="form-label">Emp. Code</label>
                                                                <input type="text" class="form-control"
                                                                    value="{{employeeFinDetailsData.employeeCode}}"
                                                                    disabled />
                                                            </div>
                                                            <div class=" col-sm-6 col-md-3"
                                                                *ngIf="employeeFinDetailsData">
                                                                <label class="form-label">Emp. Name</label>
                                                                <input type="text" class="form-control"
                                                                    value="{{employeeFinDetailsData.fullName}}"
                                                                    disabled />
                                                            </div>
                                                            <div class="col-sm-6 col-md-3" *ngIf="selectedDevData">
                                                                <label class="form-label">Head</label>
                                                                <input type="text" class="form-control"
                                                                    value="{{selectedDevData.headDescription}}"
                                                                    disabled />
                                                            </div>
                                                            <div class="col-sm-6 col-md-3">
                                                                <label class="form-label">Type</label>
                                                                <input type="text" class="form-control"
                                                                    value="{{selectedDevData.headType}}" disabled />
                                                            </div>
                                                        </div>


                                                        <p-table [value]="repeatModeData" [paginator]="true" [rows]="10"
                                                            [showCurrentPageReport]="true"
                                                            currentPageReportTemplate="Showing {first} to {last} of {totalRecords} entries"
                                                            [rowsPerPageOptions]="[10,25,50]">

                                                            <ng-template pTemplate="header">
                                                                <tr>

                                                                    <th rowspan="2">

                                                                    </th>

                                                                    <th rowspan="2">
                                                                        <div class="p-d-flex p-jc-between p-ai-center">
                                                                            Group ID

                                                                            <div class="Sort_Filter_Position">
                                                                                <p-sortIcon field="Attribute"
                                                                                    pSortableColumn="Attribute">
                                                                                </p-sortIcon>
                                                                                <p-columnFilter type="text" field="name"
                                                                                    display="menu" class="p-ml-auto">
                                                                                </p-columnFilter>
                                                                            </div>
                                                                        </div>
                                                                    </th>

                                                                    <th rowspan="2">
                                                                        <div class="p-d-flex p-jc-between p-ai-center">
                                                                            Once Every
                                                                            <div class="Sort_Filter_Position">
                                                                                <p-sortIcon field="Attribute"
                                                                                    pSortableColumn="Attribute">
                                                                                </p-sortIcon>
                                                                                <p-columnFilter field="representative"
                                                                                    matchMode="in" display="menu"
                                                                                    [showMatchModes]="false"
                                                                                    [showOperator]="false"
                                                                                    [showAddButton]="false"
                                                                                    class="p-ml-auto">
                                                                                    <ng-template pTemplate="header">
                                                                                        <div
                                                                                            class="p-px-3 p-pt-3 p-pb-0">
                                                                                            <span
                                                                                                class="p-text-bold">Agent
                                                                                                Picker</span>
                                                                                        </div>
                                                                                    </ng-template>

                                                                                </p-columnFilter>
                                                                            </div>
                                                                        </div>
                                                                    </th>

                                                                    <th rowspan="2">
                                                                        <div class="p-d-flex p-jc-between p-ai-center">
                                                                            Frequency
                                                                            <div class="Sort_Filter_Position">
                                                                                <p-sortIcon field="Attribute"
                                                                                    pSortableColumn="Attribute">
                                                                                </p-sortIcon>
                                                                                <p-columnFilter type="date" field="date"
                                                                                    display="menu" class="p-ml-auto">
                                                                                </p-columnFilter>
                                                                            </div>
                                                                        </div>
                                                                    </th>

                                                                    <th rowspan="2">
                                                                        <div class="p-d-flex p-jc-between p-ai-center">
                                                                            From Date
                                                                            <div class="Sort_Filter_Position">
                                                                                <p-sortIcon field="Attribute"
                                                                                    pSortableColumn="Attribute">
                                                                                </p-sortIcon>
                                                                                <p-columnFilter type="date" field="date"
                                                                                    display="menu" class="p-ml-auto">
                                                                                </p-columnFilter>
                                                                            </div>
                                                                        </div>
                                                                    </th>
                                                                    <th rowspan="2">
                                                                        <div class="p-d-flex p-jc-between p-ai-center">
                                                                            Type
                                                                            <div class="Sort_Filter_Position">
                                                                                <p-sortIcon field="Attribute"
                                                                                    pSortableColumn="Attribute">
                                                                                </p-sortIcon>
                                                                                <p-columnFilter type="date" field="date"
                                                                                    display="menu" class="p-ml-auto">
                                                                                </p-columnFilter>
                                                                            </div>
                                                                        </div>
                                                                    </th>
                                                                    <th rowspan="2">
                                                                        <div class="p-d-flex p-jc-between p-ai-center">
                                                                            No. of Trans.
                                                                            <div class="Sort_Filter_Position">
                                                                                <p-sortIcon field="Attribute"
                                                                                    pSortableColumn="Attribute">
                                                                                </p-sortIcon>
                                                                                <p-columnFilter type="date" field="date"
                                                                                    display="menu" class="p-ml-auto">
                                                                                </p-columnFilter>
                                                                            </div>
                                                                        </div>
                                                                    </th>
                                                                    <th rowspan="2">
                                                                        <div class="p-d-flex p-jc-between p-ai-center">
                                                                            To Date
                                                                            <div class="Sort_Filter_Position">
                                                                                <p-sortIcon field="Attribute"
                                                                                    pSortableColumn="Attribute">
                                                                                </p-sortIcon>
                                                                                <p-columnFilter type="date" field="date"
                                                                                    display="menu" class="p-ml-auto">
                                                                                </p-columnFilter>
                                                                            </div>
                                                                        </div>
                                                                    </th>
                                                                    <th rowspan="2">
                                                                        <div class="p-d-flex p-jc-between p-ai-center">
                                                                            Amount
                                                                            <div class="Sort_Filter_Position">
                                                                                <p-sortIcon field="Attribute"
                                                                                    pSortableColumn="Attribute">
                                                                                </p-sortIcon>
                                                                                <p-columnFilter type="date" field="date"
                                                                                    display="menu" class="p-ml-auto">
                                                                                </p-columnFilter>
                                                                            </div>
                                                                        </div>
                                                                    </th>
                                                                    <th rowspan="2">
                                                                        <div class="p-d-flex p-jc-between p-ai-center">
                                                                            Status
                                                                            <div class="Sort_Filter_Position">
                                                                                <p-sortIcon field="Attribute"
                                                                                    pSortableColumn="Attribute">
                                                                                </p-sortIcon>
                                                                                <p-columnFilter type="date" field="date"
                                                                                    display="menu" class="p-ml-auto">
                                                                                </p-columnFilter>
                                                                            </div>
                                                                        </div>
                                                                    </th>
                                                                    <th colspan="2">
                                                                        <div class="p-d-flex p-jc-between p-ai-center">
                                                                            Remark

                                                                        </div>
                                                                    </th>

                                                                </tr>

                                                            </ng-template>

                                                            <ng-template pTemplate="body" let-data>
                                                                <tr class="p-selectable-row">

                                                                    <td class="bg-color-light_gray">
                                                                        <label class="form-lable mb-0">Current</label>
                                                                    </td>
                                                                    <td class="bg-color-light_gray">
                                                                        <label
                                                                            class="form-lable mb-0">{{data.nonRecurringTransactionGroupId}}</label>
                                                                    </td>
                                                                    <td class="bg-color-light_gray">
                                                                        <label
                                                                            class="form-lable mb-0">{{data.onceEvery}}</label>
                                                                    </td>
                                                                    <td class="bg-color-light_gray">
                                                                        <label
                                                                            class="form-lable mb-0">{{data.frequency}}</label>
                                                                    </td>
                                                                    <td class="bg-color-light_gray">
                                                                        <label class="form-lable mb-0">{{data.fromDate |
                                                                            date:'dd-MMM-yyyy'}}</label>
                                                                    </td>
                                                                    <td class="bg-color-light_gray">
                                                                        <label class="form-lable mb-0"></label>
                                                                    </td>
                                                                    <td class="bg-color-light_gray">
                                                                        <label class="form-lable mb-0"></label>
                                                                    </td>
                                                                    <td class="bg-color-light_gray">
                                                                        <div class="input-group">
                                                                            <div class="input-group-prepend">
                                                                                <span class="input-group-text">
                                                                                    <i class="fa fa-calendar"></i>
                                                                                </span>
                                                                            </div>
                                                                            <input data-provide="datepicker"
                                                                                data-date-autoclose="true"
                                                                                class="form-control" placeholder="Date"
                                                                                bsDatepicker>
                                                                        </div>
                                                                    </td>
                                                                    <td class="bg-color-light_gray">
                                                                        <label
                                                                            class="form-lable mb-0">{{data.actualAmount}}</label>
                                                                    </td>
                                                                    <td class="bg-color-light_gray">
                                                                        <label
                                                                            class="form-lable mb-0">{{data.status}}</label>
                                                                    </td>
                                                                    <td class="bg-color-light_gray">
                                                                        <input type="text" class="form-control"
                                                                            value="{{data.remark}}"
                                                                            (focusout)="repeatRemark($event.target.value,data)">
                                                                    </td>
                                                                </tr>
                                                            </ng-template>

                                                            <ng-template pTemplate="emptymessage">
                                                                <tr>
                                                                    <td colspan="15"
                                                                        class="font-14 font500 text-center text-red">
                                                                        <span>No Data
                                                                            Available</span>
                                                                    </td>
                                                                </tr>
                                                            </ng-template>

                                                        </p-table>


                                                        <div class="row mt-15 float-right">

                                                            <div class="float-right ">

                                                                <button type="submit"
                                                                    [disabled]="repeatRemarkText == ''"
                                                                    class="custom_button custom_btn btn-bg-green btn-labeled btn-labeled-left ripple"
                                                                    [ngClass]="{'disabled-btn' : repeatRemarkText == ''}"
                                                                    tooltip="Save"
                                                                    (click)="updateDeviationRepeatData(selectedDevData)"><b>
                                                                        <i class="fa fa-files-o"></i></b> Save
                                                                </button>&nbsp;

                                                            </div>


                                                        </div>

                                                    </div>
                                                </div>

                                            </div>
                                        </div>
                                    </div>
                                </section>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

</ng-template>