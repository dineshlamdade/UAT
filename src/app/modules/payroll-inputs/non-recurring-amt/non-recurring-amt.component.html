<app-leftmenu></app-leftmenu>
<form>
    <div>
        <div class="page">
            <app-header></app-header>
            <div class="section-body mt-3">
                <div class="container-fluid">
                    <div class="row">
                        <div class="col-12">
                            <div class="card">
                                <div class="card-body">
                                    <div class="tabview">

                                        <!--------------- ------------- Summary ----------------------->
                                        <input name="nav" type="radio" class="about-radio" id="Summary"
                                            [checked]="indexId == 1" (click)="navigateSummary()" />

                                        <div class="tabs about-page">
                                            <div class="row">
                                                <div class="col-md-12">
                                                    <div class="card">
                                                        <div class="card-body">
                                                            <div class="row mb-10">
                                                                <div class="col-md-6">
                                                                    <label
                                                                        class="form-label mb-0  mt-2 float-left">Total
                                                                        Records &nbsp;<span
                                                                            class="text-dark-green font-14 font-bold">({{selectedEmployeeLength}})</span></label>
                                                                </div>
                                                                <!-- Summary top buttons -->
                                                                <div class="col-md-6">
                                                                    <div class="float-right">
                                                                        <button type="button" tooltip="Approve"
                                                                            class="custom_button custom_btn btn-bg-green btn-labeled btn-labeled-left mr-10"><b><i
                                                                                    class="fa fa-check-square-o"></i></b>
                                                                            Approve </button>
                                                                        <button type="button" tooltip="Edit Transaction"
                                                                            [disabled]="selectedEmpData.length == 0"
                                                                            class="custom_button custom_btn btn-bg-green btn-labeled btn-labeled-left mr-10"
                                                                            [ngClass]="{'disabled-btn-bg-green' : selectedEmpData.length == 0}"
                                                                            (click)="editTransaction()">
                                                                            <b><i class="fa fa-pencil"></i></b>
                                                                            Edit Transaction
                                                                        </button>
                                                                        <button type="button" tooltip="Edit Schedule"
                                                                            class="custom_button custom_btn btn-bg-green btn-labeled btn-labeled-left mr-10"
                                                                            [ngClass]="{'disabled-btn-bg-green' : selectedEmpData.length == 0}"
                                                                            (click)="editScheduleData()"
                                                                            [disabled]="selectedEmpData.length == 0">
                                                                            <b><i class="fa fa-pencil"></i></b>
                                                                            Edit Schedule
                                                                        </button>
                                                                        <!-- <button type="button" tooltip="Filter"
                                                                            class="bg-teal-400 btn btn-sm mr-10"
                                                                            (click)="display=true"><b><i
                                                                                    class="fa fa-filter"></i></b>
                                                                        </button> -->

                                                                    </div>
                                                                </div>

                                                                <!-- Excel Download-->
                                                                <a tooltip="Download"
                                                                    style="cursor: pointer;float:right; margin-left: 98%; margin-top: 7px;"
                                                                    (click)="SummaryexportAsXLSX()">
                                                                    <i class="fa fa-file-excel-o font-18 text-dark-green"
                                                                        aria-hidden="true">
                                                                    </i>
                                                                </a>

                                                            </div>

                                                            <p-table [value]="summeryData" class="mt-10"
                                                                [paginator]="true" [rows]="10"
                                                                [showCurrentPageReport]="true"
                                                                currentPageReportTemplate="Showing {first} to {last} of {totalRecords} entries"
                                                                [rowsPerPageOptions]="[10,25,50,100,200]">

                                                                <ng-template pTemplate="header">
                                                                    <tr>
                                                                        <th class="wd-5">
                                                                            <label
                                                                                class="custom-control custom-checkbox checkbox-center"
                                                                                tooltip="Select All">
                                                                                <input type="checkbox"
                                                                                    class="custom-control-input"
                                                                                    name="select"
                                                                                    (click)="selectAll($event.target)" />
                                                                                <span
                                                                                    class="custom-control-label"></span>
                                                                            </label>

                                                                        </th>
                                                                        <th class="wd-2">
                                                                            <div
                                                                                class="p-d-flex p-jc-between p-ai-center">
                                                                                Emp. Code
                                                                                <div class="Sort_Filter_Position">
                                                                                    <p-sortIcon
                                                                                        field="employeeMasterResponseDTO.employeeCode">
                                                                                    </p-sortIcon>
                                                                                    <p-columnFilter
                                                                                        field="employeeMasterResponseDTO.employeeCode"
                                                                                        display="menu"
                                                                                        class="p-ml-auto">
                                                                                    </p-columnFilter>
                                                                                </div>
                                                                            </div>
                                                                        </th>
                                                                        <th>
                                                                            <div
                                                                                class="p-d-flex p-jc-between p-ai-center">
                                                                                Emp. Name
                                                                                <div class="Sort_Filter_Position">
                                                                                    <p-sortIcon
                                                                                        field="employeeMasterResponseDTO.fullName">
                                                                                    </p-sortIcon>
                                                                                    <p-columnFilter
                                                                                        field="employeeMasterResponseDTO.fullName"
                                                                                        display="menu"
                                                                                        class="p-ml-auto">

                                                                                    </p-columnFilter>
                                                                                </div>
                                                                            </div>
                                                                        </th>
                                                                        <th>
                                                                            <div
                                                                                class="p-d-flex p-jc-between p-ai-center">
                                                                                Payroll Area
                                                                                <div class="Sort_Filter_Position">
                                                                                    <p-sortIcon
                                                                                        field="payrollArea.payrollAreaCode">
                                                                                    </p-sortIcon>
                                                                                    <p-columnFilter
                                                                                        field="payrollArea.payrollAreaCode"
                                                                                        display="menu"
                                                                                        class="p-ml-auto">
                                                                                    </p-columnFilter>
                                                                                </div>
                                                                            </div>
                                                                        </th>

                                                                        <th class="wd-5">
                                                                            <div
                                                                                class="p-d-flex p-jc-between p-ai-center">
                                                                                Head
                                                                                <div class="Sort_Filter_Position">
                                                                                    <p-sortIcon
                                                                                        field="payrollHeadMaster.displayName">
                                                                                    </p-sortIcon>
                                                                                    <p-columnFilter
                                                                                        field="payrollHeadMaster.displayName"
                                                                                        display="menu"
                                                                                        class="p-ml-auto">

                                                                                    </p-columnFilter>
                                                                                </div>
                                                                            </div>
                                                                        </th>
                                                                        <th>
                                                                            <div
                                                                                class="p-d-flex p-jc-between p-ai-center">
                                                                                Group Id
                                                                                <div class="Sort_Filter_Position">
                                                                                    <p-sortIcon
                                                                                        field="nonRecurringTransactionGroupId">
                                                                                    </p-sortIcon>
                                                                                    <p-columnFilter
                                                                                        field="nonRecurringTransactionGroupId"
                                                                                        display="menu"
                                                                                        class="p-ml-auto">

                                                                                    </p-columnFilter>
                                                                                </div>
                                                                            </div>
                                                                        </th>
                                                                        <th class="wd-2">
                                                                            <div
                                                                                class="p-d-flex p-jc-between p-ai-center">
                                                                                Once Every
                                                                                <div class="Sort_Filter_Position">
                                                                                    <p-sortIcon field="onceEvery">
                                                                                    </p-sortIcon>
                                                                                    <p-columnFilter field="onceEvery"
                                                                                        display="menu"
                                                                                        class="p-ml-auto">

                                                                                    </p-columnFilter>
                                                                                </div>
                                                                            </div>
                                                                        </th>

                                                                        <th>
                                                                            <div
                                                                                class="p-d-flex p-jc-between p-ai-center">
                                                                                Frequency
                                                                                <div class="Sort_Filter_Position">
                                                                                    <p-sortIcon field="frequency">
                                                                                    </p-sortIcon>
                                                                                    <p-columnFilter field="frequency"
                                                                                        display="menu"
                                                                                        class="p-ml-auto">

                                                                                    </p-columnFilter>
                                                                                </div>
                                                                            </div>
                                                                        </th>
                                                                        <th class="wd-8">
                                                                            <div
                                                                                class="p-d-flex p-jc-between p-ai-center">
                                                                                From Date
                                                                                <div class="Sort_Filter_Position">
                                                                                    <p-sortIcon field="fromDate">
                                                                                    </p-sortIcon>
                                                                                    <p-columnFilter type="date"
                                                                                        field="fromDate" display="menu"
                                                                                        class="p-ml-auto">

                                                                                    </p-columnFilter>
                                                                                </div>
                                                                            </div>
                                                                        </th>
                                                                        <th class="wd-8">
                                                                            <div
                                                                                class="p-d-flex p-jc-between p-ai-center">
                                                                                To Date
                                                                                <div class="Sort_Filter_Position">
                                                                                    <p-sortIcon field="toDate">
                                                                                    </p-sortIcon>
                                                                                    <p-columnFilter type="date"
                                                                                        field="toDate" display="menu"
                                                                                        class="p-ml-auto">

                                                                                    </p-columnFilter>
                                                                                </div>
                                                                            </div>
                                                                        </th>
                                                                        <th>Clawback</th>
                                                                        <th>
                                                                            <div
                                                                                class="p-d-flex p-jc-between p-ai-center">
                                                                                Amount
                                                                                <div class="Sort_Filter_Position">
                                                                                    <p-sortIcon field="amount">
                                                                                    </p-sortIcon>
                                                                                    <p-columnFilter type="numeric"
                                                                                        field="amount" display="menu"
                                                                                        class="p-ml-auto">

                                                                                    </p-columnFilter>
                                                                                    <!-- <p-columnFilter type="numeric" field="balance" display="menu" currency="USD"></p-columnFilter> -->
                                                                                </div>
                                                                            </div>
                                                                        </th>
                                                                        <th> Remark </th>
                                                                        <th>Approval Status </th>

                                                                        <th class="wd-8">Action</th>
                                                                    </tr>
                                                                </ng-template>

                                                                <ng-template pTemplate="body" let-Summarydata>
                                                                    <tr class="p-selectable-row">
                                                                        <td class="text-center"> <label
                                                                                class="custom-control custom-checkbox checkbox-center"
                                                                                tooltip="Select">
                                                                                <input type="checkbox"
                                                                                    class="custom-control-input"
                                                                                    name="select"
                                                                                    [checked]="selectedAllFlag"
                                                                                    (change)="isSelected($event.target,Summarydata)"
                                                                                    value="{{Summarydata.employeeMasterId}}" />
                                                                                <span
                                                                                    class="custom-control-label"></span>
                                                                            </label></td>
                                                                        <td class="bg-color-light_gray">
                                                                            <label
                                                                                class="form-lable mb-0 ">{{Summarydata.employeeMasterResponseDTO.employeeCode}}</label>
                                                                        </td>
                                                                        <td class="bg-color-light_gray"><label
                                                                                class="form-lable mb-0">{{Summarydata.employeeMasterResponseDTO.fullName}}</label>
                                                                        </td>
                                                                        <td class="bg-color-light_gray"><label
                                                                                class="form-lable mb-0">{{Summarydata.payrollArea.payrollAreaCode}}</label>

                                                                        </td>
                                                                        <td class="bg-color-light_gray"><label
                                                                                class="form-lable mb-0 text-link"
                                                                                (click)="ViewTransactionHistory(template1i,Summarydata)">{{Summarydata.payrollHeadMaster.displayName}}
                                                                            </label>

                                                                        </td>
                                                                        <td class="bg-color-light_gray"><label
                                                                                class="form-lable mb-0">{{Summarydata.nonRecurringTransactionGroupId}}</label>

                                                                        </td>
                                                                        <td class="bg-color-light_gray"><label
                                                                                class="form-lable mb-0">{{Summarydata.onceEvery}}
                                                                            </label>

                                                                        </td>
                                                                        <td class="bg-color-light_gray"><label
                                                                                class="form-lable mb-0">{{Summarydata.frequency}}
                                                                            </label>

                                                                        </td>
                                                                        <td class="bg-color-light_gray"><label
                                                                                class="form-lable mb-0">{{Summarydata.fromDate}}
                                                                            </label>

                                                                        </td>
                                                                        <td class="bg-color-light_gray"><label
                                                                                class="form-lable mb-0">{{Summarydata.toDate}}
                                                                            </label>

                                                                        </td>
                                                                        <td class="bg-color-light_gray"
                                                                            style="text-align:center;">
                                                                            <i class="fa fa-history font-16 text-blue cursor-pointer"
                                                                                aria-hidden="true"
                                                                                *ngIf="Summarydata.clawbackApplicableAt != ''"></i>
                                                                        </td>
                                                                        <td class="bg-color-light_gray"><label
                                                                                class="form-lable mb-0">{{Summarydata.amount
                                                                                | number: '1.2-2'}}
                                                                            </label>
                                                                        </td>
                                                                        <td class="bg-color-light_gray"><label
                                                                                class="form-lable mb-0">{{Summarydata.remark}}
                                                                            </label>

                                                                        </td>
                                                                        <td class="bg-color-light_gray">
                                                                            <label
                                                                                class="form-lable mb-0">{{Summarydata.approveStatus}}</label>
                                                                            <!-- <label class="form-lable mb-0"
                                                                                *ngIf="Summarydata.approveStatus == null || Summarydata.approveStatus == 'pending'">Pending</label>
                                                                            <label class="form-lable mb-0"
                                                                                *ngIf="Summarydata.approveStatus != null && Summarydata.approveStatus != 'pending'">Approved</label> -->
                                                                        </td>
                                                                        <!-- <td><span class="ml-1 mt-2"></span></td> -->
                                                                        <td>
                                                                            <span class="ml-1 mt-2">
                                                                                <i tooltip="View Transaction History"
                                                                                    class="fa fa-clock-o font-16 text-blue cursor-pointer"
                                                                                    aria-hidden="true"
                                                                                    (click)="viewTransaction(template1,Summarydata)">
                                                                                </i>&nbsp;&nbsp;
                                                                                <i tooltip="View Schedule"
                                                                                    class="fa fa-eye font-16 text-blue cursor-pointer"
                                                                                    (click)="ViewScheduleDetail(template2,Summarydata)"
                                                                                    aria-hidden="true">
                                                                                </i>&nbsp;&nbsp;&nbsp;
                                                                                <i class="fa fa-deviantart font-16 text-blue cursor-pointer"
                                                                                    aria-hidden="true">
                                                                                </i>
                                                                                <!-- <i tooltip="View Transaction History"
                                                                                (click)="viewTransaction(template1i,Summarydata)"
                                                                                    class="fa fa-eye font-16 text-dark-green cursor-pointer"
                                                                                    aria-hidden="true"></i> -->
                                                                            </span>
                                                                        </td>
                                                                    </tr>
                                                                </ng-template>
                                                            </p-table>

                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>

                                        <label class="nav" for="Summary">
                                            <span> Summary </span>
                                        </label>


                                        <!------------- ------------  Transaction --------------------->
                                        <input name="nav" type="radio" class="nav home-radio"
                                            (click)="navigateToTransaction()" id="Transaction"
                                            [disabled]="selectedEmpData.length > 0" [checked]="indexId == 2" />

                                        <div class="tabs about-page">
                                            <div class="row">
                                                <div class="col-md-12">
                                                    <div class="card">
                                                        <div class="card-body">
                                                            <div>
                                                                <!-- margin-top: 17px !important; -->
                                                                <label style="float:right;font-size: 22px;" 
                                                                    class="custom-switch mt_5" *ngIf="payrollListEmpData">
                                                                        <span class="form-label">Single Entry</span>&nbsp;&nbsp;
                                                                        <input type="checkbox" (click)="getSelectedOption($event.target)" name="custom-switch-checkbox" class="custom-switch-input">
                                                                        <span class="custom-switch-indicator" style="width: 40px; height: 21px;"></span>&nbsp;&nbsp;
                                                                        <span class="form-label">Fast Entry</span>
                                                                </label>
                                                            </div>
                                                            <br>
                                                            <div class="tabview-contents" *ngIf="selectedOption == 'single' ">

                                                                <div class="section-body bg-color-white">

                                                                    <div style="float:right;margin-top:-25px;"
                                                                        *ngIf="selectedEmpData[index] && !showEmployeeSelectionFlag">
                                                                        <strong>Record {{index + 1 }} of
                                                                            {{selectedEmpData.length}}</strong>
                                                                    </div>

                                                                    <div style="float:right;margin-top:-25px;"
                                                                        *ngIf="payrollListEmpData && showDropdownDisabled">
                                                                        <strong>Record {{parollListIndex + 1 }} of
                                                                            {{payrollListEmpData.length}}</strong>
                                                                    </div>

                                                                    

                                                                    <!-- Employee Selection Dropdown-->
                                                                    <div class="row mt-10"
                                                                        *ngIf="showEmployeeSelectionFlag">
                                                                        <div class="col-md-2">
                                                                            <label class="form-label mb-0">Employee Code
                                                                            </label>
                                                                            <select name="EmployeeCode"
                                                                                class="form-control custom-select"
                                                                                [(ngModel)]="selectedEmployeeMasterId"
                                                                                [disabled]="showDropdownDisabled"
                                                                                (change)="getSelectedEmployeeCode($event.target.value)">
                                                                                <option value="">Select</option>
                                                                                <!-- <option value="1"> 1111 </option> -->
                                                                                <option value="{{emp.employeeMasterId}}"
                                                                                    *ngFor="let emp of employeeData"
                                                                                    >
                                                                                    {{emp.employeeCode}}
                                                                                </option>
                                                                            </select>

                                                                        </div>
                                                                        <div class="col-md-2">
                                                                            <label class="form-label mb-0">Payroll
                                                                                Area</label>
                                                                            <select name="PayrollArea"
                                                                                class="form-control custom-select"
                                                                                [(ngModel)]="selectedPayrollArea"
                                                                                (change)="getSelectedPayrollArea($event.target.value)"
                                                                                [disabled]="showDropdownDisabled">
                                                                                <option value="">Select</option>
                                                                                <!-- <option> PA-Staff </option> -->
                                                                                <!-- <option> PA_Worker</option> -->
                                                                                <option
                                                                                    *ngFor="let payroll of payrollListData"
                                                                                    [selected]="selectedPayrollArea == payroll.payrollAreaCode">
                                                                                    {{payroll.payrollAreaCode}}</option>
                                                                            </select>
                                                                        </div>

                                                                    </div>

                                                                    <!-- Selected Employee basic infrmation-->
                                                                    <div class="row mt-10">
                                                                        <div class="col-md-12 pl-0 pr-0">
                                                                            <div class="box-line-border radius-10 p-2 mt-3"
                                                                            *ngIf="employeeFinDetailsData">
                                                                                <div class="row">
                                                                                    <div class="col-md-2">
                                                                                        <label
                                                                                            class="form-label mt-1 mb-0">Employee
                                                                                            No. & Name</label>
                                                                                        <label
                                                                                            class="font-12 text-ellipsis mt-1 mb-0">
                                                                                            {{employeeFinDetailsData.employeeCode}}
                                                                                            -
                                                                                            {{employeeFinDetailsData.fullName}}</label>
                                                                                    </div>
                                                                                    <div class="col-md-2">
                                                                                        <label
                                                                                            class="form-label mt-1 mb-0">Date
                                                                                            of Joining</label>
                                                                                        <label
                                                                                            class="font-12 text-ellipsis mt-1 mb-0">
                                                                                            {{employeeFinDetailsData.joiningDate
                                                                                            | date: 'dd-MMM-yyyy'}}
                                                                                        </label>
                                                                                    </div>
                                                                                    
                                                                                    <div class="col-md-2">
                                                                                        <label
                                                                                            class="form-label mt-1 mb-0">Establishment</label>
                                                                                        <label
                                                                                            class="font-12 text-ellipsis mt-1 mb-0">
                                                                                            {{employeeFinDetailsData.establishment}}
                                                                                        </label>
                                                                                    </div>
                                                                                    <div class="col-md-2">
                                                                                        <label
                                                                                            class="form-label mt-1 mb-0">Department</label>
                                                                                        <label
                                                                                            class="font-12 text-ellipsis mt-1 mb-0">
                                                                                            
                                                                                        </label>
                                                                                    </div>
                                                                                    <div class="col-md-2">
                                                                                        <label
                                                                                            class="form-label mt-1 mb-0">Employee
                                                                                            Type</label>
                                                                                        <label
                                                                                            class="font-12 text-ellipsis mt-1 mb-0">
                                                                                            {{employeeFinDetailsData.employeeType}}
                                                                                        </label>
                                                                                    </div>
                                                                                    <div class="col-md-1">
                                                                                        <label
                                                                                            class="form-label mt-1 mb-0">Grade</label>
                                                                                        <label
                                                                                            class="font-12 text-ellipsis mt-1 mb-0">
                                                                                            {{employeeFinDetailsData.grade}}
                                                                                        </label>
                                                                                    </div>
                                                                                    <div class="col-md-2">
                                                                                        <label
                                                                                            class="form-label mt-1 mb-0">Designation</label>
                                                                                        <label
                                                                                            class="font-12 text-ellipsis mt-1 mb-0">
                                                                                            {{employeeFinDetailsData.designation}}
                                                                                        </label>
                                                                                    </div>
                                                                                    <div class="col-md-1">
                                                                                        <label
                                                                                            class="form-label mt-1 mb-0">Status</label>
                                                                                        <label
                                                                                            class="font-12 text-ellipsis mt-1 mb-0">
                                                                                            Probation
                                                                                        </label>
                                                                                    </div>
                                                                                </div>
                                                                            </div>
                                                                        </div>
                                                                    </div>



                                                                    <div class="row mt-20">
                                                                        <div class="col-md-12 pr-0 pl-0">
                                                                            <div class="border-card p-2 mt_2">
                                                                                <div class="row">
                                                                                    <div class="col-md-2"
                                                                                        *ngIf="selectedEmpData[index]">
                                                                                        <label
                                                                                            class="form-label mb-2">Currency</label>
                                                                                        <input type="text"
                                                                                            value="{{selectedEmpData[index].payrollArea.currency}}"
                                                                                            class="form-control"
                                                                                            disabled>
                                                                                    </div>
                                                                                    <div class="col-md-2"
                                                                                        *ngIf="selectedEmpData[index]">
                                                                                        <label class="form-label mb-2">
                                                                                            Payroll Area -
                                                                                            Frequency</label>
                                                                                        <input type="text"
                                                                                            class="form-control"
                                                                                            value="{{selectedEmpData[index].payrollArea.payrollAreaCode}} - {{selectedEmpData[index].frequency}}"
                                                                                            disabled>
                                                                                    </div>

                                                                                    <div class="col-md-3 ml-30"
                                                                                        *ngIf="selectedEmpData[index]">
                                                                                        <div class="row">
                                                                                            <div class="col-md-12 pl-0">
                                                                                                <!-- <label
                                                                                                    class="form-label mb-2">Default
                                                                                                    - From Date</label> -->
                                                                                                <div class="d-flex">
                                                                                                    <!-- <div
                                                                                                        class="form-group mr-2 mb-0">
                                                                                                        <div
                                                                                                            class="input-group">
                                                                                                            <input
                                                                                                                class="form-control"
                                                                                                                placeholder="Date"
                                                                                                                value="{{selectedEmpData[index].fromDate | date: 'dd-MMM-yyyy' }}"
                                                                                                                disabled>
                                                                                                            <div
                                                                                                                class="input-group-prepend">
                                                                                                                <span
                                                                                                                    class="input-group-text"><i
                                                                                                                        class="fa fa-calendar"></i></span>
                                                                                                            </div>
                                                                                                        </div>
                                                                                                    </div> -->
                                                                                                    <!-- <span
                                                                                                        class="ml-10 mt-7"><i
                                                                                                            class="fa fa-file-excel-o font-18 text-dark-green"
                                                                                                            tooltip="Export to Excel"></i></span> -->
                                                                                                </div>
                                                                                            </div>
                                                                                        </div>
                                                                                    </div>
                                                                                </div>
                                                                            </div>
                                                                        </div>
                                                                    </div>

                                                                    <div class="row">
                                                                        <div class="col-md-12 p-0">

                                                                            <!-- When navigate from Edit transaction button (update)-->
                                                                            <p-table *ngIf="!showEmployeeSelectionFlag"
                                                                                [value]="NonRecurringTransactionGroupAPIbyIdData"
                                                                                [paginator]="true" [rows]="10"
                                                                                [showCurrentPageReport]="true"
                                                                                currentPageReportTemplate="Showing {first} to {last} of {totalRecords} entries"
                                                                                [rowsPerPageOptions]="[10,25,50,100,200]"
                                                                                [style]="{'width':'100%', overflow: auto}">

                                                                                <ng-template pTemplate="header">
                                                                                    <tr>
                                                                                        <th rowspan="2">
                                                                                            Sr. No.
                                                                                        </th>
                                                                                        <th rowspan="2">
                                                                                            <div
                                                                                                class="p-d-flex p-jc-between p-ai-center">
                                                                                                Head Type
                                                                                                <div
                                                                                                    class="Sort_Filter_Position">
                                                                                                    <p-sortIcon
                                                                                                        field="payrollHeadMaster.displayName">
                                                                                                    </p-sortIcon>
                                                                                                    <p-columnFilter
                                                                                                        field="payrollHeadMaster.displayName"
                                                                                                        display="menu"
                                                                                                        class="p-ml-auto">
                                                                                                    </p-columnFilter>
                                                                                                </div>
                                                                                            </div>
                                                                                        </th>
                                                                                        <th rowspan="2">
                                                                                            <div
                                                                                                class="p-d-flex p-jc-between p-ai-center">
                                                                                                Head Description
                                                                                                <div
                                                                                                    class="Sort_Filter_Position">
                                                                                                    <p-sortIcon
                                                                                                        field="payrollHeadMaster.description">
                                                                                                    </p-sortIcon>
                                                                                                    <p-columnFilter
                                                                                                        field="payrollHeadMaster.description"
                                                                                                        display="menu"
                                                                                                        class="p-ml-auto">

                                                                                                    </p-columnFilter>
                                                                                                </div>
                                                                                            </div>
                                                                                        </th>
                                                                                        <th rowspan="2" class="wd-1">
                                                                                        </th>
                                                                                        <th rowspan="2" class="wd-5">
                                                                                            <div
                                                                                                class="p-d-flex p-jc-between p-ai-center">
                                                                                                Once Every
                                                                                                <div
                                                                                                    class="Sort_Filter_Position">
                                                                                                    <p-sortIcon
                                                                                                        field="onceEvery">
                                                                                                    </p-sortIcon>
                                                                                                    <p-columnFilter
                                                                                                        field="onceEvery"
                                                                                                        display="menu"
                                                                                                        class="p-ml-auto">

                                                                                                    </p-columnFilter>
                                                                                                </div>
                                                                                            </div>
                                                                                        </th>
                                                                                        <th rowspan="2" class="wd-8">
                                                                                            <div
                                                                                                class="p-d-flex p-jc-between p-ai-center">
                                                                                                Frequency
                                                                                                <div
                                                                                                    class="Sort_Filter_Position">
                                                                                                    <p-sortIcon
                                                                                                        field="frequency">
                                                                                                    </p-sortIcon>
                                                                                                    <p-columnFilter
                                                                                                        field="frequency"
                                                                                                        display="menu"
                                                                                                        class="p-ml-auto">

                                                                                                    </p-columnFilter>
                                                                                                </div>
                                                                                            </div>
                                                                                        </th>
                                                                                        <th rowspan="2" class="wd-10">
                                                                                            <div
                                                                                                class="p-d-flex p-jc-between p-ai-center">
                                                                                                From Date
                                                                                                <div
                                                                                                    class="Sort_Filter_Position">
                                                                                                    <p-sortIcon
                                                                                                        field="fromDate">
                                                                                                    </p-sortIcon>
                                                                                                    <p-columnFilter
                                                                                                        type="date"
                                                                                                        field="fromDate"
                                                                                                        display="menu"
                                                                                                        class="p-ml-auto">

                                                                                                    </p-columnFilter>
                                                                                                </div>
                                                                                            </div>
                                                                                        </th>
                                                                                        <th rowspan="2" class="wd-8">
                                                                                            <div
                                                                                                class="p-d-flex p-jc-between p-ai-center">
                                                                                                Type
                                                                                                <div
                                                                                                    class="Sort_Filter_Position">
                                                                                                    <p-sortIcon
                                                                                                        field="activtransactionsTypeity">
                                                                                                    </p-sortIcon>
                                                                                                    <p-columnFilter
                                                                                                        field="transactionsType"
                                                                                                        display="menu"
                                                                                                        class="p-ml-auto">

                                                                                                    </p-columnFilter>
                                                                                                </div>
                                                                                            </div>
                                                                                        </th>
                                                                                        <th rowspan="2" class="wd-5">
                                                                                            <div
                                                                                                class="p-d-flex p-jc-between p-ai-center">
                                                                                                No. of Transaction
                                                                                                <div
                                                                                                    class="Sort_Filter_Position">
                                                                                                    <p-sortIcon
                                                                                                        field="numberOfTransactions">
                                                                                                    </p-sortIcon>
                                                                                                    <p-columnFilter
                                                                                                        type="numeric"
                                                                                                        field="numberOfTransactions"
                                                                                                        display="menu"
                                                                                                        class="p-ml-auto">

                                                                                                    </p-columnFilter>
                                                                                                </div>
                                                                                            </div>
                                                                                        </th>
                                                                                        <th rowspan="2" class="wd-10">
                                                                                            <div
                                                                                                class="p-d-flex p-jc-between p-ai-center">
                                                                                                To Date
                                                                                                <div
                                                                                                    class="Sort_Filter_Position">
                                                                                                    <p-sortIcon
                                                                                                        field="toDate">
                                                                                                    </p-sortIcon>
                                                                                                    <p-columnFilter
                                                                                                        type="date"
                                                                                                        field="toDate"
                                                                                                        display="menu"
                                                                                                        class="p-ml-auto">

                                                                                                    </p-columnFilter>
                                                                                                </div>
                                                                                            </div>
                                                                                        </th>
                                                                                        <th rowspan="2" class="wd-10">
                                                                                            Clawback </th>
                                                                                        <th rowspan="2" class="wd-8">
                                                                                            <div
                                                                                                class="p-d-flex p-jc-between p-ai-center">
                                                                                                Opening Amount
                                                                                                <div
                                                                                                    class="Sort_Filter_Position">
                                                                                                    <p-sortIcon
                                                                                                        field="amount">
                                                                                                    </p-sortIcon>
                                                                                                    <p-columnFilter
                                                                                                        type="numeric"
                                                                                                        field="amount"
                                                                                                        display="menu"
                                                                                                        class="p-ml-auto">
                                                                                                    </p-columnFilter>
                                                                                                </div>
                                                                                            </div>
                                                                                        </th>

                                                                                        <th rowspan="2" class="wd-8">
                                                                                            <div
                                                                                                class="p-d-flex p-jc-between p-ai-center">
                                                                                                Closing Amount
                                                                                                <div
                                                                                                    class="Sort_Filter_Position">
                                                                                                    <p-sortIcon
                                                                                                        field="amount">
                                                                                                    </p-sortIcon>
                                                                                                    <p-columnFilter
                                                                                                        type="numeric"
                                                                                                        field="amount"
                                                                                                        display="menu"
                                                                                                        class="p-ml-auto">

                                                                                                    </p-columnFilter>
                                                                                                </div>
                                                                                            </div>
                                                                                        </th>
                                                                                        <th rowspan="2" class="wd-10">
                                                                                            Remark </th>
                                                                                        <th rowspan="2" class="wd-8">
                                                                                            Status </th>
                                                                                        <th rowspan="2"></th>
                                                                                    </tr>
                                                                                </ng-template>

                                                                                <ng-template pTemplate="body" let-data
                                                                                    let-rowIndex=rowIndex>
                                                                                    <tr class="p-selectable-row">
                                                                                        <td class="text-center">
                                                                                            {{rowIndex + 1}}</td>
                                                                                        <td class="bg-color-light_gray">
                                                                                            <label
                                                                                                class="form-lable mb-0 text-link"
                                                                                                (click)="viewTransaction(template1,data)">{{data.payrollHeadMaster.displayName}}</label>
                                                                                        </td>
                                                                                        <td class="bg-color-light_gray">
                                                                                            <label
                                                                                                class="form-lable mb-0">{{data.payrollHeadMaster.description}}</label>
                                                                                            &nbsp;&nbsp;&nbsp;
                                                                                        </td>
                                                                                        <td>
                                                                                            <i class="fa fa-users font-16 text-blue cursor-pointer"
                                                                                                aria-hidden="true"
                                                                                                *ngIf="data.payrollHeadMaster.description == 'RefererBonus'"
                                                                                                (click)="openReferalPopup(referalPopup,data)">
                                                                                            </i>
                                                                                        </td>
                                                                                        <td>
                                                                                            <input type="text"
                                                                                                value="{{data.onceEvery}}"
                                                                                                class="form-control"
                                                                                                onkeypress="return event.charCode >= 48 && event.charCode <= 57"
                                                                                                (focusout)="getOnceEveryChange($event.target.value)">
                                                                                        </td>
                                                                                        <td class="bg-color-light_gray">
                                                                                            <!-- <label
                                                                                                class="form-lable mb-0">{{data.frequency}}
                                                                                            </label> -->
                                                                                            <select
                                                                                                class="form-control custom-select wd-200"
                                                                                                (change)="getSelectedFrequency($event.target.value,data)">
                                                                                                <option value="">Select
                                                                                                </option>
                                                                                                <option value="Monthly"
                                                                                                    [selected]="data.frequency == 'Monthly'">
                                                                                                    Month </option>
                                                                                                <option
                                                                                                    value="Quarterly"
                                                                                                    [selected]="data.frequency == 'Quarterly'">
                                                                                                    Quarter </option>
                                                                                                <option
                                                                                                    value="HalfYearly"
                                                                                                    [selected]="data.frequency == 'HalfYearly'">
                                                                                                    HalfYear </option>
                                                                                                <option value="Yearly"
                                                                                                    [selected]="data.frequency == 'Yearly'">
                                                                                                    Year </option>
                                                                                                <option
                                                                                                    value="SemiMonthly"
                                                                                                    [selected]="data.frequency == 'SemiMonthly'">
                                                                                                    SemiMonth </option>
                                                                                                <option value="Weekly"
                                                                                                    [selected]="data.frequency == 'Weekly'">
                                                                                                    Week </option>
                                                                                                <option value="BiWeekly"
                                                                                                    [selected]="data.frequency == 'BiWeekly'">
                                                                                                    BiWeek </option>
                                                                                            </select>
                                                                                        </td>
                                                                                        <td>
                                                                                            <input
                                                                                                [bsConfig]="{ dateInputFormat: 'DD-MMM-YYYY' }"
                                                                                                data-provide="datepicker"
                                                                                                data-date-autoclose="true"
                                                                                                placeholder="Date"
                                                                                                bsDatepicker
                                                                                                [minDate]="effectiveFromDate"
                                                                                                [maxDate]="effectiveToDate"
                                                                                                value="{{data.fromDate}}"
                                                                                                (bsValueChange)="getFromDate($event)"
                                                                                                class="form-control wd-120">
                                                                                        </td>
                                                                                        <td>
                                                                                            <select name="revision type"
                                                                                                class="form-control custom-select wd-120"
                                                                                                (change)="getTransactionType($event.target.value,rowIndex,data)">
                                                                                                <option value=""
                                                                                                    [selected]="data.transactionsType == null || data.transactionsType == ''">
                                                                                                    Select</option>
                                                                                                <option
                                                                                                    value="NoOfTransaction"
                                                                                                    title="No. of Transaction"
                                                                                                    [selected]="data.transactionsType == 'NoOfTransaction'">
                                                                                                    No. of Trans
                                                                                                </option>
                                                                                                <option
                                                                                                    value="Perpetual"
                                                                                                    title="Perpetual"
                                                                                                    [selected]="data.transactionsType == 'Perpetual'">
                                                                                                    Perpetual</option>
                                                                                                <option
                                                                                                    value="Defined Date"
                                                                                                    title="Defined Date"
                                                                                                    [selected]="data.transactionsType == 'Defined Date'">
                                                                                                    Def Date
                                                                                                </option>
                                                                                            </select>
                                                                                        </td>
                                                                                        <td class="bg-color-light_gray">
                                                                                            <label
                                                                                                class="form-lable mb-0">
                                                                                                <input
                                                                                                    class="form-control"
                                                                                                    value="{{data.numberOfTransactions}}"
                                                                                                    onkeypress="return event.charCode >= 48 && event.charCode <= 57"
                                                                                                    (focusout)="getUpdateNoOfTransaction($event.target.value)"
                                                                                                    [disabled]="selectedTransactionType != 'NoOfTransaction'">
                                                                                            </label>
                                                                                        </td>
                                                                                        <td>
                                                                                            <!-- [maxDate]="effectiveToDate" -->
                                                                                            <input
                                                                                                data-provide="datepicker"
                                                                                                data-date-autoclose="true"
                                                                                                [bsConfig]="{ dateInputFormat: 'DD-MMM-YYYY' }"
                                                                                                placeholder="Date"
                                                                                                bsDatepicker
                                                                                                value="{{data.toDate}}"
                                                                                                [minDate]="setMinToDate"
                                                                                                [maxDate]="effectiveToDate"
                                                                                                (bsValueChange)="getToDate($event)"
                                                                                                class="form-control wd-120"
                                                                                                [disabled]="selectedTransactionIndex == rowIndex && (selectedTransactionType == 'NoOfTransaction'
                                                                                                || selectedTransactionType == 'Perpetual') ">
                                                                                        </td>
                                                                                        <td>
                                                                                            <i class="fa fa-external-link font-16 text-blue cursor-pointer"
                                                                                                aria-hidden="true"
                                                                                                (click)="ViewClawbackpopup(template4,data)">
                                                                                            </i> &nbsp;&nbsp;&nbsp;
                                                                                            <i class="fa fa-history font-16 text-blue cursor-pointer"
                                                                                                aria-hidden="true"
                                                                                                (click)="ViewClawbackpopup(template4,data)"
                                                                                                *ngIf="selectedApplicableAt != ''"></i>
                                                                                        </td>
                                                                                        <td class="bg-color-light_gray">
                                                                                            <input
                                                                                                class="form-lable mb-0"
                                                                                                value="{{data.amount | number: '1.2-2'}}"
                                                                                                disabled>
                                                                                        </td>
                                                                                        <td>
                                                                                            <input type="number"
                                                                                                value="{{data.amount | number: '1.2-2'}}"
                                                                                                class="form-control"
                                                                                                [disabled]="data.executeSDM == 'YES' || data.executeSDM == 'Yes'"
                                                                                                (focusout)="getUpdateOpeningAmt($event.target.value,data)">
                                                                                        </td>
                                                                                        <td>
                                                                                            <input type="text"
                                                                                                value={{data.remark}}
                                                                                                class="form-control wd-100"
                                                                                                (focusout)="getRemarkChange($event.target.value)">
                                                                                        </td>
                                                                                        <td>
                                                                                            <label></label>
                                                                                        </td>
                                                                                        <td>
                                                                                            <div class="col-md-2"
                                                                                                *ngIf="data.deviationCount">
                                                                                                <div
                                                                                                    class="custom_Label_badge bagde1">
                                                                                                    <button
                                                                                                        class="btn defaultbtn"
                                                                                                        (click)="editdeviationPopupOpen(editdeviationPopup,data,rowIndex)">
                                                                                                        <i class="fa fa-deviantart font-16 text-blue cursor-pointer"
                                                                                                            aria-hidden="true">
                                                                                                        </i></button>
                                                                                                    <span
                                                                                                        class="Label_badge"
                                                                                                        style="text-align: center;">{{data.deviationCount}}</span>
                                                                                                </div>
                                                                                            </div>
                                                                                            <span
                                                                                                class="ml-1 mt-2 d-flex">
                                                                                                &nbsp;
                                                                                                <i tooltip="View Schedule"
                                                                                                    class="fa fa-eye font-16 text-blue cursor-pointer"
                                                                                                    (click)="ViewTransactionScheduleDetail(templateTransaction,data)"
                                                                                                    aria-hidden="true">
                                                                                                </i>
                                                                                            </span>
                                                                                        </td>
                                                                                    </tr>
                                                                                </ng-template>

                                                                                <ng-template pTemplate="emptymessage">
                                                                                    <tr>
                                                                                        <td colspan="15"
                                                                                            class="font-14 font500 text-center text-red">
                                                                                            <span>No Data
                                                                                                Available</span>
                                                                                        </td>
                                                                                    </tr>
                                                                                </ng-template>
                                                                            </p-table>

                                                                            <!-- On click on transaction tab (save)-->
                                                                            <p-table *ngIf="showEmployeeSelectionFlag && NonRecurringTransactionGroupAPIEmpwiseData"
                                                                                [value]="NonRecurringTransactionGroupAPIEmpwiseData"
                                                                                [paginator]="true" [rows]="10"
                                                                                [showCurrentPageReport]="true"
                                                                                currentPageReportTemplate="Showing {first} to {last} of {totalRecords} entries"
                                                                                [rowsPerPageOptions]="[10,25,50,100,200]"
                                                                                [style]="{'width':'100%', overflow: auto}">

                                                                                <ng-template pTemplate="header">
                                                                                    <tr>
                                                                                        <th rowspan="2">
                                                                                            Sr. No.
                                                                                        </th>
                                                                                        <th rowspan="2">
                                                                                            <div
                                                                                                class="p-d-flex p-jc-between p-ai-center">
                                                                                                Head Type
                                                                                                <div
                                                                                                    class="Sort_Filter_Position">
                                                                                                    <p-sortIcon
                                                                                                        field="headType">
                                                                                                    </p-sortIcon>
                                                                                                    <p-columnFilter
                                                                                                        field="headType"
                                                                                                        display="menu"
                                                                                                        class="p-ml-auto">
                                                                                                    </p-columnFilter>
                                                                                                </div>
                                                                                            </div>
                                                                                        </th>
                                                                                        <th rowspan="2">
                                                                                            <div
                                                                                                class="p-d-flex p-jc-between p-ai-center">
                                                                                                Head Description
                                                                                                <div
                                                                                                    class="Sort_Filter_Position">
                                                                                                    <p-sortIcon
                                                                                                        field="headDescription">
                                                                                                    </p-sortIcon>
                                                                                                    <p-columnFilter
                                                                                                        field="headDescription"
                                                                                                        display="menu"
                                                                                                        class="p-ml-auto">

                                                                                                    </p-columnFilter>
                                                                                                </div>
                                                                                            </div>
                                                                                        </th>
                                                                                        <th rowspan="2" class="wd-1"
                                                                                            *ngIf="isRefererBonus">
                                                                                        </th>
                                                                                        <th rowspan="2" class="wd-5">
                                                                                            <div
                                                                                                class="p-d-flex p-jc-between p-ai-center">
                                                                                                Once Every
                                                                                                <div
                                                                                                    class="Sort_Filter_Position">
                                                                                                    <p-sortIcon
                                                                                                        field="onceEvery">
                                                                                                    </p-sortIcon>
                                                                                                    <p-columnFilter
                                                                                                        field="onceEvery"
                                                                                                        display="menu"
                                                                                                        class="p-ml-auto">

                                                                                                    </p-columnFilter>
                                                                                                </div>
                                                                                            </div>
                                                                                        </th>
                                                                                        <th rowspan="2" class="wd-8">
                                                                                            <div
                                                                                                class="p-d-flex p-jc-between p-ai-center">
                                                                                                Frequency
                                                                                                <div
                                                                                                    class="Sort_Filter_Position">
                                                                                                    <p-sortIcon
                                                                                                        field="frequency">
                                                                                                    </p-sortIcon>
                                                                                                    <p-columnFilter
                                                                                                        field="frequency"
                                                                                                        display="menu"
                                                                                                        class="p-ml-auto">

                                                                                                    </p-columnFilter>
                                                                                                </div>
                                                                                            </div>
                                                                                        </th>
                                                                                        <th rowspan="2" class="wd-10">
                                                                                            <div
                                                                                                class="p-d-flex p-jc-between p-ai-center">
                                                                                                From Date
                                                                                                <div
                                                                                                    class="Sort_Filter_Position">
                                                                                                    <p-sortIcon
                                                                                                        field="fromDate">
                                                                                                    </p-sortIcon>
                                                                                                    <p-columnFilter
                                                                                                        field="fromDate"
                                                                                                        display="menu"
                                                                                                        class="p-ml-auto">

                                                                                                    </p-columnFilter>
                                                                                                </div>
                                                                                            </div>
                                                                                        </th>
                                                                                        <th rowspan="2" class="wd-8">
                                                                                            <div
                                                                                                class="p-d-flex p-jc-between p-ai-center">
                                                                                                Type
                                                                                                <div
                                                                                                    class="Sort_Filter_Position">
                                                                                                    <p-sortIcon
                                                                                                        field="transactionsType">
                                                                                                    </p-sortIcon>
                                                                                                    <p-columnFilter
                                                                                                        field="transactionsType"
                                                                                                        display="menu"
                                                                                                        class="p-ml-auto">

                                                                                                    </p-columnFilter>
                                                                                                </div>
                                                                                            </div>
                                                                                        </th>
                                                                                        <th rowspan="2" class="wd-5">
                                                                                            <div
                                                                                                class="p-d-flex p-jc-between p-ai-center">
                                                                                                No. of Transaction
                                                                                                <div
                                                                                                    class="Sort_Filter_Position">
                                                                                                    <p-sortIcon
                                                                                                        field="numberOfTransactions">
                                                                                                    </p-sortIcon>
                                                                                                    <p-columnFilter
                                                                                                        field="numberOfTransactions"
                                                                                                        display="menu"
                                                                                                        class="p-ml-auto">

                                                                                                    </p-columnFilter>
                                                                                                </div>
                                                                                            </div>
                                                                                        </th>
                                                                                        <th rowspan="2" class="wd-10">
                                                                                            <div
                                                                                                class="p-d-flex p-jc-between p-ai-center">
                                                                                                To Date
                                                                                                <div
                                                                                                    class="Sort_Filter_Position">
                                                                                                    <p-sortIcon
                                                                                                        field="toDate">
                                                                                                    </p-sortIcon>
                                                                                                    <p-columnFilter
                                                                                                        field="toDate"
                                                                                                        display="menu"
                                                                                                        class="p-ml-auto">

                                                                                                    </p-columnFilter>
                                                                                                </div>
                                                                                            </div>
                                                                                        </th>
                                                                                        <th rowspan="2" class="wd-10">
                                                                                            Clawback </th>
                                                                                        <th rowspan="2" class="wd-8">
                                                                                            <div
                                                                                                class="p-d-flex p-jc-between p-ai-center">
                                                                                                Opening Amount
                                                                                                <div
                                                                                                    class="Sort_Filter_Position">
                                                                                                    <p-sortIcon
                                                                                                        field="amount">
                                                                                                    </p-sortIcon>
                                                                                                    <p-columnFilter
                                                                                                        field="amount"
                                                                                                        display="menu"
                                                                                                        class="p-ml-auto">
                                                                                                    </p-columnFilter>
                                                                                                </div>
                                                                                            </div>
                                                                                        </th>

                                                                                        <th rowspan="2" class="wd-8">
                                                                                            <div
                                                                                                class="p-d-flex p-jc-between p-ai-center">
                                                                                                Closing Amount
                                                                                                <div
                                                                                                    class="Sort_Filter_Position">
                                                                                                    <p-sortIcon
                                                                                                        field="amount">
                                                                                                    </p-sortIcon>
                                                                                                    <p-columnFilter
                                                                                                        field="amount"
                                                                                                        display="menu"
                                                                                                        class="p-ml-auto">

                                                                                                    </p-columnFilter>
                                                                                                </div>
                                                                                            </div>
                                                                                        </th>
                                                                                        <th rowspan="2" class="wd-10">
                                                                                            Remark </th>

                                                                                        <th rowspan="2"></th>
                                                                                    </tr>
                                                                                </ng-template>

                                                                                <ng-template pTemplate="body" let-data
                                                                                    let-rowIndex=rowIndex>
                                                                                    <tr class="p-selectable-row">
                                                                                        <td class="text-center">
                                                                                            {{rowIndex + 1}}</td>
                                                                                        <td class="bg-color-light_gray">
                                                                                            <label
                                                                                                class="form-lable mb-0">
                                                                                                <!-- text-link (click)="ViewTransactionHistoryDataByEmployee(template1,data)" -->
                                                                                                {{data.headType}}
                                                                                            </label>
                                                                                        </td>
                                                                                        <td class="bg-color-light_gray">
                                                                                            <label
                                                                                                class="form-lable mb-0">{{data.headDescription}}</label>
                                                                                            &nbsp;&nbsp;&nbsp;

                                                                                        </td>
                                                                                        <td *ngIf="isRefererBonus">
                                                                                            <i class="fa fa-users font-16 text-blue cursor-pointer"
                                                                                                aria-hidden="true"
                                                                                                *ngIf="data.headDescription == 'RefererBonus'"
                                                                                                (click)="openReferalPopup(referalPopup,data)">
                                                                                            </i>
                                                                                        </td>

                                                                                        <td>
                                                                                            <input type="text" value="1"
                                                                                                class="form-control"
                                                                                                onkeypress="return event.charCode >= 48 && event.charCode <= 57"
                                                                                                (focusout)="getOnceEveryChangeForSave($event.target.value,data)">
                                                                                        </td>
                                                                                        <td class="bg-color-light_gray">
                                                                                            <select
                                                                                                class="form-control custom-select wd-200"
                                                                                                (change)="getSelectedFrequency($event.target.value,data)">
                                                                                                <option value="">Select
                                                                                                </option>
                                                                                                <option value="Monthly"
                                                                                                    [selected]="data.frequency == 'Monthly'">
                                                                                                    Month </option>
                                                                                                <option
                                                                                                    value="Quarterly"
                                                                                                    [selected]="data.frequency == 'Quarterly'">
                                                                                                    Quarter </option>
                                                                                                <option
                                                                                                    value="HalfYearly"
                                                                                                    [selected]="data.frequency == 'HalfYearly'">
                                                                                                    HalfYear </option>
                                                                                                <option value="Yearly"
                                                                                                    [selected]="data.frequency == 'Yearly'">
                                                                                                    Year </option>
                                                                                                <option
                                                                                                    value="SemiMonthly"
                                                                                                    [selected]="data.frequency == 'SemiMonthly'">
                                                                                                    SemiMonth </option>
                                                                                                <option value="Weekly"
                                                                                                    [selected]="data.frequency == 'Weekly'">
                                                                                                    Week </option>
                                                                                                <option value="BiWeekly"
                                                                                                    [selected]="data.frequency == 'BiWeekly'">
                                                                                                    BiWeek </option>
                                                                                            </select>
                                                                                            <!-- <input
                                                                                                class="form-lable mb-0" (focusout)="getSelectedFrequency($event.target.value,data)" value="{{data.frequency}}"
                                                                                            > -->
                                                                                        </td>
                                                                                        <td>
                                                                                            <span
                                                                                                (click)="copyFromDateToAll(data,rowIndex)"
                                                                                                style="cursor: pointer !important;">
                                                                                                <i
                                                                                                    class="fa fa-clone text-blue font-16"></i>
                                                                                            </span> &nbsp;&nbsp;
                                                                                            <input
                                                                                                [bsConfig]="{ dateInputFormat: 'DD-MMM-YYYY' }"
                                                                                                data-provide="datepicker"
                                                                                                data-date-autoclose="true"
                                                                                                placeholder="Date"
                                                                                                bsDatepicker
                                                                                                [minDate]="effectiveFromDate"
                                                                                                [maxDate]="effectiveToDate"
                                                                                                value="{{data.fromdate | date :'dd-MMM-yyyy'}}"
                                                                                                (bsValueChange)="getFromDateForSave($event,data,rowIndex)"
                                                                                                class="form-control wd-100">
                                                                                        </td>
                                                                                        <td>
                                                                                            <select name="revision type"
                                                                                                class="form-control custom-select wd-120"
                                                                                                (change)="getTransactionTypeForSave($event.target.value,rowIndex,data)">
                                                                                                <option value=""
                                                                                                    [selected]="data.transactionsType == null || data.transactionsType == ''">
                                                                                                    Select</option>
                                                                                                <option
                                                                                                    value="NoOfTransaction"
                                                                                                    title="No. of Transaction"
                                                                                                    [selected]="data.transactionsType == 'NoOfTransaction'">
                                                                                                    No. of Trans
                                                                                                </option>
                                                                                                <option
                                                                                                    value="Perpetual"
                                                                                                    title="Perpetual"
                                                                                                    [selected]="data.transactionsType == 'Perpetual'">
                                                                                                    Perpetual</option>
                                                                                                <option
                                                                                                    value="Defined Date"
                                                                                                    title="Defined Date"
                                                                                                    [selected]="data.transactionsType == 'Defined Date'">
                                                                                                    Def Date
                                                                                                </option>
                                                                                            </select>
                                                                                        </td>
                                                                                        <td class="bg-color-light_gray">
                                                                                            <!-- [(ngModel)]="savedNumberOfTransaction" -->
                                                                                            <label
                                                                                                class="form-lable mb-0">
                                                                                                <input
                                                                                                    class="form-control"
                                                                                                    onkeypress="return event.charCode >= 48 && event.charCode <= 57"
                                                                                                    [value]="data.transactionsType != 'NoOfTransaction' ? '' : 1"
                                                                                                    (focusout)="saveNoOfTransaction($event.target.value,data)"
                                                                                                    [disabled]="data.transactionsType != 'NoOfTransaction'">
                                                                                            </label>
                                                                                        </td>
                                                                                        <td>
                                                                                            <!-- [disabled]="(selectedTransactionIndex == rowIndex && (selectedTransactionType == 'NoOfTransaction' -->
                                                                                            <!-- || selectedTransactionType == 'Perpetual')) || selectedTransactionTypes[rowIndex] == 'NoOfTransaction' " -->
                                                                                            <input
                                                                                                data-provide="datepicker"
                                                                                                [bsConfig]="{ dateInputFormat: 'DD-MMM-YYYY' }"
                                                                                                data-date-autoclose="true"
                                                                                                placeholder="Date"
                                                                                                bsDatepicker
                                                                                                value="{{data.todate}}"
                                                                                                class="form-control wd-120"
                                                                                                [minDate]="setMinToDate"
                                                                                                [maxDate]="effectiveToDate"
                                                                                                (bsValueChange)="getToDateForSave($event,data)"
                                                                                                [disabled]="data.transactionsType != 'Defined Date'">
                                                                                        </td>
                                                                                        <td>
                                                                                            <i class="fa fa-external-link font-16 text-blue cursor-pointer"
                                                                                                aria-hidden="true"
                                                                                                (click)="ViewClawbackpopup(template4,data,rowIndex)">
                                                                                            </i>&nbsp;&nbsp;&nbsp;
                                                                                            <i class="fa fa-history font-16 text-blue cursor-pointer"
                                                                                                aria-hidden="true"
                                                                                                (click)="ViewClawbackpopup(template4,data,rowIndex)"
                                                                                                *ngIf="data.showClawback"></i>
                                                                                        </td>
                                                                                        <td class="bg-color-light_gray">
                                                                                            <input class="form-control"
                                                                                                value="{{data.openingAmount | number: '1.2-2'}}"
                                                                                                disabled>
                                                                                        </td>
                                                                                        <td>
                                                                                            <!-- [disabled]="data.executeSDM == 'YES' || data.executeSDM == 'Yes'" -->
                                                                                            <input type="number"
                                                                                                value="{{data.closingAmount | number: '1.2-2'}}"
                                                                                                class="form-control"
                                                                                                [disabled]="data.executeSDM == 'YES' || data.executeSDM == 'Yes'"
                                                                                                (focusout)="transactionOpeningAmount($event.target.value,data,rowIndex)">
                                                                                        </td>
                                                                                        <td>
                                                                                            <input type="text"
                                                                                                value={{data.remark}}
                                                                                                class="form-control wd-100"
                                                                                                (focusout)="getRemarkChangeForSave($event.target.value,data)">
                                                                                        </td>
                                                                                        <td>
                                                                                            <div class="col-md-2"
                                                                                                *ngIf="data.deviationCount">
                                                                                                <div
                                                                                                    class="custom_Label_badge bagde1">
                                                                                                    <button
                                                                                                        class="btn defaultbtn"
                                                                                                        (click)="deviationPopupOpen(deviationPopup,data,rowIndex)">
                                                                                                        <i class="fa fa-deviantart font-16 text-blue cursor-pointer"
                                                                                                            aria-hidden="true">
                                                                                                        </i></button>
                                                                                                    <span
                                                                                                        class="Label_badge"
                                                                                                        style="text-align: center;">{{data.deviationCount}}</span>
                                                                                                </div>
                                                                                            </div>


                                                                                            <!-- <span class="Label_badge" style="text-align: center;">{{data.deviationCount}}</span> -->
                                                                                        </td>
                                                                                    </tr>



                                                                                </ng-template>

                                                                                <ng-template pTemplate="emptymessage">
                                                                                    <tr>
                                                                                        <td colspan="15"
                                                                                            class="font-14 font500 text-center text-red">
                                                                                            <span>No Data
                                                                                                Available</span>
                                                                                        </td>
                                                                                    </tr>
                                                                                </ng-template>
                                                                            </p-table>


                                                                        </div>
                                                                    </div>

                                                                    <!-- Buttons -->
                                                                    <div class="row mt-15">
                                                                        <div class="col-12">
                                                                            <div class="float-right mb-15">
                                                                                <button type="submit"
                                                                                    tooltip="Update & Next"
                                                                                    *ngIf="!showEmployeeSelectionFlag"
                                                                                    (click)="saveAndNextTransaction()"
                                                                                    [disabled]="selectedEmpData.length == 1 || (selectedEmpData.length-1) == index"
                                                                                    [ngClass]="{'disabled-btn-bg-green' : selectedEmpData.length == 1 || (selectedEmpData.length-1) == index}"
                                                                                    class="custom_button custom_btn btn-bg-green btn-labeled btn-labeled-left ripple">
                                                                                    <b> <i class="fa fa-floppy-o"></i>
                                                                                    </b>
                                                                                    Update & Next
                                                                                </button>
                                                                                <button type="submit"
                                                                                    tooltip="Save & Next"
                                                                                    *ngIf="showDropdownDisabled"
                                                                                    (click)="NonRecurringTransactionGroup();saveAndNextPayrollTransaction()"
                                                                                    [disabled]="payrollListEmpData.length == 1 || (payrollListEmpData.length-1) == parollListIndex"
                                                                                    [ngClass]="{'disabled-btn-bg-green' : payrollListEmpData.length == 1 || (payrollListEmpData.length-1) == parollListIndex}"
                                                                                    class="custom_button custom_btn btn-bg-green btn-labeled btn-labeled-left ripple">
                                                                                    <b> <i class="fa fa-floppy-o"></i>
                                                                                    </b>
                                                                                    Save & Next
                                                                                </button>
                                                                                <button type="button" tooltip="Update"
                                                                                    *ngIf="!showEmployeeSelectionFlag"
                                                                                    (click)="updateSingleTransaction()"
                                                                                    class="custom_button custom_btn btn-bg-green btn-labeled btn-labeled-left ml-10">
                                                                                    <b><i class="fa fa-floppy-o"
                                                                                            aria-hidden="true"></i></b>
                                                                                    Update
                                                                                </button>
                                                                                <button type="button" tooltip="Save"
                                                                                    *ngIf="showEmployeeSelectionFlag"
                                                                                    [disabled]="svaeDisabledFlag"
                                                                                    [ngClass]="{'disabled-btn-bg-green' : svaeDisabledFlag}"
                                                                                    (click)="NonRecurringTransactionGroup()"
                                                                                    class="custom_button custom_btn btn-bg-green btn-labeled btn-labeled-left ml-10">
                                                                                    <b><i class="fa fa-floppy-o"
                                                                                            aria-hidden="true"></i></b>
                                                                                    Save
                                                                                </button>
                                                                                <button type="button" tooltip="Previous"
                                                                                    *ngIf="!showEmployeeSelectionFlag"
                                                                                    [disabled]="selectedEmpData.length == 1 || index == 0"
                                                                                    [ngClass]="{'disabled-btn-bg-green' : selectedEmpData.length == 1 || index == 0}"
                                                                                    class="custom_button custom_btn bg-teal-400 btn-labeled btn-labeled-left ml-10"
                                                                                    (click)="prevEmpData()">
                                                                                    <b><i class="fa fa-angle-double-left"
                                                                                            aria-hidden="true"></i></b>
                                                                                    Previous
                                                                                </button>
                                                                                <button type="button" tooltip="Previous"
                                                                                    *ngIf="showDropdownDisabled"
                                                                                    [disabled]="payrollListEmpData.length == 1 || parollListIndex == 0"
                                                                                    [ngClass]="{'disabled-btn-bg-green' : payrollListEmpData.length == 1 || parollListIndex == 0}"
                                                                                    class="custom_button custom_btn bg-teal-400 btn-labeled btn-labeled-left ml-10"
                                                                                    (click)="prevEmpPayrollData()">
                                                                                    <b><i class="fa fa-angle-double-left"
                                                                                            aria-hidden="true"></i></b>
                                                                                    Previous
                                                                                </button>
                                                                                <button type="button" tooltip="Next"
                                                                                    *ngIf="!showEmployeeSelectionFlag"
                                                                                    [disabled]="selectedEmpData.length == 1 || (selectedEmpData.length-1) == index"
                                                                                    [ngClass]="{'disabled-btn-bg-green' : selectedEmpData.length == 1 || (selectedEmpData.length-1) == index}"
                                                                                    class="custom_button custom_btn bg-teal-400 btn-labeled btn-labeled-left ml-10"
                                                                                    (click)="nextEmpData()">
                                                                                    <b><i class="fa fa-angle-double-right"
                                                                                            aria-hidden="true"></i></b>
                                                                                    Next
                                                                                </button>
                                                                                <button type="button" tooltip="Next"
                                                                                    *ngIf="showDropdownDisabled"
                                                                                    [disabled]="payrollListEmpData.length == 1 || (payrollListEmpData.length-1) == parollListIndex"
                                                                                    [ngClass]="{'disabled-btn-bg-green' : payrollListEmpData.length == 1 || (payrollListEmpData.length-1) == parollListIndex}"
                                                                                    class="custom_button custom_btn bg-teal-400 btn-labeled btn-labeled-left ml-10"
                                                                                    (click)="nextEmpPayrollData()">
                                                                                    <b><i class="fa fa-angle-double-right"
                                                                                            aria-hidden="true"></i></b>
                                                                                    Next 
                                                                                </button>
                                                                                <button type="button" tooltip="Reset"
                                                                                *ngIf="showEmployeeSelectionFlag"
                                                                                    (click)="resetTransactionForm()"
                                                                                    class="custom_button custom_btn bg-teal-400 btn-labeled btn-labeled-left ml-10">
                                                                                    <b><i class="fa fa-refresh"
                                                                                            aria-hidden="true"></i></b>
                                                                                    Reset
                                                                                </button>
                                                                                <button type="button" tooltip="Cancel"
                                                                                    class="custom_button custom_btn bg-teal-400 btn-labeled btn-labeled-left ml-10"
                                                                                    (click)="cancelBtn()">
                                                                                    <b><i class="fa fa-times-circle"
                                                                                            aria-hidden="true"></i></b>
                                                                                    Cancel
                                                                                </button>
                                                                            </div>
                                                                        </div>
                                                                    </div>
                                                                </div>

                                                            </div>

                                                            <app-fastentry-nr-amt *ngIf="selectedOption != 'single'"></app-fastentry-nr-amt>
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>

                                        <label class="nav" for="Transaction"
                                            [ngClass]="{'disabled-tab' : selectedEmpData.length > 0}">
                                            <span> Transaction </span>
                                        </label>


                                        <!------------- ------------  Schedule --------------------->
                                        <input name="nav" type="radio" class="about-radio" id="Schedule"
                                            [checked]="indexId == 3" (click)="getAllScheduleData()"
                                            [disabled]="selectedEmpData.length > 0" />

                                        <div class="tabs about-page">
                                            <div class="row">
                                                <div class="col-md-12">
                                                    <div class="card">
                                                        <div class="card-body">
                                                            <!-- Selected Employee basic infrmation-->
                                                            <div class="row mt-10">
                                                                <div class="col-md-12 pl-0 pr-0">
                                                                    <div class="box-line-border radius-10 p-2 mt-3"
                                                                        *ngIf="selectedEmpData[index]">
                                                                        <div class="row">
                                                                            <div class="col-md-4">
                                                                                <label
                                                                                    class="form-label mt-1 mb-0">Employee
                                                                                    No. & Name</label>
                                                                                <label
                                                                                    class="font-12 text-ellipsis mt-1 mb-0">
                                                                                    {{selectedEmpData[index].employeeMasterResponseDTO.employeeCode}}
                                                                                    -
                                                                                    {{selectedEmpData[index].employeeMasterResponseDTO.fullName}}</label>
                                                                            </div>
                                                                            <div class="col-md-2">
                                                                                <label
                                                                                    class="form-label mt-1 mb-0">Payroll
                                                                                    Area</label>
                                                                                <label
                                                                                    class="font-12 text-ellipsis mt-1 mb-0">
                                                                                    {{selectedEmpData[index].payrollArea.payrollAreaCode}}
                                                                                </label>
                                                                            </div>
                                                                            <div class="col-md-2">
                                                                                <label
                                                                                    class="form-label mt-1 mb-0">Head</label>
                                                                                <label
                                                                                    class="font-12 text-ellipsis mt-1 mb-0">
                                                                                    {{selectedEmpData[index].payrollHeadMaster.displayName}}
                                                                                </label>
                                                                            </div>
                                                                            <div class="col-md-2">
                                                                                <label
                                                                                    class="form-label mt-1 mb-0">Frequency</label>
                                                                                <label
                                                                                    class="font-12 text-ellipsis mt-1 mb-0">
                                                                                    {{selectedEmpData[index].frequency}}
                                                                                </label>
                                                                            </div>
                                                                            <div class="col-md-2">
                                                                                <label
                                                                                    class="form-label mt-1 mb-0">Transaction
                                                                                    Id</label>
                                                                                <label
                                                                                    class="font-12 text-ellipsis mt-1 mb-0">
                                                                                    {{selectedEmpData[index].nonRecurringTransactionGroupId}}
                                                                                </label>
                                                                            </div>

                                                                        </div>
                                                                    </div>
                                                                </div>
                                                            </div>
                                                            <br>

                                                            <div class="row mb-10">

                                                                <div class="col-md-12">
                                                                    <div class="float-right">
                                                                        <button type="button" tooltip="Approve"
                                                                            class="custom_button custom_btn btn-bg-green btn-labeled btn-labeled-left mr-10"><b><i
                                                                                    class="fa fa-check-square-o"></i></b>
                                                                            Approve </button>
                                                                    </div>
                                                                </div>
                                                            </div>

                                                            <!-- Edit schedule data-->
                                                            <a tooltip="Download" style="cursor: pointer;float:right;"
                                                                (click)="ScheduleExportAsXLSX()"
                                                                *ngIf="editScheduleFlag">
                                                                <i class="fa fa-file-excel-o font-18 text-dark-green pt-10  mr-10"
                                                                    aria-hidden="true">
                                                                </i>
                                                            </a>

                                                            <p-table [value]="NonRecurringTransactionScheduleEMPdData"
                                                                class="mt-10" [paginator]="true" [rows]="10"
                                                                [showCurrentPageReport]="true"
                                                                currentPageReportTemplate="Showing {first} to {last} of {totalRecords} entries"
                                                                [rowsPerPageOptions]="[10,25,50,100,200]"
                                                                *ngIf="editScheduleFlag">

                                                                <ng-template pTemplate="header">
                                                                    <tr>
                                                                        <th rowspan="2" class="wd-5">
                                                                            Sr. No.

                                                                        </th>
                                                                        <th rowspan="2" class="wd-8">
                                                                            <div
                                                                                class="p-d-flex p-jc-between p-ai-center">
                                                                                Emp. Code
                                                                                <div class="Sort_Filter_Position">
                                                                                    <p-sortIcon field="employeeCode">
                                                                                    </p-sortIcon>
                                                                                    <p-columnFilter field="employeeCode"
                                                                                        display="menu"
                                                                                        class="p-ml-auto">
                                                                                    </p-columnFilter>
                                                                                </div>
                                                                            </div>
                                                                        </th>
                                                                        <th rowspan="2">
                                                                            <div
                                                                                class="p-d-flex p-jc-between p-ai-center">
                                                                                Emp. Name
                                                                                <div class="Sort_Filter_Position">
                                                                                    <p-sortIcon field="fullName">
                                                                                    </p-sortIcon>
                                                                                    <p-columnFilter field="fullName"
                                                                                        display="menu"
                                                                                        class="p-ml-auto">

                                                                                    </p-columnFilter>
                                                                                </div>
                                                                            </div>
                                                                        </th>
                                                                        <th rowspan="2">
                                                                            <div
                                                                                class="p-d-flex p-jc-between p-ai-center">
                                                                                Payroll Area
                                                                                <div class="Sort_Filter_Position">
                                                                                    <p-sortIcon field="payrollAreaCode">
                                                                                    </p-sortIcon>
                                                                                    <p-columnFilter
                                                                                        field="payrollAreaCode"
                                                                                        display="menu"
                                                                                        class="p-ml-auto">
                                                                                    </p-columnFilter>
                                                                                </div>
                                                                            </div>
                                                                        </th>

                                                                        <th rowspan="2" class="wd-5">
                                                                            <div
                                                                                class="p-d-flex p-jc-between p-ai-center">
                                                                                Head
                                                                                <div class="Sort_Filter_Position">
                                                                                    <p-sortIcon field="displayName">
                                                                                    </p-sortIcon>
                                                                                    <p-columnFilter field="displayName"
                                                                                        display="menu"
                                                                                        class="p-ml-auto">

                                                                                    </p-columnFilter>
                                                                                </div>
                                                                            </div>
                                                                        </th>
                                                                        <th rowspan="2">
                                                                            <div
                                                                                class="p-d-flex p-jc-between p-ai-center">
                                                                                Group Id
                                                                                <div class="Sort_Filter_Position">
                                                                                    <p-sortIcon
                                                                                        field="nonRecurringTransactionGroupId">
                                                                                    </p-sortIcon>
                                                                                    <p-columnFilter
                                                                                        field="nonRecurringTransactionGroupId"
                                                                                        display="menu"
                                                                                        class="p-ml-auto">

                                                                                    </p-columnFilter>
                                                                                </div>
                                                                            </div>
                                                                        </th>
                                                                        <th colspan="3" class="wd-8">
                                                                            <div
                                                                                class="p-d-flex p-jc-center p-ai-center">
                                                                                Schedule
                                                                                <div class="Sort_Filter_Position">
                                                                                    <p-sortIcon
                                                                                        field="nonRecurringTransactionScheduleId">
                                                                                    </p-sortIcon>
                                                                                    <p-columnFilter
                                                                                        field="nonRecurringTransactionScheduleId"
                                                                                        display="menu"
                                                                                        class="p-ml-auto">

                                                                                    </p-columnFilter>
                                                                                </div>
                                                                            </div>
                                                                        </th>

                                                                        <th rowspan="2">
                                                                            <div
                                                                                class="p-d-flex p-jc-between p-ai-center">
                                                                                Processed Amount
                                                                                <div class="Sort_Filter_Position">
                                                                                    <p-sortIcon
                                                                                        field="transactionAmount">
                                                                                    </p-sortIcon>
                                                                                    <p-columnFilter type="numeric"
                                                                                        field="transactionAmount"
                                                                                        display="menu"
                                                                                        class="p-ml-auto">

                                                                                    </p-columnFilter>
                                                                                </div>
                                                                            </div>
                                                                        </th>
                                                                        <th rowspan="2">
                                                                            <div
                                                                                class="p-d-flex p-jc-between p-ai-center">
                                                                                Balance Amount
                                                                                <div class="Sort_Filter_Position">
                                                                                    <p-sortIcon
                                                                                        field="transactionAmount">
                                                                                    </p-sortIcon>
                                                                                    <p-columnFilter type="numeric"
                                                                                        field="transactionAmount"
                                                                                        display="menu"
                                                                                        class="p-ml-auto">

                                                                                    </p-columnFilter>
                                                                                </div>
                                                                            </div>
                                                                        </th>
                                                                        <th rowspan="2">
                                                                            <div
                                                                                class="p-d-flex p-jc-between p-ai-center">
                                                                                Processing Cycle
                                                                                <div class="Sort_Filter_Position">
                                                                                    <p-sortIcon field="processedAmount">
                                                                                    </p-sortIcon>
                                                                                    <p-columnFilter
                                                                                        field="processedAmount"
                                                                                        display="menu"
                                                                                        class="p-ml-auto">

                                                                                    </p-columnFilter>
                                                                                </div>
                                                                            </div>
                                                                        </th>
                                                                        <th rowspan="2">
                                                                            <div
                                                                                class="p-d-flex p-jc-between p-ai-center">
                                                                                Clawback Date
                                                                                <div class="Sort_Filter_Position">
                                                                                    <p-sortIcon field="clawbackDate">
                                                                                    </p-sortIcon>
                                                                                    <p-columnFilter field="clawbackDate"
                                                                                        type="date" display="menu"
                                                                                        class="p-ml-auto">

                                                                                    </p-columnFilter>
                                                                                </div>
                                                                            </div>
                                                                        </th>
                                                                        <th rowspan="2"> Hold </th>
                                                                        <th rowspan="2"> Discard </th>
                                                                        <th rowspan="2">
                                                                            <div
                                                                                class="p-d-flex p-jc-between p-ai-center">
                                                                                Reschedule Date
                                                                                <div class="Sort_Filter_Position">
                                                                                    <p-sortIcon field="resheduleDate">
                                                                                    </p-sortIcon>
                                                                                    <p-columnFilter type="date"
                                                                                        field="resheduleDate"
                                                                                        display="menu"
                                                                                        class="p-ml-auto">

                                                                                    </p-columnFilter>
                                                                                </div>
                                                                            </div>
                                                                        </th>
                                                                        <th rowspan="2">
                                                                            <div
                                                                                class="p-d-flex p-jc-between p-ai-center">
                                                                                Approval Status
                                                                                <div class="Sort_Filter_Position">
                                                                                    <p-sortIcon field="approvalstatus">
                                                                                    </p-sortIcon>
                                                                                    <p-columnFilter
                                                                                        field="approvalstatus"
                                                                                        display="menu"
                                                                                        class="p-ml-auto">

                                                                                    </p-columnFilter>
                                                                                </div>
                                                                            </div>
                                                                        </th>

                                                                        <th rowspan="2" class="wd-8">Remark</th>
                                                                        <th rowspan="2"></th>
                                                                        <!-- <th rowspan="2">Reschedule</th> -->
                                                                    </tr>
                                                                    <tr>
                                                                        <th class="wd-8">
                                                                            No.
                                                                        </th>
                                                                        <th class="wd-8">
                                                                            Date
                                                                        </th>
                                                                        <th class="wd-8">
                                                                            Amount
                                                                        </th>
                                                                    </tr>
                                                                </ng-template>

                                                                <ng-template pTemplate="body" let-ScheduleData
                                                                    let-rowIndex=rowIndex>
                                                                    <tr class="p-selectable-row">
                                                                        <td> <label
                                                                                class="form-lable mb-0 ">{{rowIndex+1}}</label>
                                                                        </td>
                                                                        <td class="bg-color-light_gray">
                                                                            <label class="form-lable mb-0 "
                                                                                *ngIf="selectedEmpData[index]">
                                                                                {{selectedEmpData[index].employeeMasterResponseDTO.employeeCode}}
                                                                            </label>
                                                                        </td>
                                                                        <td class="bg-color-light_gray"><label
                                                                                class="form-lable mb-0"
                                                                                *ngIf="selectedEmpData[index]">
                                                                                {{selectedEmpData[index].employeeMasterResponseDTO.fullName}}</label>
                                                                        </td>
                                                                        <td class="bg-color-light_gray"><label
                                                                                class="form-lable mb-0"
                                                                                *ngIf="selectedEmpData[index]">
                                                                                {{selectedEmpData[index].payrollArea.payrollAreaCode}}
                                                                            </label>

                                                                        </td>
                                                                        <td class="bg-color-light_gray">
                                                                            <label class="form-lable mb-0 text-link"
                                                                                (click)="ViewTransactionHistory(template2)"
                                                                                *ngIf="selectedEmpData[index]">
                                                                                {{selectedEmpData[index].payrollHeadMaster.displayName}}
                                                                            </label>

                                                                        </td>
                                                                        <td class="bg-color-light_gray">
                                                                            <label class="form-lable mb-0">
                                                                                {{ScheduleData.nonRecurringTransactionGroupId}}
                                                                            </label>

                                                                        </td>
                                                                        <td class="bg-color-light_gray">
                                                                            <label class="form-lable mb-0">
                                                                                {{ScheduleData.nonRecurringTransactionScheduleId}}
                                                                            </label>
                                                                            <span></span>
                                                                            <!-- No -->
                                                                        </td>
                                                                        <td class="bg-color-light_gray"><input
                                                                                data-provide="datepicker"
                                                                                data-date-autoclose="true"
                                                                                [value]="ScheduleData.transactionDate | date: 'dd-MMM-yyyy'"
                                                                                class="form-control wd-100" bsDatepicker
                                                                                disabled>
                                                                            <!-- date -->
                                                                        </td>
                                                                        <td class="bg-color-light_gray"><label
                                                                                class="form-lable mb-0"><input
                                                                                    type="text"
                                                                                    [value]="ScheduleData.transactionAmount | number: '1.2-2'"
                                                                                    class="form-control wd-100"
                                                                                    disabled>
                                                                            </label>
                                                                            <!-- amount -->
                                                                        </td>
                                                                        <td class="bg-color-light_gray"><label
                                                                                class="form-lable mb-0">{{ScheduleData.processedAmount
                                                                                | number: '1.2-2'}}
                                                                            </label>

                                                                        </td>
                                                                        <td class="bg-color-light_gray"><label
                                                                                class="form-lable mb-0">{{ScheduleData.transactionAmount
                                                                                | number: '1.2-2'}}
                                                                            </label>

                                                                        </td>
                                                                        <td class="bg-color-light_gray"><label
                                                                                class="form-lable mb-0">{{ScheduleData.cycleName}}
                                                                            </label>

                                                                        </td>
                                                                        <td class="bg-color-light_gray"><label
                                                                                class="form-lable mb-0 wd-100">{{ScheduleData.clawbackDate
                                                                                | date: 'dd-MMM-yyyy'}}
                                                                            </label>
                                                                        </td>
                                                                        <td class="bg-color-light_gray">
                                                                            <label
                                                                                class="custom-control custom-checkbox checkbox-center">
                                                                                <input type="checkbox"
                                                                                    class="custom-control-input"
                                                                                    (click)="getHoldScheduleValue($event.target,ScheduleData,rowIndex)"
                                                                                    name="select"
                                                                                    [disabled]="ScheduleData.isDisabledFlag || ScheduleData.discard"
                                                                                    [checked]="ScheduleData.hold == true" />
                                                                                <span
                                                                                    class="custom-control-label"></span>
                                                                            </label>
                                                                        </td>
                                                                        <td class="bg-color-light_gray">
                                                                            <!-- <label class="form-lable mb-0"> -->
                                                                            <!-- {{ScheduleData.isDisabledFlag}} -->
                                                                            <label
                                                                                class="custom-control custom-checkbox checkbox-center">
                                                                                <input type="checkbox"
                                                                                    class="custom-control-input"
                                                                                    (click)="getDiscardScheduleValue($event.target,ScheduleData,rowIndex)"
                                                                                    [disabled]="ScheduleData.isDisabledFlag || ScheduleData.hold"
                                                                                    name="select"
                                                                                    [checked]="ScheduleData.discard == true" />
                                                                                <span
                                                                                    class="custom-control-label"></span>
                                                                            </label>
                                                                            <!-- </label> -->
                                                                        </td>
                                                                        <td class="bg-color-light_gray"><input
                                                                                data-provide="datepicker"
                                                                                data-date-autoclose="true"
                                                                                value="{{ScheduleData.resheduleDate}}"
                                                                                [bsConfig]="{ dateInputFormat: 'DD-MMM-YYYY' }"
                                                                                (bsValueChange)="getRescheduleDate($event,ScheduleData)"
                                                                                [disabled]="(ScheduleData.hold == true || ScheduleData.discard == true)
                                                                                || ((selectedHoldIndex == rowIndex && hold == 1) || (selecteddiscardIndex == rowIndex && discard == 1)  )
                                                                                || ScheduleData.isDisabledFlag"
                                                                                class="form-control" bsDatepicker>

                                                                        </td>
                                                                        <td class="bg-color-light_gray"><label
                                                                                class="form-lable mb-0">{{ScheduleData.approvalstatus}}
                                                                            </label>

                                                                        </td>
                                                                        <td class="bg-color-light_gray"><input
                                                                                type="text" class="form-control wd-100"
                                                                                (focusout)="getScheduleRemark($event.target.value,ScheduleData)"
                                                                                [value]="ScheduleData.remark">
                                                                        </td>
                                                                        <td><i tooltip="View Schedule"
                                                                                class="fa fa-eye font-16 text-blue cursor-pointer"
                                                                                (click)="ViewScheduleHistory(template3,ScheduleData)"
                                                                                aria-hidden="true"></i></td>

                                                                        <!-- <td></td> -->


                                                                    </tr>
                                                                </ng-template>
                                                            </p-table>

                                                            <!-- All schedule data-->
                                                            <!-- [scrollable]="true" scrollHeight="800px" -->
                                                            <a tooltip="Download" style="cursor: pointer;float:right;"
                                                                (click)="AllScheduleExportAsXLSX()"
                                                                *ngIf="!editScheduleFlag">
                                                                <i class="fa fa-file-excel-o font-18 text-dark-green pt-10  mr-10"
                                                                    aria-hidden="true">
                                                                </i>
                                                            </a>

                                                            <p-table [value]="AllNonRecurringTransactionScheduledData"
                                                                class="mt-10" [paginator]="true" [rows]="10"
                                                                [showCurrentPageReport]="true"
                                                                currentPageReportTemplate="Showing {first} to {last} of {totalRecords} entries"
                                                                [rowsPerPageOptions]="[10,25,50,100,200]"
                                                                *ngIf="!editScheduleFlag">

                                                                <ng-template pTemplate="header">
                                                                    <tr>
                                                                        <th rowspan="2" class="wd-5">
                                                                            Sr. No.

                                                                        </th>
                                                                        <th rowspan="2" class="wd-8">
                                                                            <div
                                                                                class="p-d-flex p-jc-between p-ai-center">
                                                                                Emp. Code
                                                                                <div class="Sort_Filter_Position">
                                                                                    <p-sortIcon field="employeeCode">
                                                                                    </p-sortIcon>
                                                                                    <p-columnFilter field="employeeCode"
                                                                                        display="menu"
                                                                                        class="p-ml-auto">
                                                                                    </p-columnFilter>
                                                                                </div>
                                                                            </div>
                                                                        </th>
                                                                        <th rowspan="2">
                                                                            <div
                                                                                class="p-d-flex p-jc-between p-ai-center">
                                                                                Emp. Name
                                                                                <div class="Sort_Filter_Position">
                                                                                    <p-sortIcon field="fullName">
                                                                                    </p-sortIcon>
                                                                                    <p-columnFilter field="fullName"
                                                                                        display="menu"
                                                                                        class="p-ml-auto">

                                                                                    </p-columnFilter>
                                                                                </div>
                                                                            </div>
                                                                        </th>
                                                                        <th rowspan="2">
                                                                            <div
                                                                                class="p-d-flex p-jc-between p-ai-center">
                                                                                Payroll Area
                                                                                <div class="Sort_Filter_Position">
                                                                                    <p-sortIcon field="payrollAreaCode">
                                                                                    </p-sortIcon>
                                                                                    <p-columnFilter
                                                                                        field="payrollAreaCode"
                                                                                        display="menu"
                                                                                        class="p-ml-auto">
                                                                                    </p-columnFilter>
                                                                                </div>
                                                                            </div>
                                                                        </th>

                                                                        <th rowspan="2" class="wd-5">
                                                                            <div
                                                                                class="p-d-flex p-jc-between p-ai-center">
                                                                                Head
                                                                                <div class="Sort_Filter_Position">
                                                                                    <p-sortIcon field="displayName">
                                                                                    </p-sortIcon>
                                                                                    <p-columnFilter field="displayName"
                                                                                        display="menu"
                                                                                        class="p-ml-auto">

                                                                                    </p-columnFilter>
                                                                                </div>
                                                                            </div>
                                                                        </th>
                                                                        <th rowspan="2">
                                                                            <div
                                                                                class="p-d-flex p-jc-between p-ai-center">
                                                                                Group Id
                                                                                <div class="Sort_Filter_Position">
                                                                                    <p-sortIcon
                                                                                        field="nonRecurringTransactionGroupId">
                                                                                    </p-sortIcon>
                                                                                    <p-columnFilter
                                                                                        field="nonRecurringTransactionGroupId"
                                                                                        display="menu"
                                                                                        class="p-ml-auto">

                                                                                    </p-columnFilter>
                                                                                </div>
                                                                            </div>
                                                                        </th>
                                                                        <th colspan="3" class="wd-8">
                                                                            <div
                                                                                class="p-d-flex p-jc-center p-ai-center">
                                                                                Schedule
                                                                                <div class="Sort_Filter_Position">
                                                                                    <p-sortIcon
                                                                                        field="nonRecurringTransactionScheduleId">
                                                                                    </p-sortIcon>
                                                                                    <p-columnFilter
                                                                                        field="nonRecurringTransactionScheduleId"
                                                                                        display="menu"
                                                                                        class="p-ml-auto">

                                                                                    </p-columnFilter>
                                                                                </div>
                                                                            </div>
                                                                        </th>

                                                                        <th rowspan="2">
                                                                            <div
                                                                                class="p-d-flex p-jc-between p-ai-center">
                                                                                Processed Amount
                                                                                <div class="Sort_Filter_Position">
                                                                                    <p-sortIcon field="processedAmount">
                                                                                    </p-sortIcon>
                                                                                    <p-columnFilter
                                                                                        field="processedAmount"
                                                                                        type="numeric" display="menu"
                                                                                        class="p-ml-auto">

                                                                                    </p-columnFilter>
                                                                                </div>
                                                                            </div>
                                                                        </th>
                                                                        <th rowspan="2">
                                                                            <div
                                                                                class="p-d-flex p-jc-between p-ai-center">
                                                                                Balance Amount
                                                                                <div class="Sort_Filter_Position">
                                                                                    <p-sortIcon
                                                                                        field="transactionAmount">
                                                                                    </p-sortIcon>
                                                                                    <p-columnFilter
                                                                                        field="transactionAmount"
                                                                                        type="numeric" display="menu"
                                                                                        class="p-ml-auto">

                                                                                    </p-columnFilter>
                                                                                </div>
                                                                            </div>
                                                                        </th>
                                                                        <th rowspan="2">
                                                                            <div
                                                                                class="p-d-flex p-jc-between p-ai-center">
                                                                                Processing Cycle
                                                                                <div class="Sort_Filter_Position">
                                                                                    <p-sortIcon field="cycleName">
                                                                                    </p-sortIcon>
                                                                                    <p-columnFilter field="cycleName"
                                                                                        display="menu"
                                                                                        class="p-ml-auto">

                                                                                    </p-columnFilter>
                                                                                </div>
                                                                            </div>
                                                                        </th>
                                                                        <th rowspan="2">
                                                                            <div
                                                                                class="p-d-flex p-jc-between p-ai-center">
                                                                                Clawback Date
                                                                                <div class="Sort_Filter_Position">
                                                                                    <p-sortIcon field="clawbackDate">
                                                                                    </p-sortIcon>
                                                                                    <p-columnFilter field="clawbackDate"
                                                                                        type="date" display="menu"
                                                                                        class="p-ml-auto">

                                                                                    </p-columnFilter>
                                                                                </div>
                                                                            </div>
                                                                        </th>
                                                                        <th rowspan="2"> Hold </th>
                                                                        <th rowspan="2"> Discard </th>
                                                                        <th rowspan="2">
                                                                            <div
                                                                                class="p-d-flex p-jc-between p-ai-center">
                                                                                Reschedule Date
                                                                                <div class="Sort_Filter_Position">
                                                                                    <p-sortIcon field="resheduleDate">
                                                                                    </p-sortIcon>
                                                                                    <p-columnFilter type="date"
                                                                                        field="resheduleDate"
                                                                                        display="menu"
                                                                                        class="p-ml-auto">

                                                                                    </p-columnFilter>
                                                                                </div>
                                                                            </div>
                                                                        </th>
                                                                        <th rowspan="2">
                                                                            <div
                                                                                class="p-d-flex p-jc-between p-ai-center">
                                                                                Approval Status
                                                                                <div class="Sort_Filter_Position">
                                                                                    <p-sortIcon field="approvalstatus">
                                                                                    </p-sortIcon>
                                                                                    <p-columnFilter
                                                                                        field="approvalstatus"
                                                                                        display="menu"
                                                                                        class="p-ml-auto">

                                                                                    </p-columnFilter>
                                                                                </div>
                                                                            </div>
                                                                        </th>

                                                                        <th rowspan="2" class="wd-8">Remark</th>
                                                                        <th rowspan="2"></th>
                                                                        <!-- <th rowspan="2">Reschedule</th> -->
                                                                    </tr>
                                                                    <tr>
                                                                        <th class="wd-8">
                                                                            No.
                                                                        </th>
                                                                        <th class="wd-8">
                                                                            Date
                                                                        </th>
                                                                        <th class="wd-8">
                                                                            Amount
                                                                        </th>
                                                                    </tr>
                                                                </ng-template>

                                                                <ng-template pTemplate="body" let-ScheduleData
                                                                    let-rowIndex=rowIndex>
                                                                    <tr class="p-selectable-row">
                                                                        <td> <label
                                                                                class="form-lable mb-0 ">{{rowIndex+1}}</label>
                                                                        </td>
                                                                        <td class="bg-color-light_gray">
                                                                            <label class="form-lable mb-0"
                                                                                *ngIf="ScheduleData.employeeMasterResponseDTO">
                                                                                {{ScheduleData.employeeMasterResponseDTO.employeeCode}}
                                                                            </label>
                                                                        </td>
                                                                        <td class="bg-color-light_gray"><label
                                                                                class="form-lable mb-0"
                                                                                *ngIf="ScheduleData.employeeMasterResponseDTO">
                                                                                {{ScheduleData.employeeMasterResponseDTO.fullName}}</label>
                                                                        </td>
                                                                        <td class="bg-color-light_gray"><label
                                                                                class="form-lable mb-0"
                                                                                *ngIf="ScheduleData.payrollArea">
                                                                                {{ScheduleData.payrollArea.payrollAreaCode}}
                                                                            </label>

                                                                        </td>
                                                                        <td class="bg-color-light_gray">
                                                                            <label class="form-lable mb-0 text-link"
                                                                                (click)="ViewTransactionHistory(template2)"
                                                                                *ngIf="ScheduleData.payrollHeadMaster">
                                                                                {{ScheduleData.payrollHeadMaster.displayName}}
                                                                            </label>

                                                                        </td>
                                                                        <td class="bg-color-light_gray">
                                                                            <label class="form-lable mb-0">
                                                                                {{ScheduleData.nonRecurringTransactionGroupId}}
                                                                            </label>

                                                                        </td>
                                                                        <td class="bg-color-light_gray"><label
                                                                                class="form-lable mb-0">
                                                                                {{ScheduleData.nonRecurringTransactionScheduleId}}
                                                                            </label>
                                                                            <!-- No -->
                                                                        </td>
                                                                        <td class="bg-color-light_gray"><input
                                                                                data-provide="datepicker"
                                                                                data-date-autoclose="true"
                                                                                [value]="ScheduleData.transactionDate | date: 'dd-MMM-yyyy'"
                                                                                class="form-control wd-100" bsDatepicker
                                                                                disabled>
                                                                            <!-- date -->
                                                                        </td>
                                                                        <td class="bg-color-light_gray"><label
                                                                                class="form-lable mb-0"><input
                                                                                    type="text"
                                                                                    [value]="ScheduleData.transactionAmount | number: '1.2-2'"
                                                                                    class="form-control wd-100"
                                                                                    disabled>
                                                                            </label>
                                                                            <!-- amount -->
                                                                        </td>
                                                                        <td class="bg-color-light_gray"><label
                                                                                class="form-lable mb-0">{{ScheduleData.processedAmount}}
                                                                            </label>

                                                                        </td>
                                                                        <td class="bg-color-light_gray"><label
                                                                                class="form-lable mb-0">{{ScheduleData.transactionAmount
                                                                                | number: '1.2-2'}}
                                                                            </label>

                                                                        </td>
                                                                        <td class="bg-color-light_gray"><label
                                                                                class="form-lable mb-0">{{ScheduleData.cycleName}}
                                                                            </label>

                                                                        </td>
                                                                        <td class="bg-color-light_gray"><label
                                                                                class="form-lable mb-0 wd-100">{{ScheduleData.clawbackDate
                                                                                | date: 'dd-MMM-yyyy'}}
                                                                            </label>
                                                                        </td>
                                                                        <td class="bg-color-light_gray">
                                                                            <label
                                                                                class="custom-control custom-checkbox checkbox-center">
                                                                                <input type="checkbox"
                                                                                    class="custom-control-input"
                                                                                    (click)="getHoldScheduleValue($event.target,ScheduleData,rowIndex)"
                                                                                    [disabled]="ScheduleData.isDisabledFlag || ScheduleData.discard"
                                                                                    [checked]="ScheduleData.hold == true" />
                                                                                <span
                                                                                    class="custom-control-label"></span>
                                                                            </label>
                                                                        </td>
                                                                        <td class="bg-color-light_gray">
                                                                            <label
                                                                                class="custom-control custom-checkbox checkbox-center">
                                                                                <input type="checkbox"
                                                                                    class="custom-control-input"
                                                                                    (click)="getDiscardScheduleValue($event.target,ScheduleData,rowIndex)"
                                                                                    [disabled]="ScheduleData.isDisabledFlag || ScheduleData.hold"
                                                                                    [checked]="ScheduleData.discard == true" />
                                                                                <span
                                                                                    class="custom-control-label"></span>
                                                                            </label>
                                                                        </td>
                                                                        <td class="bg-color-light_gray"><input
                                                                                data-provide="datepicker"
                                                                                data-date-autoclose="true"
                                                                                value="{{ScheduleData.resheduleDate}}"
                                                                                [bsConfig]="{ dateInputFormat: 'DD-MMM-YYYY' }"
                                                                                (bsValueChange)="getRescheduleDate($event,ScheduleData)"
                                                                                [disabled]="(ScheduleData.hold == true || ScheduleData.discard == true)
                                                                                || ((selectedHoldIndex == rowIndex && hold == 1) || (selecteddiscardIndex == rowIndex && discard == 1)  )
                                                                                || ScheduleData.isDisabledFlag"
                                                                                class="form-control" bsDatepicker>

                                                                        </td>
                                                                        <td class="bg-color-light_gray"><label
                                                                                class="form-lable mb-0">{{ScheduleData.approvalstatus}}
                                                                            </label>

                                                                        </td>
                                                                        <td class="bg-color-light_gray"><input
                                                                                type="text" class="form-control wd-100"
                                                                                (focusout)="getScheduleRemark($event.target.value,ScheduleData)"
                                                                                [value]="ScheduleData.remark">

                                                                        </td>
                                                                        <td><i tooltip="View Schedule"
                                                                                class="fa fa-eye font-16 text-blue cursor-pointer"
                                                                                (click)="ViewScheduleHistory(template3,ScheduleData)"
                                                                                aria-hidden="true"></i></td>
                                                                        <!-- <td> {{ScheduleData.isReschedule}}</td> -->

                                                                    </tr>
                                                                </ng-template>
                                                            </p-table>

                                                            <!-- Buttons -->
                                                            <div class="row mt-15">
                                                                <div class="col-12">
                                                                    <div class="float-right mb-15">
                                                                        <!-- <button type="submit" tooltip="Save & Next" (click)="NonRecurringTransactionScheduleupdateById()"
                                                                            class="custom_button custom_btn btn-bg-green btn-labeled btn-labeled-left ripple"><b>
                                                                                <i class="fa fa-floppy-o"></i></b> Save
                                                                            & Next</button> -->
                                                                        <button type="button" tooltip="Save"
                                                                            (click)="NonRecurringTransactionScheduleupdateById()"
                                                                            [disabled]="updateScheduleData.length == 0"
                                                                            [ngClass]="{'disabled-btn' : updateScheduleData.length == 0}"
                                                                            class="custom_button custom_btn btn-bg-green btn-labeled btn-labeled-left ml-10"><b><i
                                                                                    class="fa fa-floppy-o"
                                                                                    aria-hidden="true"></i></b>Save</button>

                                                                        <button type="button" tooltip="Cancel" (click)="cancelBtn()"
                                                                            class="custom_button custom_btn bg-teal-400 btn-labeled btn-labeled-left ml-10"><b><i
                                                                                    class="fa fa-times"
                                                                                    aria-hidden="true"></i></b>Cancel</button>
                                                                    </div>
                                                                </div>
                                                            </div>

                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>

                                        <label class="nav" for="Schedule"
                                            [ngClass]="{'disabled-tab' : selectedEmpData.length > 0}">
                                            <span> Schedule </span>
                                        </label>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

        </div>
    </div>
</form>


<ng-template #template>
    <div class="modal-header">
        <h5 class="modal-title" id="UploadModalLabel">History</h5>
        <button type="button" (click)="modalRef.hide()" class="close" data-dismiss="modal" aria-label="Close"><span
                aria-hidden="true">×</span></button>
    </div>
    <div class="modal-body">
        <div class="card">
            <div class="card-body p-0 m-0">
                <div class="row">
                    <div class="col-md-4">
                        <label class="form-label">Head Name</label>
                        <input type="text" class="form-control" [value]="viewHeadHistory.payrollHeadMaster.displayName"
                            disabled>
                    </div>
                </div>
                <div class="row clearfix mt-10">
                    <div class="col-md-12">
                        <div class="table-responsive Custom_Table">
                            <table class="table table-striped table-hover table-bordered m-b-0">
                                <thead class="thead-dark">
                                    <tr>
                                        <th class="wd-15 font700">From Date</th>
                                        <th class="wd-15 font700">To Date</th>
                                        <th class="wd-15 font700">Opening Value</th>
                                        <th class="wd-15 font700">Change Value</th>
                                        <th class="wd-10 font700">Change %</th>
                                        <th class="wd-15 font700">Closing Value</th>
                                        <th class="wd-15 font700">Unit of Measure</th>
                                    </tr>
                                </thead>
                                <tbody>
                                    <tr *ngFor="let data of NonRecurringHeadwiseHistorydData; let index = index;">
                                        <td>{{data.fromDate}}</td>
                                        <td>{{data.toDate}}</td>
                                        <td>0.0</td>
                                        <td>0.0</td>
                                        <td>0.0</td>
                                        <td>0.0</td>
                                        <td>0.0</td>
                                    </tr>
                                </tbody>
                            </table>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <div class="modal-footer">
        <button type="button" class="btn btn-secondary" (click)="modalRef.hide()"><i class="fa fa-times"></i>
            &nbsp;Close</button>
    </div>
</ng-template>


<!-- Transaction History / Header history-->
<ng-template #template1>
    <div class="modal-header">
        <h5 class="modal-title" id="UploadModalLabel"> Transaction History</h5>
        <button type="button" (click)="modalRef.hide()" class="close" data-dismiss="modal" aria-label="Close"><span
                aria-hidden="true">×</span></button>
    </div>
    <div class="modal-body">
        <div class="card">
            <div class="card-body p-0 m-0">
                <div class="row">
                    <div class="col-md-12 pl-0 pr-0">
                        <div class="border-dark-card radius-10 p-2 mt-3">
                            <div class="row" *ngIf="viewHeadHistory">

                                <div class="col-md-2">
                                    <label class="form-label mt-1 mb-0">Emp. Code</label>
                                    <label class="font-12 text-ellipsis mt-1 mb-0">
                                        {{viewHeadHistory.employeeMasterResponseDTO.employeeCode}} </label>
                                </div>
                                <div class="col-md-2">
                                    <label class="form-label mt-1 mb-0">Emp. Name</label>
                                    <label class="font-12 text-ellipsis mt-1 mb-0">
                                        {{viewHeadHistory.employeeMasterResponseDTO.fullName}}
                                    </label>
                                </div>
                                <div class="col-md-2">
                                    <label class="form-label mt-1 mb-0">Head</label>
                                    <label class="font-12 text-ellipsis mt-1 mb-0">
                                        {{viewHeadHistory.payrollHeadMaster.displayName}}
                                    </label>
                                </div>
                                <div class="col-md-2">
                                    <label class="form-label mt-1 mb-0">Group Id</label>
                                    <label class="font-12 text-ellipsis mt-1 mb-0">
                                        {{viewHeadHistory.nonRecurringTransactionGroupId}}
                                    </label>
                                </div>
                                <div class="col-md-2">
                                    <label class="form-label mt-1 mb-0">Payroll Area</label>
                                    <label class="font-12 text-ellipsis mt-1 mb-0">
                                        {{viewHeadHistory.payrollArea.payrollAreaCode}}
                                    </label>
                                </div>

                            </div>
                        </div>
                    </div>
                </div>
                <div class="row clearfix mt-10">
                    <div class="col-md-12">
                        <div class="table-responsive Custom_Table">
                            <table class="table table-striped table-hover table-bordered m-b-0">
                                <thead class="thead-dark">
                                    <tr>
                                        <!-- <th class="wd-10 font700">Group Id</th> -->
                                        <!-- <th class="wd-10 font700">Payroll Area</th> -->
                                        <th class="wd-10 font700">Once Every</th>
                                        <th class="wd-10 font700">Frequency</th>
                                        <th class="wd-10 font700">Amount</th>
                                        <th class="wd-10 font700">From Date</th>
                                        <th class="wd-8 font700">Type</th>
                                        <th class="wd-10 font700">No. of Transactions</th>
                                        <th class="wd-10 font700">To Date</th>
                                        <th class="wd-10 font700">Remark</th>
                                        <th class="wd-13 font700">Updated Date & Time</th>
                                        <th class="wd-10 font700">Updated By</th>
                                    </tr>
                                </thead>
                                <tbody>
                                    <tr
                                        *ngFor="let data of NonRecurringTransactionGroupHistoryAPIbyIdData; let index = index; ">
                                        <!-- <td>{{data.nonRecurringTransactionGroupId}}</td> -->
                                        <!-- <td>{{data.payrollArea.payrollAreaCode}}</td> -->
                                        <td>{{data.onceEvery}}</td>
                                        <td>{{data.frequency}}</td>
                                        <td>{{data.amount | number : '1.00'}}</td>
                                        <td>{{data.fromDate}}</td>
                                        <td>{{data.transactionsType}}</td>
                                        <td>{{data.numberOfTransactions}}</td>
                                        <td>{{data.toDate}}</td>
                                        <td>{{data.remark}}</td>
                                        <td>{{data.createDateTime | date: 'dd-MMM-yyyy'}}</td>
                                        <td>{{data.createdBy}}</td>

                                    </tr>


                                </tbody>
                            </table>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <div class="modal-footer">
        <button type="button" class="btn btn-secondary" (click)="modalRef.hide()"><i class="fa fa-times"></i>
            &nbsp;Close</button>
    </div>
</ng-template>

<!-- View Schedule details summary page click on action button-->
<ng-template #template2>
    <div class="modal-header">
        <h5 class="modal-title" id="UploadModalLabel"> Schedule Details</h5>
        <button type="button" (click)="modalRef.hide()" class="close" data-dismiss="modal" aria-label="Close"><span
                aria-hidden="true">×</span></button>
    </div>
    <div class="modal-body">
        <div class="card">
            <div class="card-body p-0 m-0">
                <div class="row">
                    <div class="col-md-12 pl-0 pr-0">
                        <div class="border-dark-card radius-10 p-2 mt-3">
                            <div class="row" *ngIf="viewEmployeeData">
                                <div class="col-md-2">
                                    <label class="form-label mt-1 mb-0">Emp. Code</label>
                                    <label class="font-12 text-ellipsis mt-1 mb-0">
                                        {{viewEmployeeData.employeeMasterResponseDTO.employeeCode}} </label>
                                </div>
                                <div class="col-md-2">
                                    <label class="form-label mt-1 mb-0">Emp. Name</label>
                                    <label class="font-12 text-ellipsis mt-1 mb-0">
                                        {{viewEmployeeData.employeeMasterResponseDTO.fullName}}
                                    </label>
                                </div>
                                <div class="col-md-2">
                                    <label class="form-label mt-1 mb-0">Payroll Area</label>
                                    <label class="font-12 text-ellipsis mt-1 mb-0">
                                        {{viewEmployeeData.payrollArea.payrollAreaCode}}
                                    </label>
                                </div>
                                <div class="col-md-2">
                                    <label class="form-label mt-1 mb-0">Group Id</label>
                                    <label class="font-12 text-ellipsis mt-1 mb-0">
                                        {{viewEmployeeData.nonRecurringTransactionGroupId}}
                                    </label>
                                </div>
                                <div class="col-md-2">
                                    <label class="form-label mt-1 mb-0">Head</label>
                                    <label class="font-12 text-ellipsis mt-1 mb-0">
                                        {{viewEmployeeData.payrollHeadMaster.displayName}}
                                    </label>
                                </div>

                            </div>
                        </div>
                    </div>
                </div>
                <div class="row clearfix mt-10">
                    <div class="col-md-12">
                        <div class="table-responsive Custom_Table">
                            <table class="table table-striped table-hover table-bordered m-b-0">
                                <thead class="thead-dark">
                                    <tr>
                                        <th colspan="3" class="wd-40 font700">Schedule</th>
                                        <th rowspan="2" class="wd-10 font700">Processed Amount</th>
                                        <th rowspan="2" class="wd-10 font700">Balance Amount</th>
                                        <th rowspan="2" class="wd-10 font700">Processing Cycle</th>
                                        <th rowspan="2" class="wd-10 font700">Hold</th>
                                        <th rowspan="2" class="wd-10 font700">Discard</th>
                                        <th rowspan="2" class="wd-10 font700">Remark</th>

                                    </tr>
                                    <tr>
                                        <th>No.</th>
                                        <th>Date</th>
                                        <th>Amount</th>
                                    </tr>
                                </thead>
                                <tbody>
                                    <tr
                                        *ngFor="let data of NonRecurringTransactionScheduleEMPdData; let index = index;">
                                        <td>{{index + 1}}</td>
                                        <td>
                                            <!-- <input data-provide="datepicker" data-date-autoclose="true"
                                                class="form-control" bsDatepicker disabled>  -->
                                            {{data.transactionDate | date : 'dd-MMM-yyyy'}}
                                        </td>
                                        <td>{{data.transactionAmount | number: '1.2-2'}}</td>
                                        <td>{{data.processedAmount | number: '1.2-2'}}</td>
                                        <td>{{data.transactionAmount | number: '1.2-2'}}</td>
                                        <td>{{data.cycleName}}</td>
                                        <td><label class="custom-control  checkbox-center">
                                                <input type="checkbox" class="custom-control-input" name="select"
                                                    disabled [checked]="data.hold == true" />
                                                <span class="custom-control-label"></span>
                                            </label>
                                        </td>
                                        <td><label class="custom-control  checkbox-center">
                                                <input type="checkbox" class="custom-control-input" name="select"
                                                    disabled [checked]="data.discard == true" />
                                                <span class="custom-control-label"></span>
                                            </label></td>
                                        <td>
                                            {{data.remark}}
                                        </td>

                                    </tr>


                                </tbody>
                            </table>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <div class="modal-footer">
        <!-- <pre>{{viewEmployeeData | json}}</pre> -->
        <!-- <h6 *ngIf="showNoteFlag">Note : The schedule of future business year/s shall get created 3
            months before their respective start date </h6> -->
        <button type="button" class="btn btn-secondary" (click)="modalRef.hide()"><i class="fa fa-times"></i>
            &nbsp;Close</button>
    </div>
</ng-template>

<!-- View Schedule details-->
<ng-template #templateTransaction>
    <div class="modal-header">
        <h5 class="modal-title" id="UploadModalLabel"> Schedule Details</h5>
        <button type="button" (click)="modalRef.hide()" class="close" data-dismiss="modal" aria-label="Close"><span
                aria-hidden="true">×</span></button>
    </div>
    <div class="modal-body">
        <div class="card">
            <div class="card-body p-0 m-0">
                <div class="row">
                    <div class="col-md-12 pl-0 pr-0">
                        <div class="border-dark-card radius-10 p-2 mt-3">
                            <div class="row" *ngIf="viewEmployeeDataTransacton">
                                <div class="col-md-2">
                                    <label class="form-label mt-1 mb-0">Emp. Code</label>
                                    <label class="font-12 text-ellipsis mt-1 mb-0">
                                        {{viewEmployeeDataTransacton.employeeMasterResponseDTO.employeeCode}} </label>
                                </div>
                                <div class="col-md-2">
                                    <label class="form-label mt-1 mb-0">Emp. Name</label>
                                    <label class="font-12 text-ellipsis mt-1 mb-0">
                                        {{viewEmployeeDataTransacton.employeeMasterResponseDTO.fullName}}
                                    </label>
                                </div>
                                <div class="col-md-2">
                                    <label class="form-label mt-1 mb-0">Payroll Area</label>
                                    <label class="font-12 text-ellipsis mt-1 mb-0">
                                        {{viewEmployeeDataTransacton.payrollArea.payrollAreaCode}}
                                    </label>
                                </div>
                                <div class="col-md-2">
                                    <label class="form-label mt-1 mb-0">Group Id</label>
                                    <label class="font-12 text-ellipsis mt-1 mb-0">
                                        {{viewEmployeeDataTransacton.nonRecurringTransactionGroupId}}
                                    </label>
                                </div>
                                <div class="col-md-2">
                                    <label class="form-label mt-1 mb-0">Head</label>
                                    <label class="font-12 text-ellipsis mt-1 mb-0">
                                        {{viewEmployeeDataTransacton.payrollHeadMaster.displayName}}
                                    </label>
                                </div>

                            </div>
                        </div>
                    </div>
                </div>
                <div class="row clearfix mt-10">
                    <div class="col-md-12">
                        <div class="table-responsive Custom_Table">
                            <table class="table table-striped table-hover table-bordered m-b-0">
                                <thead class="thead-dark">
                                    <tr>
                                        <th colspan="3" class="wd-40 font700">Schedule</th>
                                        <th rowspan="2" class="wd-10 font700">Processed Amount</th>
                                        <th rowspan="2" class="wd-10 font700">Balance Amount</th>
                                        <th rowspan="2" class="wd-10 font700">Processing Cycle</th>
                                        <th rowspan="2" class="wd-10 font700">Pertaining Cycle</th>
                                        <th rowspan="2" class="wd-10 font700">Hold</th>
                                        <th rowspan="2" class="wd-10 font700">Discard</th>
                                        <th rowspan="2" class="wd-10 font700">Remark</th>

                                    </tr>
                                    <tr>
                                        <th>No.</th>
                                        <th>Date</th>
                                        <th>Amount</th>
                                    </tr>
                                </thead>
                                <tbody>
                                    <tr
                                        *ngFor="let data of NonRecurringTransactionScheduleEMPdData; let index = index;">
                                        <td>{{index + 1}}</td>
                                        <td>
                                            <!-- <input data-provide="datepicker" data-date-autoclose="true"
                                                class="form-control" bsDatepicker disabled>  -->
                                            {{data.transactionDate | date : 'dd-MMM-yyyy'}}
                                        </td>
                                        <td>{{data.transactionAmount | number: '1.2-2'}}</td>
                                        <td>{{data.processedAmount | number: '1.2-2'}}</td>
                                        <td>{{data.transactionAmount | number: '1.2-2'}}</td>
                                        <td>{{data.processedCycle}}</td>
                                        <td>{{data.pertainingCycle}}</td>
                                        <td><label class="custom-control custom-checkbox checkbox-center">
                                                <input type="checkbox" class="custom-control-input" name="select"
                                                    disabled [checked]="data.hold == true" />
                                                <span class="custom-control-label"></span>
                                            </label>
                                        </td>
                                        <td><label class="custom-control custom-checkbox checkbox-center">
                                                <input type="checkbox" class="custom-control-input" name="select"
                                                    disabled [checked]="data.discard == true" />
                                                <span class="custom-control-label"></span>
                                            </label></td>
                                        <td>
                                            {{data.remark}}
                                        </td>

                                    </tr>


                                </tbody>
                            </table>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <div class="modal-footer">
        <button type="button" class="btn btn-secondary" (click)="modalRef.hide()"><i class="fa fa-times"></i>
            &nbsp;Close</button>
    </div>
</ng-template>

<!-- Schedule tab View-->
<ng-template #template3>
    <div class="modal-header">
        <h5 class="modal-title" id="UploadModalLabel"> Schedule History</h5>
        <button type="button" (click)="modalRef.hide()" class="close" data-dismiss="modal" aria-label="Close"><span
                aria-hidden="true">×</span></button>
    </div>
    <div class="modal-body">
        <div class="card">
            <div class="card-body p-0 m-0">
                <div class="row">
                    <div class="col-md-12 pl-0 pr-0">
                        <div class="border-dark-card radius-10 p-2 mt-3" *ngIf="selectedEmpData[index]">
                            <div class="row">
                                <div class="col-md-3">
                                    <label class="form-label mt-1 mb-0">Emp. Code</label>
                                    <label class="font-12 text-ellipsis mt-1 mb-0" *ngIf="selectedEmpData[index]">
                                        {{selectedEmpData[index].employeeMasterResponseDTO.employeeCode}} </label>
                                </div>
                                <div class="col-md-3">
                                    <label class="form-label mt-1 mb-0">Emp. Name</label>
                                    <label class="font-12 text-ellipsis mt-1 mb-0" *ngIf="selectedEmpData[index]">
                                        {{selectedEmpData[index].employeeMasterResponseDTO.fullName}}
                                    </label>
                                </div>
                                <div class="col-md-3">
                                    <label class="form-label mt-1 mb-0">Payroll Area</label>
                                    <label class="font-12 text-ellipsis mt-1 mb-0" *ngIf="selectedEmpData[index]">
                                        {{selectedEmpData[index].payrollArea.payrollAreaCode}}
                                    </label>
                                </div>
                                <div class="col-md-3">
                                    <label class="form-label mt-1 mb-0">Group Id</label>
                                    <label class="font-12 text-ellipsis mt-1 mb-0" *ngIf="viewScheduleData">
                                        {{viewScheduleData.nonRecurringTransactionGroupId}}
                                    </label>
                                </div>


                            </div>
                            <div class="row mt-10">
                                <div class="col-md-3">
                                    <label class="form-label mt-1 mb-0">Head</label>
                                    <label class="font-12 text-ellipsis mt-1 mb-0" *ngIf="selectedEmpData[index]">
                                        {{selectedEmpData[index].payrollHeadMaster.displayName}}
                                    </label>
                                </div>
                                <div class="col-md-3">
                                    <label class="form-label mt-1 mb-0">Schedule No.</label>
                                    <label class="font-12 text-ellipsis mt-1 mb-0" *ngIf="viewScheduleData">
                                        {{viewScheduleData.nonRecurringTransactionScheduleId}} </label>
                                </div>
                                <div class="col-md-3">
                                    <label class="form-label mt-1 mb-0">Original Schedule Date
                                    </label>
                                    <label class="font-12 text-ellipsis mt-1 mb-0"
                                        *ngIf="NonRecurringHistorybyScheduleIdData != ''">
                                        <span
                                            *ngIf="NonRecurringHistorybyScheduleIdData[0]">{{NonRecurringHistorybyScheduleIdData[0].transactionDate
                                            | date: 'dd-MMM-yyyy'}}</span>
                                    </label>
                                    <label class="font-12 text-ellipsis mt-1 mb-0"
                                        *ngIf="NonRecurringHistorybyScheduleIdData == ''">
                                        <span *ngIf="viewScheduleData">{{viewScheduleData.transactionDate | date:
                                            'dd-MMM-yyyy'}}</span>
                                    </label>
                                </div>
                                <div class="col-md-3">
                                    <label class="form-label mt-1 mb-0">Schedule Amount</label>
                                    <label class="font-12 text-ellipsis mt-1 mb-0" *ngIf="viewScheduleData">
                                        {{viewScheduleData.transactionAmount | number: '1.2-2'}}
                                    </label>
                                </div>


                            </div>
                        </div>
                        <div class="border-dark-card radius-10 p-2 mt-3" *ngIf="scheduleAllData">
                            <div class="row">
                                <div class="col-md-3">
                                    <label class="form-label mt-1 mb-0">Emp. Code</label>
                                    <label class="font-12 text-ellipsis mt-1 mb-0" *ngIf="scheduleAllData">
                                        {{scheduleAllData.employeeMasterResponseDTO.employeeCode}} </label>
                                </div>
                                <div class="col-md-3">
                                    <label class="form-label mt-1 mb-0">Emp. Name</label>
                                    <label class="font-12 text-ellipsis mt-1 mb-0" *ngIf="scheduleAllData">
                                        {{scheduleAllData.employeeMasterResponseDTO.fullName}}
                                    </label>
                                </div>
                                <div class="col-md-3">
                                    <label class="form-label mt-1 mb-0">Payroll Area</label>
                                    <label class="font-12 text-ellipsis mt-1 mb-0" *ngIf="scheduleAllData">
                                        {{scheduleAllData.payrollArea.payrollAreaCode}}
                                    </label>
                                </div>
                                <div class="col-md-3">
                                    <label class="form-label mt-1 mb-0">Group Id</label>
                                    <label class="font-12 text-ellipsis mt-1 mb-0" *ngIf="viewScheduleData">
                                        {{viewScheduleData.nonRecurringTransactionGroupId}}
                                    </label>
                                </div>


                            </div>
                            <div class="row mt-10">
                                <div class="col-md-3">
                                    <label class="form-label mt-1 mb-0">Head</label>
                                    <label class="font-12 text-ellipsis mt-1 mb-0" *ngIf="scheduleAllData">
                                        {{scheduleAllData.payrollHeadMaster.displayName}}
                                    </label>
                                </div>
                                <div class="col-md-3">
                                    <label class="form-label mt-1 mb-0">Schedule No.</label>
                                    <label class="font-12 text-ellipsis mt-1 mb-0" *ngIf="viewScheduleData">
                                        {{viewScheduleData.nonRecurringTransactionScheduleId}} </label>
                                </div>
                                <div class="col-md-3">
                                    <label class="form-label mt-1 mb-0">Original Schedule Date
                                    </label>
                                    <!-- <label class="font-12 text-ellipsis mt-1 mb-0" *ngIf="NonRecurringHistorybyScheduleIdData != ''">
                                        <span *ngIf="NonRecurringHistorybyScheduleIdData[0]">{{NonRecurringHistorybyScheduleIdData[0].transactionDate | date: 'dd-MMM-yyyy'}}</span>
                                    </label> -->
                                    <label class="font-12 text-ellipsis mt-1 mb-0">
                                        <span *ngIf="originalTransactionDate">{{originalTransactionDate | date:
                                            'dd-MMM-yyyy'}}</span>
                                    </label>
                                </div>
                                <div class="col-md-3">
                                    <label class="form-label mt-1 mb-0">Schedule Amount</label>
                                    <label class="font-12 text-ellipsis mt-1 mb-0" *ngIf="viewScheduleData">
                                        {{viewScheduleData.transactionAmount | number: '1.2-2'}}
                                    </label>
                                </div>


                            </div>
                        </div>
                    </div>
                </div>
                <div class="row clearfix mt-10">
                    <div class="col-md-12">
                        <div class="table-responsive Custom_Table">
                            <table class="table table-striped table-hover table-bordered m-b-0">
                                <thead class="thead-dark">
                                    <tr>
                                        <th class="wd-15 font700">Hold</th>
                                        <th class="wd-15 font700">Discard</th>
                                        <th class="wd-15 font700">Reschdule Date</th>
                                        <th class="wd-20 font700">Remark </th>
                                        <th class="wd-20 font700">Updated Date & Time</th>
                                        <th class="wd-15 font700">Updated By</th>
                                    </tr>
                                </thead>
                                <tbody>
                                    <tr *ngFor="let data of NonRecurringHistorybyScheduleIdData; let index = index;">
                                        <td>
                                            <label class="custom-control custom-checkbox checkbox-center">
                                                <input type="checkbox" class="custom-control-input" name="select"
                                                    disabled [checked]="data.hold == true" />
                                                <span class="custom-control-label"></span>
                                            </label>
                                        </td>
                                        <td>
                                            <label class="custom-control custom-checkbox checkbox-center">
                                                <input type="checkbox" class="custom-control-input" name="select"
                                                    disabled [checked]="data.discard == true" />
                                                <span class="custom-control-label"></span>
                                            </label>
                                        </td>
                                        <td><input data-provide="datepicker" data-date-autoclose="true"
                                                class="form-control" bsDatepicker
                                                [value]="data.resheduleDate | date: 'dd-MMM-yyyy'" disabled>
                                        </td>
                                        <td><input type="text" class="form-control" [value]="data.remark" disabled></td>
                                        <td><input type="text" class="form-control" [value]="data.createdDateTime"
                                                disabled></td>
                                        <td><input type="text" class="form-control" [value]="data.createdBy" disabled>
                                        </td>


                                    </tr>


                                </tbody>
                            </table>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <div class="modal-footer">
        <button type="button" class="btn btn-secondary" (click)="modalRef.hide()"><i class="fa fa-times"></i>
            &nbsp;Close</button>
    </div>
</ng-template>


<!-- Transaction Group History-->
<ng-template #template1i>
    <div class="modal-header">
        <h5 class="modal-title" id="UploadModalLabel"> Transactions </h5>
        <button type="button" (click)="modalRef.hide()" class="close" data-dismiss="modal" aria-label="Close"><span
                aria-hidden="true">×</span></button>
    </div>
    <div class="modal-body">
        <div class="card">
            <div class="card-body p-0 m-0">
                <div class="row">
                    <div class="col-md-12 pl-0 pr-0">
                        <div class="border-dark-card radius-10 p-2 mt-3">
                            <div class="row" *ngIf="viewHeadHistory">

                                <div class="col-md-2">
                                    <label class="form-label mt-1 mb-0">Emp. Code</label>
                                    <label class="font-12 text-ellipsis mt-1 mb-0">
                                        {{viewHeadHistory.employeeMasterResponseDTO.employeeCode}} </label>
                                </div>
                                <div class="col-md-2">
                                    <label class="form-label mt-1 mb-0">Emp. Name</label>
                                    <label class="font-12 text-ellipsis mt-1 mb-0">
                                        {{viewHeadHistory.employeeMasterResponseDTO.fullName}}
                                    </label>
                                </div>
                                <div class="col-md-2">
                                    <label class="form-label mt-1 mb-0">Head</label>
                                    <label class="font-12 text-ellipsis mt-1 mb-0">
                                        {{viewHeadHistory.payrollHeadMaster.displayName}}
                                    </label>
                                </div>
                                <div class="col-md-2">
                                    <label class="form-label mt-1 mb-0">Group Id</label>
                                    <label class="font-12 text-ellipsis mt-1 mb-0">
                                        {{viewHeadHistory.nonRecurringTransactionGroupId}}
                                    </label>
                                </div>
                                <div class="col-md-2">
                                    <label class="form-label mt-1 mb-0">Payroll Area</label>
                                    <label class="font-12 text-ellipsis mt-1 mb-0">
                                        {{viewHeadHistory.payrollArea.payrollAreaCode}}
                                    </label>
                                </div>

                            </div>
                        </div>
                    </div>
                </div>
                <div class="row clearfix mt-10">
                    <div class="col-md-12">
                        <div class="table-responsive Custom_Table">
                            <table class="table table-striped table-hover table-bordered m-b-0">
                                <thead class="thead-dark">
                                    <tr>
                                        <!-- <th class="wd-10 font700">Group Id</th> -->
                                        <!-- <th class="wd-10 font700">Payroll Area</th> -->
                                        <th class="wd-10 font700">Once Every</th>
                                        <th class="wd-10 font700">Frequency</th>
                                        <th class="wd-10 font700">Amount</th>
                                        <th class="wd-10 font700">From Date</th>
                                        <th class="wd-8 font700">Type</th>
                                        <th class="wd-10 font700">No. of Transactions</th>
                                        <th class="wd-10 font700">To Date</th>
                                        <th class="wd-10 font700">Remark</th>
                                        <th class="wd-13 font700">Updated Date & Time</th>
                                        <th class="wd-10 font700">Updated By</th>
                                    </tr>
                                </thead>
                                <tbody>
                                    <tr *ngFor="let data of NonRecurringHeadwiseHistorydData; let index = index; ">
                                        <!-- <td>{{data.nonRecurringTransactionGroupId}}</td> -->
                                        <!-- <td>{{data.payrollArea.payrollAreaCode}}</td> -->
                                        <td>{{data.onceEvery}}</td>
                                        <td>{{data.frequency}}</td>
                                        <td>{{data.amount | number : '1.00'}}</td>
                                        <td>{{data.fromDate}}</td>
                                        <td>{{data.transactionsType}}</td>
                                        <td *ngIf="data.numberOfTransactions > 0">{{data.numberOfTransactions}}</td>
                                        <td *ngIf="data.numberOfTransactions == 0"></td>
                                        <td>{{data.toDate}}</td>
                                        <td>{{data.remark}}</td>
                                        <td>{{data.createDateTime | date: 'dd-MMM-yyyy'}}</td>
                                        <td>{{data.createdBy}}</td>

                                    </tr>


                                </tbody>
                            </table>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <div class="modal-footer">
        <button type="button" class="btn btn-secondary" (click)="modalRef.hide()"><i class="fa fa-times"></i>
            &nbsp;Close</button>
    </div>
</ng-template>

<!-- clawback-->
<ng-template #template4>
    <div class="modal-header">
        <h5 class="modal-title" id="UploadModalLabel">Clawback</h5>
        <button type="button" (click)="modalRef.hide()" class="close" data-dismiss="modal" aria-label="Close"><span
                aria-hidden="true">×</span></button>
    </div>
    <div class="modal-body">
        <div class="card">
            <div class="card-body p-0 m-0">
                <div class="row">
                    <div class="col-md-12 pl-0 pr-0">
                        <div class="border-dark-card radius-10 p-2 mt-3">
                            <div class="row">
                                <div class="col-md-3">Applicable At</div>
                                <div class="col-md-6">
                                    <select class="form-control custom-select wd-200"
                                        (change)="getSelectedApplicable($event.target.value,selectedTransactionClawback)">
                                        <option value="">Select</option>
                                        <option [selected]="selectedApplicableAt == 'Group'"> Group </option>
                                        <option [selected]="selectedApplicableAt == 'Schedule'"> Schedule </option>
                                    </select>
                                </div>
                                <div class="col-md-3"></div>
                                <br>
                                <br>
                                <div class="col-md-3">Input Type</div>
                                <div class="col-md-6">
                                    <select class="form-control custom-select wd-200"
                                        (change)="getSelectedInputType($event.target.value,selectedTransactionClawback)">
                                        <option value="">Select</option>
                                        <option [selected]="selectedClawbackInputType == 'SDM'"> SDM </option>
                                        <option [selected]="selectedClawbackInputType == 'Specific Period'"> Specific
                                            Period </option>
                                        <option [selected]="selectedClawbackInputType == 'Specific Date'"
                                            *ngIf="selectedApplicableAt != 'Schedule'">
                                            Specific Date
                                        </option>
                                    </select>
                                </div>
                                <div class="col-md-3"></div>
                                <br>
                                <br>
                                <div class="row" *ngIf="selectedClawbackInputType == 'Specific Period'">
                                    <div class="col-md-3">Period</div>
                                    <div class="col-md-6">
                                        <input type="text" [(ngModel)]="clawbackperiod"
                                            [ngModelOptions]="{standalone : true}"
                                            (focusout)="crawBackPeriod($event.target.value,selectedTransactionClawback)"
                                            class="form-control wd-200">
                                    </div>
                                    <div class="col-md-3"></div>
                                    <br><br>
                                    <div class="col-md-3">Frequency</div>
                                    <div class="col-md-6">
                                        <select class="form-control custom-select wd-200"
                                            (change)="getClawbackFrequency($event.target.value,selectedTransactionClawback)">
                                            <option value="">Select</option>
                                            <option value="Monthly" [selected]="clawbackFrequency == 'Monthly'"> Month
                                            </option>
                                            <option value="Quarterly" [selected]="clawbackFrequency == 'Quarterly'">
                                                Quarter </option>
                                            <option value="HalfYearly" [selected]="clawbackFrequency == 'HalfYearly'">
                                                HalfYear </option>
                                            <option value="Yearly" [selected]="clawbackFrequency == 'Yearly'"> Year
                                            </option>
                                            <option value="SemiMonthly" [selected]="clawbackFrequency == 'SemiMonthly'">
                                                SemiMonth </option>
                                            <option value="Weekly" [selected]="clawbackFrequency == 'Weekly'"> Week
                                            </option>
                                            <option value="BiWeekly" [selected]="clawbackFrequency == 'BiWeekly'">
                                                BiWeek </option>
                                        </select>
                                    </div>
                                    <div class="col-md-3"></div>
                                </div>
                                <br>
                                <br>
                                <div class="row" *ngIf="selectedClawbackInputType == 'Specific Date'">
                                    <div class="col-md-3">Date</div>
                                    <div class="col-md-6">
                                        <input [bsConfig]="{ dateInputFormat: 'DD-MMM-YYYY' }" data-provide="datepicker"
                                            data-date-autoclose="true" placeholder="Date" bsDatepicker
                                            [(ngModel)]="clawbackDate"
                                            (bsValueChange)="getClawbackDate($event,selectedTransactionClawback)"
                                            class="form-control wd-200">
                                    </div>
                                </div>
                            </div>

                        </div>
                    </div>
                </div>

            </div>
        </div>
    </div>
    <div class="modal-footer">
        <button type="button" class="btn btn-secondary" (click)="saveClawBack();modalRef.hide()">
            &nbsp;save</button>
    </div>
</ng-template>

<!-- Refere Bonus-->
<ng-template #referalPopup style="display : block;">
    <div class="modal-header">
        <h5 class="modal-title font-14 text-purple font-bold" id="UploadModalLabel">Employee Referral</h5>
        <button type="button" (click)="modalRef.hide()" class="close" data-dismiss="modal" aria-label="Close"><span
                aria-hidden="true">×</span></button>
    </div>
    <div class="modal-body">

        <div class="section-body mt-3">
            <div class="container-fluid">
                <div class="row">
                    <div class="col-12">
                        <div class="card">
                            <div class="card-body">
                                <form>
                                    <!-- <div class="mb-0">
                                        <h3 class="font-14 text-purple font-bold">
                                            Employee Referral
                                        </h3>&nbsp;

                                    </div> -->
                                    <fieldset>
                                        <div class="row mb-10">
                                            <div class="col-sm-6 col-md-3">
                                                <label class="form-label">Emp. Code</label>
                                                <select class="form-control custom-select"
                                                    (change)="getEmployeeCode($event.target.value)">
                                                    <option>Select</option>
                                                    <option *ngFor="let emp of employeeData"
                                                        [selected]="refemployeeCode == emp.employeeCode">
                                                        {{emp.employeeCode}}</option>
                                                </select>
                                            </div>
                                            <div class=" col-sm-6 col-md-3">
                                                <label class="form-label">Emp. Name</label>
                                                <input type="text" class="form-control" value="{{refemployeeName}}"
                                                    disabled />
                                            </div>
                                            <div class="col-sm-6 col-md-3">
                                                <label class="form-label">Payroll Area</label>
                                                <select class="form-control custom-select"
                                                    (change)="getEmployeePayrollArea($event.target.value)">
                                                    <option>Select</option>
                                                    <option *ngFor="let payroll of refralPayrollListData"
                                                        [selected]="refPayrolArea == payroll.payrollAreaCode">
                                                        {{payroll.payrollAreaCode}}</option>

                                                </select>
                                            </div>
                                        </div>
                                        <br>
                                    </fieldset>



                                    <!-- <div class="row mt-15 float-right">

                                        <div class="float-right ">

                                            <button type="submit"
                                                class="custom_button custom_btn btn-bg-green btn-labeled btn-labeled-left ripple"
                                                tooltip="Save"><b>
                                                    <i class="fa fa-floppy-o"></i></b> Save</button>&nbsp;


                                            <button type="submit"
                                                class="custom_button custom_btn bg-teal-400 btn-labeled btn-labeled-left ripple"
                                                tooltip="Reset"><b>
                                                    <i class="fa fa-refresh"></i></b> Reset</button>&nbsp;


                                        </div>


                                    </div> -->




                                </form>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <div class="modal-footer">
        <button type="button" class="btn btn-secondary" (click)="modalRef.hide()">
            &nbsp;save</button>
    </div>
</ng-template>

<!-- Deviation and Repeat -->
<ng-template #deviationPopup>
    <div class="modal-header">
        <h5 class="modal-title" id="UploadModalLabel">Deviation</h5>
        <button type="button" (click)="modalRef.hide()" class="close" data-dismiss="modal" aria-label="Close"><span
                aria-hidden="true">×</span></button>
    </div>
    <div class="modal-body">
        <div class="card">
            <div class="card-body">
                <div class="row clearfix">
                    <div class="col-md-12">
                        <br>
                        <div class="tabset">
                            <!-- Tab 1 -->
                            <input type="radio" name="tabset" id="tab1" aria-controls="marzen" checked>
                            <!-- <div class="col-md-2" >
                                <div class="custom_Label_badge bagde1"> -->
                            <label for="tab1">Deviation</label>
                            <!-- <span class="Label_badge" style="text-align: center;">{{deviationCount}}</span>
                                </div>
                            </div> -->

                            <!-- Tab 2 -->
                            <input type="radio" name="tabset" id="tab2" aria-controls="rauchbier">
                            <label for="tab2">Repetitive Entry</label>

                            <div class="tab-panels">
                                <section id="marzen" class="tab-panel">
                                    <div class="row mb-10">
                                        <div class="col-sm-6 col-md-3" *ngIf="employeeFinDetailsData">
                                            <label class="form-label">Emp. Code</label>
                                            <input type="text" class="form-control"
                                                value="{{employeeFinDetailsData.employeeCode}}" disabled />
                                        </div>
                                        <div class=" col-sm-6 col-md-3" *ngIf="employeeFinDetailsData">
                                            <label class="form-label">Emp. Name</label>
                                            <input type="text" class="form-control"
                                                value="{{employeeFinDetailsData.fullName}}" disabled />
                                        </div>
                                        <div class="col-sm-6 col-md-3" *ngIf="selectedDevData">
                                            <label class="form-label">Head</label>
                                            <input type="text" class="form-control"
                                                value="{{selectedDevData.headDescription}}" disabled />
                                        </div>
                                        <div class="col-sm-6 col-md-3">
                                            <label class="form-label">Type</label>
                                            <input type="text" class="form-control" value="{{selectedDevData.headType}}"
                                                disabled />
                                        </div>
                                    </div>
                                    <br>

                                    <p-table [value]="deviationModeData" [paginator]="true" [rows]="10"
                                        [showCurrentPageReport]="true"
                                        currentPageReportTemplate="Showing {first} to {last} of {totalRecords} entries"
                                        [rowsPerPageOptions]="[10,25,50,100,200]">

                                        <ng-template pTemplate="header">
                                            <tr>

                                                <th rowspan="2">
                                                    <div class="p-d-flex p-jc-between p-ai-center">
                                                        Attribute

                                                        <div class="Sort_Filter_Position">
                                                            <p-sortIcon field="Attribute" pSortableColumn="Attribute">
                                                            </p-sortIcon>
                                                            <p-columnFilter type="text" field="name" display="menu"
                                                                class="p-ml-auto"></p-columnFilter>
                                                        </div>
                                                    </div>
                                                </th>

                                                <th rowspan="2">
                                                    <div class="p-d-flex p-jc-between p-ai-center">
                                                        Nature
                                                        <div class="Sort_Filter_Position">
                                                            <p-sortIcon field="Attribute" pSortableColumn="Attribute">
                                                            </p-sortIcon>
                                                            <p-columnFilter type="text" field="name" display="menu"
                                                                class="p-ml-auto"></p-columnFilter>
                                                        </div>
                                                    </div>
                                                </th>

                                                <th rowspan="2">
                                                    <div class="p-d-flex p-jc-between p-ai-center">
                                                        Group ID

                                                        <div class="Sort_Filter_Position">
                                                            <p-sortIcon field="Attribute" pSortableColumn="Attribute">
                                                            </p-sortIcon>
                                                            <p-columnFilter field="representative" matchMode="in"
                                                                display="menu" [showMatchModes]="false"
                                                                [showOperator]="false" [showAddButton]="false"
                                                                class="p-ml-auto">
                                                                <ng-template pTemplate="header">
                                                                    <div class="p-px-3 p-pt-3 p-pb-0">
                                                                        <span class="p-text-bold">Agent Picker</span>
                                                                    </div>
                                                                </ng-template>

                                                            </p-columnFilter>
                                                        </div>
                                                    </div>
                                                </th>
                                                <th colspan="3">
                                                    <div class="p-d-flex p-jc-between p-ai-center ml-60">
                                                        Deviation Nature

                                                    </div>
                                                </th>
                                                <th colspan="2">
                                                    <div class="p-d-flex p-jc-between p-ai-center ml-50">
                                                        Values

                                                    </div>
                                                </th>
                                                <th colspan="2">
                                                    <div class="p-d-flex p-jc-between p-ai-center">
                                                        Deviation Values

                                                    </div>
                                                </th>
                                                <th rowspan="2">
                                                    <div class="p-d-flex p-jc-between p-ai-center">
                                                        Remark
                                                        <div class="Sort_Filter_Position">
                                                            <p-sortIcon field="Attribute" pSortableColumn="Attribute">
                                                            </p-sortIcon>
                                                            <p-columnFilter type="date" field="date" display="menu"
                                                                class="p-ml-auto"></p-columnFilter>
                                                        </div>
                                                    </div>
                                                </th>
                                                <th rowspan="2">
                                                    <div class="p-d-flex p-jc-between p-ai-center">
                                                        Status
                                                        <div class="Sort_Filter_Position">
                                                            <p-sortIcon field="Attribute" pSortableColumn="Attribute">
                                                            </p-sortIcon>
                                                            <p-columnFilter type="date" field="date" display="menu"
                                                                class="p-ml-auto"></p-columnFilter>
                                                        </div>
                                                    </div>
                                                </th>
                                            </tr>
                                            <tr>
                                                <th rowspan="2">
                                                    <div class="p-d-flex p-jc-between p-ai-center">
                                                        Once Every
                                                        <div class="Sort_Filter_Position">
                                                            <p-sortIcon field="Attribute" pSortableColumn="Attribute">
                                                            </p-sortIcon>
                                                            <p-columnFilter type="date" field="date" display="menu"
                                                                class="p-ml-auto"></p-columnFilter>
                                                        </div>
                                                    </div>
                                                </th>
                                                <th rowspan="2">
                                                    <div class="p-d-flex p-jc-between p-ai-center">
                                                        Frequency
                                                        <div class="Sort_Filter_Position">
                                                            <p-sortIcon field="Attribute" pSortableColumn="Attribute">
                                                            </p-sortIcon>
                                                            <p-columnFilter type="date" field="date" display="menu"
                                                                class="p-ml-auto"></p-columnFilter>
                                                        </div>
                                                    </div>
                                                </th>
                                                <th rowspan="2">
                                                    <div class="p-d-flex p-jc-between p-ai-center">
                                                        Type
                                                        <div class="Sort_Filter_Position">
                                                            <p-sortIcon field="Attribute" pSortableColumn="Attribute">
                                                            </p-sortIcon>
                                                            <p-columnFilter type="date" field="date" display="menu"
                                                                class="p-ml-auto"></p-columnFilter>
                                                        </div>
                                                    </div>
                                                </th>
                                                <th rowspan="2">
                                                    <div class="p-d-flex p-jc-between p-ai-center">
                                                        Amount Entered

                                                        <div class="Sort_Filter_Position">
                                                            <p-sortIcon field="Attribute" pSortableColumn="Attribute">
                                                            </p-sortIcon>
                                                            <p-columnFilter type="date" field="date" display="menu"
                                                                class="p-ml-auto"></p-columnFilter>
                                                        </div>
                                                    </div>
                                                </th>
                                                <th rowspan="2">
                                                    <div class="p-d-flex p-jc-between p-ai-center">
                                                        Limit
                                                        <div class="Sort_Filter_Position">
                                                            <p-sortIcon field="Attribute" pSortableColumn="Attribute">
                                                            </p-sortIcon>
                                                            <p-columnFilter type="date" field="date" display="menu"
                                                                class="p-ml-auto"></p-columnFilter>
                                                        </div>
                                                    </div>
                                                </th>
                                                <th rowspan="2">
                                                    Amount
                                                </th>
                                                <th rowspan="2">
                                                    <div class="p-d-flex p-jc-between p-ai-center">
                                                        %
                                                        <div class="Sort_Filter_Position">
                                                            <p-sortIcon field="Attribute" pSortableColumn="Attribute">
                                                            </p-sortIcon>
                                                            <p-columnFilter type="text" field="name" display="menu"
                                                                class="p-ml-auto"></p-columnFilter>
                                                        </div>
                                                    </div>
                                                </th>
                                            </tr>

                                        </ng-template>

                                        <ng-template pTemplate="body" let-data>
                                            <tr class="p-selectable-row">

                                                <td class="bg-color-light_gray">
                                                    <label class="form-lable mb-0">{{data.attributeName}}</label>
                                                </td>
                                                <td class="bg-color-light_gray">
                                                    <label class="form-lable mb-0">{{data.attributeNature}}</label>
                                                </td>
                                                <td class="bg-color-light_gray">
                                                    <label
                                                        class="form-lable mb-0">{{data.nonRecurringTransactionGroupId}}</label>
                                                </td>
                                                <td class="bg-color-light_gray">
                                                    <label class="form-lable mb-0">{{data.onceEvery}}</label>
                                                </td>
                                                <td class="bg-color-light_gray">
                                                    <label class="form-lable mb-0">{{data.frequency}}</label>
                                                </td>
                                                <td class="bg-color-light_gray">
                                                    <label class="form-lable mb-0">{{data.deviationType}}</label>
                                                </td>
                                                <td class="bg-color-light_gray">
                                                    <label class="form-lable mb-0"
                                                        style="text-align: right;">{{data.actualAmount | number:
                                                        '1.2-2'}}</label>
                                                </td>
                                                <td class="bg-color-light_gray">
                                                    <label class="form-lable mb-0"
                                                        style="text-align: right;">{{data.deviationAmountLimit | number:
                                                        '1.2-2'}}</label>
                                                </td>
                                                <td class="bg-color-light_gray">
                                                    <label class="form-lable mb-0"
                                                        style="text-align: right;">{{data.deviationAmount | number:
                                                        '1.2-2'}}</label>
                                                </td>
                                                <td class="bg-color-light_gray">
                                                    <label class="form-lable mb-0"
                                                        style="text-align: right;">{{getDeviationPercentage(data)}}</label>
                                                </td>
                                                <td class="bg-color-light_gray">
                                                    <input type="" class="form-control" value="{{data.remark}}"
                                                        (focusout)="deviationRemark($event.target.value, data)">
                                                </td>
                                                <td class="bg-color-light_gray">
                                                    {{data.status}}
                                                </td>
                                            </tr>
                                        </ng-template>

                                        <ng-template pTemplate="emptymessage">
                                            <tr>
                                                <td colspan="15" class="font-14 font500 text-center text-red"><span>No
                                                        Data
                                                        Available</span></td>
                                            </tr>
                                        </ng-template>

                                    </p-table>

                                    <br>
                                    <!-- <div class="float-left d-flex justify-content">
                                        <label class="form-label mt-2">Remark</label>&nbsp;
                                        <textarea type="text"></textarea>
                                    </div> -->
                                    <br>
                                    <br>
                                    <div class="row mt-15 float-right">

                                        <div class="float-right ">
                                            <button type="button" [disabled]="devationRemarkText == ''"
                                                (click)="saveDeviationRepeatData(selectedDevData)"
                                                class="custom_button custom_btn bg-teal-400 btn-labeled btn-labeled-left ripple"
                                                [ngClass]="{'disabled-btn' : devationRemarkText == ''}"
                                                tooltip="Save"><b>
                                                    <i class="fa fa-times"></i></b> Save</button>&nbsp;
                                            <!-- <button type="submit"
                                                class="custom_button custom_btn bg-btn-red btn-labeled btn-labeled-left ripple"
                                                tooltip="Save" (click)=" extralargepopup(template)"><b>
                                                    <i class="fa fa-reply"></i></b> Send Back Group</button>&nbsp;
                                            <button type="submit"
                                                class="custom_button custom_btn bg-btn-red btn-labeled btn-labeled-left ripple"
                                                tooltip="Save" (click)=" extralargepopup(template)"><b>
                                                    <i class="fa fa-times"></i></b> Reject Group</button>&nbsp;
                                            <button type="submit"
                                                class="custom_button custom_btn btn-bg-green btn-labeled btn-labeled-left ripple"
                                                tooltip="Save" (click)=" extralargepopup(template)"><b>
                                                    <i class="fa fa-check-square-o "></i></b> Approve
                                                Group</button>&nbsp;
                                            <button type="submit"
                                                class="custom_button custom_btn btn-bg-green btn-labeled btn-labeled-left ripple"
                                                tooltip="Save" (click)=" extralargepopup(template)"><b>
                                                    <i class="fa fa-check-square-o"></i></b> Approve
                                                Deviation</button>&nbsp;
                                            <button type="submit"
                                                class="custom_button custom_btn bg-teal-400 btn-labeled btn-labeled-left ripple"
                                                tooltip="Reset"><b>
                                                    <i class="fa fa-refresh"></i></b> Reset</button>&nbsp; -->


                                        </div>
                                    </div>
                                </section>

                                <section id="rauchbier" class="tab-panel">
                                    <div class="row">
                                        <div class="col-12">
                                            <div class="card">
                                                <div class="row mb-0">
                                                    <div class="col-md-12">
                                                        <div class="row mb-10">
                                                            <div class="col-sm-6 col-md-3"
                                                                *ngIf="employeeFinDetailsData">
                                                                <label class="form-label">Emp. Code</label>
                                                                <input type="text" class="form-control"
                                                                    value="{{employeeFinDetailsData.employeeCode}}"
                                                                    disabled />
                                                            </div>
                                                            <div class=" col-sm-6 col-md-3"
                                                                *ngIf="employeeFinDetailsData">
                                                                <label class="form-label">Emp. Name</label>
                                                                <input type="text" class="form-control"
                                                                    value="{{employeeFinDetailsData.fullName}}"
                                                                    disabled />
                                                            </div>
                                                            <div class="col-sm-6 col-md-3" *ngIf="selectedDevData">
                                                                <label class="form-label">Head</label>
                                                                <input type="text" class="form-control"
                                                                    value="{{selectedDevData.headDescription}}"
                                                                    disabled />
                                                            </div>
                                                            <div class="col-sm-6 col-md-3">
                                                                <label class="form-label">Type</label>
                                                                <input type="text" class="form-control"
                                                                    value="{{selectedDevData.headType}}" disabled />
                                                            </div>
                                                        </div>
                                                        <br>

                                                        <p-table [value]="repeatModeData" [paginator]="true" [rows]="10"
                                                            [showCurrentPageReport]="true"
                                                            currentPageReportTemplate="Showing {first} to {last} of {totalRecords} entries"
                                                            [rowsPerPageOptions]="[10,25,50]">

                                                            <ng-template pTemplate="header">
                                                                <tr>

                                                                    <th rowspan="2">

                                                                    </th>

                                                                    <th rowspan="2">
                                                                        <div class="p-d-flex p-jc-between p-ai-center">
                                                                            Group ID

                                                                            <div class="Sort_Filter_Position">
                                                                                <p-sortIcon field="Attribute"
                                                                                    pSortableColumn="Attribute">
                                                                                </p-sortIcon>
                                                                                <p-columnFilter type="text" field="name"
                                                                                    display="menu" class="p-ml-auto">
                                                                                </p-columnFilter>
                                                                            </div>
                                                                        </div>
                                                                    </th>

                                                                    <th rowspan="2">
                                                                        <div class="p-d-flex p-jc-between p-ai-center">
                                                                            Once Every
                                                                            <div class="Sort_Filter_Position">
                                                                                <p-sortIcon field="Attribute"
                                                                                    pSortableColumn="Attribute">
                                                                                </p-sortIcon>
                                                                                <p-columnFilter field="representative"
                                                                                    matchMode="in" display="menu"
                                                                                    [showMatchModes]="false"
                                                                                    [showOperator]="false"
                                                                                    [showAddButton]="false"
                                                                                    class="p-ml-auto">
                                                                                    <ng-template pTemplate="header">
                                                                                        <div
                                                                                            class="p-px-3 p-pt-3 p-pb-0">
                                                                                            <span
                                                                                                class="p-text-bold">Agent
                                                                                                Picker</span>
                                                                                        </div>
                                                                                    </ng-template>

                                                                                </p-columnFilter>
                                                                            </div>
                                                                        </div>
                                                                    </th>

                                                                    <th rowspan="2">
                                                                        <div class="p-d-flex p-jc-between p-ai-center">
                                                                            Frequency
                                                                            <div class="Sort_Filter_Position">
                                                                                <p-sortIcon field="Attribute"
                                                                                    pSortableColumn="Attribute">
                                                                                </p-sortIcon>
                                                                                <p-columnFilter type="date" field="date"
                                                                                    display="menu" class="p-ml-auto">
                                                                                </p-columnFilter>
                                                                            </div>
                                                                        </div>
                                                                    </th>

                                                                    <th rowspan="2">
                                                                        <div class="p-d-flex p-jc-between p-ai-center">
                                                                            From Date
                                                                            <div class="Sort_Filter_Position">
                                                                                <p-sortIcon field="Attribute"
                                                                                    pSortableColumn="Attribute">
                                                                                </p-sortIcon>
                                                                                <p-columnFilter type="date" field="date"
                                                                                    display="menu" class="p-ml-auto">
                                                                                </p-columnFilter>
                                                                            </div>
                                                                        </div>
                                                                    </th>
                                                                    <th rowspan="2">
                                                                        <div class="p-d-flex p-jc-between p-ai-center">
                                                                            Type
                                                                            <div class="Sort_Filter_Position">
                                                                                <p-sortIcon field="Attribute"
                                                                                    pSortableColumn="Attribute">
                                                                                </p-sortIcon>
                                                                                <p-columnFilter type="date" field="date"
                                                                                    display="menu" class="p-ml-auto">
                                                                                </p-columnFilter>
                                                                            </div>
                                                                        </div>
                                                                    </th>
                                                                    <th rowspan="2">
                                                                        <div class="p-d-flex p-jc-between p-ai-center">
                                                                            No. of Trans.
                                                                            <div class="Sort_Filter_Position">
                                                                                <p-sortIcon field="Attribute"
                                                                                    pSortableColumn="Attribute">
                                                                                </p-sortIcon>
                                                                                <p-columnFilter type="date" field="date"
                                                                                    display="menu" class="p-ml-auto">
                                                                                </p-columnFilter>
                                                                            </div>
                                                                        </div>
                                                                    </th>
                                                                    <th rowspan="2">
                                                                        <div class="p-d-flex p-jc-between p-ai-center">
                                                                            To Date
                                                                            <div class="Sort_Filter_Position">
                                                                                <p-sortIcon field="Attribute"
                                                                                    pSortableColumn="Attribute">
                                                                                </p-sortIcon>
                                                                                <p-columnFilter type="date" field="date"
                                                                                    display="menu" class="p-ml-auto">
                                                                                </p-columnFilter>
                                                                            </div>
                                                                        </div>
                                                                    </th>
                                                                    <th rowspan="2">
                                                                        <div class="p-d-flex p-jc-between p-ai-center">
                                                                            Amount
                                                                            <div class="Sort_Filter_Position">
                                                                                <p-sortIcon field="Attribute"
                                                                                    pSortableColumn="Attribute">
                                                                                </p-sortIcon>
                                                                                <p-columnFilter type="date" field="date"
                                                                                    display="menu" class="p-ml-auto">
                                                                                </p-columnFilter>
                                                                            </div>
                                                                        </div>
                                                                    </th>
                                                                    <th rowspan="2">
                                                                        <div class="p-d-flex p-jc-between p-ai-center">
                                                                            Status
                                                                            <div class="Sort_Filter_Position">
                                                                                <p-sortIcon field="Attribute"
                                                                                    pSortableColumn="Attribute">
                                                                                </p-sortIcon>
                                                                                <p-columnFilter type="date" field="date"
                                                                                    display="menu" class="p-ml-auto">
                                                                                </p-columnFilter>
                                                                            </div>
                                                                        </div>
                                                                    </th>
                                                                    <th colspan="2">
                                                                        <div class="p-d-flex p-jc-between p-ai-center">
                                                                            Remark

                                                                        </div>
                                                                    </th>

                                                                </tr>

                                                            </ng-template>

                                                            <ng-template pTemplate="body" let-data>
                                                                <tr class="p-selectable-row">

                                                                    <td class="bg-color-light_gray">
                                                                        <label class="form-lable mb-0">Current</label>
                                                                    </td>
                                                                    <td class="bg-color-light_gray">
                                                                        <label
                                                                            class="form-lable mb-0">{{data.nonRecurringTransactionGroupId}}</label>
                                                                    </td>
                                                                    <td class="bg-color-light_gray">
                                                                        <label
                                                                            class="form-lable mb-0">{{data.onceEvery}}</label>
                                                                    </td>
                                                                    <td class="bg-color-light_gray">
                                                                        <label
                                                                            class="form-lable mb-0">{{data.frequency}}</label>
                                                                    </td>
                                                                    <td class="bg-color-light_gray">
                                                                        <label class="form-lable mb-0">{{data.fromDate |
                                                                            date:'dd-MMM-yyyy'}}</label>
                                                                    </td>
                                                                    <td class="bg-color-light_gray">
                                                                        <label class="form-lable mb-0"></label>
                                                                    </td>
                                                                    <td class="bg-color-light_gray">
                                                                        <label class="form-lable mb-0"></label>
                                                                    </td>
                                                                    <td class="bg-color-light_gray">
                                                                        <div class="input-group">
                                                                            <div class="input-group-prepend">
                                                                                <span class="input-group-text">
                                                                                    <i class="fa fa-calendar"></i>
                                                                                </span>
                                                                            </div>
                                                                            <input data-provide="datepicker"
                                                                                data-date-autoclose="true"
                                                                                class="form-control" placeholder="Date"
                                                                                bsDatepicker>
                                                                        </div>
                                                                    </td>
                                                                    <td class="bg-color-light_gray">
                                                                        <label
                                                                            class="form-lable mb-0">{{data.actualAmount}}</label>
                                                                    </td>
                                                                    <td class="bg-color-light_gray">
                                                                        <label
                                                                            class="form-lable mb-0">{{data.status}}</label>
                                                                    </td>
                                                                    <td class="bg-color-light_gray">
                                                                        <input type="text" class="form-control"
                                                                            value="{{data.remark}}"
                                                                            (focusout)="repeatRemark($event.target.value,data)">
                                                                    </td>
                                                                </tr>
                                                            </ng-template>

                                                            <ng-template pTemplate="emptymessage">
                                                                <tr>
                                                                    <td colspan="15"
                                                                        class="font-14 font500 text-center text-red">
                                                                        <span>No Data
                                                                            Available</span>
                                                                    </td>
                                                                </tr>
                                                            </ng-template>

                                                        </p-table>
                                                        <br>

                                                        <div class="row mt-15 float-right">

                                                            <div class="float-right ">

                                                                <button type="submit"
                                                                    [disabled]="repeatRemarkText == ''"
                                                                    class="custom_button custom_btn btn-bg-green btn-labeled btn-labeled-left ripple"
                                                                    [ngClass]="{'disabled-btn' : repeatRemarkText == ''}"
                                                                    tooltip="Save"
                                                                    (click)="saveDeviationRepeatData(selectedDevData)"><b>
                                                                        <i class="fa fa-files-o"></i></b> Save
                                                                </button>&nbsp;
                                                                <!-- <button type="submit"
                                                                    class="custom_button custom_btn btn-bg-green btn-labeled btn-labeled-left ripple"
                                                                    tooltip="Save"
                                                                    (click)=" extralargepopup(template)"><b>
                                                                        <i class="fa fa-files-o"></i></b> Repeat
                                                                </button>&nbsp;
                                                                <button type="submit"
                                                                    class="custom_button custom_btn btn-bg-green btn-labeled btn-labeled-left ripple"
                                                                    tooltip="Save"
                                                                    (click)=" extralargepopup(template)"><b>
                                                                        <i
                                                                            class="fa fa-link "></i></b>Unique</button>&nbsp; -->
                                                                <!-- <button type="submit"
                                                                    class="custom_button custom_btn bg-btn-red btn-labeled btn-labeled-left ripple"
                                                                    tooltip="Save"
                                                                    ><b>
                                                                        <i class="fa fa-times"></i></b>
                                                                    Cancel</button>&nbsp; -->

                                                            </div>


                                                        </div>

                                                    </div>
                                                </div>

                                            </div>
                                        </div>
                                    </div>
                                </section>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <!-- <div class="modal-footer">
        <button type="button" class="btn btn-secondary" (click)="modalRef.hide()">Ok</button>
    </div> -->
</ng-template>

<!-- Edit deviation and repeat-->
<ng-template #editdeviationPopup>

    <div class="modal-header">
        <h5 class="modal-title" id="UploadModalLabel">Deviation</h5>
        <button type="button" (click)="modalRef.hide()" class="close" data-dismiss="modal" aria-label="Close"><span
                aria-hidden="true">×</span></button>
    </div>
    <div class="modal-body">
        <div class="card">
            <div class="card-body">
                <div class="row clearfix">
                    <div class="col-md-12">
                        <br>
                        <div class="tabset">
                            <!-- Tab 1 -->
                            <input type="radio" name="tabset" id="tab1" aria-controls="marzen" checked>
                            <!-- <div class="col-md-2" >
                                <div class="custom_Label_badge bagde1"> -->
                            <label for="tab1">Deviation</label>
                            <!-- <span class="Label_badge" style="text-align: center;">{{deviationCount}}</span>
                                </div>
                            </div> -->

                            <!-- Tab 2 -->
                            <input type="radio" name="tabset" id="tab2" aria-controls="rauchbier">
                            <label for="tab2">Repetitive Entry</label>

                            <div class="tab-panels">
                                <section id="marzen" class="tab-panel">
                                    <div class="row mb-10">
                                        <div class="col-sm-6 col-md-3" *ngIf="employeeFinDetailsData">
                                            <label class="form-label">Emp. Code</label>
                                            <input type="text" class="form-control"
                                                value="{{employeeFinDetailsData.employeeCode}}" disabled />
                                        </div>
                                        <div class=" col-sm-6 col-md-3" *ngIf="employeeFinDetailsData">
                                            <label class="form-label">Emp. Name</label>
                                            <input type="text" class="form-control"
                                                value="{{employeeFinDetailsData.fullName}}" disabled />
                                        </div>
                                        <div class="col-sm-6 col-md-3" *ngIf="selectedDevData">
                                            <label class="form-label">Head</label>
                                            <input type="text" class="form-control"
                                                value="{{selectedDevData.headDescription}}" disabled />
                                        </div>
                                        <div class="col-sm-6 col-md-3">
                                            <label class="form-label">Type</label>
                                            <input type="text" class="form-control" value="{{selectedDevData.headType}}"
                                                disabled />
                                        </div>
                                    </div>
                                    <br>

                                    <p-table [value]="deviationModeData" [paginator]="true" [rows]="10"
                                        [showCurrentPageReport]="true"
                                        currentPageReportTemplate="Showing {first} to {last} of {totalRecords} entries"
                                        [rowsPerPageOptions]="[10,25,50,100,200]">

                                        <ng-template pTemplate="header">
                                            <tr>

                                                <th rowspan="2">
                                                    <div class="p-d-flex p-jc-between p-ai-center">
                                                        Attribute

                                                        <div class="Sort_Filter_Position">
                                                            <p-sortIcon field="Attribute" pSortableColumn="Attribute">
                                                            </p-sortIcon>
                                                            <p-columnFilter type="text" field="name" display="menu"
                                                                class="p-ml-auto"></p-columnFilter>
                                                        </div>
                                                    </div>
                                                </th>

                                                <th rowspan="2">
                                                    <div class="p-d-flex p-jc-between p-ai-center">
                                                        Nature
                                                        <div class="Sort_Filter_Position">
                                                            <p-sortIcon field="Attribute" pSortableColumn="Attribute">
                                                            </p-sortIcon>
                                                            <p-columnFilter type="text" field="name" display="menu"
                                                                class="p-ml-auto"></p-columnFilter>
                                                        </div>
                                                    </div>
                                                </th>

                                                <th rowspan="2">
                                                    <div class="p-d-flex p-jc-between p-ai-center">
                                                        Group ID

                                                        <div class="Sort_Filter_Position">
                                                            <p-sortIcon field="Attribute" pSortableColumn="Attribute">
                                                            </p-sortIcon>
                                                            <p-columnFilter field="representative" matchMode="in"
                                                                display="menu" [showMatchModes]="false"
                                                                [showOperator]="false" [showAddButton]="false"
                                                                class="p-ml-auto">
                                                                <ng-template pTemplate="header">
                                                                    <div class="p-px-3 p-pt-3 p-pb-0">
                                                                        <span class="p-text-bold">Agent Picker</span>
                                                                    </div>
                                                                </ng-template>

                                                            </p-columnFilter>
                                                        </div>
                                                    </div>
                                                </th>
                                                <th colspan="3">
                                                    <div class="p-d-flex p-jc-between p-ai-center ml-60">
                                                        Deviation Nature

                                                    </div>
                                                </th>
                                                <th colspan="2">
                                                    <div class="p-d-flex p-jc-between p-ai-center ml-50">
                                                        Values

                                                    </div>
                                                </th>
                                                <th colspan="2">
                                                    <div class="p-d-flex p-jc-between p-ai-center">
                                                        Deviation Values

                                                    </div>
                                                </th>
                                                <th rowspan="2">
                                                    <div class="p-d-flex p-jc-between p-ai-center">
                                                        Remark
                                                        <div class="Sort_Filter_Position">
                                                            <p-sortIcon field="Attribute" pSortableColumn="Attribute">
                                                            </p-sortIcon>
                                                            <p-columnFilter type="date" field="date" display="menu"
                                                                class="p-ml-auto"></p-columnFilter>
                                                        </div>
                                                    </div>
                                                </th>
                                                <th rowspan="2">
                                                    <div class="p-d-flex p-jc-between p-ai-center">
                                                        Status
                                                        <div class="Sort_Filter_Position">
                                                            <p-sortIcon field="Attribute" pSortableColumn="Attribute">
                                                            </p-sortIcon>
                                                            <p-columnFilter type="date" field="date" display="menu"
                                                                class="p-ml-auto"></p-columnFilter>
                                                        </div>
                                                    </div>
                                                </th>
                                            </tr>
                                            <tr>
                                                <th rowspan="2">
                                                    <div class="p-d-flex p-jc-between p-ai-center">
                                                        Once Every
                                                        <div class="Sort_Filter_Position">
                                                            <p-sortIcon field="Attribute" pSortableColumn="Attribute">
                                                            </p-sortIcon>
                                                            <p-columnFilter type="date" field="date" display="menu"
                                                                class="p-ml-auto"></p-columnFilter>
                                                        </div>
                                                    </div>
                                                </th>
                                                <th rowspan="2">
                                                    <div class="p-d-flex p-jc-between p-ai-center">
                                                        Frequency
                                                        <div class="Sort_Filter_Position">
                                                            <p-sortIcon field="Attribute" pSortableColumn="Attribute">
                                                            </p-sortIcon>
                                                            <p-columnFilter type="date" field="date" display="menu"
                                                                class="p-ml-auto"></p-columnFilter>
                                                        </div>
                                                    </div>
                                                </th>
                                                <th rowspan="2">
                                                    <div class="p-d-flex p-jc-between p-ai-center">
                                                        Type
                                                        <div class="Sort_Filter_Position">
                                                            <p-sortIcon field="Attribute" pSortableColumn="Attribute">
                                                            </p-sortIcon>
                                                            <p-columnFilter type="date" field="date" display="menu"
                                                                class="p-ml-auto"></p-columnFilter>
                                                        </div>
                                                    </div>
                                                </th>
                                                <th rowspan="2">
                                                    <div class="p-d-flex p-jc-between p-ai-center">
                                                        Amount Entered

                                                        <div class="Sort_Filter_Position">
                                                            <p-sortIcon field="Attribute" pSortableColumn="Attribute">
                                                            </p-sortIcon>
                                                            <p-columnFilter type="date" field="date" display="menu"
                                                                class="p-ml-auto"></p-columnFilter>
                                                        </div>
                                                    </div>
                                                </th>
                                                <th rowspan="2">
                                                    <div class="p-d-flex p-jc-between p-ai-center">
                                                        Limit
                                                        <div class="Sort_Filter_Position">
                                                            <p-sortIcon field="Attribute" pSortableColumn="Attribute">
                                                            </p-sortIcon>
                                                            <p-columnFilter type="date" field="date" display="menu"
                                                                class="p-ml-auto"></p-columnFilter>
                                                        </div>
                                                    </div>
                                                </th>
                                                <th rowspan="2">
                                                    Amount
                                                </th>
                                                <th rowspan="2">
                                                    <div class="p-d-flex p-jc-between p-ai-center">
                                                        %
                                                        <div class="Sort_Filter_Position">
                                                            <p-sortIcon field="Attribute" pSortableColumn="Attribute">
                                                            </p-sortIcon>
                                                            <p-columnFilter type="text" field="name" display="menu"
                                                                class="p-ml-auto"></p-columnFilter>
                                                        </div>
                                                    </div>
                                                </th>
                                            </tr>

                                        </ng-template>

                                        <ng-template pTemplate="body" let-data>
                                            <tr class="p-selectable-row">

                                                <td class="bg-color-light_gray">
                                                    <label class="form-lable mb-0">{{data.attributeName}}</label>
                                                </td>
                                                <td class="bg-color-light_gray">
                                                    <label class="form-lable mb-0">{{data.attributeNature}}</label>
                                                </td>
                                                <td class="bg-color-light_gray">
                                                    <label
                                                        class="form-lable mb-0">{{data.nonRecurringTransactionGroupId}}</label>
                                                </td>
                                                <td class="bg-color-light_gray">
                                                    <label class="form-lable mb-0">{{data.onceEvery}}</label>
                                                </td>
                                                <td class="bg-color-light_gray">
                                                    <label class="form-lable mb-0">{{data.frequency}}</label>
                                                </td>
                                                <td class="bg-color-light_gray">
                                                    <label class="form-lable mb-0">{{data.deviationType}}</label>
                                                </td>
                                                <td class="bg-color-light_gray">
                                                    <label class="form-lable mb-0"
                                                        style="text-align: right;">{{data.actualAmount | number:
                                                        '1.2-2'}}</label>
                                                </td>
                                                <td class="bg-color-light_gray">
                                                    <label class="form-lable mb-0"
                                                        style="text-align: right;">{{data.deviationAmountLimit | number:
                                                        '1.2-2'}}</label>
                                                </td>
                                                <td class="bg-color-light_gray">
                                                    <label class="form-lable mb-0"
                                                        style="text-align: right;">{{data.deviationAmount | number:
                                                        '1.2-2'}}</label>
                                                </td>
                                                <td class="bg-color-light_gray">
                                                    <label class="form-lable mb-0"
                                                        style="text-align: right;">{{getDeviationPercentage(data)}}</label>
                                                </td>
                                                <td class="bg-color-light_gray">
                                                    <input type="" class="form-control" value="{{data.remark}}"
                                                        (focusout)="deviationRemark($event.target.value, data)">
                                                </td>
                                                <td class="bg-color-light_gray">
                                                    {{data.status}}
                                                </td>
                                            </tr>
                                        </ng-template>

                                        <ng-template pTemplate="emptymessage">
                                            <tr>
                                                <td colspan="15" class="font-14 font500 text-center text-red"><span>No
                                                        Data
                                                        Available</span></td>
                                            </tr>
                                        </ng-template>

                                    </p-table>

                                    <br>
                                    <!-- <div class="float-left d-flex justify-content">
                                        <label class="form-label mt-2">Remark</label>&nbsp;
                                        <textarea type="text"></textarea>
                                    </div> -->
                                    <br>
                                    <br>
                                    <div class="row mt-15 float-right">

                                        <div class="float-right ">
                                            <button type="button" [disabled]="devationRemarkText == ''"
                                                (click)="updateDeviationRepeatData(selectedDevData)"
                                                class="custom_button custom_btn bg-teal-400 btn-labeled btn-labeled-left ripple"
                                                [ngClass]="{'disabled-btn' : devationRemarkText == ''}"
                                                tooltip="Save"><b>
                                                    <i class="fa fa-times"></i></b> Save</button>&nbsp;
                                        </div>
                                    </div>
                                </section>

                                <section id="rauchbier" class="tab-panel">
                                    <div class="row">
                                        <div class="col-12">
                                            <div class="card">
                                                <div class="row mb-0">
                                                    <div class="col-md-12">
                                                        <div class="row mb-10">
                                                            <div class="col-sm-6 col-md-3"
                                                                *ngIf="employeeFinDetailsData">
                                                                <label class="form-label">Emp. Code</label>
                                                                <input type="text" class="form-control"
                                                                    value="{{employeeFinDetailsData.employeeCode}}"
                                                                    disabled />
                                                            </div>
                                                            <div class=" col-sm-6 col-md-3"
                                                                *ngIf="employeeFinDetailsData">
                                                                <label class="form-label">Emp. Name</label>
                                                                <input type="text" class="form-control"
                                                                    value="{{employeeFinDetailsData.fullName}}"
                                                                    disabled />
                                                            </div>
                                                            <div class="col-sm-6 col-md-3" *ngIf="selectedDevData">
                                                                <label class="form-label">Head</label>
                                                                <input type="text" class="form-control"
                                                                    value="{{selectedDevData.headDescription}}"
                                                                    disabled />
                                                            </div>
                                                            <div class="col-sm-6 col-md-3">
                                                                <label class="form-label">Type</label>
                                                                <input type="text" class="form-control"
                                                                    value="{{selectedDevData.headType}}" disabled />
                                                            </div>
                                                        </div>
                                                        <br>

                                                        <p-table [value]="repeatModeData" [paginator]="true" [rows]="10"
                                                            [showCurrentPageReport]="true"
                                                            currentPageReportTemplate="Showing {first} to {last} of {totalRecords} entries"
                                                            [rowsPerPageOptions]="[10,25,50]">

                                                            <ng-template pTemplate="header">
                                                                <tr>

                                                                    <th rowspan="2">

                                                                    </th>

                                                                    <th rowspan="2">
                                                                        <div class="p-d-flex p-jc-between p-ai-center">
                                                                            Group ID

                                                                            <div class="Sort_Filter_Position">
                                                                                <p-sortIcon field="Attribute"
                                                                                    pSortableColumn="Attribute">
                                                                                </p-sortIcon>
                                                                                <p-columnFilter type="text" field="name"
                                                                                    display="menu" class="p-ml-auto">
                                                                                </p-columnFilter>
                                                                            </div>
                                                                        </div>
                                                                    </th>

                                                                    <th rowspan="2">
                                                                        <div class="p-d-flex p-jc-between p-ai-center">
                                                                            Once Every
                                                                            <div class="Sort_Filter_Position">
                                                                                <p-sortIcon field="Attribute"
                                                                                    pSortableColumn="Attribute">
                                                                                </p-sortIcon>
                                                                                <p-columnFilter field="representative"
                                                                                    matchMode="in" display="menu"
                                                                                    [showMatchModes]="false"
                                                                                    [showOperator]="false"
                                                                                    [showAddButton]="false"
                                                                                    class="p-ml-auto">
                                                                                    <ng-template pTemplate="header">
                                                                                        <div
                                                                                            class="p-px-3 p-pt-3 p-pb-0">
                                                                                            <span
                                                                                                class="p-text-bold">Agent
                                                                                                Picker</span>
                                                                                        </div>
                                                                                    </ng-template>

                                                                                </p-columnFilter>
                                                                            </div>
                                                                        </div>
                                                                    </th>

                                                                    <th rowspan="2">
                                                                        <div class="p-d-flex p-jc-between p-ai-center">
                                                                            Frequency
                                                                            <div class="Sort_Filter_Position">
                                                                                <p-sortIcon field="Attribute"
                                                                                    pSortableColumn="Attribute">
                                                                                </p-sortIcon>
                                                                                <p-columnFilter type="date" field="date"
                                                                                    display="menu" class="p-ml-auto">
                                                                                </p-columnFilter>
                                                                            </div>
                                                                        </div>
                                                                    </th>

                                                                    <th rowspan="2">
                                                                        <div class="p-d-flex p-jc-between p-ai-center">
                                                                            From Date
                                                                            <div class="Sort_Filter_Position">
                                                                                <p-sortIcon field="Attribute"
                                                                                    pSortableColumn="Attribute">
                                                                                </p-sortIcon>
                                                                                <p-columnFilter type="date" field="date"
                                                                                    display="menu" class="p-ml-auto">
                                                                                </p-columnFilter>
                                                                            </div>
                                                                        </div>
                                                                    </th>
                                                                    <th rowspan="2">
                                                                        <div class="p-d-flex p-jc-between p-ai-center">
                                                                            Type
                                                                            <div class="Sort_Filter_Position">
                                                                                <p-sortIcon field="Attribute"
                                                                                    pSortableColumn="Attribute">
                                                                                </p-sortIcon>
                                                                                <p-columnFilter type="date" field="date"
                                                                                    display="menu" class="p-ml-auto">
                                                                                </p-columnFilter>
                                                                            </div>
                                                                        </div>
                                                                    </th>
                                                                    <th rowspan="2">
                                                                        <div class="p-d-flex p-jc-between p-ai-center">
                                                                            No. of Trans.
                                                                            <div class="Sort_Filter_Position">
                                                                                <p-sortIcon field="Attribute"
                                                                                    pSortableColumn="Attribute">
                                                                                </p-sortIcon>
                                                                                <p-columnFilter type="date" field="date"
                                                                                    display="menu" class="p-ml-auto">
                                                                                </p-columnFilter>
                                                                            </div>
                                                                        </div>
                                                                    </th>
                                                                    <th rowspan="2">
                                                                        <div class="p-d-flex p-jc-between p-ai-center">
                                                                            To Date
                                                                            <div class="Sort_Filter_Position">
                                                                                <p-sortIcon field="Attribute"
                                                                                    pSortableColumn="Attribute">
                                                                                </p-sortIcon>
                                                                                <p-columnFilter type="date" field="date"
                                                                                    display="menu" class="p-ml-auto">
                                                                                </p-columnFilter>
                                                                            </div>
                                                                        </div>
                                                                    </th>
                                                                    <th rowspan="2">
                                                                        <div class="p-d-flex p-jc-between p-ai-center">
                                                                            Amount
                                                                            <div class="Sort_Filter_Position">
                                                                                <p-sortIcon field="Attribute"
                                                                                    pSortableColumn="Attribute">
                                                                                </p-sortIcon>
                                                                                <p-columnFilter type="date" field="date"
                                                                                    display="menu" class="p-ml-auto">
                                                                                </p-columnFilter>
                                                                            </div>
                                                                        </div>
                                                                    </th>
                                                                    <th rowspan="2">
                                                                        <div class="p-d-flex p-jc-between p-ai-center">
                                                                            Status
                                                                            <div class="Sort_Filter_Position">
                                                                                <p-sortIcon field="Attribute"
                                                                                    pSortableColumn="Attribute">
                                                                                </p-sortIcon>
                                                                                <p-columnFilter type="date" field="date"
                                                                                    display="menu" class="p-ml-auto">
                                                                                </p-columnFilter>
                                                                            </div>
                                                                        </div>
                                                                    </th>
                                                                    <th colspan="2">
                                                                        <div class="p-d-flex p-jc-between p-ai-center">
                                                                            Remark

                                                                        </div>
                                                                    </th>

                                                                </tr>

                                                            </ng-template>

                                                            <ng-template pTemplate="body" let-data>
                                                                <tr class="p-selectable-row">

                                                                    <td class="bg-color-light_gray">
                                                                        <label class="form-lable mb-0">Current</label>
                                                                    </td>
                                                                    <td class="bg-color-light_gray">
                                                                        <label
                                                                            class="form-lable mb-0">{{data.nonRecurringTransactionGroupId}}</label>
                                                                    </td>
                                                                    <td class="bg-color-light_gray">
                                                                        <label
                                                                            class="form-lable mb-0">{{data.onceEvery}}</label>
                                                                    </td>
                                                                    <td class="bg-color-light_gray">
                                                                        <label
                                                                            class="form-lable mb-0">{{data.frequency}}</label>
                                                                    </td>
                                                                    <td class="bg-color-light_gray">
                                                                        <label class="form-lable mb-0">{{data.fromDate |
                                                                            date:'dd-MMM-yyyy'}}</label>
                                                                    </td>
                                                                    <td class="bg-color-light_gray">
                                                                        <label class="form-lable mb-0"></label>
                                                                    </td>
                                                                    <td class="bg-color-light_gray">
                                                                        <label class="form-lable mb-0"></label>
                                                                    </td>
                                                                    <td class="bg-color-light_gray">
                                                                        <div class="input-group">
                                                                            <div class="input-group-prepend">
                                                                                <span class="input-group-text">
                                                                                    <i class="fa fa-calendar"></i>
                                                                                </span>
                                                                            </div>
                                                                            <input data-provide="datepicker"
                                                                                data-date-autoclose="true"
                                                                                class="form-control" placeholder="Date"
                                                                                bsDatepicker>
                                                                        </div>
                                                                    </td>
                                                                    <td class="bg-color-light_gray">
                                                                        <label
                                                                            class="form-lable mb-0">{{data.actualAmount}}</label>
                                                                    </td>
                                                                    <td class="bg-color-light_gray">
                                                                        <label
                                                                            class="form-lable mb-0">{{data.status}}</label>
                                                                    </td>
                                                                    <td class="bg-color-light_gray">
                                                                        <input type="text" class="form-control"
                                                                            value="{{data.remark}}"
                                                                            (focusout)="repeatRemark($event.target.value,data)">
                                                                    </td>
                                                                </tr>
                                                            </ng-template>

                                                            <ng-template pTemplate="emptymessage">
                                                                <tr>
                                                                    <td colspan="15"
                                                                        class="font-14 font500 text-center text-red">
                                                                        <span>No Data
                                                                            Available</span>
                                                                    </td>
                                                                </tr>
                                                            </ng-template>

                                                        </p-table>
                                                        <br>

                                                        <div class="row mt-15 float-right">

                                                            <div class="float-right ">

                                                                <button type="submit"
                                                                    [disabled]="repeatRemarkText == ''"
                                                                    class="custom_button custom_btn btn-bg-green btn-labeled btn-labeled-left ripple"
                                                                    [ngClass]="{'disabled-btn' : repeatRemarkText == ''}"
                                                                    tooltip="Save"
                                                                    (click)="updateDeviationRepeatData(selectedDevData)"><b>
                                                                        <i class="fa fa-files-o"></i></b> Save
                                                                </button>&nbsp;

                                                            </div>


                                                        </div>

                                                    </div>
                                                </div>

                                            </div>
                                        </div>
                                    </div>
                                </section>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

</ng-template>