<app-leftmenu></app-leftmenu>
<form>
    <div>
        <div class="page">
            <app-header></app-header>
            <div class="section-body mt-3">
                <div class="container-fluid">
                    <div class="row">
                        <div class="col-12">
                            <div class="card">
                                <div class="card-body">
                                    <div class="tabview">

                                        <!--------------- ------------- Summary ----------------------->
                                        <input name="nav" type="radio" class="about-radio" id="Summary"
                                            [checked]="indexId == 1"
                                            (click)="getAllGarnishmentMaster();navigateToSummary()" />

                                        <div class="tabs about-page">
                                            <div class="row">
                                                <div class="col-md-12">
                                                    <div class="card">
                                                        <div class="card-body">
                                                            <div class="row mb-10">
                                                                <div class="col-md-6">
                                                                    <label
                                                                        class="form-label mb-0  mt-2 float-left">Total
                                                                        Records &nbsp;<span
                                                                            class="text-dark-green font-14 font-bold">({{selectedEmpData.length}})</span></label>
                                                                </div>
                                                                <!-- Summary top buttons -->
                                                                <div class="col-md-6">
                                                                    <div class="float-right">

                                                                        <button type="button" tooltip="Edit Transaction"
                                                                            [disabled]="selectedEmpData.length == 0"
                                                                            class="custom_button custom_btn btn-bg-green btn-labeled btn-labeled-left mr-10"
                                                                            [ngClass]="{'disabled-btn-bg-green' : selectedEmpData.length == 0}"
                                                                            (click)="editTransaction()">
                                                                            <b><i class="fa fa-pencil"></i></b>
                                                                            Edit Transaction
                                                                        </button>
                                                                        <button type="button" tooltip="Edit Schedule"
                                                                            class="custom_button custom_btn btn-bg-green btn-labeled btn-labeled-left mr-10"
                                                                            [ngClass]="{'disabled-btn-bg-green' : selectedEmpData.length == 0}"
                                                                            (click)="editScheduleData()"
                                                                            [disabled]="selectedEmpData.length == 0">
                                                                            <b><i class="fa fa-pencil"></i></b>
                                                                            Edit Schedule
                                                                        </button>

                                                                    </div>

                                                                </div>
                                                            </div>

                                                            <div class="table-responsive Custom_Table">
                                                                <p-table #dt1 [value]="applicationSummaryData"
                                                                    [paginator]="true" [rows]="10"
                                                                    [showCurrentPageReport]="true"
                                                                    (sortFunction)="customSort($event)"
                                                                    [customSort]="true"
                                                                    currentPageReportTemplate="Showing {first} to {last} of {totalRecords} entries"
                                                                    [rowsPerPageOptions]="[10,25,50,100,200]"
                                                                    [style]="{'width':'100%', overflow: auto}"
                                                                    [globalFilterFields]="['employeeMasterId','employeeMasterResponseDTO.employeeCode',
                                                                    'employeeMasterResponseDTO.fullName','payrollArea.payrollAreaCode','garnishmentApplicationMasterId',
                                                                    'createDateTime','garnishmentMasterResponseDTO.nameOfInstitution',
                                                                        'garnishmentMasterResponseDTO.nature','percentage','amount','fromDate','toDate','goalBalanceAmount','remark'
                                                                        ]">

                                                                    <ng-template pTemplate="caption">
                                                                        <div class="row">
                                                                            <div class="col-md-12">
                                                                                <div class="float-right">
                                                                                    <div class="d-flex">
                                                                                        <span
                                                                                            class="p-input-icon-left p-ml-auto">
                                                                                            <i class="pi pi-search"
                                                                                                style="top: 9px !important;margin-right: 22px;"></i>
                                                                                            <input pInputText
                                                                                                type="text"
                                                                                                (input)="dt1.filterGlobal($event.target.value, 'contains')"
                                                                                                placeholder="Search " />
                                                                                        </span>
                                                                                        <i class="fa fa-file-excel-o ml-2 font-24 mt-1 text-dark-green"
                                                                                            (click)="SummaryexportAsXLSX()"></i>
                                                                                    </div>
                                                                                </div>
                                                                            </div>
                                                                        </div>
                                                                    </ng-template>

                                                                    <ng-template pTemplate="header">
                                                                        <tr>
                                                                            <th class="wd-5">
                                                                                <label
                                                                                    class="custom-control custom-checkbox checkbox-center"
                                                                                    tooltip="Select All">
                                                                                    <input type="checkbox"
                                                                                        class="custom-control-input"
                                                                                        name="select"
                                                                                        (click)="selectAll($event.target)" />
                                                                                    <span
                                                                                        class="custom-control-label"></span>
                                                                                </label>

                                                                            </th>
                                                                            <th class="wd-2">
                                                                                <div
                                                                                    class="p-d-flex p-jc-between p-ai-center">
                                                                                    Emp. Code
                                                                                    <div class="Sort_Filter_Position">
                                                                                        <p-sortIcon
                                                                                            field="employeeMasterResponseDTO.employeeCode"
                                                                                            pSortableColumn="employeeMasterResponseDTO.employeeCode">
                                                                                        </p-sortIcon>
                                                                                        <p-columnFilter
                                                                                            field="employeeMasterResponseDTO.employeeCode"
                                                                                            display="menu"
                                                                                            class="p-ml-auto">
                                                                                        </p-columnFilter>
                                                                                    </div>
                                                                                </div>
                                                                            </th>
                                                                            <th>
                                                                                <div
                                                                                    class="p-d-flex p-jc-between p-ai-center">
                                                                                    Emp. Name
                                                                                    <div class="Sort_Filter_Position">
                                                                                        <p-sortIcon
                                                                                            field="employeeMasterResponseDTO.fullName"
                                                                                            pSortableColumn="employeeMasterResponseDTO.fullName">
                                                                                        </p-sortIcon>
                                                                                        <p-columnFilter
                                                                                            field="employeeMasterResponseDTO.fullName"
                                                                                            display="menu"
                                                                                            class="p-ml-auto">

                                                                                        </p-columnFilter>
                                                                                    </div>
                                                                                </div>
                                                                            </th>
                                                                            <th>
                                                                                <div
                                                                                    class="p-d-flex p-jc-between p-ai-center">
                                                                                    Payroll Area
                                                                                    <div class="Sort_Filter_Position">
                                                                                        <p-sortIcon
                                                                                            field="payrollArea.payrollAreaCode"
                                                                                            pSortableColumn="payrollArea.payrollAreaCode">
                                                                                        </p-sortIcon>
                                                                                        <p-columnFilter
                                                                                            field="payrollArea.payrollAreaCode"
                                                                                            display="menu"
                                                                                            class="p-ml-auto">
                                                                                        </p-columnFilter>
                                                                                    </div>
                                                                                </div>
                                                                            </th>
                                                                            <th>
                                                                                <div
                                                                                    class="p-d-flex p-jc-between p-ai-center">
                                                                                    Application No.
                                                                                    <div class="Sort_Filter_Position">
                                                                                        <p-sortIcon
                                                                                            field="garnishmentApplicationMasterId"
                                                                                            pSortableColumn="garnishmentApplicationMasterId">
                                                                                        </p-sortIcon>
                                                                                        <p-columnFilter type="number"
                                                                                            field="garnishmentApplicationMasterId"
                                                                                            display="menu"
                                                                                            class="p-ml-auto">
                                                                                        </p-columnFilter>
                                                                                    </div>
                                                                                </div>
                                                                            </th>
                                                                            <th>
                                                                                <div
                                                                                    class="p-d-flex p-jc-between p-ai-center">
                                                                                    Application Date
                                                                                    <div class="Sort_Filter_Position">
                                                                                        <p-sortIcon
                                                                                            field="createDateTime"
                                                                                            pSortableColumn="createDateTime">
                                                                                        </p-sortIcon>
                                                                                        <p-columnFilter type="date"
                                                                                            field="createDateTime"
                                                                                            display="menu"
                                                                                            class="p-ml-auto">
                                                                                        </p-columnFilter>
                                                                                    </div>
                                                                                </div>
                                                                            </th>
                                                                            <th>
                                                                                <div
                                                                                    class="p-d-flex p-jc-between p-ai-center">
                                                                                    Master
                                                                                    <div class="Sort_Filter_Position">
                                                                                        <p-sortIcon
                                                                                            field="garnishmentMasterResponseDTO.nameOfInstitution"
                                                                                            pSortableColumn="garnishmentMasterResponseDTO.nameOfInstitution">
                                                                                        </p-sortIcon>
                                                                                        <p-columnFilter type="text"
                                                                                            field="garnishmentMasterResponseDTO.nameOfInstitution"
                                                                                            display="menu"
                                                                                            class="p-ml-auto">
                                                                                        </p-columnFilter>
                                                                                    </div>
                                                                                </div>
                                                                            </th>
                                                                            <th>
                                                                                <div
                                                                                    class="p-d-flex p-jc-between p-ai-center">
                                                                                    Nature
                                                                                    <div class="Sort_Filter_Position">
                                                                                        <p-sortIcon
                                                                                            field="garnishmentMasterResponseDTO.nature"
                                                                                            pSortableColumn="garnishmentMasterResponseDTO.nature">
                                                                                        </p-sortIcon>
                                                                                        <p-columnFilter type="text"
                                                                                            field="garnishmentMasterResponseDTO.nature"
                                                                                            display="menu"
                                                                                            class="p-ml-auto">
                                                                                        </p-columnFilter>
                                                                                    </div>
                                                                                </div>
                                                                            </th>
                                                                            <th>
                                                                                <div
                                                                                    class="p-d-flex p-jc-between p-ai-center">
                                                                                    Percentage (%)
                                                                                    <div class="Sort_Filter_Position">
                                                                                        <p-sortIcon field="percentage"
                                                                                            pSortableColumn="percentage">
                                                                                        </p-sortIcon>
                                                                                        <p-columnFilter type="text"
                                                                                            field="percentage"
                                                                                            display="menu"
                                                                                            class="p-ml-auto">
                                                                                        </p-columnFilter>
                                                                                    </div>
                                                                                </div>
                                                                            </th>
                                                                            <th>
                                                                                <div
                                                                                    class="p-d-flex p-jc-between p-ai-center">
                                                                                    Amount
                                                                                    <div class="Sort_Filter_Position">
                                                                                        <p-sortIcon field="amount"
                                                                                            pSortableColumn="amount">
                                                                                        </p-sortIcon>
                                                                                        <p-columnFilter type="number"
                                                                                            field="amount"
                                                                                            display="menu"
                                                                                            class="p-ml-auto">
                                                                                        </p-columnFilter>
                                                                                    </div>
                                                                                </div>
                                                                            </th>
                                                                            <th>
                                                                                <div
                                                                                    class="p-d-flex p-jc-between p-ai-center">
                                                                                    From Date
                                                                                    <div class="Sort_Filter_Position">
                                                                                        <p-sortIcon field="fromDate"
                                                                                            pSortableColumn="fromDate">
                                                                                        </p-sortIcon>
                                                                                        <p-columnFilter type="date"
                                                                                            field="fromDate"
                                                                                            display="menu"
                                                                                            class="p-ml-auto">
                                                                                        </p-columnFilter>
                                                                                    </div>
                                                                                </div>
                                                                            </th>
                                                                            <th>
                                                                                <div
                                                                                    class="p-d-flex p-jc-between p-ai-center">
                                                                                    To Date
                                                                                    <div class="Sort_Filter_Position">
                                                                                        <p-sortIcon field="toDate"
                                                                                            pSortableColumn="toDate">
                                                                                        </p-sortIcon>
                                                                                        <p-columnFilter type="date"
                                                                                            field="toDate"
                                                                                            display="menu"
                                                                                            class="p-ml-auto">
                                                                                        </p-columnFilter>
                                                                                    </div>
                                                                                </div>
                                                                            </th>
                                                                            <th>
                                                                                <div
                                                                                    class="p-d-flex p-jc-between p-ai-center">
                                                                                    Balance Goal
                                                                                    <div class="Sort_Filter_Position">
                                                                                        <p-sortIcon
                                                                                            field="goalBalanceAmount"
                                                                                            pSortableColumn="goalBalanceAmount">
                                                                                        </p-sortIcon>
                                                                                        <p-columnFilter type="number"
                                                                                            field="goalBalanceAmount"
                                                                                            display="menu"
                                                                                            class="p-ml-auto">
                                                                                        </p-columnFilter>
                                                                                    </div>
                                                                                </div>
                                                                            </th>
                                                                            <th>
                                                                                <div
                                                                                    class="p-d-flex p-jc-between p-ai-center">
                                                                                    Remark
                                                                                    <div class="Sort_Filter_Position">
                                                                                        <p-sortIcon field="remark"
                                                                                            pSortableColumn="remark">
                                                                                        </p-sortIcon>
                                                                                        <p-columnFilter type="text"
                                                                                            field="remark"
                                                                                            display="menu"
                                                                                            class="p-ml-auto">
                                                                                        </p-columnFilter>
                                                                                    </div>
                                                                                </div>
                                                                            </th>
                                                                            <th>
                                                                                <div
                                                                                    class="p-d-flex p-jc-between p-ai-center">
                                                                                    Status
                                                                                    <div class="Sort_Filter_Position">
                                                                                        <p-sortIcon field="status"
                                                                                            pSortableColumn="status">
                                                                                        </p-sortIcon>
                                                                                        <p-columnFilter type="text"
                                                                                            field="status"
                                                                                            display="menu"
                                                                                            class="p-ml-auto">
                                                                                        </p-columnFilter>
                                                                                    </div>
                                                                                </div>
                                                                            </th>

                                                                            <th>
                                                                                <div class="align-center">Action</div>
                                                                            </th>


                                                                        </tr>

                                                                    </ng-template>

                                                                    <ng-template pTemplate="body" let-application
                                                                        let-rowIndex=rowIndex>
                                                                        <tr class="p-selectable-row">
                                                                            <td class="text-center"> <label
                                                                                    class="custom-control custom-checkbox checkbox-center"
                                                                                    tooltip="Select">
                                                                                    <input type="checkbox"
                                                                                        class="custom-control-input"
                                                                                        name="select"
                                                                                        [checked]="selectedAllFlag"
                                                                                        (change)="isSelected($event.target,application)"
                                                                                        value="{{application.employeeMasterId}}" />
                                                                                    <span
                                                                                        class="custom-control-label"></span>
                                                                                </label>
                                                                            </td>
                                                                            <td class="bg-color-light_gray">
                                                                                <label
                                                                                    class="form-lable mb-0 ">{{application.employeeMasterResponseDTO.employeeCode}}</label>
                                                                            </td>
                                                                            <td class="bg-color-light_gray"><label
                                                                                    class="form-lable mb-0">{{application.employeeMasterResponseDTO.fullName}}</label>
                                                                            </td>
                                                                            <td class="bg-color-light_gray"><label
                                                                                    class="form-lable mb-0">{{application.payrollArea.payrollAreaCode}}</label>

                                                                            </td>
                                                                            <td>{{application.garnishmentApplicationMasterId}}
                                                                            </td>
                                                                            <td>{{application.createDateTime |
                                                                                date:'dd-MMM-yyyy'}}
                                                                            </td>
                                                                            <td>{{application.garnishmentMasterResponseDTO.nameOfInstitution}}
                                                                            </td>
                                                                            <td>{{application.garnishmentMasterResponseDTO.nature}}
                                                                            </td>
                                                                            <td>{{application.percentage}}</td>
                                                                            <td>{{application.amount | number: '1.2-2'}}
                                                                            </td>
                                                                            <td>{{application.fromDate |
                                                                                date:'dd-MMM-yyyy'}}</td>
                                                                            <td>{{application.toDate |
                                                                                date:'dd-MMM-yyyy'}}
                                                                            </td>
                                                                            <td>{{application.goalBalanceAmount |
                                                                                number:
                                                                                '1.2-2'}}
                                                                            </td>
                                                                            <td>{{application.remark}}</td>
                                                                            <td>Pending</td>
                                                                            <td class="wd-20">
                                                                                <div class="d-flex">
                                                                                    <!-- <i class="fa fa-pencil text-green font-16 cursor-pointer"
                                                                                        tooltip="Edit Application"
                                                                                        (click)="editApplication(application)"> 
                                                                                    </i> &nbsp;&nbsp;&nbsp; -->
                                                                                    <!-- <i class="fa fa-eye text-blue mr-2 font-16 cursor-pointer"
                                                                                        tooltip="View Application"
                                                                                        (click)="viewApplication(application)">
                                                                                    </i> &nbsp;&nbsp;&nbsp; -->
                                                                                    <i tooltip="View Transaction History"
                                                                                        class="fa fa-clock-o font-16 text-blue cursor-pointer"
                                                                                        aria-hidden="true"
                                                                                        (click)="viewApplicationHistoryData(template2,application)">
                                                                                    </i>&nbsp;&nbsp;&nbsp;
                                                                                    <i tooltip="View Schedule"
                                                                                        class="fa fa-eye font-16 text-blue cursor-pointer"
                                                                                        aria-hidden="true"
                                                                                        (click)="viewScheduleData(template1,application)">
                                                                                    </i>&nbsp;&nbsp;&nbsp;
                                                                                </div>
                                                                            </td>
                                                                        </tr>
                                                                    </ng-template>

                                                                </p-table>
                                                            </div>
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>

                                        <label class="nav" for="Summary">
                                            <span> Summary </span>
                                        </label>


                                        <!------------- ------------  Transaction --------------------->
                                        <input name="nav" type="radio" class="nav home-radio"
                                            (click)="navigateToTransaction()" id="Transaction"
                                            [disabled]="selectedEmpData.length > 0" [checked]="indexId == 2" />

                                        <div class="tabs about-page">
                                            <div class="row">
                                                <div class="col-md-12">
                                                    <div class="card">
                                                        <div class="card-body">

                                                            <div>
                                                                <div class="row">
                                                                    <div class="col-md-6">
                                                                        <div class="form-label"
                                                                            *ngIf="selectedEmpData[index] && !showEmployeeSelectionFlag">
                                                                            Record {{index + 1 }} of
                                                                            {{selectedEmpData.length}}
                                                                        </div>

                                                                        <div class="form-label"
                                                                            *ngIf="payrollListEmpData && showDropdownDisabled">
                                                                            Record {{parollListIndex + 1 }} of
                                                                            {{payrollListEmpData.length}}
                                                                        </div>
                                                                    </div>
                                                                    <div class="col-md-6">
                                                                        <div class="float-right">
                                                                            <label class="custom-switch"
                                                                                *ngIf="payrollListEmpData">
                                                                                <span class="form-label mr-2">Single
                                                                                    Entry</span>
                                                                                <input type="checkbox"
                                                                                    (click)="getSelectedOption($event.target)"
                                                                                    name="custom-switch-checkbox"
                                                                                    class="custom-switch-input">
                                                                                <span
                                                                                    class="custom-switch-indicator"></span>
                                                                                <span class="form-label ml-2">Fast
                                                                                    Entry</span>
                                                                            </label>
                                                                        </div>
                                                                    </div>
                                                                </div>

                                                            </div>


                                                            <div class="tabview-contents mt-25"
                                                                *ngIf="selectedOption == 'single' ">


                                                                <!-- Employee Selection Dropdown-->
                                                                <div class="row mt-10"
                                                                    *ngIf="showEmployeeSelectionFlag">
                                                                    <div class="col-md-2">
                                                                        <label class="form-label mb-0">Employee Code
                                                                        </label>
                                                                        <select name="EmployeeCode"
                                                                            class="form-control "
                                                                            [(ngModel)]="selectedEmployeeMasterId"
                                                                            [disabled]="showDropdownDisabled"
                                                                            (change)="getSelectedEmployeeCode($event.target.value)">
                                                                            <option value="">Select</option>
                                                                            <!-- <option value="1"> 1111 </option> -->
                                                                            <option value="{{emp.employeeMasterId}}"
                                                                                *ngFor="let emp of employeeData">
                                                                                {{emp.employeeCode}}
                                                                            </option>
                                                                        </select>

                                                                    </div>
                                                                    <div class="col-md-2">
                                                                        <label class="form-label mb-0">First Name
                                                                        </label>
                                                                        <select name="EmployeeCode"
                                                                            class="form-control "
                                                                            [(ngModel)]="selectedEmployeeMasterId"
                                                                            [disabled]="showDropdownDisabled"
                                                                            (change)="getSelectedEmployeeCode($event.target.value)">
                                                                            <option value="">Select</option>
                                                                            <!-- <option value="1"> 1111 </option> -->
                                                                            <option value="{{emp.employeeMasterId}}"
                                                                                *ngFor="let emp of employeeData">
                                                                                {{emp.firstName}}
                                                                            </option>
                                                                        </select>

                                                                    </div>
                                                                    <div class="col-md-2">
                                                                        <label class="form-label mb-0">Last Name
                                                                        </label>
                                                                        <select name="EmployeeCode"
                                                                            class="form-control "
                                                                            [(ngModel)]="selectedEmployeeMasterId"
                                                                            [disabled]="showDropdownDisabled"
                                                                            (change)="getSelectedEmployeeCode($event.target.value)">
                                                                            <option value="">Select</option>
                                                                            <!-- <option value="1"> 1111 </option> -->
                                                                            <option value="{{emp.employeeMasterId}}"
                                                                                *ngFor="let emp of employeeData">
                                                                                {{emp.lastName}}
                                                                            </option>
                                                                        </select>

                                                                    </div>
                                                                    <div class="col-md-4">
                                                                        <div class="float-right">
                                                                            <button type="submit"
                                                                                class="custom_button custom_btn btn-bg-green mt-2 btn-labeled btn-labeled-left"
                                                                                tooltip="Save"
                                                                                (click)="graysearch(grays)"><b><i
                                                                                        class="fas fa-search"></i></b>
                                                                                Search</button>
                                                                        </div>
                                                                    </div>

                                                                </div>

                                                                <!-- selected Employee basic information-->
                                                                <div class="col-md-12 pl-0 pr-0">
                                                                    <div class="box-line-border radius-10 p-2 mt-3"
                                                                        *ngIf="employeeFinDetailsData">
                                                                        <div class="row">
                                                                            <div class="col-md-2">
                                                                                <label class="form-label mt-1 mb-0">Emp.
                                                                                    No.</label>
                                                                                <label
                                                                                    class="font-12 text-ellipsis mt-1 mb-0">
                                                                                    {{employeeFinDetailsData.employeeCode}}
                                                                                </label>
                                                                            </div>
                                                                            <div class="col-md-2">
                                                                                <label class="form-label mt-1 mb-0">Emp.
                                                                                    Name</label>
                                                                                <label
                                                                                    class="font-12 text-ellipsis mt-1 mb-0">
                                                                                    {{employeeFinDetailsData.fullName}}
                                                                                </label>
                                                                            </div>


                                                                            <div class="col-md-2">
                                                                                <label
                                                                                    class="form-label mt-1 mb-0">Establishment</label>
                                                                                <label
                                                                                    class="font-12 text-ellipsis mt-1 mb-0">
                                                                                    {{employeeFinDetailsData.establishment}}
                                                                                </label>
                                                                            </div>
                                                                            <div class="col-md-2">
                                                                                <label
                                                                                    class="form-label mt-1 mb-0">Department</label>
                                                                                <label
                                                                                    class="font-12 text-ellipsis mt-1 mb-0">

                                                                                </label>
                                                                            </div>
                                                                            <div class="col-md-1">
                                                                                <label
                                                                                    class="form-label mt-1 mb-0">Grade</label>
                                                                                <label
                                                                                    class="font-12 text-ellipsis mt-1 mb-0">
                                                                                    {{employeeFinDetailsData.grade}}
                                                                                </label>
                                                                            </div>
                                                                            <div class="col-md-2">
                                                                                <label
                                                                                    class="form-label mt-1 mb-0">Designation</label>
                                                                                <label
                                                                                    class="font-12 text-ellipsis mt-1 mb-0">
                                                                                    {{employeeFinDetailsData.designation}}
                                                                                </label>
                                                                            </div>

                                                                            <div class="col-md-1">
                                                                                <i class="fas fa-chevron-up arrow font-16 mt-2 text-purple float-right mr-2"
                                                                                    (click)="hideempdetails()"
                                                                                    *ngIf="isvisible"></i>
                                                                                <i class="fas fa-chevron-down arrow font-16 mt-2 text-purple float-right mr-2"
                                                                                    (click)="visibleempdetails()"
                                                                                    *ngIf="!isvisible"></i>
                                                                            </div>

                                                                        </div>
                                                                        <div class="row mt-10" *ngIf="isvisible">
                                                                            <div class="col-md-2">
                                                                                <label
                                                                                    class="form-label mt-1 mb-0">Payroll
                                                                                    Area</label>
                                                                                <label
                                                                                    class="font-12 text-ellipsis mt-1 mb-0">

                                                                                </label>
                                                                            </div>
                                                                            <div class="col-md-2">
                                                                                <label class="form-label mt-1 mb-0">Date
                                                                                    of Joining</label>
                                                                                <label
                                                                                    class="font-12 text-ellipsis mt-1 mb-0">
                                                                                    {{employeeFinDetailsData.joiningDate
                                                                                    | date: 'dd-MMM-yyyy'}}
                                                                                </label>
                                                                            </div>

                                                                            <div class="col-md-2">
                                                                                <label
                                                                                    class="form-label mt-1 mb-0">Status</label>
                                                                                <label
                                                                                    class="font-12 text-ellipsis mt-1 mb-0">
                                                                                    Probation
                                                                                </label>
                                                                            </div>



                                                                        </div>
                                                                    </div>
                                                                </div>

                                                                <!-- Application Form -->
                                                                <fieldset class="mt-25">
                                                                    <legend>Garnishment Details</legend>

                                                                    <form [formGroup]="applicationForm">
                                                                        <div class="row mt-25">
                                                                            <div class="col-md-3">
                                                                                <label class="form-label">Application
                                                                                    No.</label>
                                                                                <input type="text" class="form-control"
                                                                                    disabled>
                                                                            </div>
                                                                            <div class="col-md-3">
                                                                                <label class="form-label">Application
                                                                                    Date</label>
                                                                                <input type="text" class="form-control"
                                                                                    [(ngModel)]="today"
                                                                                    [ngModelOptions]="{standalone: true}"
                                                                                    disabled>
                                                                            </div>
                                                                        </div>
                                                                        <div class="row mt-25">
                                                                            <div class="col-md-3">
                                                                                <label class="form-label">
                                                                                    Payroll Area</label>
                                                                                <select class="form-control "
                                                                                    formControlName="payrollAreaId"
                                                                                    *ngIf="!editFlag">
                                                                                    <option value="">Select
                                                                                    </option>
                                                                                    <option
                                                                                        *ngFor="let payroll of refralPayrollListData"
                                                                                        value="{{payroll.payrollAreaId}}"
                                                                                        [selected]="payrollId == payroll.payrollAreaId">
                                                                                        {{payroll.payrollAreaCode}}
                                                                                    </option>
                                                                                </select>
                                                                                <select class="form-control "
                                                                                    *ngIf="editFlag && editApplicationData"
                                                                                    disabled>
                                                                                    <option value="">Select
                                                                                    </option>
                                                                                    <option
                                                                                        *ngFor="let payroll of refralPayrollListData"
                                                                                        value="{{payroll.payrollAreaId}}"
                                                                                        [selected]="editApplicationData.payrollArea.payrollAreaId == payroll.payrollAreaId">
                                                                                        {{payroll.payrollAreaCode}}
                                                                                    </option>
                                                                                </select>
                                                                            </div>
                                                                            <div class="col-md-3">
                                                                                <label class="form-label">
                                                                                    Garnishment / Third Party
                                                                                    Master</label>
                                                                                <select class="form-control "
                                                                                    formControlName="garnishmentMasterId"
                                                                                    *ngIf="editFlag && editApplicationData"
                                                                                    (change)="getSelectedGarnishment($event.target.value)">
                                                                                    <option value="">Select
                                                                                    </option>
                                                                                    <option
                                                                                        value="{{data.garnishmentMasterId}}"
                                                                                        [selected]="editApplicationData.garnishmentMasterResponseDTO.garnishmentMasterId == data.garnishmentMasterId"
                                                                                        *ngFor="let data of garnishmentMasterData">
                                                                                        {{data.nameOfInstitution}}
                                                                                    </option>
                                                                                </select>

                                                                                <select class="form-control "
                                                                                    formControlName="garnishmentMasterId"
                                                                                    *ngIf="!editFlag"
                                                                                    (change)="getSelectedGarnishment($event.target.value)">
                                                                                    <option value="">Select
                                                                                    </option>
                                                                                    <option
                                                                                        value="{{data.garnishmentMasterId}}"
                                                                                        *ngFor="let data of garnishmentMasterData">
                                                                                        {{data.nameOfInstitution}}
                                                                                    </option>
                                                                                </select>
                                                                            </div>
                                                                            <div class="col-md-3">
                                                                                <label
                                                                                    class="form-label">Address</label>
                                                                                <input class="form-control"
                                                                                    [(ngModel)]="address"
                                                                                    [ngModelOptions]="{standalone: true}"
                                                                                    disabled>
                                                                            </div>
                                                                            <div class="col-md-3">
                                                                                <label class="form-label">Nature</label>
                                                                                <input class="form-control"
                                                                                    [(ngModel)]="nature"
                                                                                    [ngModelOptions]="{standalone: true}"
                                                                                    disabled>
                                                                            </div>

                                                                        </div>
                                                                        <div class="row mt-25">

                                                                            <div class="col-md-3">
                                                                                <label class="form-label">E/D
                                                                                    Head Code & Desc.</label>
                                                                                <!-- <input class="form-control"
                                                                                    [(ngModel)]="edHead"
                                                                                    [ngModelOptions]="{standalone: true}"
                                                                                    disabled> -->

                                                                                <select [(ngModel)]="edHead"
                                                                                    [ngModelOptions]="{standalone: true}"
                                                                                    disabled class="form-control ">
                                                                                    <option
                                                                                        *ngFor="let standardName of headData"
                                                                                        [value]="standardName.headMasterId">
                                                                                        {{standardName.displayName}}
                                                                                    </option>
                                                                                </select>
                                                                            </div>

                                                                            <div class="col-md-3"
                                                                                *ngIf="empAccNoApplicable == 'true' || empAccNoApplicable == true">
                                                                                <label
                                                                                    class="form-label">{{displayName}}</label>
                                                                                <input class="form-control"
                                                                                    formControlName="referenceName">
                                                                            </div>

                                                                            <div class="col-md-3"
                                                                                *ngIf="familyMembers == 'true' || familyMembers == true">
                                                                                <label class="form-label">
                                                                                    Family Members</label>
                                                                                <!-- <select
                                                                                            class="form-control "
                                                                                            [(ngModel)]="familyMembers"
                                                                                            [ngModelOptions]="{standalone: true}"
                                                                                            disabled>
                                                                                            <option value=""> Select
                                                                                            </option>
                                                                                            <option value="true"> Yes
                                                                                            </option>
                                                                                            <option value="false"> No
                                                                                            </option>
                                                                                        </select> -->
                                                                                <select id="family"
                                                                                    class="form-control "
                                                                                    formControlName="familyMemberInfoId">
                                                                                    <option value="">Select</option>
                                                                                    <option value="1">Self</option>
                                                                                    <option
                                                                                        value="{{family.familyMemberInfoId}}"
                                                                                        *ngFor="let family of familyInformation">
                                                                                        {{family.relation}}</option>
                                                                                </select>
                                                                            </div>

                                                                            <div class="col-md-3">
                                                                                <label class="form-label">
                                                                                    Once Every
                                                                                </label>
                                                                                <input type="text" class="form-control"
                                                                                    formControlName="onceEvery">
                                                                            </div>

                                                                        </div>
                                                                        <div class="row mt-25">
                                                                          
                                                                            <div class="col-md-3">
                                                                                <label class="form-label">
                                                                                    Frequency</label>
                                                                                <!-- (change)="getSelectedFrequency($event.target.value,data)" -->
                                                                                <select class="form-control"
                                                                                    *ngIf="!editFlag"
                                                                                    formControlName="garnishmentMasterFrequencyId">
                                                                                    <option value="">Select
                                                                                    </option>
                                                                                    <option
                                                                                        value="{{freq.garnishmentMasterFrequencyId}}"
                                                                                        *ngFor="let freq of garnishmentMasterFrequencyList">
                                                                                        {{freq.frequencyName}}
                                                                                    </option>
                                                                                </select>

                                                                                <select class="form-control"
                                                                                    *ngIf="editFlag"
                                                                                    formControlName="garnishmentMasterFrequencyId">
                                                                                    <option value="">Select
                                                                                    </option>
                                                                                    <option
                                                                                        value="{{freq.garnishmentMasterFrequencyId}}"
                                                                                        [selected]="editApplicationData.garnishmentMasterFrequencyResponseDTO.garnishmentMasterFrequencyId == freq.garnishmentMasterFrequencyId"
                                                                                        *ngFor="let freq of garnishmentMasterFrequencyList">
                                                                                        {{freq.frequencyName}}
                                                                                    </option>
                                                                                </select>
                                                                            </div>

                                                                            <div class="col-md-3">
                                                                                <label class="form-label">From
                                                                                    Date</label>
                                                                                <div class="form-group">
                                                                                    <div class="input-group">
                                                                                        <div
                                                                                            class="input-group-prepend">
                                                                                            <span
                                                                                                class="input-group-text">
                                                                                                <i
                                                                                                    class="fa fa-calendar"></i>
                                                                                            </span>
                                                                                        </div>
                                                                                        <input
                                                                                            *ngIf="editFlag && editApplicationData"
                                                                                            [bsConfig]="{ dateInputFormat: 'DD-MMM-YYYY' }"
                                                                                            data-provide="datepicker"
                                                                                            data-date-autoclose="true"
                                                                                            placeholder="Date"
                                                                                            bsDatepicker
                                                                                            [value]="editApplicationData.fromDate | date: 'dd-MMM-yyyy'"
                                                                                            (bsValueChange)="getFromDateForSave($event)"
                                                                                            class="form-control wd-100">

                                                                                        <input *ngIf="!editFlag"
                                                                                            [bsConfig]="{ dateInputFormat: 'DD-MMM-YYYY' }"
                                                                                            data-provide="datepicker"
                                                                                            data-date-autoclose="true"
                                                                                            placeholder="Date"
                                                                                            bsDatepicker
                                                                                            (bsValueChange)="getFromDateForSave($event)"
                                                                                            class="form-control wd-100">
                                                                                    </div>
                                                                                </div>

                                                                            </div>

                                                                            <div class="col-md-3">
                                                                                <label class="form-label">Transaction
                                                                                    Type</label>
                                                                                <select name="revision type"
                                                                                    class="form-control  wd-200"
                                                                                    *ngIf="editFlag"
                                                                                    formControlName="garnishmentMasterTransactionTypeId"
                                                                                    (change)="getTransactionTypeForSave($event.target.value)">
                                                                                    <option value="">Select
                                                                                    </option>
                                                                                    <option
                                                                                        value="{{transaction.garnishmentMasterTransactionTypeId}}"
                                                                                        [selected]="editApplicationData.garnishmentMasterTransactionTypeResponseDTO.garnishmentMasterTransactionTypeId == transaction.garnishmentMasterTransactionTypeId"
                                                                                        *ngFor="let transaction of garnishmentMasterTransactionTypeList">
                                                                                        {{transaction.transactionTypeName}}
                                                                                    </option>
                                                                                </select>

                                                                                <select name="revision type"
                                                                                    class="form-control  wd-200"
                                                                                    *ngIf="!editFlag"
                                                                                    formControlName="garnishmentMasterTransactionTypeId"
                                                                                    (change)="getTransactionTypeForSave($event.target.value)">
                                                                                    <!-- <option value="">Select
                                                                                            </option> -->
                                                                                    <!--   -->
                                                                                    <option
                                                                                        value="{{transaction.garnishmentMasterTransactionTypeId}}"
                                                                                        [selected]="selectedTransactionTypeId == transaction.garnishmentMasterTransactionTypeId || transaction.defaultTransactionType == true"
                                                                                        *ngFor="let transaction of garnishmentMasterTransactionTypeList">
                                                                                        {{transaction.transactionTypeName}}
                                                                                    </option>
                                                                                </select>
                                                                            </div>

                                                                            <div class="col-md-3">
                                                                                <label class="form-label">No. Of
                                                                                    Transaction
                                                                                </label>
                                                                                <input type="text" class="form-control"
                                                                                    [disabled]="selectedTransactionType != 'NoOfTransaction'"
                                                                                    formControlName="numberOfTransactions">
                                                                            </div>

                                                                        </div>
                                                                        <div class="row mt-25">

                                                                            <div class="col-md-3">
                                                                                <label class="form-label">To
                                                                                    Date</label>
                                                                                <div class="form-group">
                                                                                    <div class="input-group">
                                                                                        <div
                                                                                            class="input-group-prepend">
                                                                                            <span
                                                                                                class="input-group-text">
                                                                                                <i
                                                                                                    class="fa fa-calendar"></i>
                                                                                            </span>
                                                                                        </div>
                                                                                        <input
                                                                                            [bsConfig]="{ dateInputFormat: 'DD-MMM-YYYY' }"
                                                                                            data-provide="datepicker"
                                                                                            data-date-autoclose="true"
                                                                                            placeholder="Date"
                                                                                            bsDatepicker
                                                                                            class="form-control wd-100"
                                                                                            [value]="selectedToDate"
                                                                                            (bsValueChange)="getToDateForSave($event)"
                                                                                            [disabled]="selectedTransactionType != 'Defined Date'">
                                                                                    </div>
                                                                                </div>

                                                                            </div>

                                                                            <div class="col-md-3">
                                                                                <label class="form-label">Input
                                                                                    Type</label>
                                                                                <select class="form-control "
                                                                                    *ngIf="!editFlag"
                                                                                    (change)="getSelectedGarnishmentData($event.target.value)"
                                                                                    formControlName="garnishmentMasterInputTypeId">
                                                                                    <!-- <option value=""> Select
                                                                                            </option> -->
                                                                                    <option
                                                                                        value="{{input.garnishmentMasterInputTypeId}}"
                                                                                        [selected]="selectedInputType == input.garnishmentMasterInputTypeId || input.defaultInput == true "
                                                                                        *ngFor="let input of garnishmentMasterInputTypeList">
                                                                                        {{input.inputTypeName}}
                                                                                    </option>
                                                                                </select>

                                                                                <select class="form-control "
                                                                                    *ngIf="editFlag"
                                                                                    (change)="getSelectedGarnishmentData($event.target.value)"
                                                                                    formControlName="garnishmentMasterInputTypeId">
                                                                                    <option value=""> Select
                                                                                    </option>
                                                                                    <option
                                                                                        value="{{input.garnishmentMasterInputTypeId}}"
                                                                                        [selected]="editApplicationData.garnishmentMasterInputTypeResponseDTO.garnishmentMasterInputTypeId == input.garnishmentMasterInputTypeId"
                                                                                        *ngFor="let input of garnishmentMasterInputTypeList">
                                                                                        {{input.inputTypeName}}
                                                                                    </option>
                                                                                </select>
                                                                            </div>

                                                                            <div class="col-md-3"
                                                                                *ngIf="selectedInputTypeName == 'Percentage' || selectedInputTypeName == 'percentage'">
                                                                                <label class="form-label">Percentage
                                                                                    ( % )</label>
                                                                                <input type="text" class="form-control"
                                                                                    formControlName="percentage">
                                                                            </div>

                                                                            <div class="col-md-3"
                                                                                *ngIf="selectedInputTypeName == 'Amount' || selectedInputTypeName == 'amount'">
                                                                                <label class="form-label">Amount</label>
                                                                                <input type="text" class="form-control"
                                                                                    formControlName="amount">
                                                                            </div>                                                   

                                                                        </div>
                                                                        <div class="row mt-25">
            
                                                                            <div class="col-md-3" *ngIf="goalFlag">
                                                                                <label class="form-label">Goal
                                                                                    Amount</label>
                                                                                <input type="text" class="form-control"
                                                                                    formControlName="goalAmount">
                                                                            </div>
                             
                                                                            <div class="col-md-3">
                                                                                <label class="form-label">Remark</label>
                                                                                <textarea class="form-control"
                                                                                    formControlName="remark"></textarea>
                                                                            </div>
                                                                        </div>
                                                                        <div class="row mt-25">
                                                                            <div class="col-md-3 mt-4 "></div>
                                                                            <div class="col-md-3 mt-4 "></div>
                                                                            <div class="col-md-3 mt-4 "></div>
                                                                            <div class="col-md-3 mt-4 ">
                                                                                <div class="float-right">
                                                                                    <button type="button"
                                                                                        tooltip="Schedule"
                                                                                        (click)="schedulepopup(template)"
                                                                                        class="custom_button custom_btn btn-bg-green btn-labeled btn-labeled-left"><b><i
                                                                                                class="fa fa-clock-o "></i></b>
                                                                                        Schedule
                                                                                    </button>
                                                                                </div>
                                                                            </div>
                                                                        </div>

                                                                        <div class="row mt-25">
                                                                            <div class="col-md-12">
                                                                                <h4
                                                                                    class="font-14 text-purple font-bold">
                                                                                    <b>Upload Document</b>
                                                                                </h4>
                                                                            </div>
                                                                        </div>

                                                                        <div class="row mt-10">
                                                                            <div class="col-md-6">
                                                                                <div
                                                                                    class="table-responsive Custom_Table">
                                                                                    <table
                                                                                        class="table table-striped table-hover table-bordered m-b-0">
                                                                                        <thead class="thead-dark">
                                                                                            <tr>
                                                                                                <th>Sr. No.</th>
                                                                                                <th>Document
                                                                                                    Name</th>
                                                                                                <th>Mandatory</th>
                                                                                                <th>Attachment
                                                                                                </th>
                                                                                                <th>Action</th>
                                                                                            </tr>
                                                                                        </thead>
                                                                                        <tbody>
                                                                                            <tr
                                                                                                *ngFor="let doc of garnishmentMasterDocumentList; let index = index;">
                                                                                                <td>{{index+1}}
                                                                                                </td>
                                                                                                <td>{{doc.documentName}}
                                                                                                </td>
                                                                                                <td></td>
                                                                                                <td><i
                                                                                                        class=" fa fa-paperclip text-red"></i>
                                                                                                </td>
                                                                                                <td>
                                                                                                    <i class="fa fa-upload font-16 text-blue cursor-pointer"
                                                                                                        tooltip="Upload"
                                                                                                        (click)="UploadModal(template3)"
                                                                                                        data-toggle="modal"
                                                                                                        data-target="#UploadModal">
                                                                                                    </i>
                                                                                                </td>
                                                                                            </tr>
                                                                                        </tbody>
                                                                                    </table>



                                                                                </div>
                                                                            </div>
                                                                        </div>

                                                                    </form>

                                                                </fieldset>

                                                                <!-- Buttons -->
                                                                <div class="row mt-25">
                                                                    <div class="col-md-12">
                                                                        <div class="float-right">
                                                                            <button type="button" tooltip="Save"
                                                                                (click)="saveApplication()"
                                                                                *ngIf="!editFlag && !viewFlag"
                                                                                class="custom_button custom_btn btn-bg-green btn-labeled btn-labeled-left mr-2"><b><i
                                                                                        class="fa fa-floppy-o  "></i></b>
                                                                                Save</button>
                                                                            <button type="button" tooltip="Save"
                                                                                (click)="updateApplication()"
                                                                                *ngIf="editFlag && !viewFlag"
                                                                                class="custom_button custom_btn btn-bg-green btn-labeled btn-labeled-left mr-2"><b><i
                                                                                        class="fa fa-floppy-o  "></i></b>
                                                                                Update</button>
                                                                            <button type="button" tooltip="Reset"
                                                                                (click)="resetData()" *ngIf="!viewFlag"
                                                                                class="custom_button custom_btn bg-teal-400 btn-labeled btn-labeled-left mr-2"><b><i
                                                                                        class="fa fa-refresh"></i></b>
                                                                                Reset</button>
                                                                            <button type="button" tooltip="Close"
                                                                                *ngIf="viewFlag" (click)="resetData()"
                                                                                class="custom_button custom_btn bg-teal-400 btn-labeled btn-labeled-left mr-10"><b><i
                                                                                        class="fa fa-times"></i></b>
                                                                                Close</button>
                                                                        </div>
                                                                    </div>
                                                                </div>

                                                            </div>


                                                            <app-fastentry-garnishment
                                                                *ngIf="selectedOption != 'single'">
                                                            </app-fastentry-garnishment>
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>

                                        <label class="nav" for="Transaction"
                                            [ngClass]="{'disabled-tab' : selectedEmpData.length > 0}">
                                            <span> Transaction </span>
                                        </label>


                                        <!------------- ------------  Schedule --------------------->
                                        <!-- [disabled]="selectedEmpData.length > 0" -->
                                        <input name="nav" type="radio" class="about-radio" id="Schedule"
                                            [disabled]="selectedEmpData.length > 0" [checked]="indexId == 3"
                                            (click)="getApplicationScheduleData()" />

                                        <div class="tabs about-page">
                                            <div class="row">
                                                <div class="col-md-12">
                                                    <div class="card">
                                                        <div class="card-body">


                                                            <div class="row mb-10">

                                                                <div class="col-md-12">
                                                                    <div class="float-right">
                                                                        <button type="button" tooltip="Approve"
                                                                            class="custom_button custom_btn btn-bg-green btn-labeled btn-labeled-left mr-10"><b><i
                                                                                    class="fa fa-check-square-o"></i></b>
                                                                            Approve </button>
                                                                    </div>
                                                                </div>
                                                            </div>

                                                            <div class="table-responsive Custom_Table">


                                                                <!-- Edit schedule data-->
                                                                <p-table
                                                                    [value]="NonRecurringTransactionScheduleEMPdData"
                                                                    class="mt-10" [paginator]="true" [rows]="10"
                                                                    [showCurrentPageReport]="true"
                                                                    currentPageReportTemplate="Showing {first} to {last} of {totalRecords} entries"
                                                                    [rowsPerPageOptions]="[10,25,50,100,200]"
                                                                    [style]="{'width':'100%', overflow: auto}"
                                                                    [globalFilterFields]="['employeeMasterId','employeeMasterResponseDTO.employeeCode',
                                                                    'employeeMasterResponseDTO.fullName','payrollArea.payrollAreaCode','garnishmentApplicationMasterId',
                                                                    'createDateTime','garnishmentMasterResponseDTO.nameOfInstitution',
                                                                        'garnishmentMasterResponseDTO.nature','percentage','amount','fromDate','toDate','goalBalanceAmount','remark'
                                                                        ]" #dt *ngIf="editScheduleFlag">

                                                                    <ng-template pTemplate="caption">
                                                                        <div class="row">
                                                                            <div class="col-md-12">
                                                                                <div class="float-right">
                                                                                    <div class="d-flex">
                                                                                        <span
                                                                                            class="p-input-icon-left p-ml-auto">
                                                                                            <i class="pi pi-search"
                                                                                                style="top: 9px !important;margin-right: 22px;"></i>
                                                                                            <input pInputText
                                                                                                type="text"
                                                                                                (input)="dt1.filterGlobal($event.target.value, 'contains')"
                                                                                                placeholder="Search " />
                                                                                        </span>
                                                                                    </div>
                                                                                </div>
                                                                            </div>
                                                                        </div>
                                                                    </ng-template>


                                                                    <ng-template pTemplate="header">
                                                                        <tr>
                                                                            <th rowspan="2" class="wd-5">
                                                                                Sr. No.

                                                                            </th>
                                                                            <th rowspan="2" class="wd-8">
                                                                                <div
                                                                                    class="p-d-flex p-jc-between p-ai-center">
                                                                                    Emp. Code
                                                                                    <div class="Sort_Filter_Position">
                                                                                        <p-sortIcon
                                                                                            field="employeeCode">
                                                                                        </p-sortIcon>
                                                                                        <p-columnFilter
                                                                                            field="employeeCode"
                                                                                            display="menu"
                                                                                            class="p-ml-auto">
                                                                                        </p-columnFilter>
                                                                                    </div>
                                                                                </div>
                                                                            </th>
                                                                            <th rowspan="2">
                                                                                <div
                                                                                    class="p-d-flex p-jc-between p-ai-center">
                                                                                    Emp. Name
                                                                                    <div class="Sort_Filter_Position">
                                                                                        <p-sortIcon field="fullName">
                                                                                        </p-sortIcon>
                                                                                        <p-columnFilter field="fullName"
                                                                                            display="menu"
                                                                                            class="p-ml-auto">

                                                                                        </p-columnFilter>
                                                                                    </div>
                                                                                </div>
                                                                            </th>
                                                                            <th rowspan="2">
                                                                                <div
                                                                                    class="p-d-flex p-jc-between p-ai-center">
                                                                                    Payroll Area
                                                                                    <div class="Sort_Filter_Position">
                                                                                        <p-sortIcon
                                                                                            field="payrollAreaCode">
                                                                                        </p-sortIcon>
                                                                                        <p-columnFilter
                                                                                            field="payrollAreaCode"
                                                                                            display="menu"
                                                                                            class="p-ml-auto">
                                                                                        </p-columnFilter>
                                                                                    </div>
                                                                                </div>
                                                                            </th>

                                                                            <th rowspan="2" class="wd-5">
                                                                                <div
                                                                                    class="p-d-flex p-jc-between p-ai-center">
                                                                                    Head
                                                                                    <div class="Sort_Filter_Position">
                                                                                        <p-sortIcon field="displayName">
                                                                                        </p-sortIcon>
                                                                                        <p-columnFilter
                                                                                            field="displayName"
                                                                                            display="menu"
                                                                                            class="p-ml-auto">

                                                                                        </p-columnFilter>
                                                                                    </div>
                                                                                </div>
                                                                            </th>
                                                                            <th rowspan="2">
                                                                                <div
                                                                                    class="p-d-flex p-jc-between p-ai-center">
                                                                                    Group Id
                                                                                    <div class="Sort_Filter_Position">
                                                                                        <p-sortIcon
                                                                                            field="nonRecurringTransactionGroupId">
                                                                                        </p-sortIcon>
                                                                                        <p-columnFilter
                                                                                            field="nonRecurringTransactionGroupId"
                                                                                            display="menu"
                                                                                            class="p-ml-auto">

                                                                                        </p-columnFilter>
                                                                                    </div>
                                                                                </div>
                                                                            </th>
                                                                            <th colspan="3" class="wd-8">
                                                                                <div
                                                                                    class="p-d-flex p-jc-center p-ai-center">
                                                                                    Schedule
                                                                                    <div class="Sort_Filter_Position">
                                                                                        <p-sortIcon
                                                                                            field="nonRecurringTransactionScheduleId">
                                                                                        </p-sortIcon>
                                                                                        <p-columnFilter
                                                                                            field="nonRecurringTransactionScheduleId"
                                                                                            display="menu"
                                                                                            class="p-ml-auto">

                                                                                        </p-columnFilter>
                                                                                    </div>
                                                                                </div>
                                                                            </th>

                                                                            <th rowspan="2">
                                                                                <div
                                                                                    class="p-d-flex p-jc-between p-ai-center">
                                                                                    Processed Amount
                                                                                    <div class="Sort_Filter_Position">
                                                                                        <p-sortIcon
                                                                                            field="transactionAmount">
                                                                                        </p-sortIcon>
                                                                                        <p-columnFilter type="numeric"
                                                                                            field="transactionAmount"
                                                                                            display="menu"
                                                                                            class="p-ml-auto">

                                                                                        </p-columnFilter>
                                                                                    </div>
                                                                                </div>
                                                                            </th>
                                                                            <th rowspan="2">
                                                                                <div
                                                                                    class="p-d-flex p-jc-between p-ai-center">
                                                                                    Balance Amount
                                                                                    <div class="Sort_Filter_Position">
                                                                                        <p-sortIcon
                                                                                            field="transactionAmount">
                                                                                        </p-sortIcon>
                                                                                        <p-columnFilter type="numeric"
                                                                                            field="transactionAmount"
                                                                                            display="menu"
                                                                                            class="p-ml-auto">

                                                                                        </p-columnFilter>
                                                                                    </div>
                                                                                </div>
                                                                            </th>
                                                                            <th rowspan="2">
                                                                                <div
                                                                                    class="p-d-flex p-jc-between p-ai-center">
                                                                                    Processing Cycle
                                                                                    <div class="Sort_Filter_Position">
                                                                                        <p-sortIcon
                                                                                            field="processedAmount">
                                                                                        </p-sortIcon>
                                                                                        <p-columnFilter
                                                                                            field="processedAmount"
                                                                                            display="menu"
                                                                                            class="p-ml-auto">

                                                                                        </p-columnFilter>
                                                                                    </div>
                                                                                </div>
                                                                            </th>
                                                                            <th rowspan="2"> Hold </th>
                                                                            <th rowspan="2"> Discard </th>
                                                                            <th rowspan="2">
                                                                                <div
                                                                                    class="p-d-flex p-jc-between p-ai-center">
                                                                                    Reschedule Date
                                                                                    <div class="Sort_Filter_Position">
                                                                                        <p-sortIcon
                                                                                            field="resheduleDate">
                                                                                        </p-sortIcon>
                                                                                        <p-columnFilter type="date"
                                                                                            field="resheduleDate"
                                                                                            display="menu"
                                                                                            class="p-ml-auto">

                                                                                        </p-columnFilter>
                                                                                    </div>
                                                                                </div>
                                                                            </th>
                                                                            <th rowspan="2" class="wd-8">Remark</th>
                                                                            <th rowspan="2"></th>
                                                                            <!-- <th rowspan="2">Reschedule</th> -->
                                                                        </tr>
                                                                        <tr>
                                                                            <th class="wd-8">
                                                                                No.
                                                                            </th>
                                                                            <th class="wd-8">
                                                                                Date
                                                                            </th>
                                                                            <th class="wd-8">
                                                                                Amount
                                                                            </th>
                                                                        </tr>
                                                                    </ng-template>

                                                                    <ng-template pTemplate="body" let-ScheduleData
                                                                        let-rowIndex=rowIndex>
                                                                        <tr class="p-selectable-row">
                                                                            <td> <label
                                                                                    class="form-lable mb-0 ">{{rowIndex+1}}</label>
                                                                            </td>
                                                                            <td class="bg-color-light_gray">
                                                                                <label class="form-lable mb-0 "
                                                                                    *ngIf="selectedEmpData[index]">
                                                                                    {{selectedEmpData[index].employeeMasterResponseDTO.employeeCode}}
                                                                                </label>
                                                                            </td>
                                                                            <td class="bg-color-light_gray"><label
                                                                                    class="form-lable mb-0"
                                                                                    *ngIf="selectedEmpData[index]">
                                                                                    {{selectedEmpData[index].employeeMasterResponseDTO.fullName}}</label>
                                                                            </td>
                                                                            <td class="bg-color-light_gray"><label
                                                                                    class="form-lable mb-0"
                                                                                    *ngIf="selectedEmpData[index]">
                                                                                    {{selectedEmpData[index].payrollArea.payrollAreaCode}}
                                                                                </label>

                                                                            </td>
                                                                            <td class="bg-color-light_gray">
                                                                                <label class="form-lable mb-0"
                                                                                    *ngIf="selectedEmpData[index]">
                                                                                    {{selectedEmpData[index].nameOfInstitution}}
                                                                                </label>

                                                                            </td>
                                                                            <td class="bg-color-light_gray">
                                                                                <label class="form-lable mb-0">
                                                                                    {{ScheduleData.garnishmentApplicationMasterId}}
                                                                                </label>

                                                                            </td>
                                                                            <td class="bg-color-light_gray">
                                                                                <label class="form-lable mb-0">
                                                                                    {{ScheduleData.garnishmentApplicationMasterScheduleId}}
                                                                                </label>
                                                                                <span></span>
                                                                                <!-- No -->
                                                                            </td>
                                                                            <td class="bg-color-light_gray wd-200">
                                                                                {{ScheduleData.transactionDate | date:
                                                                                'dd-MMM-yyyy'}}
                                                                                <!-- date -->
                                                                            </td>
                                                                            <td class="bg-color-light_gray"><label
                                                                                    class="form-lable mb-0"><input
                                                                                        type="text"
                                                                                        [value]="ScheduleData.transactionAmount | number: '1.2-2'"
                                                                                        class="form-control wd-100"
                                                                                        disabled>
                                                                                </label>
                                                                                <!-- amount -->
                                                                            </td>
                                                                            <td class="bg-color-light_gray"><label
                                                                                    class="form-lable mb-0">{{ScheduleData.processedAmount
                                                                                    | number: '1.2-2'}}
                                                                                </label>

                                                                            </td>
                                                                            <td class="bg-color-light_gray"><label
                                                                                    class="form-lable mb-0">{{ScheduleData.transactionAmount
                                                                                    | number: '1.2-2'}}
                                                                                </label>

                                                                            </td>
                                                                            <td class="bg-color-light_gray"><label
                                                                                    class="form-lable mb-0">{{ScheduleData.cycleName}}
                                                                                </label>

                                                                            </td>

                                                                            <td class="bg-color-light_gray">
                                                                                <label
                                                                                    class="custom-control custom-checkbox checkbox-center">
                                                                                    <input type="checkbox"
                                                                                        class="custom-control-input"
                                                                                        (click)="getHoldScheduleValue($event.target,ScheduleData,rowIndex)"
                                                                                        name="select"
                                                                                        [disabled]="ScheduleData.isDisabledFlag"
                                                                                        [checked]="ScheduleData.hold == true || ScheduleData.discard == true" />
                                                                                    <span
                                                                                        class="custom-control-label"></span>
                                                                                </label>
                                                                            </td>
                                                                            <td class="bg-color-light_gray">
                                                                                <label
                                                                                    class="custom-control custom-checkbox checkbox-center">
                                                                                    <input type="checkbox"
                                                                                        class="custom-control-input"
                                                                                        (click)="getDiscardScheduleValue($event.target,ScheduleData,rowIndex)"
                                                                                        [disabled]="ScheduleData.isDisabledFlag || ScheduleData.hold == true"
                                                                                        name="select"
                                                                                        [checked]="ScheduleData.discard == true" />
                                                                                    <span
                                                                                        class="custom-control-label"></span>
                                                                                </label>
                                                                            </td>
                                                                            <td class="bg-color-light_gray"><input
                                                                                    data-provide="datepicker"
                                                                                    data-date-autoclose="true"
                                                                                    value="{{ScheduleData.resheduleDate}}"
                                                                                    [bsConfig]="{ dateInputFormat: 'DD-MMM-YYYY' }"
                                                                                    (bsValueChange)="getRescheduleDate($event,ScheduleData)"
                                                                                    [disabled]="(ScheduleData.hold == true || ScheduleData.discard == true)
                                                                                || ((selectedHoldIndex == rowIndex && hold == 1) || (selecteddiscardIndex == rowIndex && discard == 1)  )
                                                                                || ScheduleData.isDisabledFlag"
                                                                                    class="form-control" bsDatepicker>

                                                                            </td>
                                                                            <td class="bg-color-light_gray"><input
                                                                                    type="text"
                                                                                    class="form-control wd-100"
                                                                                    (focusout)="getScheduleRemark($event.target.value,ScheduleData)"
                                                                                    [value]="ScheduleData.remark">
                                                                            </td>
                                                                            <td><i tooltip="View Schedule"
                                                                                    class="fa fa-eye font-16 text-blue cursor-pointer"
                                                                                    (click)="ViewScheduleHistory(template3,ScheduleData)"
                                                                                    aria-hidden="true"></i></td>
                                                                        </tr>
                                                                    </ng-template>

                                                                </p-table>

                                                                <!-- All schedule data-->

                                                                <p-table [value]="allSchedulesData" class="mt-10"
                                                                    [paginator]="true" [rows]="10"
                                                                    [showCurrentPageReport]="true"
                                                                    currentPageReportTemplate="Showing {first} to {last} of {totalRecords} entries"
                                                                    [rowsPerPageOptions]="[10,25,50,100,200]"
                                                                    [style]="{'width':'100%', overflow: auto}"
                                                                    [globalFilterFields]="['employeeMasterId','employeeMasterResponseDTO.employeeCode',
                                                                'employeeMasterResponseDTO.fullName','payrollArea.payrollAreaCode','garnishmentApplicationMasterId',
                                                                'createDateTime','garnishmentMasterResponseDTO.nameOfInstitution',
                                                                    'garnishmentMasterResponseDTO.nature','percentage','amount','fromDate','toDate','goalBalanceAmount','remark'
                                                                    ]" #dt *ngIf="!editScheduleFlag">

                                                                    <ng-template pTemplate="caption">
                                                                        <div class="row">
                                                                            <div class="col-md-12">
                                                                                <div class="float-right">
                                                                                    <div class="d-flex">
                                                                                        <span
                                                                                            class="p-input-icon-left p-ml-auto">
                                                                                            <i class="pi pi-search"
                                                                                                style="top: 9px !important;margin-right: 22px;"></i>
                                                                                            <input pInputText
                                                                                                type="text"
                                                                                                (input)="dt1.filterGlobal($event.target.value, 'contains')"
                                                                                                placeholder="Search " />
                                                                                        </span>
                                                                                    </div>
                                                                                </div>
                                                                            </div>
                                                                        </div>
                                                                    </ng-template>

                                                                    <ng-template pTemplate="header">
                                                                        <tr>
                                                                            <th rowspan="2" class="wd-5">
                                                                                Sr. No.

                                                                            </th>
                                                                            <th rowspan="2" class="wd-8">
                                                                                <div
                                                                                    class="p-d-flex p-jc-between p-ai-center">
                                                                                    Emp. Code
                                                                                    <div class="Sort_Filter_Position">
                                                                                        <p-sortIcon
                                                                                            field="employeeCode">
                                                                                        </p-sortIcon>
                                                                                        <p-columnFilter
                                                                                            field="employeeCode"
                                                                                            display="menu"
                                                                                            class="p-ml-auto">
                                                                                        </p-columnFilter>
                                                                                    </div>
                                                                                </div>
                                                                            </th>
                                                                            <th rowspan="2">
                                                                                <div
                                                                                    class="p-d-flex p-jc-between p-ai-center">
                                                                                    Emp. Name
                                                                                    <div class="Sort_Filter_Position">
                                                                                        <p-sortIcon field="fullName">
                                                                                        </p-sortIcon>
                                                                                        <p-columnFilter field="fullName"
                                                                                            display="menu"
                                                                                            class="p-ml-auto">

                                                                                        </p-columnFilter>
                                                                                    </div>
                                                                                </div>
                                                                            </th>
                                                                            <th rowspan="2">
                                                                                <div
                                                                                    class="p-d-flex p-jc-between p-ai-center">
                                                                                    Payroll Area
                                                                                    <div class="Sort_Filter_Position">
                                                                                        <p-sortIcon
                                                                                            field="payrollAreaCode">
                                                                                        </p-sortIcon>
                                                                                        <p-columnFilter
                                                                                            field="payrollAreaCode"
                                                                                            display="menu"
                                                                                            class="p-ml-auto">
                                                                                        </p-columnFilter>
                                                                                    </div>
                                                                                </div>
                                                                            </th>

                                                                            <th rowspan="2" class="wd-5">
                                                                                <div
                                                                                    class="p-d-flex p-jc-between p-ai-center">
                                                                                    Head
                                                                                    <div class="Sort_Filter_Position">
                                                                                        <p-sortIcon field="displayName">
                                                                                        </p-sortIcon>
                                                                                        <p-columnFilter
                                                                                            field="displayName"
                                                                                            display="menu"
                                                                                            class="p-ml-auto">

                                                                                        </p-columnFilter>
                                                                                    </div>
                                                                                </div>
                                                                            </th>
                                                                            <th rowspan="2">
                                                                                <div
                                                                                    class="p-d-flex p-jc-between p-ai-center">
                                                                                    Group Id
                                                                                    <div class="Sort_Filter_Position">
                                                                                        <p-sortIcon
                                                                                            field="nonRecurringTransactionGroupId">
                                                                                        </p-sortIcon>
                                                                                        <p-columnFilter
                                                                                            field="nonRecurringTransactionGroupId"
                                                                                            display="menu"
                                                                                            class="p-ml-auto">

                                                                                        </p-columnFilter>
                                                                                    </div>
                                                                                </div>
                                                                            </th>
                                                                            <th colspan="3" class="wd-8">
                                                                                <div
                                                                                    class="p-d-flex p-jc-center p-ai-center">
                                                                                    Schedule
                                                                                    <div class="Sort_Filter_Position">
                                                                                        <p-sortIcon
                                                                                            field="nonRecurringTransactionScheduleId">
                                                                                        </p-sortIcon>
                                                                                        <p-columnFilter
                                                                                            field="nonRecurringTransactionScheduleId"
                                                                                            display="menu"
                                                                                            class="p-ml-auto">

                                                                                        </p-columnFilter>
                                                                                    </div>
                                                                                </div>
                                                                            </th>

                                                                            <th rowspan="2">
                                                                                <div
                                                                                    class="p-d-flex p-jc-between p-ai-center">
                                                                                    Processed Amount
                                                                                    <div class="Sort_Filter_Position">
                                                                                        <p-sortIcon
                                                                                            field="processedAmount">
                                                                                        </p-sortIcon>
                                                                                        <p-columnFilter
                                                                                            field="processedAmount"
                                                                                            type="numeric"
                                                                                            display="menu"
                                                                                            class="p-ml-auto">

                                                                                        </p-columnFilter>
                                                                                    </div>
                                                                                </div>
                                                                            </th>
                                                                            <th rowspan="2">
                                                                                <div
                                                                                    class="p-d-flex p-jc-between p-ai-center">
                                                                                    Balance Amount
                                                                                    <div class="Sort_Filter_Position">
                                                                                        <p-sortIcon
                                                                                            field="transactionAmount">
                                                                                        </p-sortIcon>
                                                                                        <p-columnFilter
                                                                                            field="transactionAmount"
                                                                                            type="numeric"
                                                                                            display="menu"
                                                                                            class="p-ml-auto">

                                                                                        </p-columnFilter>
                                                                                    </div>
                                                                                </div>
                                                                            </th>
                                                                            <th rowspan="2">
                                                                                <div
                                                                                    class="p-d-flex p-jc-between p-ai-center">
                                                                                    Processing Cycle
                                                                                    <div class="Sort_Filter_Position">
                                                                                        <p-sortIcon field="cycleName">
                                                                                        </p-sortIcon>
                                                                                        <p-columnFilter
                                                                                            field="cycleName"
                                                                                            display="menu"
                                                                                            class="p-ml-auto">

                                                                                        </p-columnFilter>
                                                                                    </div>
                                                                                </div>
                                                                            </th>
                                                                            <th rowspan="2">
                                                                                <div
                                                                                    class="p-d-flex p-jc-between p-ai-center">
                                                                                    Clawback Date
                                                                                    <div class="Sort_Filter_Position">
                                                                                        <p-sortIcon
                                                                                            field="clawbackDate">
                                                                                        </p-sortIcon>
                                                                                        <p-columnFilter
                                                                                            field="clawbackDate"
                                                                                            type="date" display="menu"
                                                                                            class="p-ml-auto">

                                                                                        </p-columnFilter>
                                                                                    </div>
                                                                                </div>
                                                                            </th>
                                                                            <th rowspan="2"> Hold </th>
                                                                            <th rowspan="2"> Discard </th>
                                                                            <th rowspan="2">
                                                                                <div
                                                                                    class="p-d-flex p-jc-between p-ai-center">
                                                                                    Reschedule Date
                                                                                    <div class="Sort_Filter_Position">
                                                                                        <p-sortIcon
                                                                                            field="resheduleDate">
                                                                                        </p-sortIcon>
                                                                                        <p-columnFilter type="date"
                                                                                            field="resheduleDate"
                                                                                            display="menu"
                                                                                            class="p-ml-auto">

                                                                                        </p-columnFilter>
                                                                                    </div>
                                                                                </div>
                                                                            </th>
                                                                            <th rowspan="2">
                                                                                <div
                                                                                    class="p-d-flex p-jc-between p-ai-center">
                                                                                    Approval Status
                                                                                    <div class="Sort_Filter_Position">
                                                                                        <p-sortIcon
                                                                                            field="approvalstatus">
                                                                                        </p-sortIcon>
                                                                                        <p-columnFilter
                                                                                            field="approvalstatus"
                                                                                            display="menu"
                                                                                            class="p-ml-auto">

                                                                                        </p-columnFilter>
                                                                                    </div>
                                                                                </div>
                                                                            </th>

                                                                            <th rowspan="2" class="wd-8">Remark</th>
                                                                            <th rowspan="2"></th>
                                                                            <!-- <th rowspan="2">Reschedule</th> -->
                                                                        </tr>
                                                                        <tr>
                                                                            <th class="wd-8">
                                                                                No.
                                                                            </th>
                                                                            <th class="wd-8">
                                                                                Date
                                                                            </th>
                                                                            <th class="wd-8">
                                                                                Amount
                                                                            </th>
                                                                        </tr>
                                                                    </ng-template>

                                                                    <ng-template pTemplate="body" let-ScheduleData
                                                                        let-rowIndex=rowIndex>
                                                                        <tr class="p-selectable-row">
                                                                            <td> <label
                                                                                    class="form-lable mb-0 ">{{rowIndex+1}}</label>
                                                                            </td>
                                                                            <td class="bg-color-light_gray">
                                                                                <label class="form-lable mb-0"
                                                                                    *ngIf="ScheduleData.employeeMasterResponseDTO">
                                                                                    {{ScheduleData.employeeMasterResponseDTO.employeeCode}}
                                                                                </label>
                                                                            </td>
                                                                            <td class="bg-color-light_gray"><label
                                                                                    class="form-lable mb-0"
                                                                                    *ngIf="ScheduleData.employeeMasterResponseDTO">
                                                                                    {{ScheduleData.employeeMasterResponseDTO.fullName}}</label>
                                                                            </td>
                                                                            <td class="bg-color-light_gray"><label
                                                                                    class="form-lable mb-0"
                                                                                    *ngIf="ScheduleData.payrollArea">
                                                                                    {{ScheduleData.payrollArea.payrollAreaCode}}
                                                                                </label>

                                                                            </td>
                                                                            <td class="bg-color-light_gray">
                                                                                <label class="form-lable mb-0 text-link"
                                                                                    (click)="ViewTransactionHistory(template2)"
                                                                                    *ngIf="ScheduleData.payrollHeadMaster">
                                                                                    {{ScheduleData.payrollHeadMaster.displayName}}
                                                                                </label>

                                                                            </td>
                                                                            <td class="bg-color-light_gray">
                                                                                <label class="form-lable mb-0">
                                                                                    {{ScheduleData.garnishmentApplicationMasterId}}
                                                                                </label>

                                                                            </td>
                                                                            <td class="bg-color-light_gray"><label
                                                                                    class="form-lable mb-0">
                                                                                    {{ScheduleData.garnishmentApplicationMasterScheduleId}}
                                                                                </label>
                                                                                <!-- No -->
                                                                            </td>
                                                                            <td class="bg-color-light_gray wd-200">
                                                                                {{ScheduleData.transactionDate | date:
                                                                                'dd-MMM-yyyy' }}
                                                                                <!-- date -->
                                                                            </td>
                                                                            <td class="bg-color-light_gray wd-200">
                                                                                <label class="form-lable mb-0"><input
                                                                                        type="text"
                                                                                        [value]="ScheduleData.transactionAmount | number: '1.2-2'"
                                                                                        class="form-control wd-100"
                                                                                        disabled>
                                                                                </label>
                                                                                <!-- amount -->
                                                                            </td>
                                                                            <td class="bg-color-light_gray"><label
                                                                                    class="form-lable mb-0">{{ScheduleData.processedAmount
                                                                                    | number: '1.2-2'}}
                                                                                </label>

                                                                            </td>
                                                                            <td class="bg-color-light_gray"><label
                                                                                    class="form-lable mb-0">{{ScheduleData.transactionAmount
                                                                                    | number: '1.2-2'}}
                                                                                </label>

                                                                            </td>
                                                                            <td class="bg-color-light_gray"><label
                                                                                    class="form-lable mb-0">{{ScheduleData.cycleName}}
                                                                                </label>

                                                                            </td>
                                                                            <td class="bg-color-light_gray"><label
                                                                                    class="form-lable mb-0 wd-100">{{ScheduleData.clawbackDate
                                                                                    | date: 'dd-MMM-yyyy'}}
                                                                                </label>
                                                                            </td>
                                                                            <td class="bg-color-light_gray">
                                                                                <label
                                                                                    class="custom-control custom-checkbox checkbox-center">
                                                                                    <input type="checkbox"
                                                                                        class="custom-control-input"
                                                                                        (click)="getHoldScheduleValue($event.target,ScheduleData,rowIndex)"
                                                                                        [disabled]="ScheduleData.isDisabledFlag"
                                                                                        [checked]="ScheduleData.hold == true" />
                                                                                    <span
                                                                                        class="custom-control-label"></span>
                                                                                </label>
                                                                            </td>
                                                                            <td class="bg-color-light_gray">
                                                                                <label
                                                                                    class="custom-control custom-checkbox checkbox-center">
                                                                                    <input type="checkbox"
                                                                                        class="custom-control-input"
                                                                                        (click)="getDiscardScheduleValue($event.target,ScheduleData,rowIndex)"
                                                                                        [disabled]="ScheduleData.isDisabledFlag"
                                                                                        [checked]="ScheduleData.discard == true" />
                                                                                    <span
                                                                                        class="custom-control-label"></span>
                                                                                </label>
                                                                            </td>
                                                                            <td class="bg-color-light_gray"><input
                                                                                    data-provide="datepicker"
                                                                                    data-date-autoclose="true"
                                                                                    value="{{ScheduleData.resheduleDate}}"
                                                                                    [bsConfig]="{ dateInputFormat: 'DD-MMM-YYYY' }"
                                                                                    (bsValueChange)="getRescheduleDate($event,ScheduleData)"
                                                                                    [disabled]="(ScheduleData.hold == true || ScheduleData.discard == true)
                                                                                || ((selectedHoldIndex == rowIndex && hold == 1) || (selecteddiscardIndex == rowIndex && discard == 1)  )
                                                                                || ScheduleData.isDisabledFlag"
                                                                                    class="form-control" bsDatepicker>

                                                                            </td>
                                                                            <td class="bg-color-light_gray"><label
                                                                                    class="form-lable mb-0">{{ScheduleData.approvalstatus}}
                                                                                </label>

                                                                            </td>
                                                                            <td class="bg-color-light_gray"><input
                                                                                    type="text"
                                                                                    class="form-control wd-100"
                                                                                    (focusout)="getScheduleRemark($event.target.value,ScheduleData)"
                                                                                    [value]="ScheduleData.remark">

                                                                            </td>
                                                                            <td><i tooltip="View Schedule"
                                                                                    class="fa fa-eye font-16 text-blue cursor-pointer"
                                                                                    (click)="ViewScheduleHistory(template3,ScheduleData)"
                                                                                    aria-hidden="true"></i></td>
                                                                            <!-- <td> {{ScheduleData.isReschedule}}</td> -->

                                                                        </tr>
                                                                    </ng-template>
                                                                </p-table>

                                                            </div>

                                                            <!-- Buttons -->
                                                            <div class="row mt-15">
                                                                <div class="col-12">
                                                                    <div class="float-right mb-15">
                                                                        <button type="button" tooltip="Next"
                                                                            (click)="NonRecurringTransactionScheduleupdateById()"
                                                                            class="custom_button custom_btn btn-bg-green btn-labeled btn-labeled-left ml-10"><b><i
                                                                                    class="fa fa-floppy-o"
                                                                                    aria-hidden="true"></i></b>Save</button>

                                                                        <button type="button" tooltip="Next"
                                                                            class="custom_button custom_btn bg-teal-400 btn-labeled btn-labeled-left ml-10"><b><i
                                                                                    class="fa fa-times"
                                                                                    aria-hidden="true"></i></b>Cancel</button>
                                                                    </div>
                                                                </div>
                                                            </div>

                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>

                                        <label class="nav" for="Schedule"
                                            [ngClass]="{'disabled-tab' : selectedEmpData.length > 0}">
                                            <span> Schedule </span>
                                        </label>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

        </div>
    </div>
</form>


<!-- Temp Garnishment Schedule-->
<ng-template #template>
    <div class="modal-header">
        <h5 class="modal-title" id="UploadModalLabel">Garnishment / Third party Payment
            Schedule </h5>
        <button type="button" (click)="modalRef.hide()" class="close" data-dismiss="modal" aria-label="Close"><span
                aria-hidden="true">×</span></button>
    </div>
    <div class="modal-body">
        <div class="card">
            <div class="card-body">

                <div class="row">
                    <div class="col-md-3" *ngIf="tempScheduleData[0]">
                        <label class="form-label">Application No.</label>
                        <input type="text" class="form-control" disabled>
                    </div>
                    <div class="col-md-3" *ngIf="tempScheduleData[0]">
                        <label class="form-label">Garnishment / Third Party </label>
                        <input type="text" class="form-control" value="{{institutionName}}" disabled>
                    </div>
                    <div class="col-md-3" *ngIf="tempScheduleData[0]">
                        <label class="form-label">Frequency</label>
                        <input type="text" class="form-control" value="{{tempScheduleData[0].frequency}}" disabled>
                    </div>
                    <div class="col-md-3" *ngIf="tempScheduleData[0] && goalFlag">
                        <label class="form-label">Goal Amount</label>
                        <input type="text" class="form-control" value="{{tempScheduleData[0].goalAmount}}" disabled>
                    </div>
                </div>

                <div class="row mt-25">
                    <div class="col-md-12">
                        <div class="table-responsive Custom_Table">
                            <table class="table table-striped table-hover table-bordered m-b-0">
                                <thead class="thead-dark">
                                    <th>Date</th>
                                    <th *ngIf="selectedInputTypeName == 'Percentage' ">Percentage ( % )</th>
                                    <th *ngIf="selectedInputTypeName == 'Amount' ">Amount</th>
                                    <!-- <th>Processed Amount</th>
                                    <th>Balance Amount</th>
                                    <th>Processing Cycle</th>
                                    <th>Hold</th>
                                    <th>Discard</th>
                                    <th>Remark</th> -->
                                </thead>
                                <tbody>
                                    <tr *ngFor="let data of tempScheduleData; let index = index;">
                                        <td>{{data.transactionDate | date:'dd-MMM-yyyy'}}
                                        </td>
                                        <td *ngIf="selectedInputTypeName == 'Percentage' ">{{data.percentage}}</td>
                                        <td *ngIf="selectedInputTypeName == 'Amount' ">{{data.transactionAmount |
                                            number: '1.2-2'}}
                                        </td>
                                        <!-- <td>{{data.processedAmount | number: '1.2-2'}}</td>
                                        <td>{{data.balanceAmount | number: '1.2-2'}}</td>
                                        <td>{{data.cycleName}}</td>
                                        <td><label class="custom-control  checkbox-center">
                                                <input type="checkbox"
                                                    class="custom-control-input"
                                                    name="select" disabled
                                                    [checked]="data.hold == true" />
                                                <span class="custom-control-label"></span>
                                            </label>
                                        </td>
                                        <td><label class="custom-control  checkbox-center">
                                                <input type="checkbox"
                                                    class="custom-control-input"
                                                    name="select" disabled
                                                    [checked]="data.discard == true" />
                                                <span class="custom-control-label"></span>
                                            </label></td>
                                        <td>
                                        <td>{{data.remark}}</td> -->
                                    </tr>
                                </tbody>


                            </table>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <div class="modal-footer">
        <button type="button" class="btn btn-secondary" (click)="modalRef.hide()">Ok</button>
    </div>
</ng-template>

<!-- View Schedule History -->
<ng-template #template1>
    <div class="modal-header">
        <h5 class="modal-title">Garnishment / Third party Payment Schedule </h5>
        <button type="button" (click)="modalRef.hide()" class="close" data-dismiss="modal" aria-label="Close"><span
                aria-hidden="true">×</span>
        </button>
    </div>
    <div class="modal-body">
        <div class="card">
            <div class="card-body">

                <div class="row">
                    <div class="col-md-3" *ngIf="viewSchedulesData[0]">
                        <label class="form-label">Application No.</label>
                        <input type="text" value="{{viewSchedulesData[0].garnishmentApplicationMasterId}}"
                            class="form-control" disabled>
                    </div>
                    <div class="col-md-3" *ngIf="scheduleData">
                        <label class="form-label">Garnishment / Third Party </label>
                        <input type="text" class="form-control"
                            value="{{scheduleData.garnishmentMasterResponseDTO.nameOfInstitution}}" disabled>
                    </div>
                    <div class="col-md-3" *ngIf="scheduleData">
                        <label class="form-label">Frequency</label>
                        <input type="text" class="form-control"
                            value="{{scheduleData.garnishmentMasterFrequencyResponseDTO.frequencyName}}" disabled>
                    </div>
                    <div class="col-md-3" *ngIf="viewSchedulesData[0]">
                        <div *ngIf="viewSchedulesData[0].goalAmount > 0">
                            <label class="form-label">Goal Amount</label>
                            <input type="text" class="form-control" value="{{viewSchedulesData[0].goalAmount}}"
                                disabled>
                        </div>

                    </div>
                </div>

                <div class="row mt-25">
                    <div class="col-md-12">
                        <div class="table-responsive Custom_Table">
                            <table class="table table-striped table-hover table-bordered m-b-0">
                                <thead class="thead-dark">
                                    <!-- <th>Sr No.</th> -->
                                    <th>Date</th>
                                    <!-- <th>Percentage ( % )</th> -->
                                    <th>Amount</th>
                                    <th>Processed Amount</th>
                                    <th>Balance Amount</th>
                                    <th>Processing Cycle</th>
                                    <th>Hold</th>
                                    <th>Discard</th>
                                    <th>Remark</th>
                                </thead>
                                <tbody>
                                    <tr *ngFor="let data of viewSchedulesData; let index = index;">
                                        <!-- <th>{{index+1}}</th> -->
                                        <td>{{data.transactionDate | date:'dd-MMM-yyyy'}}
                                        </td>
                                        <!-- <td>{{data.percentage}}</td> -->
                                        <td>{{data.transactionAmount | number: '1.2-2'}}
                                        </td>
                                        <td>{{data.processedAmount | number: '1.2-2'}}</td>
                                        <td>{{data.balanceAmount | number: '1.2-2'}}</td>
                                        <td>{{data.cycleName}}</td>
                                        <td><label class="custom-control  checkbox-center">
                                                <input type="checkbox" class="custom-control-input" name="select"
                                                    disabled [checked]="data.hold == true" />
                                                <span class="custom-control-label"></span>
                                            </label>
                                        </td>
                                        <td><label class="custom-control  checkbox-center">
                                                <input type="checkbox" class="custom-control-input" name="select"
                                                    disabled [checked]="data.discard == true" />
                                                <span class="custom-control-label"></span>
                                            </label></td>
                                        <td>
                                        <td>{{data.remark}}</td>
                                    </tr>
                                </tbody>


                            </table>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <div class="modal-footer">
        <button type="button" class="btn btn-secondary" (click)="modalRef.hide()">Close</button>
    </div>
</ng-template>

<!-- View application History -->
<ng-template #template2>
    <div class="modal-header">
        <h5 class="modal-title">Garnishment Application </h5>
        <button type="button" (click)="modalRef.hide()" class="close" data-dismiss="modal" aria-label="Close"><span
                aria-hidden="true">×</span>
        </button>
    </div>
    <div class="modal-body">
        <div class="card">
            <div class="card-body">

                <div class="row">
                    <div class="col-md-3" *ngIf="applicationHistoryData[0]">
                        <label class="form-label">Application No.</label>
                        <input type="text" value="{{applicationHistoryData[0].garnishmentApplicationMasterId}}"
                            class="form-control" disabled>
                    </div>
                    <div class="col-md-3" *ngIf="applicationHistoryData[0]">
                        <label class="form-label">Garnishment / Third Party </label>
                        <input type="text" class="form-control"
                            value="{{applicationHistoryData[0].garnishmentMasterResponseDTO.nature}}" disabled>
                    </div>
                    <div class="col-md-3" *ngIf="applicationHistoryData[0]">
                        <label class="form-label">Frequency</label>
                        <input type="text" class="form-control"
                            value="{{applicationHistoryData[0].garnishmentMasterFrequencyResponseDTO.frequencyName}}"
                            disabled>
                    </div>
                    <div class="col-md-3" *ngIf="applicationHistoryData[0]">
                        <label class="form-label">Goal Amount</label>
                        <input type="text" class="form-control" value="{{applicationHistoryData[0].goalAmount}}"
                            disabled>
                    </div>
                </div>

                <div class="row mt-25">
                    <div class="col-md-12">
                        <div class="table-responsive Custom_Table">
                            <table class="table table-striped table-hover table-bordered m-b-0">
                                <thead class="thead-dark">
                                    <!-- <th>Sr No.</th> -->
                                    <th>Once Every</th>
                                    <th>Frequency</th>
                                    <th>Amount</th>
                                    <th>From Date</th>
                                    <th>Transaction Type</th>
                                    <th>No Of Transaction</th>
                                    <th>To Date</th>
                                    <th>Input Type</th>
                                    <th>Remark</th>
                                    <th>Updated Date</th>
                                    <th>Updated By</th>
                                </thead>
                                <tbody>
                                    <tr *ngFor="let data of applicationHistoryData; let index = index;">
                                        <!-- <th>{{index+1}}</th> -->
                                        <th>{{data.onceEvery}}</th>
                                        <th>{{data.garnishmentMasterFrequencyResponseDTO.frequencyName}}
                                        </th>
                                        <td>{{data.amount | number: '1.2-2'}}</td>
                                        <td>{{data.fromDate | date:'dd-MMM-yyyy'}}</td>
                                        <td>{{data.garnishmentMasterTransactionTypeResponseDTO.transactionTypeName}}
                                        </td>
                                        <td>{{data.numberOfTransactions}}</td>
                                        <td>{{data.toDate | date:'dd-MMM-yyyy'}}</td>
                                        <td>{{data.garnishmentMasterInputTypeResponseDTO.inputTypeName}}</td>
                                        <td>{{data.remark}}</td>
                                        <td>{{data.lastModifiedDateTime | date:'dd-MMM-yyyy'
                                            }}</td>
                                        <td>
                                            <span *ngIf="data.lastModifiedBy != null">{{data.lastModifiedBy}}</span>
                                            <span *ngIf="data.lastModifiedBy == null">Rahul</span>
                                        </td>
                                    </tr>
                                </tbody>


                            </table>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <div class="modal-footer">
        <button type="button" class="btn btn-secondary" (click)="modalRef.hide()">Close</button>
    </div>
</ng-template>

<!-- Schedule tab View-->
<ng-template #template3>
    <div class="modal-header">
        <h5 class="modal-title" id="UploadModalLabel"> Schedule History</h5>
        <button type="button" (click)="modalRef.hide()" class="close" data-dismiss="modal" aria-label="Close"><span
                aria-hidden="true">×</span></button>
    </div>
    <div class="modal-body">
        <div class="card">
            <div class="card-body p-0 m-0">
                <div class="row">
                    <div class="col-md-12 pl-0 pr-0">
                        <div class="border-dark-card radius-10 p-2 mt-3" *ngIf="selectedEmpData[index]">
                            <div class="row">
                                <div class="col-md-3">
                                    <label class="form-label mt-1 mb-0">Emp. Code</label>
                                    <label class="font-12 text-ellipsis mt-1 mb-0" *ngIf="selectedEmpData[index]">
                                        {{selectedEmpData[index].employeeMasterResponseDTO.employeeCode}} </label>
                                </div>
                                <div class="col-md-3">
                                    <label class="form-label mt-1 mb-0">Emp. Name</label>
                                    <label class="font-12 text-ellipsis mt-1 mb-0" *ngIf="selectedEmpData[index]">
                                        {{selectedEmpData[index].employeeMasterResponseDTO.fullName}}
                                    </label>
                                </div>
                                <div class="col-md-3">
                                    <label class="form-label mt-1 mb-0">Payroll Area</label>
                                    <label class="font-12 text-ellipsis mt-1 mb-0" *ngIf="selectedEmpData[index]">
                                        {{selectedEmpData[index].payrollArea.payrollAreaCode}}
                                    </label>
                                </div>
                                <div class="col-md-3">
                                    <label class="form-label mt-1 mb-0">Group Id</label>
                                    <label class="font-12 text-ellipsis mt-1 mb-0" *ngIf="viewScheduleData">
                                        {{viewScheduleData.nonRecurringTransactionGroupId}}
                                    </label>
                                </div>


                            </div>
                            <div class="row mt-10">
                                <div class="col-md-3">
                                    <label class="form-label mt-1 mb-0">Head</label>
                                    <label class="font-12 text-ellipsis mt-1 mb-0" *ngIf="selectedEmpData[index]">
                                        {{selectedEmpData[index].nameOfInstitution}}
                                    </label>
                                </div>
                                <div class="col-md-3">
                                    <label class="form-label mt-1 mb-0">Schedule No.</label>
                                    <label class="font-12 text-ellipsis mt-1 mb-0" *ngIf="viewScheduleData">
                                        {{viewScheduleData.nonRecurringTransactionScheduleId}} </label>
                                </div>
                                <div class="col-md-3">
                                    <label class="form-label mt-1 mb-0">Original Schedule Date
                                    </label>
                                    <label class="font-12 text-ellipsis mt-1 mb-0"
                                        *ngIf="NonRecurringHistorybyScheduleIdData != ''">
                                        <span
                                            *ngIf="NonRecurringHistorybyScheduleIdData[0]">{{NonRecurringHistorybyScheduleIdData[0].transactionDate
                                            | date: 'dd-MMM-yyyy'}}</span>
                                    </label>
                                    <label class="font-12 text-ellipsis mt-1 mb-0"
                                        *ngIf="NonRecurringHistorybyScheduleIdData == ''">
                                        <span *ngIf="viewScheduleData">{{viewScheduleData.transactionDate | date:
                                            'dd-MMM-yyyy'}}</span>
                                    </label>
                                </div>
                                <div class="col-md-3">
                                    <label class="form-label mt-1 mb-0">Schedule Amount</label>
                                    <label class="font-12 text-ellipsis mt-1 mb-0" *ngIf="viewScheduleData">
                                        {{viewScheduleData.transactionAmount | number: '1.2-2'}}
                                    </label>
                                </div>


                            </div>
                        </div>
                        <div class="border-dark-card radius-10 p-2 mt-3" *ngIf="scheduleAllData">
                            <div class="row">
                                <div class="col-md-3">
                                    <label class="form-label mt-1 mb-0">Emp. Code</label>
                                    <label class="font-12 text-ellipsis mt-1 mb-0" *ngIf="scheduleAllData">
                                        {{scheduleAllData.employeeMasterResponseDTO.employeeCode}} </label>
                                </div>
                                <div class="col-md-3">
                                    <label class="form-label mt-1 mb-0">Emp. Name</label>
                                    <label class="font-12 text-ellipsis mt-1 mb-0" *ngIf="scheduleAllData">
                                        {{scheduleAllData.employeeMasterResponseDTO.fullName}}
                                    </label>
                                </div>
                                <div class="col-md-3">
                                    <label class="form-label mt-1 mb-0">Payroll Area</label>
                                    <label class="font-12 text-ellipsis mt-1 mb-0" *ngIf="scheduleAllData">
                                        {{scheduleAllData.payrollArea.payrollAreaCode}}
                                    </label>
                                </div>
                                <div class="col-md-3">
                                    <label class="form-label mt-1 mb-0">Group Id</label>
                                    <label class="font-12 text-ellipsis mt-1 mb-0" *ngIf="viewScheduleData">
                                        {{viewScheduleData.nonRecurringTransactionGroupId}}
                                    </label>
                                </div>


                            </div>
                            <div class="row mt-10">
                                <div class="col-md-3">
                                    <label class="form-label mt-1 mb-0">Head</label>
                                    <label class="font-12 text-ellipsis mt-1 mb-0" *ngIf="scheduleAllData">
                                        {{scheduleAllData.payrollHeadMaster.displayName}}
                                    </label>
                                </div>
                                <div class="col-md-3">
                                    <label class="form-label mt-1 mb-0">Schedule No.</label>
                                    <label class="font-12 text-ellipsis mt-1 mb-0" *ngIf="viewScheduleData">
                                        {{viewScheduleData.nonRecurringTransactionScheduleId}} </label>
                                </div>
                                <div class="col-md-3">
                                    <label class="form-label mt-1 mb-0">Original Schedule Date
                                    </label>
                                    <!-- <label class="font-12 text-ellipsis mt-1 mb-0" *ngIf="NonRecurringHistorybyScheduleIdData != ''">
                                        <span *ngIf="NonRecurringHistorybyScheduleIdData[0]">{{NonRecurringHistorybyScheduleIdData[0].transactionDate | date: 'dd-MMM-yyyy'}}</span>
                                    </label> -->
                                    <label class="font-12 text-ellipsis mt-1 mb-0">
                                        <span *ngIf="originalTransactionDate">{{originalTransactionDate | date:
                                            'dd-MMM-yyyy'}}</span>
                                    </label>
                                </div>
                                <div class="col-md-3">
                                    <label class="form-label mt-1 mb-0">Schedule Amount</label>
                                    <label class="font-12 text-ellipsis mt-1 mb-0" *ngIf="viewScheduleData">
                                        {{viewScheduleData.transactionAmount | number: '1.2-2'}}
                                    </label>
                                </div>


                            </div>
                        </div>
                    </div>
                </div>
                <div class="row clearfix mt-10">
                    <div class="col-md-12">
                        <div class="table-responsive Custom_Table">
                            <table class="table table-striped table-hover table-bordered m-b-0">
                                <thead class="thead-dark">
                                    <tr>
                                        <th class="wd-15 font700">Hold</th>
                                        <th class="wd-15 font700">Discard</th>
                                        <th class="wd-15 font700">Reschdule Date</th>
                                        <th class="wd-20 font700">Remark </th>
                                        <th class="wd-20 font700">Updated Date & Time</th>
                                        <th class="wd-15 font700">Updated By</th>
                                    </tr>
                                </thead>
                                <tbody>
                                    <tr *ngFor="let data of NonRecurringHistorybyScheduleIdData; let index = index;">
                                        <td>
                                            <label class="custom-control custom-checkbox checkbox-center">
                                                <input type="checkbox" class="custom-control-input" name="select"
                                                    disabled [checked]="data.hold == true" />
                                                <span class="custom-control-label"></span>
                                            </label>
                                        </td>
                                        <td>
                                            <label class="custom-control custom-checkbox checkbox-center">
                                                <input type="checkbox" class="custom-control-input" name="select"
                                                    disabled [checked]="data.discard == true" />
                                                <span class="custom-control-label"></span>
                                            </label>
                                        </td>
                                        <td><input data-provide="datepicker" data-date-autoclose="true"
                                                class="form-control" bsDatepicker
                                                [value]="data.resheduleDate | date: 'dd-MMM-yyyy'" disabled>
                                        </td>
                                        <td><input type="text" class="form-control" [value]="data.remark" disabled></td>
                                        <td><input type="text" class="form-control" [value]="data.createdDateTime"
                                                disabled></td>
                                        <td><input type="text" class="form-control" [value]="data.createdBy" disabled>
                                        </td>


                                    </tr>


                                </tbody>
                            </table>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <div class="modal-footer">
        <button type="button" class="btn btn-secondary" (click)="modalRef.hide()"><i class="fa fa-times"></i>
            &nbsp;Close</button>
    </div>
</ng-template>



<!-- Upload Document-->
<ng-template #template4>
    <div class="modal-header">
        <h5 class="modal-title" id="UploadModalLabel">Upload Document</h5>
        <button type="button" (click)="modalRef.hide()" class="close" data-dismiss="modal" aria-label="Close"><span
                aria-hidden="true">×</span></button>
    </div>
    <div class="modal-body">
        <div class="card">
            <div class="card-body">
                <div class="row clearfix">
                    <div class="col-md-12">
                        <div class="fileuploadbox bg-color-lightgray">
                            <label class="filelabel">
                                <i class="fa fa-upload">
                                </i>
                                <span class="title">
                                    Choose file
                                </span>
                                <input class="FileUpload1" class="dropify" (change)="onMasterUpload($event);"
                                    accept=".jpg , .jpeg, .pdf , .png" id="FileInput" type="file" multiple />
                            </label>
                        </div>
                        <div *ngIf="masterfilesArray.length > 0 " class="fileuploadbox">
                            <span class="text-purple font-14 font700">Selected Files</span>
                            <label *ngFor="let item of masterfilesArray;  let index = index;" class="filelabeldisplay">
                                <div class="text-ellipsis"><i class="fa fa-paperclip">
                                    </i>
                                    <span class="title" tooltip="{{item.name}}">

                                    </span>
                                    <div>
                                        <div style="float: left; width: 40%;">
                                            <div class="col-md-8 mt-10">
                                                <label class="form-label">Password</label>
                                            </div>
                                            <div class="col-md-12">
                                                <input class="form-control" [(ngModel)]="documentPassword[index]"
                                                    rows="1">
                                            </div>

                                        </div>
                                        <div style="float: right; width: 40%; margin-right: 59px">
                                            <div class="col-md-8 mt-10">
                                                <label class="form-label">Remark</label>
                                            </div>
                                            <div class="col-md-12">
                                                <input class="form-control" [(ngModel)]="remarkList[index]" rows="1">
                                            </div>
                                        </div>
                                    </div>
                                </div>
                                <div>
                                    <i class="fa fa-times text-red font-18"
                                        (click)="removeSelectedLicMasterDocument(index)"></i>
                                </div>
                            </label>


                        </div>
                    </div>
                    <!-- <div class="col-md-12 mt-10">
                            <label class="form-label">Remark</label>
                        </div>
                        <div class="col-md-12">
                            <textarea class="form-control" [(ngModel)]="documentRemark" rows="2"></textarea>
                        </div> -->
                </div>
            </div>
        </div>
    </div>
    <div class="modal-footer">
        <button type="button" class="btn btn-secondary" (click)="modalRef.hide()">Ok</button>
    </div>
</ng-template>