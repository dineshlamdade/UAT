<app-leftmenu></app-leftmenu>
<form>
    <div>
        <div class="page">
            <app-header></app-header>
            <div class="section-body mt-3">
                <div class="container-fluid">
                    <div class="row">
                        <div class="col-12">
                            <div class="card">
                                <div class="card-body">
                                    <div class="tabview">

                                        <!--------------- ------------- Summary ----------------------->
                                        <input name="nav" type="radio" class="about-radio" id="Summary"
                                            [checked]="indexId == 1" (click)="getAllGarnishmentMaster()" />

                                        <div class="tabs about-page">
                                            <div class="row">
                                                <div class="col-md-12">
                                                    <div class="card">
                                                        <div class="card-body">
                                                            <div class="row mb-10">
                                                                <div class="col-md-6">
                                                                    <label
                                                                        class="form-label mb-0  mt-2 float-left">Total
                                                                        Records &nbsp;<span
                                                                            class="text-dark-green font-14 font-bold">({{selectedEmpData.length}})</span></label>
                                                                </div>
                                                                <!-- Summary top buttons -->
                                                                <div class="col-md-6">
                                                                    <!-- <div class="float-right">

                                                                        <button type="button" tooltip="Edit Transaction"
                                                                            [disabled]="selectedEmpData.length == 0"
                                                                            class="custom_button custom_btn btn-bg-green btn-labeled btn-labeled-left mr-10"
                                                                            [ngClass]="{'disabled-btn-bg-green' : selectedEmpData.length == 0}"
                                                                            (click)="editTransaction()">
                                                                            <b><i class="fa fa-pencil"></i></b>
                                                                            Edit Transaction
                                                                        </button>
                                                                        <button type="button" tooltip="Edit Schedule"
                                                                            class="custom_button custom_btn btn-bg-green btn-labeled btn-labeled-left mr-10"
                                                                            [ngClass]="{'disabled-btn-bg-green' : selectedEmpData.length == 0}"
                                                                            (click)="editScheduleData()"
                                                                            [disabled]="selectedEmpData.length == 0">
                                                                            <b><i class="fa fa-pencil"></i></b>
                                                                            Edit Schedule
                                                                        </button>


                                                                    </div> -->
                                                                </div>
                                                            </div>
                                                            <!-- Excel Download-->
                                                            <!-- <a tooltip="Download" style="cursor: pointer;float:right;"
                                                                (click)="SummaryexportAsXLSX()">
                                                                <i class="fa fa-file-excel-o font-18 text-dark-green pt-10  mr-10"
                                                                    aria-hidden="true">
                                                                </i>
                                                            </a> -->

                                                            <p-table #dt1 [value]="applicationSummaryData"
                                                                [paginator]="true" [rows]="10"
                                                                [showCurrentPageReport]="true"
                                                                (sortFunction)="customSort($event)" [customSort]="true"
                                                                currentPageReportTemplate="Showing {first} to {last} of {totalRecords} entries"
                                                                [rowsPerPageOptions]="[10, 25, 50]">

                                                                <ng-template pTemplate="header">
                                                                    <tr>
                                                                        <th>
                                                                            <div
                                                                                class="p-d-flex p-jc-between p-ai-center">
                                                                                Sr. No.
                                                                                <div class="Sort_Filter_Position">
                                                                                    <p-sortIcon field="employeeCode"
                                                                                        pSortableColumn="employeeCode">
                                                                                    </p-sortIcon>
                                                                                    <p-columnFilter field="employeeCode"
                                                                                        display="menu"
                                                                                        class="p-ml-auto">
                                                                                    </p-columnFilter>
                                                                                </div>
                                                                            </div>
                                                                        </th>
                                                                        <th>
                                                                            <div
                                                                                class="p-d-flex p-jc-between p-ai-center">
                                                                                Application No.
                                                                                <div class="Sort_Filter_Position">
                                                                                    <p-sortIcon field="employeeName"
                                                                                        pSortableColumn="employeeName">
                                                                                    </p-sortIcon>
                                                                                    <p-columnFilter type="text"
                                                                                        field="employeeName"
                                                                                        display="menu"
                                                                                        class="p-ml-auto">
                                                                                    </p-columnFilter>
                                                                                </div>
                                                                            </div>
                                                                        </th>
                                                                        <th>
                                                                            <div
                                                                                class="p-d-flex p-jc-between p-ai-center">
                                                                                Application Date
                                                                                <div class="Sort_Filter_Position">
                                                                                    <p-sortIcon field="itGroup"
                                                                                        pSortableColumn="itGroup">
                                                                                    </p-sortIcon>
                                                                                    <p-columnFilter type="text"
                                                                                        field="itGroup" display="menu"
                                                                                        class="p-ml-auto">
                                                                                    </p-columnFilter>
                                                                                </div>
                                                                            </div>
                                                                        </th>
                                                                        <th>
                                                                            <div
                                                                                class="p-d-flex p-jc-between p-ai-center">
                                                                                Master
                                                                                <div class="Sort_Filter_Position">
                                                                                    <p-sortIcon field="itGroup"
                                                                                        pSortableColumn="itGroup">
                                                                                    </p-sortIcon>
                                                                                    <p-columnFilter type="text"
                                                                                        field="itGroup" display="menu"
                                                                                        class="p-ml-auto">
                                                                                    </p-columnFilter>
                                                                                </div>
                                                                            </div>
                                                                        </th>
                                                                        <th>
                                                                            <div
                                                                                class="p-d-flex p-jc-between p-ai-center">
                                                                                Nature
                                                                                <div class="Sort_Filter_Position">
                                                                                    <p-sortIcon field="itGroup"
                                                                                        pSortableColumn="itGroup">
                                                                                    </p-sortIcon>
                                                                                    <p-columnFilter type="text"
                                                                                        field="itGroup" display="menu"
                                                                                        class="p-ml-auto">
                                                                                    </p-columnFilter>
                                                                                </div>
                                                                            </div>
                                                                        </th>
                                                                        <th>
                                                                            <div
                                                                                class="p-d-flex p-jc-between p-ai-center">
                                                                                Percentage (%)
                                                                                <div class="Sort_Filter_Position">
                                                                                    <p-sortIcon field="itGroup"
                                                                                        pSortableColumn="itGroup">
                                                                                    </p-sortIcon>
                                                                                    <p-columnFilter type="text"
                                                                                        field="itGroup" display="menu"
                                                                                        class="p-ml-auto">
                                                                                    </p-columnFilter>
                                                                                </div>
                                                                            </div>
                                                                        </th>
                                                                        <th>
                                                                            <div
                                                                                class="p-d-flex p-jc-between p-ai-center">
                                                                                Amount
                                                                                <div class="Sort_Filter_Position">
                                                                                    <p-sortIcon field="itGroup"
                                                                                        pSortableColumn="itGroup">
                                                                                    </p-sortIcon>
                                                                                    <p-columnFilter type="text"
                                                                                        field="itGroup" display="menu"
                                                                                        class="p-ml-auto">
                                                                                    </p-columnFilter>
                                                                                </div>
                                                                            </div>
                                                                        </th>
                                                                        <th>
                                                                            <div
                                                                                class="p-d-flex p-jc-between p-ai-center">
                                                                                From Date
                                                                                <div class="Sort_Filter_Position">
                                                                                    <p-sortIcon field="itGroup"
                                                                                        pSortableColumn="itGroup">
                                                                                    </p-sortIcon>
                                                                                    <p-columnFilter type="text"
                                                                                        field="itGroup" display="menu"
                                                                                        class="p-ml-auto">
                                                                                    </p-columnFilter>
                                                                                </div>
                                                                            </div>
                                                                        </th>
                                                                        <th>
                                                                            <div
                                                                                class="p-d-flex p-jc-between p-ai-center">
                                                                                To Date
                                                                                <div class="Sort_Filter_Position">
                                                                                    <p-sortIcon field="itGroup"
                                                                                        pSortableColumn="itGroup">
                                                                                    </p-sortIcon>
                                                                                    <p-columnFilter type="text"
                                                                                        field="itGroup" display="menu"
                                                                                        class="p-ml-auto">
                                                                                    </p-columnFilter>
                                                                                </div>
                                                                            </div>
                                                                        </th>
                                                                        <th>
                                                                            <div
                                                                                class="p-d-flex p-jc-between p-ai-center">
                                                                                Balance Goal
                                                                                <div class="Sort_Filter_Position">
                                                                                    <p-sortIcon field="itGroup"
                                                                                        pSortableColumn="itGroup">
                                                                                    </p-sortIcon>
                                                                                    <p-columnFilter type="text"
                                                                                        field="itGroup" display="menu"
                                                                                        class="p-ml-auto">
                                                                                    </p-columnFilter>
                                                                                </div>
                                                                            </div>
                                                                        </th>
                                                                        <th>
                                                                            <div
                                                                                class="p-d-flex p-jc-between p-ai-center">
                                                                                Remark
                                                                                <div class="Sort_Filter_Position">
                                                                                    <p-sortIcon field="itGroup"
                                                                                        pSortableColumn="itGroup">
                                                                                    </p-sortIcon>
                                                                                    <p-columnFilter type="text"
                                                                                        field="itGroup" display="menu"
                                                                                        class="p-ml-auto">
                                                                                    </p-columnFilter>
                                                                                </div>
                                                                            </div>
                                                                        </th>
                                                                        <th>
                                                                            <div
                                                                                class="p-d-flex p-jc-between p-ai-center">
                                                                                Status
                                                                                <div class="Sort_Filter_Position">
                                                                                    <p-sortIcon field="itGroup"
                                                                                        pSortableColumn="itGroup">
                                                                                    </p-sortIcon>
                                                                                    <p-columnFilter type="text"
                                                                                        field="itGroup" display="menu"
                                                                                        class="p-ml-auto">
                                                                                    </p-columnFilter>
                                                                                </div>
                                                                            </div>
                                                                        </th>



                                                                        <th rowspan="2">
                                                                            <div class="align-center">Action</div>
                                                                        </th>


                                                                    </tr>

                                                                </ng-template>

                                                                <ng-template pTemplate="body" let-application
                                                                    let-rowIndex=rowIndex>
                                                                    <tr class="p-selectable-row">

                                                                        <td>{{rowIndex + 1}}</td>
                                                                        <td>{{application.garnishmentApplicationMasterId}}
                                                                        </td>
                                                                        <td>{{application.createDateTime |
                                                                            date:'dd-MMM-yyyy'}}
                                                                        </td>
                                                                        <td>{{application.garnishmentMasterResponseDTO.nameOfInstitution}}
                                                                        </td>
                                                                        <td>{{application.garnishmentMasterResponseDTO.nature}}
                                                                        </td>
                                                                        <td>{{application.percentage}}</td>
                                                                        <td>{{application.amount | number: '1.2-2'}}
                                                                        </td>
                                                                        <td>{{application.fromDate |
                                                                            date:'dd-MMM-yyyy'}}</td>
                                                                        <td>{{application.toDate | date:'dd-MMM-yyyy'}}
                                                                        </td>
                                                                        <td>{{application.goalBalanceAmount | number:
                                                                            '1.2-2'}}
                                                                        </td>
                                                                        <td>{{application.remark}}</td>
                                                                        <td>Pending</td>
                                                                        <td class="wd-20">
                                                                            <div class="d-flex">
                                                                                <i class="fa fa-pencil text-green font-16 cursor-pointer"
                                                                                    tooltip="Edit Application"
                                                                                    (click)="editApplication(application)">
                                                                                </i> &nbsp;&nbsp;&nbsp;
                                                                                <i class="fa fa-eye text-blue mr-2 font-16 cursor-pointer"
                                                                                    tooltip="View Application"
                                                                                    (click)="viewApplication(application)">
                                                                                </i> &nbsp;&nbsp;&nbsp;
                                                                                <i tooltip="View Transaction History"
                                                                                    class="fa fa-clock-o font-16 text-blue cursor-pointer"
                                                                                    aria-hidden="true"
                                                                                    (click)="viewApplicationHistoryData(template2,application)">
                                                                                </i>&nbsp;&nbsp;&nbsp;
                                                                                <!-- <i tooltip="View Schedule"
                                                                                    class="fa fa-eye font-16 text-blue cursor-pointer"
                                                                                    aria-hidden="true"
                                                                                    (click)="viewScheduleData(template1,application)">
                                                                                </i>&nbsp;&nbsp;&nbsp; -->
                                                                            </div>
                                                                        </td>
                                                                    </tr>
                                                                </ng-template>

                                                            </p-table>
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>

                                        <label class="nav" for="Summary">
                                            <span> Summary </span>
                                        </label>


                                        <!------------- ------------  Transaction --------------------->
                                        <input name="nav" type="radio" class="nav home-radio"
                                            (click)="navigateToTransaction()" id="Transaction"
                                            [checked]="indexId == 2" />

                                        <div class="tabs about-page">
                                            <div class="row">
                                                <div class="col-md-12">
                                                    <div class="card">
                                                        <div class="card-body">
                                                            <div class="tabview-contents">
                                                                <div class="section-body bg-color-white">

                                                                    <!-- <div style="float:right;margin-top:-25px;"
                                                                        *ngIf="selectedEmpData[index] && !showEmployeeSelectionFlag">
                                                                        <strong>Record {{index + 1 }} of
                                                                            {{selectedEmpData.length}}</strong>
                                                                    </div>

                                                                    <div style="float:right;margin-top:-25px;"
                                                                        *ngIf="payrollListEmpData && showDropdownDisabled">
                                                                        <strong>Record {{parollListIndex + 1 }} of
                                                                            {{payrollListEmpData.length}}</strong>
                                                                    </div> -->

                                                                    <div class="tabview-contents">

                                                                        <!-- Selected Employee Info-->
                                                                        <div class="row pt-10  bg-color-light_gray d-flex">
                                                                            <div class="col-md-12 pl-0 pr-0">
                                                                                <div class="box-line-border radius-10 p-2 mt-3"
                                                                                    *ngIf="employeeFinDetailsData">
                                                                                    <div class="row">
                                                                                        <div class="col-md-2">
                                                                                            <label class="form-label mt-1 mb-0">Employee
                                                                                                No. & Name</label>
                                                                                            <!-- <label class="font-12 text-ellipsis mt-1 mb-0">
                                                                                                {{employeeFinDetailsData.employeeCode}}
                                                                                                -
                                                                                                {{employeeFinDetailsData.fullName}}</label> -->
                                                                                            <select class="form-control"
                                                                                                (change)="getSelectedEmployeeCode($event.target.value)">
                                                                                                <option value="">Select</option>
                                                                                                <option *ngFor="let emp of employeeList"
                                                                                                    value="{{emp.employeeMasterId}}"
                                                                                                    [selected]="employeeFinDetailsData.employeeCode == emp.employeeCode">
                                                                                                    {{emp.employeeCode}} - {{emp.fullName}}</option>
                                                                                            </select>
                                                                                        </div>
                                                                                        <div class="col-md-2">
                                                                                            <label class="form-label mt-1 mb-0">Date
                                                                                                of Joining</label>
                                                                                            <label class="font-12 text-ellipsis mt-1 mb-0">
                                                                                                {{employeeFinDetailsData.joiningDate
                                                                                                | date: 'dd-MMM-yyyy'}}
                                                                                            </label>
                                                                                        </div>
                                                                                        <div class="col-md-2">
                                                                                            <label
                                                                                                class="form-label mt-1 mb-0">Establishment</label>
                                                                                            <label class="font-12 text-ellipsis mt-1 mb-0">
                                                                                                {{employeeFinDetailsData.establishment}}
                                                                                            </label>
                                                                                        </div>
                                                                                        <div class="col-md-2">
                                                                                            <label class="form-label mt-1 mb-0">Employee
                                                                                                Type</label>
                                                                                            <label class="font-12 text-ellipsis mt-1 mb-0">
                                                                                                {{employeeFinDetailsData.employeeType}}
                                                                                            </label>
                                                                                        </div>
                                                                                        <div class="col-md-1">
                                                                                            <label class="form-label mt-1 mb-0">Grade</label>
                                                                                            <label class="font-12 text-ellipsis mt-1 mb-0">
                                                                                                {{employeeFinDetailsData.grade}}
                                                                                            </label>
                                                                                        </div>
                                                                                        <div class="col-md-2">
                                                                                            <label class="form-label mt-1 mb-0">Designation</label>
                                                                                            <label class="font-12 text-ellipsis mt-1 mb-0">
                                                                                                {{employeeFinDetailsData.designation}}
                                                                                            </label>
                                                                                        </div>
                                                                                        <div class="col-md-1">
                                                                                            <label class="form-label mt-1 mb-0">Status</label>
                                                                                            <label class="font-12 text-ellipsis mt-1 mb-0">
                                                                                                Probation
                                                                                            </label>
                                                                                        </div>
                                                                                    </div>
                                                                                </div>
                                                                            </div>
                                                                        </div>
                            
                                                                        <!-- Application Form -->
                                                                        <fieldset class="mt-25">
                                                                            <legend>Garnishment Details</legend>
                            
                                                                            <form [formGroup]="applicationForm">
                                                                                <div class="row mt-25">
                                                                                    <div class="col-md-3">
                                                                                        <label class="form-label">Application No.</label>
                                                                                        <input type="text" class="form-control" disabled>
                                                                                    </div>
                                                                                    <div class="col-md-3">
                                                                                        <label class="form-label">Application Date.</label>
                                                                                        <input type="text" class="form-control" [(ngModel)]="today"
                                                                                            [ngModelOptions]="{standalone: true}" disabled>
                                                                                    </div>
                                                                                </div>
                                                                                <div class="row mt-25">
                                                                                    <div class="col-md-3">
                                                                                        <label class="form-label"> Payroll Area</label>
                                                                                        <select class="form-control custom-select"
                                                                                            formControlName="payrollAreaId" *ngIf="!editFlag">
                                                                                            <option value="">Select</option>
                                                                                            <option *ngFor="let payroll of refralPayrollListData"
                                                                                                value="{{payroll.payrollAreaId}}">
                                                                                                {{payroll.payrollAreaCode}}
                                                                                            </option>
                                                                                        </select>
                                                                                        <select class="form-control custom-select"
                                                                                            formControlName="payrollAreaId"
                                                                                            *ngIf="editFlag && editApplicationData">
                                                                                            <option value="">Select</option>
                                                                                            <option *ngFor="let payroll of refralPayrollListData"
                                                                                                value="{{payroll.payrollAreaId}}"
                                                                                                [selected]="editApplicationData.payrollArea.payrollAreaId == payroll.payrollAreaId">
                                                                                                {{payroll.payrollAreaCode}}
                                                                                            </option>
                                                                                        </select>
                                                                                    </div>
                                                                                    <div class="col-md-3">
                                                                                        <label class="form-label"> Garnishment / Third Party
                                                                                            Master</label>
                                                                                        <select class="form-control custom-select"
                                                                                            formControlName="garnishmentMasterId"
                                                                                            *ngIf="editFlag && editApplicationData"
                                                                                            (change)="getSelectedGarnishment($event.target.value)">
                                                                                            <option value="">Select </option>
                                                                                            <option value="{{data.garnishmentMasterId}}"
                                                                                                [selected]="editApplicationData.garnishmentMasterResponseDTO.garnishmentMasterId == data.garnishmentMasterId"
                                                                                                *ngFor="let data of garnishmentMasterData">
                                                                                                {{data.nameOfInstitution}}</option>
                                                                                        </select>
                            
                                                                                        <select class="form-control custom-select"
                                                                                            formControlName="garnishmentMasterId" *ngIf="!editFlag"
                                                                                            (change)="getSelectedGarnishment($event.target.value)">
                                                                                            <option value="">Select </option>
                                                                                            <option value="{{data.garnishmentMasterId}}"
                                                                                                *ngFor="let data of garnishmentMasterData">
                                                                                                {{data.nameOfInstitution}}</option>
                                                                                        </select>
                                                                                    </div>
                                                                                    <div class="col-md-3">
                                                                                        <label class="form-label">Address</label>
                                                                                        <input class="form-control" [(ngModel)]="address"
                                                                                            [ngModelOptions]="{standalone: true}" disabled>
                                                                                    </div>
                                                                                    <div class="col-md-3">
                                                                                        <label class="form-label">Nature</label>
                                                                                        <input class="form-control" [(ngModel)]="nature"
                                                                                            [ngModelOptions]="{standalone: true}" disabled>
                                                                                    </div>
                            
                                                                                </div>
                                                                                <div class="row mt-25">
                            
                                                                                    <div class="col-md-3">
                                                                                        <label class="form-label">E/D Head Code & Desc.</label>
                                                                                        <input class="form-control" [(ngModel)]="edHead"
                                                                                            [ngModelOptions]="{standalone: true}" disabled>
                            
                                                                                        <!-- <select [(ngModel)]="edHead"
                                                                                            [ngModelOptions]="{standalone: true}" disabled 
                                                                                             class="form-control custom-select">
                                                                                            <option *ngFor="let standardName of headData" 
                                                                                            [value]="standardName.headMasterId">
                                                                                                {{standardName.displayName}}
                                                                                            </option>
                                                                                            </select> -->
                                                                                    </div>
                            
                                                                                    <div class="col-md-3">
                                                                                        <label class="form-label">Reference No.</label>
                                                                                        <input class="form-control" formControlName="referenceName">
                                                                                    </div>
                            
                                                                                    <div class="col-md-3">
                                                                                        <label class="form-label"> Family Members</label>
                                                                                        <select class="form-control custom-select"
                                                                                            [(ngModel)]="familyMembers"
                                                                                            [ngModelOptions]="{standalone: true}" disabled>
                                                                                            <option value=""> Select </option>
                                                                                            <option value="true"> Yes</option>
                                                                                            <option value="false"> No</option>
                                                                                        </select>
                            
                                                                                    </div>
                                                                                </div>
                                                                                <div class="row mt-25">
                                                                                    <div class="col-md-3"><label class="form-label">Once
                                                                                            Every</label>
                                                                                        <input type="text" class="form-control"
                                                                                            formControlName="onceEvery">
                                                                                    </div>
                            
                                                                                    <div class="col-md-3">
                                                                                        <label class="form-label"> Frequency</label>
                                                                                        <!-- (change)="getSelectedFrequency($event.target.value,data)" -->
                                                                                        <select class="form-control custom-select wd-200"
                                                                                            *ngIf="!editFlag"
                                                                                            formControlName="garnishmentMasterFrequencyId">
                                                                                            <option value="">Select</option>
                                                                                            <option value="{{freq.garnishmentMasterFrequencyId}}"
                                                                                                *ngFor="let freq of garnishmentMasterFrequencyList">
                                                                                                {{freq.frequencyName}}
                                                                                            </option>
                                                                                        </select>
                            
                                                                                        <select class="form-control custom-select wd-200"
                                                                                            *ngIf="editFlag"
                                                                                            formControlName="garnishmentMasterFrequencyId">
                                                                                            <option value="">Select</option>
                                                                                            <option value="{{freq.garnishmentMasterFrequencyId}}"
                                                                                                [selected]="editApplicationData.garnishmentMasterFrequencyResponseDTO.garnishmentMasterFrequencyId == freq.garnishmentMasterFrequencyId"
                                                                                                *ngFor="let freq of garnishmentMasterFrequencyList">
                                                                                                {{freq.frequencyName}}
                                                                                            </option>
                                                                                        </select>
                                                                                    </div>
                                                                                    <div class="col-md-3">
                                                                                        <label class="form-label">From Date</label>
                                                                                        <div class="form-group">
                                                                                            <div class="input-group">
                                                                                                <div class="input-group-prepend">
                                                                                                    <span class="input-group-text">
                                                                                                        <i class="fa fa-calendar"></i>
                                                                                                    </span>
                                                                                                </div>
                                                                                                <input *ngIf="editFlag"
                                                                                                    [bsConfig]="{ dateInputFormat: 'DD-MMM-YYYY' }"
                                                                                                    data-provide="datepicker"
                                                                                                    data-date-autoclose="true" placeholder="Date"
                                                                                                    bsDatepicker
                                                                                                    [value]="editApplicationData.fromDate | date: 'dd-MMM-yyyy'"
                                                                                                    (bsValueChange)="getFromDateForSave($event)"
                                                                                                    class="form-control wd-100">
                            
                                                                                                <input *ngIf="!editFlag"
                                                                                                    [bsConfig]="{ dateInputFormat: 'DD-MMM-YYYY' }"
                                                                                                    data-provide="datepicker"
                                                                                                    data-date-autoclose="true" placeholder="Date"
                                                                                                    bsDatepicker
                                                                                                    (bsValueChange)="getFromDateForSave($event)"
                                                                                                    class="form-control wd-100">
                                                                                            </div>
                                                                                        </div>
                            
                                                                                    </div>
                                                                                </div>
                                                                                <div class="row mt-25">
                                                                                    <div class="col-md-3">
                                                                                        <label class="form-label">Transaction Type</label>
                                                                                        <select name="revision type"
                                                                                            class="form-control custom-select wd-120"
                                                                                            *ngIf="editFlag"
                                                                                            formControlName="garnishmentMasterTransactionTypeId"
                                                                                            (change)="getTransactionTypeForSave($event.target.value)">
                                                                                            <option value="">Select</option>
                                                                                            <option
                                                                                                value="{{transaction.garnishmentMasterTransactionTypeId}}"
                                                                                                [selected]="editApplicationData.garnishmentMasterTransactionTypeResponseDTO.garnishmentMasterTransactionTypeId == transaction.garnishmentMasterTransactionTypeId"
                                                                                                *ngFor="let transaction of garnishmentMasterTransactionTypeList">
                                                                                                {{transaction.transactionTypeName}}
                                                                                            </option>
                                                                                        </select>
                            
                                                                                        <select name="revision type"
                                                                                            class="form-control custom-select wd-120"
                                                                                            *ngIf="!editFlag"
                                                                                            formControlName="garnishmentMasterTransactionTypeId"
                                                                                            (change)="getTransactionTypeForSave($event.target.value)">
                                                                                            <option value="">Select</option>
                                                                                            <option
                                                                                                value="{{transaction.garnishmentMasterTransactionTypeId}}"
                                                                                                [selected]="selectedTransactionTypeId == transaction.garnishmentMasterTransactionTypeId"
                                                                                                *ngFor="let transaction of garnishmentMasterTransactionTypeList">
                                                                                                {{transaction.transactionTypeName}}
                                                                                            </option>
                                                                                        </select>
                                                                                    </div>
                                                                                    <div class="col-md-3">
                                                                                        <label class="form-label">No. Of Transaction
                                                                                            {{selectedTransactionType}}</label>
                                                                                        <input type="text" class="form-control"
                                                                                            [disabled]="selectedTransactionType != 'NoOfTransaction'"
                                                                                            formControlName="numberOfTransactions">
                                                                                    </div>
                                                                                    <div class="col-md-3">
                                                                                        <label class="form-label">To Date</label>
                                                                                        <div class="form-group">
                                                                                            <div class="input-group">
                                                                                                <div class="input-group-prepend">
                                                                                                    <span class="input-group-text">
                                                                                                        <i class="fa fa-calendar"></i>
                                                                                                    </span>
                                                                                                </div>
                                                                                                <input
                                                                                                    [bsConfig]="{ dateInputFormat: 'DD-MMM-YYYY' }"
                                                                                                    data-provide="datepicker"
                                                                                                    data-date-autoclose="true" placeholder="Date"
                                                                                                    bsDatepicker class="form-control wd-100"
                                                                                                    (bsValueChange)="getToDateForSave($event)"
                                                                                                    [disabled]="selectedTransactionType != 'Defined Date'">
                                                                                            </div>
                                                                                        </div>
                            
                                                                                    </div>
                            
                                                                                </div>
                                                                                <div class="row mt-25">
                                                                                    <div class="col-md-3">
                                                                                        <label class="form-label">Input Type</label>
                                                                                        <select class="form-control custom-select" *ngIf="!editFlag"
                                                                                            (change)="getSelectedGarnishmentData($event.target.value)"
                                                                                            formControlName="garnishmentMasterInputTypeId">
                                                                                            <option value=""> Select </option>
                                                                                            <option value="{{input.garnishmentMasterInputTypeId}}"
                                                                                                [selected]="selectedInputType == input.garnishmentMasterInputTypeId"
                                                                                                *ngFor="let input of garnishmentMasterInputTypeList">
                                                                                                {{input.inputTypeName}}
                                                                                            </option>
                                                                                        </select>
                            
                                                                                        <select class="form-control custom-select" *ngIf="editFlag"
                                                                                            (change)="getSelectedGarnishmentData($event.target.value)"
                                                                                            formControlName="garnishmentMasterInputTypeId">
                                                                                            <option value=""> Select </option>
                                                                                            <option value="{{input.garnishmentMasterInputTypeId}}"
                                                                                                [selected]="editApplicationData.garnishmentMasterInputTypeResponseDTO.garnishmentMasterInputTypeId == input.garnishmentMasterInputTypeId"
                                                                                                *ngFor="let input of garnishmentMasterInputTypeList">
                                                                                                {{input.inputTypeName}}
                                                                                            </option>
                                                                                        </select>
                                                                                    </div>
                                                                                    <div class="col-md-3"
                                                                                        *ngIf="selectedInputTypeName == 'Percentage' || selectedInputTypeName == 'percentage'">
                                                                                        <label class="form-label">Percentage ( % )</label>
                                                                                        <input type="text" class="form-control"
                                                                                            formControlName="percentage">
                                                                                    </div>
                                                                                    <div class="col-md-3"
                                                                                        *ngIf="selectedInputTypeName == 'Amount' || selectedInputTypeName == 'amount'">
                                                                                        <label class="form-label">Amount</label>
                                                                                        <input type="text" class="form-control"
                                                                                            formControlName="amount">
                                                                                    </div>
                                                                                    <div class="col-md-3" *ngIf="selectedInputTypeName == 'SDM'">
                                                                                        <label class="form-label">Derived Type</label>
                                                                                        <select class="form-control">
                                                                                            <option>Select</option>
                                                                                        </select>
                                                                                    </div>
                                                                                    <div class="col-md-3" *ngIf="goalFlag">
                                                                                        <label class="form-label">Goal Amount</label>
                                                                                        <input type="text" class="form-control"
                                                                                            formControlName="goalAmount">
                                                                                    </div>
                                                                                    <div class="col-md-3">
                                                                                        <label class="form-label">Balance Goal</label>
                                                                                        <input type="text" class="form-control" disabled
                                                                                            formControlName="goalBalanceAmount">
                                                                                    </div>
                                                                                    <div class="col-md-3">
                                                                                        <label class="form-label">Remark</label>
                                                                                        <textarea class="form-control"
                                                                                            formControlName="remark"></textarea>
                                                                                    </div>
                                                                                </div>
                                                                                <div class="row mt-25">
                                                                                    <div class="col-md-3 mt-4 "></div>
                                                                                    <div class="col-md-3 mt-4 "></div>
                                                                                    <div class="col-md-3 mt-4 "></div>
                                                                                    <div class="col-md-3 mt-4 ">
                                                                                        <div class="float-right">
                                                                                            <button type="button" tooltip="Schedule"
                                                                                                (click)="schedulepopup(template)"
                                                                                                class="custom_button custom_btn btn-bg-green btn-labeled btn-labeled-left"><b><i
                                                                                                        class="fa fa-clock-o "></i></b> Schedule
                                                                                            </button>
                                                                                        </div>
                                                                                    </div>
                                                                                </div>
                            
                                                                                <div class="row mt-25">
                                                                                    <div class="col-md-12">
                                                                                        <h4 class="font-14 text-purple font-bold">
                                                                                            <b>Upload Document</b>
                                                                                        </h4>
                                                                                    </div>
                                                                                </div>
                            
                                                                                <div class="row mt-10">
                                                                                    <div class="col-md-6">
                                                                                        <div class="table-responsive Custom_Table">
                                                                                            <table
                                                                                                class="table table-striped table-hover table-bordered m-b-0">
                                                                                                <thead class="thead-dark">
                                                                                                    <tr>
                                                                                                        <th>Sr. No.</th>
                                                                                                        <th>Document Name</th>
                                                                                                        <th>Attachment</th>
                                                                                                        <th>Action</th>
                                                                                                    </tr>
                                                                                                </thead>
                                                                                                <tbody>
                                                                                                    <tr
                                                                                                        *ngFor="let doc of garnishmentMasterDocumentList; let index = index;">
                                                                                                        <td>{{index+1}}</td>
                                                                                                        <td>{{doc.documentName}}</td>
                                                                                                        <td><i
                                                                                                                class=" fa fa-paperclip text-red"></i>
                                                                                                        </td>
                                                                                                        <td>
                                                                                                            <i class="fa fa-upload font-16 text-blue cursor-pointer"
                                                                                                                tooltip="Upload"
                                                                                                                (click)="UploadModal(template3)"
                                                                                                                data-toggle="modal"
                                                                                                                data-target="#UploadModal">
                                                                                                            </i>
                                                                                                        </td>
                                                                                                    </tr>
                                                                                                </tbody>
                                                                                            </table>
                            
                            
                            
                                                                                        </div>
                                                                                    </div>
                                                                                </div>
                            
                                                                            </form>
                                                                        </fieldset>
                                                                    </div>
                            
                                                                    <!-- Buttons -->
                                                                    <div class="row mt-25">
                                                                        <div class="col-md-12">
                                                                            <div class="float-right">
                                                                                <button type="button" tooltip="Save" (click)="saveApplication()"
                                                                                    *ngIf="!editFlag && !viewFlag"
                                                                                    class="custom_button custom_btn btn-bg-green btn-labeled btn-labeled-left mr-2"><b><i
                                                                                            class="fa fa-floppy-o  "></i></b> Save</button>
                                                                                <button type="button" tooltip="Save" (click)="updateApplication()"
                                                                                    *ngIf="editFlag && !viewFlag"
                                                                                    class="custom_button custom_btn btn-bg-green btn-labeled btn-labeled-left mr-2"><b><i
                                                                                            class="fa fa-floppy-o  "></i></b> Update</button>
                                                                                <button type="button" tooltip="Reset" (click)="resetData()"
                                                                                    *ngIf="!viewFlag"
                                                                                    class="custom_button custom_btn bg-teal-400 btn-labeled btn-labeled-left mr-2"><b><i
                                                                                            class="fa fa-refresh"></i></b> Reset</button>
                                                                                <button type="button" tooltip="Close" *ngIf="viewFlag"
                                                                                    (click)="resetData()"
                                                                                    class="custom_button custom_btn bg-teal-400 btn-labeled btn-labeled-left mr-10"><b><i
                                                                                            class="fa fa-times"></i></b> Close</button>
                                                                            </div>
                                                                        </div>
                                                                    </div>


                                                                </div>
                                                            </div>
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>

                                        <label class="nav" for="Transaction"
                                            [ngClass]="{'disabled-tab' : selectedEmpData.length > 0}">
                                            <span> Transaction </span>
                                        </label>


                                        <!------------- ------------  Schedule --------------------->
                                        <!-- [disabled]="selectedEmpData.length > 0" -->
                                        <input name="nav" type="radio" class="about-radio" id="Schedule"
                                            [checked]="indexId == 3" (click)="getApplicationScheduleData()"
                                             />

                                        <div class="tabs about-page">
                                            <div class="row">
                                                <div class="col-md-12">
                                                    <div class="card">
                                                        <div class="card-body">
                                                            <!-- Selected Employee basic infrmation-->
                                                            <div class="row mt-10">
                                                                <div class="col-md-12 pl-0 pr-0">
                                                                    <div class="box-line-border radius-10 p-2 mt-3"
                                                                        *ngIf="selectedEmpData[index]">
                                                                        <div class="row">
                                                                            <div class="col-md-4">
                                                                                <label
                                                                                    class="form-label mt-1 mb-0">Employee
                                                                                    No. & Name</label>
                                                                                <label
                                                                                    class="font-12 text-ellipsis mt-1 mb-0">
                                                                                    {{selectedEmpData[index].employeeMasterResponseDTO.employeeCode}}
                                                                                    -
                                                                                    {{selectedEmpData[index].employeeMasterResponseDTO.fullName}}</label>
                                                                            </div>
                                                                            <div class="col-md-2">
                                                                                <label
                                                                                    class="form-label mt-1 mb-0">Payroll
                                                                                    Area</label>
                                                                                <label
                                                                                    class="font-12 text-ellipsis mt-1 mb-0">
                                                                                    {{selectedEmpData[index].payrollArea.payrollAreaCode}}
                                                                                </label>
                                                                            </div>
                                                                            <div class="col-md-2">
                                                                                <label
                                                                                    class="form-label mt-1 mb-0">Head</label>
                                                                                <label
                                                                                    class="font-12 text-ellipsis mt-1 mb-0">
                                                                                    {{selectedEmpData[index].payrollHeadMaster.displayName}}
                                                                                </label>
                                                                            </div>
                                                                            <div class="col-md-2">
                                                                                <label
                                                                                    class="form-label mt-1 mb-0">Frequency</label>
                                                                                <label
                                                                                    class="font-12 text-ellipsis mt-1 mb-0">
                                                                                    {{selectedEmpData[index].frequency}}
                                                                                </label>
                                                                            </div>
                                                                            <div class="col-md-2">
                                                                                <label
                                                                                    class="form-label mt-1 mb-0">Transaction
                                                                                    Id</label>
                                                                                <label
                                                                                    class="font-12 text-ellipsis mt-1 mb-0">
                                                                                    {{selectedEmpData[index].nonRecurringTransactionGroupId}}
                                                                                </label>
                                                                            </div>

                                                                        </div>
                                                                    </div>
                                                                </div>
                                                            </div>
                                                            <br>

                                                            <div class="row mb-10">

                                                                <div class="col-md-12">
                                                                    <div class="float-right">
                                                                        <button type="button" tooltip="Approve"
                                                                            class="custom_button custom_btn btn-bg-green btn-labeled btn-labeled-left mr-10"><b><i
                                                                                    class="fa fa-check-square-o"></i></b>
                                                                            Approve </button>
                                                                    </div>
                                                                </div>
                                                            </div>

                                                            <!-- Edit schedule data-->
                                                            <!-- <a tooltip="Download" style="cursor: pointer;float:right;"
                                                                (click)="ScheduleExportAsXLSX()"
                                                                *ngIf="editScheduleFlag">
                                                                <i class="fa fa-file-excel-o font-18 text-dark-green pt-10  mr-10"
                                                                    aria-hidden="true">
                                                                </i>
                                                            </a> -->

                                                            <p-table [value]="allSchedulesData"
                                                                class="mt-10" [paginator]="true" [rows]="10"
                                                                [showCurrentPageReport]="true"
                                                                currentPageReportTemplate="Showing {first} to {last} of {totalRecords} entries"
                                                                [rowsPerPageOptions]="[10,25,50,100,200]"
                                                                *ngIf="editScheduleFlag">

                                                                <ng-template pTemplate="header">
                                                                    <tr>
                                                                        <th rowspan="2" class="wd-5">
                                                                            Sr. No.

                                                                        </th>
                                                                        <th rowspan="2" class="wd-8">
                                                                            <div
                                                                                class="p-d-flex p-jc-between p-ai-center">
                                                                                Emp. Code
                                                                                <div class="Sort_Filter_Position">
                                                                                    <p-sortIcon field="employeeCode">
                                                                                    </p-sortIcon>
                                                                                    <p-columnFilter field="employeeCode"
                                                                                        display="menu"
                                                                                        class="p-ml-auto">
                                                                                    </p-columnFilter>
                                                                                </div>
                                                                            </div>
                                                                        </th>
                                                                        <th rowspan="2">
                                                                            <div
                                                                                class="p-d-flex p-jc-between p-ai-center">
                                                                                Emp. Name
                                                                                <div class="Sort_Filter_Position">
                                                                                    <p-sortIcon field="fullName">
                                                                                    </p-sortIcon>
                                                                                    <p-columnFilter field="fullName"
                                                                                        display="menu"
                                                                                        class="p-ml-auto">

                                                                                    </p-columnFilter>
                                                                                </div>
                                                                            </div>
                                                                        </th>
                                                                        <th rowspan="2">
                                                                            <div
                                                                                class="p-d-flex p-jc-between p-ai-center">
                                                                                Payroll Area
                                                                                <div class="Sort_Filter_Position">
                                                                                    <p-sortIcon field="payrollAreaCode">
                                                                                    </p-sortIcon>
                                                                                    <p-columnFilter
                                                                                        field="payrollAreaCode"
                                                                                        display="menu"
                                                                                        class="p-ml-auto">
                                                                                    </p-columnFilter>
                                                                                </div>
                                                                            </div>
                                                                        </th>

                                                                        <th rowspan="2" class="wd-5">
                                                                            <div
                                                                                class="p-d-flex p-jc-between p-ai-center">
                                                                                Head
                                                                                <div class="Sort_Filter_Position">
                                                                                    <p-sortIcon field="displayName">
                                                                                    </p-sortIcon>
                                                                                    <p-columnFilter field="displayName"
                                                                                        display="menu"
                                                                                        class="p-ml-auto">

                                                                                    </p-columnFilter>
                                                                                </div>
                                                                            </div>
                                                                        </th>
                                                                        <th rowspan="2">
                                                                            <div
                                                                                class="p-d-flex p-jc-between p-ai-center">
                                                                                Group Id
                                                                                <div class="Sort_Filter_Position">
                                                                                    <p-sortIcon
                                                                                        field="nonRecurringTransactionGroupId">
                                                                                    </p-sortIcon>
                                                                                    <p-columnFilter
                                                                                        field="nonRecurringTransactionGroupId"
                                                                                        display="menu"
                                                                                        class="p-ml-auto">

                                                                                    </p-columnFilter>
                                                                                </div>
                                                                            </div>
                                                                        </th>
                                                                        <th colspan="3" class="wd-8">
                                                                            <div
                                                                                class="p-d-flex p-jc-center p-ai-center">
                                                                                Schedule
                                                                                <div class="Sort_Filter_Position">
                                                                                    <p-sortIcon
                                                                                        field="nonRecurringTransactionScheduleId">
                                                                                    </p-sortIcon>
                                                                                    <p-columnFilter
                                                                                        field="nonRecurringTransactionScheduleId"
                                                                                        display="menu"
                                                                                        class="p-ml-auto">

                                                                                    </p-columnFilter>
                                                                                </div>
                                                                            </div>
                                                                        </th>

                                                                        <th rowspan="2">
                                                                            <div
                                                                                class="p-d-flex p-jc-between p-ai-center">
                                                                                Processed Amount
                                                                                <div class="Sort_Filter_Position">
                                                                                    <p-sortIcon
                                                                                        field="transactionAmount">
                                                                                    </p-sortIcon>
                                                                                    <p-columnFilter type="numeric"
                                                                                        field="transactionAmount"
                                                                                        display="menu"
                                                                                        class="p-ml-auto">

                                                                                    </p-columnFilter>
                                                                                </div>
                                                                            </div>
                                                                        </th>
                                                                        <th rowspan="2">
                                                                            <div
                                                                                class="p-d-flex p-jc-between p-ai-center">
                                                                                Balance Amount
                                                                                <div class="Sort_Filter_Position">
                                                                                    <p-sortIcon
                                                                                        field="transactionAmount">
                                                                                    </p-sortIcon>
                                                                                    <p-columnFilter type="numeric"
                                                                                        field="transactionAmount"
                                                                                        display="menu"
                                                                                        class="p-ml-auto">

                                                                                    </p-columnFilter>
                                                                                </div>
                                                                            </div>
                                                                        </th>
                                                                        <th rowspan="2">
                                                                            <div
                                                                                class="p-d-flex p-jc-between p-ai-center">
                                                                                Processing Cycle
                                                                                <div class="Sort_Filter_Position">
                                                                                    <p-sortIcon field="processedAmount">
                                                                                    </p-sortIcon>
                                                                                    <p-columnFilter
                                                                                        field="processedAmount"
                                                                                        display="menu"
                                                                                        class="p-ml-auto">

                                                                                    </p-columnFilter>
                                                                                </div>
                                                                            </div>
                                                                        </th>
                                                                        <th rowspan="2">
                                                                            <div
                                                                                class="p-d-flex p-jc-between p-ai-center">
                                                                                Clawback Date
                                                                                <div class="Sort_Filter_Position">
                                                                                    <p-sortIcon field="clawbackDate">
                                                                                    </p-sortIcon>
                                                                                    <p-columnFilter field="clawbackDate"
                                                                                        type="date" display="menu"
                                                                                        class="p-ml-auto">

                                                                                    </p-columnFilter>
                                                                                </div>
                                                                            </div>
                                                                        </th>
                                                                        <th rowspan="2"> Hold </th>
                                                                        <th rowspan="2"> Discard </th>
                                                                        <th rowspan="2">
                                                                            <div
                                                                                class="p-d-flex p-jc-between p-ai-center">
                                                                                Reschedule Date
                                                                                <div class="Sort_Filter_Position">
                                                                                    <p-sortIcon field="resheduleDate">
                                                                                    </p-sortIcon>
                                                                                    <p-columnFilter type="date"
                                                                                        field="resheduleDate"
                                                                                        display="menu"
                                                                                        class="p-ml-auto">

                                                                                    </p-columnFilter>
                                                                                </div>
                                                                            </div>
                                                                        </th>
                                                                        <th rowspan="2">
                                                                            <div
                                                                                class="p-d-flex p-jc-between p-ai-center">
                                                                                Approval Status
                                                                                <div class="Sort_Filter_Position">
                                                                                    <p-sortIcon field="approvalstatus">
                                                                                    </p-sortIcon>
                                                                                    <p-columnFilter
                                                                                        field="approvalstatus"
                                                                                        display="menu"
                                                                                        class="p-ml-auto">

                                                                                    </p-columnFilter>
                                                                                </div>
                                                                            </div>
                                                                        </th>

                                                                        <th rowspan="2" class="wd-8">Remark</th>
                                                                        <th rowspan="2"></th>
                                                                        <!-- <th rowspan="2">Reschedule</th> -->
                                                                    </tr>
                                                                    <tr>
                                                                        <th class="wd-8">
                                                                            No.
                                                                        </th>
                                                                        <th class="wd-8">
                                                                            Date
                                                                        </th>
                                                                        <th class="wd-8">
                                                                            Amount
                                                                        </th>
                                                                    </tr>
                                                                </ng-template>

                                                                <ng-template pTemplate="body" let-ScheduleData
                                                                    let-rowIndex=rowIndex>
                                                                    <tr class="p-selectable-row">
                                                                        <td> <label
                                                                                class="form-lable mb-0 ">{{rowIndex+1}}</label>
                                                                        </td>
                                                                        <td class="bg-color-light_gray">
                                                                            <label class="form-lable mb-0 "
                                                                                *ngIf="selectedEmpData[index]">
                                                                                {{selectedEmpData[index].employeeMasterResponseDTO.employeeCode}}
                                                                            </label>
                                                                        </td>
                                                                        <td class="bg-color-light_gray"><label
                                                                                class="form-lable mb-0"
                                                                                *ngIf="selectedEmpData[index]">
                                                                                {{selectedEmpData[index].employeeMasterResponseDTO.fullName}}</label>
                                                                        </td>
                                                                        <td class="bg-color-light_gray"><label
                                                                                class="form-lable mb-0"
                                                                                *ngIf="selectedEmpData[index]">
                                                                                {{selectedEmpData[index].payrollArea.payrollAreaCode}}
                                                                            </label>

                                                                        </td>
                                                                        <td class="bg-color-light_gray">
                                                                            <label class="form-lable mb-0 text-link"
                                                                                (click)="ViewTransactionHistory(template2)"
                                                                                *ngIf="selectedEmpData[index]">
                                                                                {{selectedEmpData[index].payrollHeadMaster.displayName}}
                                                                            </label>

                                                                        </td>
                                                                        <td class="bg-color-light_gray">
                                                                            <label class="form-lable mb-0">
                                                                                {{ScheduleData.nonRecurringTransactionGroupId}}
                                                                            </label>

                                                                        </td>
                                                                        <td class="bg-color-light_gray">
                                                                            <label class="form-lable mb-0">
                                                                                {{ScheduleData.nonRecurringTransactionScheduleId}}
                                                                            </label>
                                                                            <span></span>
                                                                            <!-- No -->
                                                                        </td>
                                                                        <td class="bg-color-light_gray"><input
                                                                                data-provide="datepicker"
                                                                                data-date-autoclose="true"
                                                                                [value]="ScheduleData.transactionDate | date: 'dd-MMM-yyyy'"
                                                                                class="form-control wd-100" bsDatepicker
                                                                                disabled>
                                                                            <!-- date -->
                                                                        </td>
                                                                        <td class="bg-color-light_gray"><label
                                                                                class="form-lable mb-0"><input
                                                                                    type="text"
                                                                                    [value]="ScheduleData.transactionAmount | number: '1.2-2'"
                                                                                    class="form-control wd-100"
                                                                                    disabled>
                                                                            </label>
                                                                            <!-- amount -->
                                                                        </td>
                                                                        <td class="bg-color-light_gray"><label
                                                                                class="form-lable mb-0">{{ScheduleData.processedAmount
                                                                                | number: '1.2-2'}}
                                                                            </label>

                                                                        </td>
                                                                        <td class="bg-color-light_gray"><label
                                                                                class="form-lable mb-0">{{ScheduleData.transactionAmount
                                                                                | number: '1.2-2'}}
                                                                            </label>

                                                                        </td>
                                                                        <td class="bg-color-light_gray"><label
                                                                                class="form-lable mb-0">{{ScheduleData.cycleName}}
                                                                            </label>

                                                                        </td>
                                                                        <td class="bg-color-light_gray"><label
                                                                                class="form-lable mb-0 wd-100">{{ScheduleData.clawbackDate
                                                                                | date: 'dd-MMM-yyyy'}}
                                                                            </label>
                                                                        </td>
                                                                        <td class="bg-color-light_gray">
                                                                            <label
                                                                                class="custom-control custom-checkbox checkbox-center">
                                                                                <input type="checkbox"
                                                                                    class="custom-control-input"
                                                                                    (click)="getHoldScheduleValue($event.target,ScheduleData,rowIndex)"
                                                                                    name="select"
                                                                                    [disabled]="ScheduleData.isDisabledFlag"
                                                                                    [checked]="ScheduleData.hold == true" />
                                                                                <span
                                                                                    class="custom-control-label"></span>
                                                                            </label>
                                                                        </td>
                                                                        <td class="bg-color-light_gray">
                                                                            <!-- <label class="form-lable mb-0"> -->
                                                                            <!-- {{ScheduleData.isDisabledFlag}} -->
                                                                            <label
                                                                                class="custom-control custom-checkbox checkbox-center">
                                                                                <input type="checkbox"
                                                                                    class="custom-control-input"
                                                                                    (click)="getDiscardScheduleValue($event.target,ScheduleData,rowIndex)"
                                                                                    [disabled]="ScheduleData.isDisabledFlag"
                                                                                    name="select"
                                                                                    [checked]="ScheduleData.discard == true" />
                                                                                <span
                                                                                    class="custom-control-label"></span>
                                                                            </label>
                                                                            <!-- </label> -->
                                                                        </td>
                                                                        <td class="bg-color-light_gray"><input
                                                                                data-provide="datepicker"
                                                                                data-date-autoclose="true"
                                                                                value="{{ScheduleData.resheduleDate}}"
                                                                                [bsConfig]="{ dateInputFormat: 'DD-MMM-YYYY' }"
                                                                                (bsValueChange)="getRescheduleDate($event,ScheduleData)"
                                                                                [disabled]="(ScheduleData.hold == true || ScheduleData.discard == true)
                                                                                || ((selectedHoldIndex == rowIndex && hold == 1) || (selecteddiscardIndex == rowIndex && discard == 1)  )
                                                                                || ScheduleData.isDisabledFlag"
                                                                                class="form-control" bsDatepicker>

                                                                        </td>
                                                                        <td class="bg-color-light_gray"><label
                                                                                class="form-lable mb-0">{{ScheduleData.approvalstatus}}
                                                                            </label>

                                                                        </td>
                                                                        <td class="bg-color-light_gray"><input
                                                                                type="text" class="form-control wd-100"
                                                                                (focusout)="getScheduleRemark($event.target.value,ScheduleData)"
                                                                                [value]="ScheduleData.remark">
                                                                        </td>
                                                                        <td><i tooltip="View Schedule"
                                                                                class="fa fa-eye font-16 text-blue cursor-pointer"
                                                                                (click)="ViewScheduleHistory(template3,ScheduleData)"
                                                                                aria-hidden="true"></i></td>

                                                                        <!-- <td></td> -->


                                                                    </tr>
                                                                </ng-template>
                                                            </p-table>

                                                            <!-- All schedule data-->
                                                            <!-- [scrollable]="true" scrollHeight="800px" -->
                                                            <!-- <a tooltip="Download" style="cursor: pointer;float:right;"
                                                                (click)="AllScheduleExportAsXLSX()"
                                                                *ngIf="!editScheduleFlag">
                                                                <i class="fa fa-file-excel-o font-18 text-dark-green pt-10  mr-10"
                                                                    aria-hidden="true">
                                                                </i>
                                                            </a> -->

                                                            <p-table [value]="AllNonRecurringTransactionScheduledData"
                                                                class="mt-10" [paginator]="true" [rows]="10"
                                                                [showCurrentPageReport]="true"
                                                                currentPageReportTemplate="Showing {first} to {last} of {totalRecords} entries"
                                                                [rowsPerPageOptions]="[10,25,50,100,200]"
                                                                *ngIf="!editScheduleFlag">

                                                                <ng-template pTemplate="header">
                                                                    <tr>
                                                                        <th rowspan="2" class="wd-5">
                                                                            Sr. No.

                                                                        </th>
                                                                        <th rowspan="2" class="wd-8">
                                                                            <div
                                                                                class="p-d-flex p-jc-between p-ai-center">
                                                                                Emp. Code
                                                                                <div class="Sort_Filter_Position">
                                                                                    <p-sortIcon field="employeeCode">
                                                                                    </p-sortIcon>
                                                                                    <p-columnFilter field="employeeCode"
                                                                                        display="menu"
                                                                                        class="p-ml-auto">
                                                                                    </p-columnFilter>
                                                                                </div>
                                                                            </div>
                                                                        </th>
                                                                        <th rowspan="2">
                                                                            <div
                                                                                class="p-d-flex p-jc-between p-ai-center">
                                                                                Emp. Name
                                                                                <div class="Sort_Filter_Position">
                                                                                    <p-sortIcon field="fullName">
                                                                                    </p-sortIcon>
                                                                                    <p-columnFilter field="fullName"
                                                                                        display="menu"
                                                                                        class="p-ml-auto">

                                                                                    </p-columnFilter>
                                                                                </div>
                                                                            </div>
                                                                        </th>
                                                                        <th rowspan="2">
                                                                            <div
                                                                                class="p-d-flex p-jc-between p-ai-center">
                                                                                Payroll Area
                                                                                <div class="Sort_Filter_Position">
                                                                                    <p-sortIcon field="payrollAreaCode">
                                                                                    </p-sortIcon>
                                                                                    <p-columnFilter
                                                                                        field="payrollAreaCode"
                                                                                        display="menu"
                                                                                        class="p-ml-auto">
                                                                                    </p-columnFilter>
                                                                                </div>
                                                                            </div>
                                                                        </th>

                                                                        <th rowspan="2" class="wd-5">
                                                                            <div
                                                                                class="p-d-flex p-jc-between p-ai-center">
                                                                                Head
                                                                                <div class="Sort_Filter_Position">
                                                                                    <p-sortIcon field="displayName">
                                                                                    </p-sortIcon>
                                                                                    <p-columnFilter field="displayName"
                                                                                        display="menu"
                                                                                        class="p-ml-auto">

                                                                                    </p-columnFilter>
                                                                                </div>
                                                                            </div>
                                                                        </th>
                                                                        <th rowspan="2">
                                                                            <div
                                                                                class="p-d-flex p-jc-between p-ai-center">
                                                                                Group Id
                                                                                <div class="Sort_Filter_Position">
                                                                                    <p-sortIcon
                                                                                        field="nonRecurringTransactionGroupId">
                                                                                    </p-sortIcon>
                                                                                    <p-columnFilter
                                                                                        field="nonRecurringTransactionGroupId"
                                                                                        display="menu"
                                                                                        class="p-ml-auto">

                                                                                    </p-columnFilter>
                                                                                </div>
                                                                            </div>
                                                                        </th>
                                                                        <th colspan="3" class="wd-8">
                                                                            <div
                                                                                class="p-d-flex p-jc-center p-ai-center">
                                                                                Schedule
                                                                                <div class="Sort_Filter_Position">
                                                                                    <p-sortIcon
                                                                                        field="nonRecurringTransactionScheduleId">
                                                                                    </p-sortIcon>
                                                                                    <p-columnFilter
                                                                                        field="nonRecurringTransactionScheduleId"
                                                                                        display="menu"
                                                                                        class="p-ml-auto">

                                                                                    </p-columnFilter>
                                                                                </div>
                                                                            </div>
                                                                        </th>

                                                                        <th rowspan="2">
                                                                            <div
                                                                                class="p-d-flex p-jc-between p-ai-center">
                                                                                Processed Amount
                                                                                <div class="Sort_Filter_Position">
                                                                                    <p-sortIcon field="processedAmount">
                                                                                    </p-sortIcon>
                                                                                    <p-columnFilter
                                                                                        field="processedAmount"
                                                                                        type="numeric" display="menu"
                                                                                        class="p-ml-auto">

                                                                                    </p-columnFilter>
                                                                                </div>
                                                                            </div>
                                                                        </th>
                                                                        <th rowspan="2">
                                                                            <div
                                                                                class="p-d-flex p-jc-between p-ai-center">
                                                                                Balance Amount
                                                                                <div class="Sort_Filter_Position">
                                                                                    <p-sortIcon
                                                                                        field="transactionAmount">
                                                                                    </p-sortIcon>
                                                                                    <p-columnFilter
                                                                                        field="transactionAmount"
                                                                                        type="numeric" display="menu"
                                                                                        class="p-ml-auto">

                                                                                    </p-columnFilter>
                                                                                </div>
                                                                            </div>
                                                                        </th>
                                                                        <th rowspan="2">
                                                                            <div
                                                                                class="p-d-flex p-jc-between p-ai-center">
                                                                                Processing Cycle
                                                                                <div class="Sort_Filter_Position">
                                                                                    <p-sortIcon field="cycleName">
                                                                                    </p-sortIcon>
                                                                                    <p-columnFilter field="cycleName"
                                                                                        display="menu"
                                                                                        class="p-ml-auto">

                                                                                    </p-columnFilter>
                                                                                </div>
                                                                            </div>
                                                                        </th>
                                                                        <th rowspan="2">
                                                                            <div
                                                                                class="p-d-flex p-jc-between p-ai-center">
                                                                                Clawback Date
                                                                                <div class="Sort_Filter_Position">
                                                                                    <p-sortIcon field="clawbackDate">
                                                                                    </p-sortIcon>
                                                                                    <p-columnFilter field="clawbackDate"
                                                                                        type="date" display="menu"
                                                                                        class="p-ml-auto">

                                                                                    </p-columnFilter>
                                                                                </div>
                                                                            </div>
                                                                        </th>
                                                                        <th rowspan="2"> Hold </th>
                                                                        <th rowspan="2"> Discard </th>
                                                                        <th rowspan="2">
                                                                            <div
                                                                                class="p-d-flex p-jc-between p-ai-center">
                                                                                Reschedule Date
                                                                                <div class="Sort_Filter_Position">
                                                                                    <p-sortIcon field="resheduleDate">
                                                                                    </p-sortIcon>
                                                                                    <p-columnFilter type="date"
                                                                                        field="resheduleDate"
                                                                                        display="menu"
                                                                                        class="p-ml-auto">

                                                                                    </p-columnFilter>
                                                                                </div>
                                                                            </div>
                                                                        </th>
                                                                        <th rowspan="2">
                                                                            <div
                                                                                class="p-d-flex p-jc-between p-ai-center">
                                                                                Approval Status
                                                                                <div class="Sort_Filter_Position">
                                                                                    <p-sortIcon field="approvalstatus">
                                                                                    </p-sortIcon>
                                                                                    <p-columnFilter
                                                                                        field="approvalstatus"
                                                                                        display="menu"
                                                                                        class="p-ml-auto">

                                                                                    </p-columnFilter>
                                                                                </div>
                                                                            </div>
                                                                        </th>

                                                                        <th rowspan="2" class="wd-8">Remark</th>
                                                                        <th rowspan="2"></th>
                                                                        <!-- <th rowspan="2">Reschedule</th> -->
                                                                    </tr>
                                                                    <tr>
                                                                        <th class="wd-8">
                                                                            No.
                                                                        </th>
                                                                        <th class="wd-8">
                                                                            Date
                                                                        </th>
                                                                        <th class="wd-8">
                                                                            Amount
                                                                        </th>
                                                                    </tr>
                                                                </ng-template>

                                                                <ng-template pTemplate="body" let-ScheduleData
                                                                    let-rowIndex=rowIndex>
                                                                    <tr class="p-selectable-row">
                                                                        <td> <label
                                                                                class="form-lable mb-0 ">{{rowIndex+1}}</label>
                                                                        </td>
                                                                        <td class="bg-color-light_gray">
                                                                            <label class="form-lable mb-0"
                                                                                *ngIf="ScheduleData.employeeMasterResponseDTO">
                                                                                {{ScheduleData.employeeMasterResponseDTO.employeeCode}}
                                                                            </label>
                                                                        </td>
                                                                        <td class="bg-color-light_gray"><label
                                                                                class="form-lable mb-0"
                                                                                *ngIf="ScheduleData.employeeMasterResponseDTO">
                                                                                {{ScheduleData.employeeMasterResponseDTO.fullName}}</label>
                                                                        </td>
                                                                        <td class="bg-color-light_gray"><label
                                                                                class="form-lable mb-0"
                                                                                *ngIf="ScheduleData.payrollArea">
                                                                                {{ScheduleData.payrollArea.payrollAreaCode}}
                                                                            </label>

                                                                        </td>
                                                                        <td class="bg-color-light_gray">
                                                                            <label class="form-lable mb-0 text-link"
                                                                                (click)="ViewTransactionHistory(template2)"
                                                                                *ngIf="ScheduleData.payrollHeadMaster">
                                                                                {{ScheduleData.payrollHeadMaster.displayName}}
                                                                            </label>

                                                                        </td>
                                                                        <td class="bg-color-light_gray">
                                                                            <label class="form-lable mb-0">
                                                                                {{ScheduleData.nonRecurringTransactionGroupId}}
                                                                            </label>

                                                                        </td>
                                                                        <td class="bg-color-light_gray"><label
                                                                                class="form-lable mb-0">
                                                                                {{ScheduleData.nonRecurringTransactionScheduleId}}
                                                                            </label>
                                                                            <!-- No -->
                                                                        </td>
                                                                        <td class="bg-color-light_gray"><input
                                                                                data-provide="datepicker"
                                                                                data-date-autoclose="true"
                                                                                [value]="ScheduleData.transactionDate | date: 'dd-MMM-yyyy'"
                                                                                class="form-control wd-100" bsDatepicker
                                                                                disabled>
                                                                            <!-- date -->
                                                                        </td>
                                                                        <td class="bg-color-light_gray"><label
                                                                                class="form-lable mb-0"><input
                                                                                    type="text"
                                                                                    [value]="ScheduleData.transactionAmount | number: '1.2-2'"
                                                                                    class="form-control wd-100"
                                                                                    disabled>
                                                                            </label>
                                                                            <!-- amount -->
                                                                        </td>
                                                                        <td class="bg-color-light_gray"><label
                                                                                class="form-lable mb-0">{{ScheduleData.processedAmount}}
                                                                            </label>

                                                                        </td>
                                                                        <td class="bg-color-light_gray"><label
                                                                                class="form-lable mb-0">{{ScheduleData.transactionAmount
                                                                                | number: '1.2-2'}}
                                                                            </label>

                                                                        </td>
                                                                        <td class="bg-color-light_gray"><label
                                                                                class="form-lable mb-0">{{ScheduleData.cycleName}}
                                                                            </label>

                                                                        </td>
                                                                        <td class="bg-color-light_gray"><label
                                                                                class="form-lable mb-0 wd-100">{{ScheduleData.clawbackDate
                                                                                | date: 'dd-MMM-yyyy'}}
                                                                            </label>
                                                                        </td>
                                                                        <td class="bg-color-light_gray">
                                                                            <label
                                                                                class="custom-control custom-checkbox checkbox-center">
                                                                                <input type="checkbox"
                                                                                    class="custom-control-input"
                                                                                    (click)="getHoldScheduleValue($event.target,ScheduleData,rowIndex)"
                                                                                    [disabled]="ScheduleData.isDisabledFlag"
                                                                                    [checked]="ScheduleData.hold == true" />
                                                                                <span
                                                                                    class="custom-control-label"></span>
                                                                            </label>
                                                                        </td>
                                                                        <td class="bg-color-light_gray">
                                                                            <label
                                                                                class="custom-control custom-checkbox checkbox-center">
                                                                                <input type="checkbox"
                                                                                    class="custom-control-input"
                                                                                    (click)="getDiscardScheduleValue($event.target,ScheduleData,rowIndex)"
                                                                                    [disabled]="ScheduleData.isDisabledFlag"
                                                                                    [checked]="ScheduleData.discard == true" />
                                                                                <span
                                                                                    class="custom-control-label"></span>
                                                                            </label>
                                                                        </td>
                                                                        <td class="bg-color-light_gray"><input
                                                                                data-provide="datepicker"
                                                                                data-date-autoclose="true"
                                                                                value="{{ScheduleData.resheduleDate}}"
                                                                                [bsConfig]="{ dateInputFormat: 'DD-MMM-YYYY' }"
                                                                                (bsValueChange)="getRescheduleDate($event,ScheduleData)"
                                                                                [disabled]="(ScheduleData.hold == true || ScheduleData.discard == true)
                                                                                || ((selectedHoldIndex == rowIndex && hold == 1) || (selecteddiscardIndex == rowIndex && discard == 1)  )
                                                                                || ScheduleData.isDisabledFlag"
                                                                                class="form-control" bsDatepicker>

                                                                        </td>
                                                                        <td class="bg-color-light_gray"><label
                                                                                class="form-lable mb-0">{{ScheduleData.approvalstatus}}
                                                                            </label>

                                                                        </td>
                                                                        <td class="bg-color-light_gray"><input
                                                                                type="text" class="form-control wd-100"
                                                                                (focusout)="getScheduleRemark($event.target.value,ScheduleData)"
                                                                                [value]="ScheduleData.remark">

                                                                        </td>
                                                                        <td><i tooltip="View Schedule"
                                                                                class="fa fa-eye font-16 text-blue cursor-pointer"
                                                                                (click)="ViewScheduleHistory(template3,ScheduleData)"
                                                                                aria-hidden="true"></i></td>
                                                                        <!-- <td> {{ScheduleData.isReschedule}}</td> -->

                                                                    </tr>
                                                                </ng-template>
                                                            </p-table>

                                                            <!-- Buttons -->
                                                            <div class="row mt-15">
                                                                <div class="col-12">
                                                                    <div class="float-right mb-15">
                                                                        <button type="button" tooltip="Next"
                                                                            (click)="NonRecurringTransactionScheduleupdateById()"
                                                                            class="custom_button custom_btn btn-bg-green btn-labeled btn-labeled-left ml-10"><b><i
                                                                                    class="fa fa-floppy-o"
                                                                                    aria-hidden="true"></i></b>Save</button>

                                                                        <button type="button" tooltip="Next"
                                                                            class="custom_button custom_btn bg-teal-400 btn-labeled btn-labeled-left ml-10"><b><i
                                                                                    class="fa fa-times"
                                                                                    aria-hidden="true"></i></b>Cancel</button>
                                                                    </div>
                                                                </div>
                                                            </div>

                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>

                                        <label class="nav" for="Schedule"
                                            [ngClass]="{'disabled-tab' : selectedEmpData.length > 0}">
                                            <span> Schedule </span>
                                        </label>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

        </div>
    </div>
</form>


 <!-- Temp Garnishment Schedule-->
 <ng-template #template>
    <div class="modal-header">
        <h5 class="modal-title" id="UploadModalLabel">Garnishment / Third party Payment
            Schedule </h5>
        <button type="button" (click)="modalRef.hide()" class="close" data-dismiss="modal"
            aria-label="Close"><span aria-hidden="true">×</span></button>
    </div>
    <div class="modal-body">
        <div class="card">
            <div class="card-body">

                <div class="row">
                    <div class="col-md-3" *ngIf="tempScheduleData[0]">
                        <label class="form-label">Application No.</label>
                        <input type="text"
                            value="{{tempScheduleData[0].garnishmentApplicationMasterId}}"
                            class="form-control" disabled>
                    </div>
                    <div class="col-md-3" *ngIf="tempScheduleData[0]">
                        <label class="form-label">Garnishment / Third Party </label>
                        <input type="text" class="form-control"
                            value="{{tempScheduleData[0].nature}}" disabled>
                    </div>
                    <div class="col-md-3" *ngIf="tempScheduleData[0]">
                        <label class="form-label">Frequency</label>
                        <input type="text" class="form-control"
                            value="{{tempScheduleData[0].frequency}}" disabled>
                    </div>
                    <div class="col-md-3" *ngIf="tempScheduleData[0]">
                        <label class="form-label">Goal Amount</label>
                        <input type="text" class="form-control"
                            value="{{tempScheduleData[0].goalAmount}}" disabled>
                    </div>
                </div>

                <div class="row mt-25">
                    <div class="col-md-12">
                        <div class="table-responsive Custom_Table">
                            <table
                                class="table table-striped table-hover table-bordered m-b-0">
                                <thead class="thead-dark">
                                    <th>Date</th>
                                    <th>Percentage ( % )</th>
                                    <th>Amount</th>
                                    <!-- <th>Processed Amount</th>
                                    <th>Balance Amount</th>
                                    <th>Processing Cycle</th>
                                    <th>Hold</th>
                                    <th>Discard</th>
                                    <th>Remark</th> -->
                                </thead>
                                <tbody>
                                    <tr
                                        *ngFor="let data of tempScheduleData; let index = index;">
                                        <td>{{data.transactionDate | date:'dd-MMM-yyyy'}}
                                        </td>
                                        <td>{{data.percentage}}</td>
                                        <td>{{data.transactionAmount | number: '1.2-2'}}
                                        </td>
                                        <!-- <td>{{data.processedAmount | number: '1.2-2'}}</td>
                                        <td>{{data.balanceAmount | number: '1.2-2'}}</td>
                                        <td>{{data.cycleName}}</td>
                                        <td><label class="custom-control  checkbox-center">
                                                <input type="checkbox"
                                                    class="custom-control-input"
                                                    name="select" disabled
                                                    [checked]="data.hold == true" />
                                                <span class="custom-control-label"></span>
                                            </label>
                                        </td>
                                        <td><label class="custom-control  checkbox-center">
                                                <input type="checkbox"
                                                    class="custom-control-input"
                                                    name="select" disabled
                                                    [checked]="data.discard == true" />
                                                <span class="custom-control-label"></span>
                                            </label></td>
                                        <td>
                                        <td>{{data.remark}}</td> -->
                                    </tr>
                                </tbody>


                            </table>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <div class="modal-footer">
        <button type="button" class="btn btn-secondary"
            (click)="modalRef.hide()">Ok</button>
    </div>
</ng-template>

<!-- View Schedule History -->
<ng-template #template1>
    <div class="modal-header">
        <h5 class="modal-title">Garnishment / Third party Payment Schedule </h5>
        <button type="button" (click)="modalRef.hide()" class="close" data-dismiss="modal"
            aria-label="Close"><span aria-hidden="true">×</span>
        </button>
    </div>
    <div class="modal-body">
        <div class="card">
            <div class="card-body">

                <div class="row">
                    <div class="col-md-3" *ngIf="viewSchedulesData[0]">
                        <label class="form-label">Application No.</label>
                        <input type="text"
                            value="{{viewSchedulesData[0].garnishmentApplicationMasterId}}"
                            class="form-control" disabled>
                    </div>
                    <div class="col-md-3" *ngIf="viewSchedulesData[0]">
                        <label class="form-label">Garnishment / Third Party </label>
                        <input type="text" class="form-control"
                            value="{{viewSchedulesData[0].nature}}" disabled>
                    </div>
                    <div class="col-md-3" *ngIf="viewSchedulesData[0]">
                        <label class="form-label">Frequency</label>
                        <input type="text" class="form-control"
                            value="{{viewSchedulesData[0].frequency}}" disabled>
                    </div>
                    <div class="col-md-3" *ngIf="viewSchedulesData[0]">
                        <label class="form-label">Goal Amount</label>
                        <input type="text" class="form-control"
                            value="{{viewSchedulesData[0].goalAmount}}" disabled>
                    </div>
                </div>

                <div class="row mt-25">
                    <div class="col-md-12">
                        <div class="table-responsive Custom_Table">
                            <table
                                class="table table-striped table-hover table-bordered m-b-0">
                                <thead class="thead-dark">
                                    <!-- <th>Sr No.</th> -->
                                    <th>Date</th>
                                    <!-- <th>Percentage ( % )</th> -->
                                    <th>Amount</th>
                                    <th>Processed Amount</th>
                                    <th>Balance Amount</th>
                                    <th>Processing Cycle</th>
                                    <th>Hold</th>
                                    <th>Discard</th>
                                    <th>Remark</th>
                                </thead>
                                <tbody>
                                    <tr
                                        *ngFor="let data of viewSchedulesData; let index = index;">
                                        <!-- <th>{{index+1}}</th> -->
                                        <td>{{data.transactionDate | date:'dd-MMM-yyyy'}}
                                        </td>
                                        <!-- <td>{{data.percentage}}</td> -->
                                        <td>{{data.transactionAmount | number: '1.2-2'}}
                                        </td>
                                        <td>{{data.processedAmount | number: '1.2-2'}}</td>
                                        <td>{{data.balanceAmount | number: '1.2-2'}}</td>
                                        <td>{{data.cycleName}}</td>
                                        <td><label class="custom-control  checkbox-center">
                                                <input type="checkbox"
                                                    class="custom-control-input"
                                                    name="select" disabled
                                                    [checked]="data.hold == true" />
                                                <span class="custom-control-label"></span>
                                            </label>
                                        </td>
                                        <td><label class="custom-control  checkbox-center">
                                                <input type="checkbox"
                                                    class="custom-control-input"
                                                    name="select" disabled
                                                    [checked]="data.discard == true" />
                                                <span class="custom-control-label"></span>
                                            </label></td>
                                        <td>
                                        <td>{{data.remark}}</td>
                                    </tr>
                                </tbody>


                            </table>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <div class="modal-footer">
        <button type="button" class="btn btn-secondary"
            (click)="modalRef.hide()">Close</button>
    </div>
</ng-template>

<!-- View application History -->
<ng-template #template2>
    <div class="modal-header">
        <h5 class="modal-title">Garnishment Application </h5>
        <button type="button" (click)="modalRef.hide()" class="close" data-dismiss="modal"
            aria-label="Close"><span aria-hidden="true">×</span>
        </button>
    </div>
    <div class="modal-body">
        <div class="card">
            <div class="card-body">

                <div class="row">
                    <div class="col-md-3" *ngIf="applicationHistoryData[0]">
                        <label class="form-label">Application No.</label>
                        <input type="text"
                            value="{{applicationHistoryData[0].garnishmentApplicationMasterId}}"
                            class="form-control" disabled>
                    </div>
                    <div class="col-md-3" *ngIf="applicationHistoryData[0]">
                        <label class="form-label">Garnishment / Third Party </label>
                        <input type="text" class="form-control"
                            value="{{applicationHistoryData[0].garnishmentMasterResponseDTO.nature}}"
                            disabled>
                    </div>
                    <div class="col-md-3" *ngIf="applicationHistoryData[0]">
                        <label class="form-label">Frequency</label>
                        <input type="text" class="form-control"
                            value="{{applicationHistoryData[0].garnishmentMasterFrequencyResponseDTO.frequencyName}}"
                            disabled>
                    </div>
                    <div class="col-md-3" *ngIf="applicationHistoryData[0]">
                        <label class="form-label">Goal Amount</label>
                        <input type="text" class="form-control"
                            value="{{applicationHistoryData[0].goalAmount}}" disabled>
                    </div>
                </div>

                <div class="row mt-25">
                    <div class="col-md-12">
                        <div class="table-responsive Custom_Table">
                            <table
                                class="table table-striped table-hover table-bordered m-b-0">
                                <thead class="thead-dark">
                                    <!-- <th>Sr No.</th> -->
                                    <th>Once Every</th>
                                    <th>Frequency</th>
                                    <th>Amount</th>
                                    <th>From Date</th>
                                    <th>Transaction Type</th>
                                    <th>No Of Transaction</th>
                                    <th>To Date</th>
                                    <th>Input Type</th>
                                    <th>Remark</th>
                                    <th>Updated Date</th>
                                    <th>Updated By</th>
                                </thead>
                                <tbody>
                                    <tr
                                        *ngFor="let data of applicationHistoryData; let index = index;">
                                        <!-- <th>{{index+1}}</th> -->
                                        <th>{{data.onceEvery}}</th>
                                        <th>{{data.garnishmentMasterFrequencyResponseDTO.frequencyName}}
                                        </th>
                                        <td>{{data.amount | number: '1.2-2'}}</td>
                                        <td>{{data.fromDate | date:'dd-MMM-yyyy'}}</td>
                                        <td>{{data.garnishmentMasterTransactionTypeResponseDTO.transactionTypeName}}
                                        </td>
                                        <td>{{data.numberOfTransactions}}</td>
                                        <td>{{data.toDate | date:'dd-MMM-yyyy'}}</td>
                                        <td>{{data.garnishmentMasterInputTypeResponseDTO.inputTypeName}}</td>
                                        <td>{{data.remark}}</td>
                                        <td>{{data.lastModifiedDateTime | date:'dd-MMM-yyyy'
                                            }}</td>
                                        <td>
                                            <span
                                                *ngIf="data.lastModifiedBy != null">{{data.lastModifiedBy}}</span>
                                            <span
                                                *ngIf="data.lastModifiedBy == null">Rahul</span>
                                        </td>
                                    </tr>
                                </tbody>


                            </table>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <div class="modal-footer">
        <button type="button" class="btn btn-secondary"
            (click)="modalRef.hide()">Close</button>
    </div>
</ng-template>


<!-- Upload Document-->
<ng-template #template3>
    <div class="modal-header">
        <h5 class="modal-title" id="UploadModalLabel">Upload Document</h5>
        <button type="button" (click)="modalRef.hide()" class="close" data-dismiss="modal"
            aria-label="Close"><span aria-hidden="true">×</span></button>
    </div>
    <div class="modal-body">
        <div class="card">
            <div class="card-body">
                <div class="row clearfix">
                    <div class="col-md-12">
                        <div class="fileuploadbox bg-color-lightgray">
                            <label class="filelabel">
                                <i class="fa fa-upload">
                                </i>
                                <span class="title">
                                    Choose file
                                </span>
                                <input class="FileUpload1" class="dropify"
                                    (change)="onMasterUpload($event);"
                                    accept=".jpg , .jpeg, .pdf , .png" id="FileInput"
                                    type="file" multiple />
                            </label>
                        </div>
                        <div *ngIf="masterfilesArray.length > 0 " class="fileuploadbox">
                            <span class="text-purple font-14 font700">Selected Files</span>
                            <label
                                *ngFor="let item of masterfilesArray;  let index = index;"
                                class="filelabeldisplay">
                                <div class="text-ellipsis"><i class="fa fa-paperclip">
                                    </i>
                                    <span class="title" tooltip="{{item.name}}">

                                    </span>
                                    <div>
                                        <div style="float: left; width: 40%;">
                                            <div class="col-md-8 mt-10">
                                                <label class="form-label">Password</label>
                                            </div>
                                            <div class="col-md-12">
                                                <input class="form-control"
                                                    [(ngModel)]="documentPassword[index]"
                                                    rows="1">
                                            </div>

                                        </div>
                                        <div
                                            style="float: right; width: 40%; margin-right: 59px">
                                            <div class="col-md-8 mt-10">
                                                <label class="form-label">Remark</label>
                                            </div>
                                            <div class="col-md-12">
                                                <input class="form-control"
                                                    [(ngModel)]="remarkList[index]"
                                                    rows="1">
                                            </div>
                                        </div>
                                    </div>
                                </div>
                                <div>
                                    <i class="fa fa-times text-red font-18"
                                        (click)="removeSelectedLicMasterDocument(index)"></i>
                                </div>
                            </label>


                        </div>
                    </div>
                    <!-- <div class="col-md-12 mt-10">
                            <label class="form-label">Remark</label>
                        </div>
                        <div class="col-md-12">
                            <textarea class="form-control" [(ngModel)]="documentRemark" rows="2"></textarea>
                        </div> -->
                </div>
            </div>
        </div>
    </div>
    <div class="modal-footer">
        <button type="button" class="btn btn-secondary"
            (click)="modalRef.hide()">Ok</button>
    </div>
</ng-template>