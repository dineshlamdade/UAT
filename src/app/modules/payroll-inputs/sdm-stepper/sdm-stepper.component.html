<app-leftmenu></app-leftmenu>
<!-- Main body part  -->
<div class="page">
    <app-header></app-header>
    <div class="section-body mt-3">
        <div class="container-fluid" style="border: 1px solid #ccc; background-color: #fff;">
            <div class="row">

                <div class="col-12">
                    <div class="card">
                        <div class="card-body">
                            <!--Source-->
                            <div class="mb-0" *ngIf="!summeryFlag">
                                <h3 class="font-14 text-purple font-bold">Summary</h3>&nbsp;


                            </div>

                            <div [@slideInOut]>

                                <div class="row">

                                    <div class="col-12">
                                        <div class="row mt-15 float-right">

                                            <div class="" style="margin-left: 12px;">

                                                <button *ngIf="!summeryFlag" (click)="stepperFunction('addNew')"
                                                    class="custom_button custom_btn btn-bg-green btn-labeled btn-labeled-left ripple "
                                                    tooltip="Add New" style="margin-left:20px;"><b>
                                                        <i class="fa fa-plus-circle"></i></b>Add New</button>&nbsp;

                                                <button *ngIf="summeryFlag" (click)="stepperFunction('viewSum')"
                                                    class="custom_button custom_btn btn-bg-green btn-labeled btn-labeled-left ripple "
                                                    tooltip="Back" style="margin-left:20px ;"><b>
                                                        <i class="fa fa-arrow-left"></i></b>Back</button>&nbsp;

                                            </div>
                                            <br>
                                            <br>
                                            <br>
                                        </div>

                                        <div class="card" *ngIf="!summeryFlag">
                                            <div class="cycle-table">
                                                <div class="cycle-value pt-10 pb-40 bg-color-light_gray">
                                                    <div class="col-md-12 pt-10 pb-10 bg-color-light_gray">
                                                        <!-- <span class="font-14 text-purple font-bold">Summary</span> -->
                                                        <div class="float-right d-flex  justify-content">

                                                            <div class="rup mt-2">
                                                                <div class="input-icon mb-3">
                                                                    <input
                                                                        (input)="dt.filterGlobal($event.target.value, 'contains')"
                                                                        type="text" pInputText class="form-control"
                                                                        placeholder="Search...">
                                                                    <span class="input-icon-addon"><i
                                                                            class="fe fe-search"></i></span>
                                                                </div>
                                                            </div>
                                                            &nbsp;&nbsp;
                                                            <i (click)="exportAsXLSX()"
                                                                class="fa fa-file-excel-o font-25 text-dark-green pt-10 mb-3"
                                                                aria-hidden="true"></i>
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                            <br>
                                            <div class="table-responsive Custom_Table">
                                                <p-table [value]="sdmSummeryData" [paginator]="true" [rows]="10"
                                                    [showCurrentPageReport]="true"
                                                    currentPageReportTemplate="Showing {first} to {last} of {totalRecords} entries"
                                                    [rowsPerPageOptions]="[10,25,50,100,200]" #dt
                                                    [globalFilterFields]="['sdmName','sdmDescription','moduleCount','sourceCount','rangeApplicableStatus','derivedCount']">
                                                    <ng-template pTemplate="header">
                                                        <tr>
                                                            <th rowspan="2" class="wd-8 text-center">
                                                                Sr. No.
                                                            </th>
                                                            <th rowspan="2" class="wd-8 text-center">
                                                                <div class="p-d-flex p-jc-between p-ai-center ml-45">
                                                                    Code
                                                                    <div class="Sort_Filter_Position">
                                                                        <p-sortIcon field="sdmName">
                                                                        </p-sortIcon>
                                                                        <p-columnFilter type="text" field="sdmName"
                                                                            display="menu" class="p-ml-auto">
                                                                        </p-columnFilter>
                                                                    </div>
                                                                </div>
                                                            </th>
                                                            <th rowspan="2" class="wd-8 text-center">
                                                                <div class="p-d-flex p-jc-between p-ai-center ml-45">
                                                                    Description
                                                                    <div class="Sort_Filter_Position">
                                                                        <p-sortIcon field="sdmDescription">
                                                                        </p-sortIcon>
                                                                        <p-columnFilter type="text"
                                                                            field="sdmDescription" display="menu"
                                                                            class="p-ml-auto">
                                                                        </p-columnFilter>
                                                                    </div>
                                                                </div>
                                                            </th>
                                                            <th rowspan="2" class="wd-8 text-center">
                                                                <div class="p-d-flex p-jc-between p-ai-center ml-45">
                                                                    Module Count
                                                                    <div class="Sort_Filter_Position">
                                                                        <p-sortIcon field="moduleCount">
                                                                        </p-sortIcon>
                                                                        <p-columnFilter type="text" field="moduleCount"
                                                                            display="menu" class="p-ml-auto">
                                                                        </p-columnFilter>
                                                                    </div>
                                                                </div>
                                                            </th>
                                                            <th rowspan="2" class="wd-8 text-center">
                                                                <div class="p-d-flex p-jc-between p-ai-center ml-45">
                                                                    Source Count

                                                                    <div class="Sort_Filter_Position">
                                                                        <p-sortIcon field="sourceCount">
                                                                        </p-sortIcon>
                                                                        <p-columnFilter type="text" field="sourceCount"
                                                                            display="menu" class="p-ml-auto">
                                                                        </p-columnFilter>
                                                                    </div>
                                                                </div>
                                                            </th>
                                                            <th rowspan="2" class="wd-8 text-center">
                                                                <div class="p-d-flex p-jc-between p-ai-center ml-35">
                                                                    Range
                                                                    applicable
                                                                    <div class="Sort_Filter_Position">
                                                                        <p-sortIcon field="rangeApplicableStatus">
                                                                        </p-sortIcon>
                                                                        <p-columnFilter type="text"
                                                                            field="rangeApplicableStatus" display="menu"
                                                                            class="p-ml-auto">
                                                                        </p-columnFilter>
                                                                    </div>
                                                                </div>
                                                            </th>
                                                            <th rowspan="2" class="wd-8 text-center">
                                                                <div class="p-d-flex p-jc-between p-ai-center ml-35">
                                                                    Derived Count
                                                                    <div class="Sort_Filter_Position">
                                                                        <p-sortIcon field="derivedCount">
                                                                        </p-sortIcon>
                                                                        <p-columnFilter type="text" field="derivedCount"
                                                                            display="menu" class="p-ml-auto">
                                                                        </p-columnFilter>
                                                                    </div>
                                                                </div>
                                                            </th>
                                                            <th rowspan="2" class="wd-8 text-center">
                                                                Action
                                                            </th>
                                                        </tr>
                                                    </ng-template>
                                                    <ng-template pTemplate="body" let-summery let-rowIndex="rowIndex">
                                                        <tr class="p-selectable-row">
                                                            <td class="text-center">{{rowIndex+1}}</td>
                                                            <td class="text-center">{{summery.sdmName}}</td>
                                                            <td class="text-center">{{summery.sdmDescription}}</td>
                                                            <td class="text-center">
                                                                <span
                                                                    class="badge badge-pill badge-success">{{summery.moduleCount}}</span>
                                                            </td>
                                                            <td class="text-center">
                                                                <span
                                                                    class="badge badge-pill badge-success">{{summery.sourceCount}}</span>
                                                            </td>
                                                            <td class="text-center">{{summery.rangeApplicableStatus}}
                                                            </td>
                                                            <td class="text-center">
                                                                <span
                                                                    class="badge badge-pill badge-success">{{summery.derivedCount}}</span>
                                                            </td>
                                                            <td class="text-center">
                                                                <i class="fa fa-edit font-16 text-dark-green cursor-pointer"
                                                                    (click)="editSummaryData(summery)"
                                                                    tooltip="Edit"></i>&nbsp;
                                                                <i class="fa fa-eye font-16 text-blue cursor-pointer"
                                                                    tooltip="View"></i>&nbsp;
                                                                <!-- <i class="fa fa-trash font-16 text-red cursor-pointer"
                                                                    tooltip="Delete"></i> -->
                                                            </td>
                                                        </tr>
                                                    </ng-template>
                                                    <ng-template pTemplate="emptymessage">
                                                        <tr>
                                                            <td colspan="15"
                                                                class="font-14 font500 text-center text-red"><span>No
                                                                    Data
                                                                    Available</span>
                                                            </td>
                                                        </tr>
                                                    </ng-template>
                                                </p-table>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                                <div class="row mt-15 float-right"> </div>
                            </div>
                            <div class="mb-0" *ngIf="summeryFlag">
                                <h3 class="font-14 text-purple font-bold"> {{titleValue}}
                                </h3>&nbsp;
                            </div>
                            <br>

                            <!--stepper indexes open-->
                            <div class="row divided" *ngIf="summeryFlag" style="padding-left: 176px;margin-top: -33px;">
                                <!-- <div class="col-sm-3">
                               <button class="stepbutton" (click)="abc(0)">Summary</button>
                             </div> -->
                                <div class="col-sm-3 ">
                                    <button class="stepbutton" style="border-radius: 51%;height: 69%;width: 20%;">
                                        <div *ngIf="stepperIndex > 1 then thenBlock1 else elseBlock1"></div>
                                        <ng-template #thenBlock1>
                                            <i class="fa fa-check"></i>
                                        </ng-template>
                                        <ng-template #elseBlock1>
                                            <i class="fa fa-edit" *ngIf="stepperIndex ===1"></i>
                                            <span *ngIf="stepperIndex !=1">1</span>
                                        </ng-template>
                                    </button>
                                </div>
                                <span [@stateAnimation] class="divider-grey" *ngIf="stepperIndex < 2"></span>
                                <span [@stateAnimation] class="divider-green" *ngIf="stepperIndex >= 2"></span>
                                <div class="col-sm-3">
                                    <button class="stepbutton" style="border-radius: 51%;height: 69%;width: 20%;">
                                        <div *ngIf="stepperIndex > 2 then thenBlock2 else elseBlock2"></div>
                                        <ng-template #thenBlock2>
                                            <i class="fa fa-check"></i>
                                        </ng-template>
                                        <ng-template #elseBlock2>
                                            <i class="fa fa-edit" *ngIf="stepperIndex ===2"></i>
                                            <span *ngIf="stepperIndex !=2">2</span>
                                        </ng-template>
                                    </button>
                                </div>
                                <span [@stateAnimation] class="divider-grey" *ngIf="stepperIndex < 3"></span>
                                <span [@stateAnimation] class="divider-green" *ngIf="stepperIndex >= 3"></span>
                                <div class="col-sm-3">
                                    <button class="stepbutton" style="border-radius: 51%;height: 69%;width: 20%;">
                                        <div *ngIf="stepperIndex > 3 then thenBlock3 else elseBlock3"></div>
                                        <ng-template #thenBlock3>
                                            <i class="fa fa-check"></i>
                                        </ng-template>
                                        <ng-template #elseBlock3>
                                            <i class="fa fa-edit" *ngIf="stepperIndex ===3"></i>
                                            <span *ngIf="stepperIndex !=3">3</span>
                                        </ng-template>
                                    </button>
                                </div>
                                <span [@stateAnimation] class="divider-grey" *ngIf="stepperIndex < 4"></span>
                                <span [@stateAnimation] class="divider-green" *ngIf="stepperIndex >= 4"></span>
                                <div class="col-sm-3">
                                    <button class="stepbutton" style="border-radius: 51%;height: 69%;width: 20%;">
                                        <div *ngIf="stepperIndex > 4 then thenBlock4 else elseBlock4"></div>
                                        <ng-template #thenBlock4>
                                            <i class="fa fa-check"></i>
                                        </ng-template>
                                        <ng-template #elseBlock4>
                                            <i class="fa fa-edit" *ngIf="stepperIndex ===4"></i>
                                            <span *ngIf="stepperIndex !=4">4</span>
                                        </ng-template>
                                    </button>
                                </div>
                            </div>
                            <!--stepper indexes exit-->
                            <div class="row divided" *ngIf="summeryFlag">
                                <div class="col-sm-4 stepperIndex" style="padding-left: 185px;">Source</div>
                                <div class="col-sm-4 stepperIndex" style="padding-left: 112px;">Source Combination</div>
                                <div class="col-sm-4 stepperIndex" style="padding-left: 117px;">Derived</div>
                                <div class="col-sm-4 stepperIndex" style="padding-left: 88px;">Matrix</div>
                            </div>

                            <div class="tabview-contents" *ngIf="summeryFlag">
                                <div [ngSwitch]="stepperIndex">

                                    <div *ngSwitchCase="0" [@slideInOut]>
                                        <div class="row mt-20">
                                            <div class="col-12">
                                                <div class="table-responsive Custom_Table">
                                                    <table class="table table-striped table-hover table-bordered m-b-0">
                                                        <thead class="thead-dark">
                                                            <tr>
                                                                <th rowspan="2" class="wd-20" scope="col">Sr. No.</th>
                                                                <th rowspan="2" class="wd-20" scope="col">Code</th>
                                                                <th rowspan="2" class="wd-20" scope="col">Description
                                                                </th>
                                                                <th rowspan="2" class="wd-20" scope="col">Module</th>
                                                                <th colspan="5" class="wd-30" scope="col">Source</th>
                                                                <th rowspan="2" scope="col">No. of Derived</th>
                                                                <th rowspan="2" scope="col">Action</th>
                                                            </tr>
                                                            <tr>
                                                                <th scope="col">1</th>
                                                                <th scope="col">2</th>
                                                                <th scope="col">3</th>
                                                                <th scope="col">4</th>
                                                                <th scope="col">5</th>

                                                            </tr>
                                                        </thead>
                                                        <tbody>
                                                            <tr *ngFor="let summary of summaryGridData; let i = index">
                                                                <td>
                                                                    {{summary.loanCode}}
                                                                </td>
                                                                <td>{{summary.loanDescription}}
                                                                </td>
                                                                <!-- <td class="wd-20">
                                                                    <span tooltip="{{summary.accountHolderName}}">
                                                                        {{summary.accountHolderName}}
                                                                    </span>
                                                                </td> -->
                                                                <td>
                                                                    <span>
                                                                        {{summary.recoveryMethod}}
                                                                    </span>
                                                                </td>
                                                                <td>
                                                                    {{summary.intRate}}
                                                                </td>
                                                                <td>
                                                                    {{summary.recoveryNoOfInstallments}}
                                                                </td>
                                                                <td class="wd-10"><i
                                                                        class="fa fa-edit font-16 text-dark-green cursor-pointer"
                                                                        (click)="editSummary(summary)"
                                                                        tooltip="Edit"></i>&nbsp;&nbsp;
                                                                    <i (click)="viewSummary(summary)"
                                                                        class="fa fa-eye font-16 text-blue cursor-pointer"
                                                                        tooltip="View"></i>
                                                                </td>
                                                            </tr>
                                                            <tr *ngIf="!summaryGridData?.length">
                                                                <td colspan="13">
                                                                    <span
                                                                        class="font-14 font500 align-center text-red">No
                                                                        Data
                                                                        Available</span>
                                                                </td>
                                                            </tr>
                                                        </tbody>
                                                    </table>
                                                </div>
                                            </div>
                                        </div>
                                    </div>

                                    <form [formGroup]="sdmFormStep1">
                                        <div *ngSwitchCase="1" [@slideInOut]>
                                            <div class="">
                                                <div class="row d-flex"
                                                    style="border: 1px solid #ccc; background-color: #fff;padding-top: 25px ;padding-bottom:25px;border-radius:2px;">
                                                    <div class="ml-2 pl-1 pr-0">
                                                        <label class="form-label mt-2">
                                                            Module<span class="text-red"></span></label>
                                                    </div>
                                                    <div class="col-2">
                                                        <ng-multiselect-dropdown class="form-control"
                                                            [placeholder]="'Select Module'"
                                                            [settings]="ModuledropdownSettings" [data]="moduleData"
                                                            (onSelect)="moduleSelectDataValue($event)"
                                                            (onDeSelect)="deModuleSelectValueListDataValue($event)"
                                                            [(ngModel)]="moduleIdListd"
                                                            [ngModelOptions]="{standalone: true}"
                                                            [ngClass]="{'is-invalid' : moduleIdListd == ''}"
                                                            (onSelectAll)="onModuleSelectAllValueListDataValue($event)">
                                                        </ng-multiselect-dropdown>
                                                    </div>
                                                    <div class="ml-2 pl-1 pr-0">
                                                        <label class="form-label mt-2">
                                                            Code<span class="text-red"></span></label>
                                                    </div>
                                                    <div class="col-2">
                                                        <input type="text" class="form-control"
                                                            [ngClass]="{'is-invalid' : sdmFormStep1.get('sdmName').status == 'INVALID'}"
                                                            formControlName="sdmName">
                                                    </div>
                                                    <div class="ml-2 pl-1 pr-0">
                                                        <label class="form-label mt-2">
                                                            Description<span class="text-red"></span></label>
                                                    </div>
                                                    <div class="col-2">
                                                        <input type="text" class="form-control"
                                                            [ngClass]="{'is-invalid' : sdmFormStep1.get('sdmDescription').status == 'INVALID'}"
                                                            formControlName="sdmDescription">
                                                    </div>
                                                    &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
                                                    <div class="float-left d-flex justify-content">
                                                        <input type="checkbox" class="mt-2"
                                                            (click)="sdm1FormActive($event.target)"
                                                            [checked]="sdmForm1ActiveFlag" />&nbsp;
                                                        <label class="main"><span class="form-label">Active</span>
                                                            <input (click)="sdm1FormActive($event.target)"
                                                                type="checkbox" formControlName="isActive"
                                                                [checked]="sdmForm1ActiveFlag">
                                                            <span class="geekmark"></span>
                                                        </label>
                                                        &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
                                                        <label class="form-label mt-2"
                                                            *ngIf="!sdmForm1ActiveFlag">Remark</label>&nbsp;
                                                        <textarea class="form-control" formControlName="sdmRemark"
                                                            *ngIf="!sdmForm1ActiveFlag"
                                                            [ngClass]="{'is-invalid' : !sdmForm1ActiveFlag}"></textarea>
                                                    </div>
                                                </div>
                                            </div>

                                            <fieldset>
                                                <legend>Source</legend>
                                                <div class="row">
                                                    <div class="col-10">
                                                        <p-table [value]="users1" [paginator]="true" [rows]="50"
                                                            [showCurrentPageReport]="true"
                                                            currentPageReportTemplate="Showing {first} to {last} of {totalRecords} entries"
                                                            [rowsPerPageOptions]="[10,25,50,100,200]">

                                                            <ng-template pTemplate="header">
                                                                <tr>
                                                                    <th rowspan="2" class=" text-center">
                                                                        Sr. No.
                                                                    </th>
                                                                    <th rowspan="2" class="text-center">
                                                                        <div class="p-d-flex p-jc-between p-ai-center"
                                                                            style="margin-left: 169px;">Table Name
                                                                            <div class="Sort_Filter_Position">
                                                                                <p-sortIcon field="tableName">
                                                                                </p-sortIcon>
                                                                                <p-columnFilter type="text"
                                                                                    field="tableName"
                                                                                    display="menu" class="p-ml-auto">
                                                                                </p-columnFilter>
                                                                            </div>
                                                                        </div>
                                                                    </th>
                                                                    <th rowspan="2" class="text-center">
                                                                        <div
                                                                            class="p-d-flex p-jc-between p-ai-center ml-90">
                                                                            Field Type
                                                                            <div class="Sort_Filter_Position">
                                                                                <p-sortIcon field="derivedCount">
                                                                                </p-sortIcon>
                                                                                <p-columnFilter type="text"
                                                                                    field="derivedCount" display="menu"
                                                                                    class="p-ml-auto">
                                                                                </p-columnFilter>
                                                                            </div>
                                                                        </div>
                                                                    </th>
                                                                    <th rowspan="2" class="text-center">
                                                                        <div
                                                                            class="p-d-flex p-jc-between p-ai-center ml-75">
                                                                            Values
                                                                            <div class="Sort_Filter_Position">
                                                                                <p-sortIcon field="derivedCount">
                                                                                </p-sortIcon>
                                                                                <p-columnFilter type="text"
                                                                                    field="derivedCount" display="menu"
                                                                                    class="p-ml-auto">
                                                                                </p-columnFilter>
                                                                            </div>
                                                                        </div>
                                                                    </th>
                                                                    <th rowspan="2" class="text-center">Source Value
                                                                        Count
                                                                        <div class="Sort_Filter_Position">
                                                                            <p-sortIcon field="derivedCount">
                                                                            </p-sortIcon>
                                                                            <p-columnFilter type="text"
                                                                                field="derivedCount" display="menu"
                                                                                class="p-ml-auto">
                                                                            </p-columnFilter>
                                                                        </div>
                                                                    </th>
                                                                    <th rowspan="2" class="text-center">Action</th>
                                                                </tr>
                                                            </ng-template>

                                                            <ng-template pTemplate="body" let-user1>
                                                                <tr class="p-selectable-row text-center">
                                                                    <td class="text-center"></td>
                                                                    <td class="text-center">
                                                                        <select name="Select" class="form-control"
                                                                            [(ngModel)]="tablevalue"
                                                                            [ngModelOptions]="{standalone: true}"
                                                                            [disabled]="editTableColDisabled || editTempFlag || editTempFlag1 || updateBtnFlag"
                                                                            (change)="fieldTypeList($event.target.value,1)">
                                                                            <option>Select</option>
                                                                            <option *ngFor="let table of tableListData"
                                                                                value="{{table.sdmSourceObjectMasterId}},{{table.sourceObjectName}}">
                                                                                {{table.sourceObjectName}}
                                                                            </option>
                                                                        </select>
                                                                    </td>
                                                                    <td class="text-center">
                                                                        <select name="Select" class="form-control"
                                                                            [(ngModel)]="fieldtypevalue"
                                                                            [ngModelOptions]="{standalone: true}"
                                                                            [disabled]="editTableColDisabled || editTempFlag || editTempFlag1 || updateBtnFlag"
                                                                            *ngIf="sourceMasterName != 'SPAndFunctionMaster'"
                                                                            (change)="valuesList1($event.target.value)">
                                                                            <option>Select</option>
                                                                            <option *ngFor="let field of fieldTypeData"
                                                                                value="{{field.sourceMasterId}},{{field.sourceTableId}},{{field.sourceFieldTypeName}}">
                                                                                {{field.sourceFieldTypeName}}
                                                                            </option>
                                                                        </select>

                                                                        <!-- <ngx-select-dropdown tabindex="0" (change)="valuesList($event.target.value)" [multiple]="true" 
                                                                        *ngIf="sourceMasterName == 'SPAndFunctionMaster'"
                                                                        [(ngModel)]="fieldtypevalue"  [config]="config" [options]="fieldTypeData" 
                                                                        [ngModelOptions]="{standalone: true}"
                                                                        [disabled]="editTableColDisabled || editTempFlag || editTempFlag1 || updateBtnFlag"
                                                                        
                                                                       ></ngx-select-dropdown> -->

                                                                        <input type="text" [(ngModel)]="fieldtypevalue"
                                                                            [ngModelOptions]="{standalone : true}"
                                                                            list="dist" name="dist"
                                                                            class="form-control select_custom"
                                                                            placeholder="Select"
                                                                            [disabled]="editTableColDisabled || editTempFlag || editTempFlag1 || updateBtnFlag"
                                                                            (change)="valuesList($event.target.value)"
                                                                            *ngIf="sourceMasterName == 'SPAndFunctionMaster'" />
                                                                        <datalist id="dist" style="border: 1px solid #ced4da !important;
                                                                               padding: 0 0.5rem !important;"
                                                                            [disabled]="editTableColDisabled || editTempFlag || editTempFlag1 || updateBtnFlag">
                                                                            <option *ngFor="let field of fieldTypeData"
                                                                                value="{{field.sourceFieldTypeName}}">
                                                                                {{field.sourceFieldTypeName}}
                                                                            </option>
                                                                        </datalist>

                                                                        <!-- {{field.sourceFieldId}},{{field.sourceTableId}}, -->
                                                                    </td>
                                                                    <td class="text-center">

                                                                        <ng-multiselect-dropdown
                                                                            *ngIf="valueListData && sourceMasterName != 'SPAndFunctionMaster'"
                                                                            [placeholder]="'Select'"
                                                                            [settings]="dropdownSettings"
                                                                            [data]="valueListData"
                                                                            [disabled]="isDisabled"
                                                                            [(ngModel)]="valuelist"
                                                                            [ngModelOptions]="{standalone: true}"
                                                                            (onSelect)="valueListDataValue($event)"
                                                                            (onDeSelect)="deSelectValueListDataValue($event)"
                                                                            (onSelectAll)="onSelectAllValueListDataValue($event)">
                                                                        </ng-multiselect-dropdown>

                                                                        <select class="form-control"
                                                                            (change)="getSelectedValue($event.target.value)"
                                                                            *ngIf="sourceMasterName == 'SPAndFunctionMaster'"
                                                                            [(ngModel)]="sourceValueId"
                                                                            [ngModelOptions]="{standalone: true}">
                                                                            <option>Select</option>
                                                                            <option *ngFor="let value of valueListData"
                                                                                value="{{value.sourceValueId}}">
                                                                                {{value.sourceValueName}}
                                                                            </option>
                                                                        </select>

                                                                    </td>
                                                                    <td></td>
                                                                    <td class="text-center">
                                                                        <i [style.opacity]="tablevalue == '' ? '0.6 ': null"
                                                                            [class.cursorStyle]="tablevalue == ''"
                                                                            *ngIf="!editTempFlag"
                                                                            class="fa fa-plus-circle font-16 text-dark-green cursor-pointer"
                                                                            (click)="addSource()"
                                                                            tooltip="Add"></i>&nbsp;
                                                                        <i *ngIf="editTempFlag"
                                                                            class="fa fa-plus-circle font-16 text-dark-green cursor-pointer"
                                                                            (click)="updateSource()"
                                                                            tooltip="Update"></i>&nbsp;
                                                                    </td>
                                                                </tr>
                                                                <tr class="p-selectable-row text-center"
                                                                    *ngFor="let temp of tempSourceTable; let index = index">
                                                                    <td class="text-center">{{index+1}} </td>
                                                                    <td class="text-center">
                                                                        {{temp.tableName}}
                                                                    </td>
                                                                    <td class="text-center">
                                                                        {{temp.fieldType}}
                                                                    </td>
                                                                    <td class="text-center"
                                                                        [tooltip]="temp.valueId.toString()">
                                                                        {{temp.valueId.toString() | ellipsis}}
                                                                    </td>
                                                                    <td class="text-center">
                                                                        <span
                                                                            class="badge badge-pill badge-success">{{temp.count}}</span>
                                                                    </td>
                                                                    <td class="text-center">
                                                                        <i class="fa fa-edit font-16 text-dark-green cursor-pointer"
                                                                            (click)="editSource(temp,index)"
                                                                            tooltip="Edit"></i>&nbsp;&nbsp;
                                                                        <i class="fa fa-times font-16 text-red cursor-pointer"
                                                                            (click)="removeSource(index)"
                                                                            tooltip="Remove"
                                                                            *ngIf="!editTempFlag && !editTempFlag1"></i>&nbsp;
                                                                    </td>
                                                                </tr>
                                                            </ng-template>

                                                            <ng-template pTemplate="emptymessage">
                                                                <tr>
                                                                    <td colspan="15"
                                                                        class="font-14 font500 text-center text-red">
                                                                        <span>No Data
                                                                            Available</span>
                                                                    </td>
                                                                </tr>
                                                            </ng-template>
                                                        </p-table>
                                                    </div>
                                                </div>
                                                <br>
                                                <br>
                                                <div class="row d-flex">
                                                    <!-- *ngIf="sourceMasterName == 'SPAndFunctionMaster' || enableSourcePeriod" -->
                                                    <div class="ml-2 pl-1 pr-0">
                                                        <label class="form-label mt-2">
                                                            Source Period
                                                            <span class="text-red"></span></label>
                                                    </div>
                                                    <div class="col-2">
                                                        <input type="text" formControlName="sourcePeriod" list="dist1"
                                                            name="dist1" class="form-control select_custom"
                                                            placeholder="Select"
                                                            (change)="searchChange($event.target.value)" />
                                                        <datalist id="dist1" style="border: 1px solid #ced4da !important;
                                                                     padding: 0 0.5rem !important;">
                                                            <option *ngFor="let data of options" value="{{data.name}}">
                                                                {{data.name}}
                                                            </option>
                                                        </datalist>


                                                    </div>

                                                    &nbsp;&nbsp;&nbsp;



                                                </div>

                                                <br>

                                                <div class="row mt-15 float-right">
                                                    <div class="float-right ">



                                                        <button
                                                            *ngIf="!editTempFlag && !editTempFlag1 && !updateBtnFlag"
                                                            type="submit"
                                                            [disabled]="sdmFormStep1.invalid || tempSourceTable.length == 0 || !sdmForm1ActiveFlag"
                                                            (click)="getStepper(1);saveSourceDerivedMatrix()"
                                                            class="custom_button custom_btn btn-bg-green btn-labeled btn-labeled-left ripple"
                                                            [ngClass]="{'disabled-btn-bg-green' : sdmFormStep1.invalid || tempSourceTable.length == 0 || !sdmForm1ActiveFlag,'btn-bg-green': !sdmFormStep1.invalid}"
                                                            tooltip="Save" [disabled]="step1FormDisableFlag"><b>
                                                                <i class="fa fa-floppy-o"></i></b>Save</button>&nbsp;
                                                        <button type="button"
                                                            *ngIf="editTempFlag || editTempFlag1 || updateBtnFlag"
                                                            (click)="updateSourceDriveMatrix()"
                                                            class="custom_button custom_btn btn-bg-green btn-labeled btn-labeled-left ripple"
                                                            [ngClass]="{'disabled-btn-bg-green' : sdmFormStep1.invalid,'btn-bg-green': !sdmFormStep1.invalid}"
                                                            tooltip="Save" [disabled]="sdmFormStep1.invalid"><b>
                                                                <i class="fa fa-floppy-o"></i></b>Update</button>&nbsp;
                                                        <button type="button" tooltip="Next"
                                                            (click)="getStepper(1);next();sourceCombination();"
                                                            class="custom_button custom_btn bg-teal-400 btn-labeled btn-labeled-left ripple"
                                                            tooltip="Next"
                                                            [ngClass]="{'disabled-btn-bg-green' : sdmMasterId == null}"><b>
                                                                <i
                                                                    class="fa fa-angle-double-right"></i></b>Next</button>&nbsp;
                                                        <!-- [disabled]="sdmMasterId == null" -->
                                                        <!-- <button type="button" (click)="resetSdmForm1()"
                                                            [disabled]="editTempFlag"
                                                            class="custom_button custom_btn bg-teal-400 btn-labeled btn-labeled-left ripple"
                                                            tooltip="Reset"><b>
                                                                <i class="fa fa-refresh"></i></b> Reset</button>&nbsp; -->
                                                    </div>
                                                </div>
                                            </fieldset>
                                        </div>
                                    </form>
                                    <br>

                                    <div *ngSwitchCase="2" [@slideInOut]>

                                        <div class="row">
                                            <div class="col-8">
                                                <label class="form-label font-bold font-14">Total :({{srcCombLength}})
                                                    &nbsp;&nbsp;Selected Count :({{SelectedCount}}) </label>


                                                <a tooltip="Download" style="cursor: pointer;float: right;"
                                                    (click)="excelDownload('tblData', 'Source Combination')"><i
                                                        class="fa fa-file-excel-o font-18 text-dark-green pt-10  mr-10"
                                                        aria-hidden="true"></i></a>
                                            </div>
                                            <div class="col-4">

                                            </div>
                                        </div>

                                        <div class="row">
                                            <div class="col-8">
                                                <div class="card">
                                                    <div class="table-responsive Custom_Table">
                                                        <p-table [value]="sdmSourceCombinationListData"
                                                            [paginator]="true" [rows]="10"
                                                            [showCurrentPageReport]="true"
                                                            currentPageReportTemplate="Showing {first} to {last} of {totalRecords} entries"
                                                            [rowsPerPageOptions]="[10,25,50]">

                                                            <ng-template pTemplate="header">
                                                                <tr>
                                                                   
                                                                    <th rowspan="3" class="wd-2 text-center">
                                                                        Select
                                                                    </th>
                                                                    <!-- [colspan]="10" -->
                                                                    <th [attr.colspan]="sourceFieldListData.length" class="wd-6 text-center">
                                                                        <div class="p-d-flex p-jc-between p-ai-center"
                                                                            style="margin-left: 330px;">Source
                                                                            Fields 
                                                                        </div>
                                                                    </th>
                                                                </tr>
                                                                <tr>
                                                                    <th rowspan="2" class=" text-center"
                                                                        *ngFor="let header of sourceFieldListData">
                                                                        <div
                                                                            class="p-d-flex p-jc-between p-ai-center text-center">
                                                                            {{header}}
                                                                            <div class="Sort_Filter_Position">
                                                                                <p-sortIcon field="header">
                                                                                </p-sortIcon>
                                                                                <p-columnFilter type="text"
                                                                                    field="header" display="menu"
                                                                                    class="p-ml-auto">
                                                                                </p-columnFilter>
                                                                            </div>
                                                                        </div>
                                                                    </th>
                                                                </tr>
                                                            </ng-template>

                                                            <ng-template pTemplate="body" let-srcCombData>
                                                                <tr class="p-selectable-row">
                                                                    <td class="text-center">
                                                                        <label
                                                                            class="custom-control custom-checkbox checkbox-center">
                                                                            <input type="checkbox"
                                                                                class="custom-control-input"
                                                                                [checked]="srcCombData.active == true"
                                                                                (click)="selectSrcCombination($event.target,srcCombData)"
                                                                                name="select" />
                                                                            <span class="custom-control-label"></span>
                                                                        </label>

                                                                    </td>
                                                                    <td class="text-center"
                                                                        *ngFor="let header of sourceFieldListData">
                                                                        <span
                                                                            *ngIf="header == 'payrollArea'">{{srcCombData.payrollAreaId}}</span>
                                                                        <span
                                                                            *ngIf="header == 'Establishment'">{{srcCombData.establishmentMasterId}}</span>
                                                                        <span
                                                                            *ngIf="header == 'SubLocation'">{{srcCombData.subLocationMasterId}}</span>
                                                                        <span
                                                                            *ngIf="header == 'Location'">{{srcCombData.subLocationMasterId}}</span>
                                                                        <span
                                                                            *ngIf="header == 'WorkLocation'">{{srcCombData.workLocationMasterId}}</span>
                                                                        <span
                                                                            *ngIf="header == 'BusinessArea'">{{srcCombData.businessAreaMasterId}}</span>
                                                                        <span
                                                                            *ngIf="header == 'SubArea'">{{srcCombData.subAreaId}}</span>
                                                                        <span
                                                                            *ngIf="header == 'StrategicBusinessUnit'">{{srcCombData.strategicBusinessUnitId}}</span>
                                                                        <span
                                                                            *ngIf="header == 'Division'">{{srcCombData.divisionMasterId}}</span>
                                                                        <span
                                                                            *ngIf="header == 'Department'">{{srcCombData.departmentMasterId}}</span>
                                                                        <span
                                                                            *ngIf="header == 'SubDepartment'">{{srcCombData.subDepartmentId}}</span>
                                                                        <span
                                                                            *ngIf="header == 'CostCentre'">{{srcCombData.costCentreId}}</span>
                                                                        <span
                                                                            *ngIf="header == 'SubCostCenter'">{{srcCombData.subCostCenterId}}</span>
                                                                        <span
                                                                            *ngIf="header == 'ProfitCentre'">{{srcCombData.profitCentreMasterId}}</span>
                                                                        <span
                                                                            *ngIf="header == 'Grade'">{{srcCombData.gradeMasterId}}</span>
                                                                        <span
                                                                            *ngIf="header == 'Designation1'">{{srcCombData.designation1MasterId}}</span>
                                                                        <span
                                                                            *ngIf="header == 'Designation2'">{{srcCombData.designation2MasterId}}</span>
                                                                        <span
                                                                            *ngIf="header == 'Designation2'">{{srcCombData.designation2MasterId}}</span>
                                                                        <span
                                                                            *ngIf="header == 'functionName'">{{srcCombData.spAndFunctionMasterId}}</span>
                                                                        <span
                                                                            *ngIf="header == 'genderType'">{{srcCombData.genderId}}</span>
                                                                        <span
                                                                            *ngIf="header == 'employeeTaxCategoryId'">{{srcCombData.employeeTaxCategoryId}}</span>

                                                                        <span
                                                                            *ngIf="header == 'employeeTypeId'">{{srcCombData.employeeTypeId}}</span>
                                                                    </td>
                                                                </tr>
                                                            </ng-template>

                                                            <ng-template pTemplate="emptymessage">
                                                                <tr>
                                                                    <td colspan="15"
                                                                        class="font-14 font500 text-center text-red">
                                                                        <span>No Data
                                                                            Available</span>
                                                                    </td>
                                                                </tr>
                                                            </ng-template>
                                                        </p-table>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>

                                        <div class="row mt-15 float-right" style="margin-top: -25px;">
                                            <div class="float-right ">
                                                

                                                <button type="submit" (click)="step2Submit()" *ngIf="editFlag"
                                                    class="custom_button custom_btn btn-bg-green btn-labeled btn-labeled-left ripple"
                                                    tooltip="Update"><b>
                                                        <i class="fa fa-floppy-o"></i></b> Update</button>&nbsp;
                                                <button type="submit" (click)="step2Submit()" *ngIf="!editFlag"
                                                    class="custom_button custom_btn btn-bg-green btn-labeled btn-labeled-left ripple"
                                                    tooltip="Save"><b>
                                                        <i class="fa fa-floppy-o"></i></b> Save</button>&nbsp;
                                                        <button type="button"
                                                    (click)="getStepper(2);previous();sourceCombination();"
                                                    class="custom_button custom_btn bg-teal-400 btn-labeled btn-labeled-left ripple"
                                                    tooltip="Previous"><b>
                                                        <i class="fa fa-angle-double-left"></i></b>
                                                    Previous</button>&nbsp;
                                                <button type="button"
                                                    (click)="getStepper(2);next();derivedType();KeywordMasterDetails();"
                                                    class="custom_button custom_btn bg-teal-400 btn-labeled btn-labeled-left ripple"
                                                    tooltip="Next"><b>
                                                        <i class="fa fa-angle-double-right"></i></b>Next</button>&nbsp;
                                                <!-- derivedTablesFields(); -->

                                                <!-- <button type="button"
                                                    class="custom_button custom_btn bg-teal-400 btn-labeled btn-labeled-left ripple"
                                                    tooltip="Reset"><b>
                                                        <i class="fa fa-refresh"></i></b> Reset</button>&nbsp; -->
                                            </div>
                                        </div>
                                    </div>

                                    <div *ngSwitchCase="3" [@slideInOut]>
                                        <form [formGroup]="sdmFormStep3">
                                            <div class="row mt-37">
                                                <div class="col-12">
                                                    <fieldset>
                                                        <legend>Derived</legend>
                                                        <div class="row">
                                                            <div class="ml-2 pl-1 pr-0">
                                                                <label class="form-label mt-2">
                                                                    Derived Applicable
                                                                    <span class="text-red"></span></label>
                                                            </div>
                                                            <div class="col-5">
                                                                <div class="custom-controls-stacked"
                                                                    style="padding-top: 3px;">
                                                                    <label
                                                                        class="custom-control custom-radio custom-control-inline">
                                                                        <input
                                                                            (click)="derivedApplicable($event.target.value)"
                                                                            type="radio" class="custom-control-input"
                                                                            name="example-inline-radios" value="Yes" 
                                                                            [checked]="derivedApplicableFlag == 1 || derivedApplicableFlag == '1'">
                                                                            <!--  -->
                                                                        <span class="custom-control-label">Yes</span>
                                                                    </label>
                                                                    <label
                                                                        class="custom-control custom-radio custom-control-inline">
                                                                        <input
                                                                            (click)="derivedApplicable($event.target.value)"
                                                                            type="radio" class="custom-control-input"
                                                                            name="example-inline-radios" value="No"
                                                                           >
                                                                           <!-- [checked]="derivedApplicableFlag == 0" -->
                                                                        <span class="custom-control-label">No</span>
                                                                    </label>

                                                                </div>
                                                            </div>
                                                        </div>
                                                        <br>
                                                        <div class="row mt-10" [hidden]="derivedApplicableFlag == 0">

                                                            <div class="col-sm-3">

                                                                <label class="form-label"> Derived Name</label>
                                                                <input formControlName="derivedName" type="text"
                                                                    (focusout)="checkderivednameexist($event.target.value)"
                                                                    [ngClass]="{'is-invalid' : sdmFormStep3.get('derivedName').status == 'INVALID' || derivednameexist}"
                                                                    class="form-control">

                                                                <div class="text-danger" *ngIf="derivednameexist"
                                                                    style="color: red !important;">
                                                                    <span style="color: red !important;">Derived name
                                                                        already exist.</span>
                                                                </div>
                                                            </div>
                                                            <div class="col-sm-3">
                                                                <label class="form-label">Module</label>
                                                                <select name="custom-select" class="form-control"
                                                                    formControlName="moduleIdList"
                                                                    [ngClass]="{'is-invalid' : sdmFormStep3.get('moduleIdList').status == 'INVALID'}"
                                                                    (change)="getSelectedDerivedModule($event.target.value)">
                                                                    <option value="Select">Select</option>
                                                                    <option *ngFor="let mod of moduleData"
                                                                        value="{{mod.applicationModuleId}}">
                                                                        {{mod.applicationModuleName}}</option>
                                                                </select>
                                                            </div>
                                                            <div class="col-sm-3">
                                                                <label class="form-label">Derived Type</label>
                                                                <select name="custom-select" class="form-control"
                                                                    formControlName="sdmDerivedTypeId"
                                                                    [ngClass]="{'is-invalid' : sdmFormStep3.get('sdmDerivedTypeId').status == 'INVALID'}"
                                                                    (change)="getDerivedType($event.target.value)">
                                                                    <option value="Select">Select</option>
                                                                    <option value="{{derive.sdmDerivedTypeId}}"
                                                                        *ngFor="let derive of derivedTypeData">
                                                                        <span
                                                                            *ngIf="derive.derivedType != 'JobField'">{{derive.derivedType}}</span>
                                                                        <span
                                                                            *ngIf="derive.derivedType == 'JobField'">Master</span>
                                                                    </option>
                                                                </select>
                                                            </div>
                                                            <!-- {{derivedTypeName}} -->
                                                            <div class="col-sm-3"
                                                                *ngIf="derivedTypeName == 'Percentage'">
                                                                <label class="form-label">Percentage (%) of
                                                                </label>
                                                                <!-- <select name="custom-select" class="form-control"
                                                                    [required]="derivedTypeName == 'Percentage'"
                                                                    [ngClass]="{'is-invalid' : sdmFormStep3.get('percentageOf').status == 'INVALID'}"
                                                                    formControlName="percentageOf">
                                                                    <option value="Select">Select</option>
                                                                    <option *ngFor="let key of keywordData">
                                                                        {{key.originalFormula}}</option>
                                                                </select> -->

                                                                <input type="text" formControlName="percentageOf"
                                                                    list="dist2" name="dist2"
                                                                    class="form-control select_custom"
                                                                    placeholder="Select"
                                                                    [ngClass]="{'is-invalid' : sdmFormStep3.get('percentageOf').status == 'INVALID'}"
                                                                    [required]="derivedTypeName == 'Percentage'" />
                                                                <datalist id="dist2" style="border: 1px solid #ced4da !important;
                                                                     padding: 0 0.5rem !important;">
                                                                    <option *ngFor="let key of keywordData"
                                                                        value="{{key.formulaName}}">
                                                                        {{key.formulaName}}
                                                                    </option>
                                                                </datalist>
                                                            </div>
                                                        </div>
                                                        <div class="row mt-10" [hidden]="derivedApplicableFlag == 0">
                                                            <div class="col-sm-3">
                                                                <label class="form-label">Table Name </label>
                                                                <!-- formControlName="derivedObjectName" -->
                                                                <select name="custom-select" class="form-control"
                                                                    [(ngModel)]="derivedTableName"
                                                                    [ngModelOptions]="{standalone : true}"
                                                                    [ngClass]="{'is-invalid' : derivedTableName == ''}"
                                                                    (change)="derivedTableNameChange($event.target.value)">
                                                                    <option value="Select">Select</option>
                                                                    <option
                                                                        *ngFor=" let tableData of derivedTableFieldsData">
                                                                        {{tableData.derivedObjectName}}</option>
                                                                </select>
                                                            </div>
                                                            <div class="col-sm-3">
                                                                <label class="form-label">Field Name </label>
                                                                <select name="custom-select" class="form-control"
                                                                    *ngIf="!tempeditDerivedData"
                                                                    (change)="derivedFiedName($event.target.value)"
                                                                    [(ngModel)]="selectedDerivedName"
                                                                    [ngModelOptions]="{standalone : true}"
                                                                    [ngClass]="{'is-invalid' : sdmFormStep3.get('sdmDerivedTableId').status == 'INVALID'}">
                                                                    <option value="Select">Select</option>



                                                                    <!-- <option *ngFor="let field of fieldTypes"
                                                                        value="{{field.derivedFieldName}}">
                                                                        {{field.derivedFieldName}}</option> -->

                                                                    <!-- changed on 02 Dec by backend -->
                                                                    <option *ngFor="let field of fieldTypes"
                                                                        value="{{field.derivedFieldName}}">
                                                                        {{field.derivedFieldName}}</option>
                                                                </select>

                                                                <select name="custom-select" class="form-control"
                                                                    *ngIf="tempeditDerivedData"
                                                                    (change)="derivedFiedName($event.target.value)"
                                                                    [ngClass]="{'is-invalid' : sdmFormStep3.get('sdmDerivedTableId').status == 'INVALID'}">
                                                                    <option value="Select">Select</option>
                                                                    <option *ngFor="let field of fieldTypes"
                                                                        value="{{field.derivedFieldName}}"
                                                                        [selected]="selectedDerivedName == field.derivedFieldName">
                                                                        {{field.derivedFieldName}}</option>
                                                                </select>

                                                            </div>

                                                            <div class="col-sm-3"
                                                                *ngIf="derivedTableName == 'NonRecurringTransactionGroup' || 
                                                            derivedTableName == 'GarnishmentMaster' ||
                                                            derivedTableName == 'NonRecurringQuantity' || derivedTableName == 'FinancialMaster'">
                                                                <label class="form-label">Head</label>
                                                                <select name="custom-select" class="form-control"
                                                                    formControlName="headMasterId">
                                                                    <option value="Select">Select</option>
                                                                    <option *ngFor="let head of headList"
                                                                        value="{{head.headMasterId}}">
                                                                        {{head.displayName}}</option>
                                                                </select>
                                                            </div>

                                                            <!-- //Asked to remove in 9th Dec 2021 by rakesh sir -->

                                                            <!-- <div class="col-sm-3"
                                                                *ngIf="sourceMasterName == 'SPAndFunctionMaster' || enableSourcePeriod">
                                                                <label class="form-label">UOM of Range </label>
                                                                <select name="custom-select" class="form-control"
                                                                    formControlName="uom">
                                                                    <option value="Select">Select</option>
                                                                    <option>MM</option>
                                                                </select>
                                                            </div> -->
                                                        </div>
                                                        <br>
                                                        <br>
                                                        <div class="row mt-15" [hidden]="derivedApplicableFlag == 0">
                                                            <div class="col-12">
                                                                <div class="float-left d-flex justify-content">
                                                                    <!-- <input (click)="getDerivedActive($event.target)" [checked]="derivedactive"
                                                                        type="checkbox" />&nbsp;
                                                                    <label
                                                                        class="form-label margin-right:30px;">Active</label> -->
                                                                    <label class="main"><span
                                                                            class="form-label">Active</span>
                                                                        <input (click)="getDerivedActive($event.target)"
                                                                            type="checkbox" [checked]="derivedactive">
                                                                        <span class="geekmark"></span>
                                                                    </label>
                                                                    &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
                                                                    <label class="form-label"
                                                                        *ngIf="!derivedactive">Remark</label>&nbsp;
                                                                    <textarea formControlName="sdmDerivedMasterRemark"
                                                                        *ngIf="!derivedactive"
                                                                        [ngClass]="{'is-invalid' : sdmFormStep3.get('sdmDerivedMasterRemark').status == 'INVALID'}"
                                                                        class="form-control"
                                                                        [required]="!derivedactive"></textarea>
                                                                </div>
                                                                <div class="float-right ">
                                                                    <!-- {{sdmFormStep3.controls.sdmDerivedMasterId.valid}}
                                                                    {{sdmFormStep3.controls.derivedName.valid}}
                                                                    {{sdmFormStep3.controls.sdmDerivedTypeId.valid}}
                                                                    {{sdmFormStep3.controls.sdmMasterId.valid}}
                                                                    {{sdmFormStep3.controls.sdmDerivedTableId.valid}}
                                                                    {{sdmFormStep3.controls.derivedObjectName.valid}}
                                                                    {{sdmFormStep3.controls.derivedFieldName.valid}}
                                                                    {{sdmFormStep3.controls.percentageOf.valid}}
                                                                    {{sdmFormStep3.controls.moduleIdList.valid}}
                                                                    {{sdmFormStep3.controls.active.valid}}
                                                                    {{sdmFormStep3.controls.sdmDerivedMasterRemark.valid}} -->

                                                                    <button [disabled]="sdmFormStep3.invalid"
                                                                        *ngIf="!tempeditDerivedData"
                                                                        (click)="addsaveDerived()" type="submit"
                                                                        [ngClass]="{'disabled-btn-bg-green' : sdmFormStep3.invalid,'btn-bg-green': !sdmFormStep3.invalid}"
                                                                        class="custom_button custom_btn btn-bg-green btn-labeled btn-labeled-left ripple"
                                                                        tooltip="Add"><b>
                                                                            <i class="fa fa-plus"></i></b>
                                                                        Add</button>&nbsp;
                                                                    <button [disabled]="sdmFormStep3.invalid"
                                                                        *ngIf="tempeditDerivedData"
                                                                        (click)="updatesaveDerived()" type="submit"
                                                                        [ngClass]="{'disabled-btn-bg-green' : sdmFormStep3.invalid,'btn-bg-green': !sdmFormStep3.invalid}"
                                                                        class="custom_button custom_btn btn-bg-green btn-labeled btn-labeled-left ripple"
                                                                        tooltip="Add"><b>
                                                                            <i class="fa fa-plus"></i></b>
                                                                        Update</button>&nbsp;
                                                                    <!-- <button type="button" tooltip="Next"
                                                                    class="custom_button custom_btn bg-teal-400 btn-labeled btn-labeled-left">
                                                                    <b><i class="fa fa-refresh"></i></b> Next</button> -->
                                                                </div>
                                                            </div>
                                                        </div>
                                                        <br>
                                                        <br>
                                                        <div class="row">
                                                            <div class="col-12">
                                                                <div class="card">
                                                                    <legend>Derived Summery</legend>
                                                                    <div class="table-responsive Custom_Table">
                                                                        <p-table [value]="tempDerivedTable"
                                                                            [paginator]="true" [rows]="30"
                                                                            [showCurrentPageReport]="true"
                                                                            currentPageReportTemplate="Showing {first} to {last} of {totalRecords} entries"
                                                                            [rowsPerPageOptions]="[10,25,50,100,200]">
                                                                            <ng-template pTemplate="header">
                                                                                <tr>
                                                                                    <th rowspan="2"
                                                                                        class="wd-12 text-center">
                                                                                        Sr. No.
                                                                                    </th>
                                                                                    <th rowspan="2"
                                                                                        class="wd-12 text-center">
                                                                                        <div
                                                                                            class="p-d-flex p-jc-between p-ai-center ml-65">
                                                                                            Derived Name
                                                                                            <div
                                                                                                class="Sort_Filter_Position">
                                                                                                <p-sortIcon
                                                                                                    field="derivedName"
                                                                                                    pSortableColumn="derivedName">
                                                                                                </p-sortIcon>
                                                                                                <p-columnFilter
                                                                                                    type="text"
                                                                                                    field="derivedName"
                                                                                                    display="menu"
                                                                                                    class="p-ml-auto">
                                                                                                </p-columnFilter>
                                                                                            </div>
                                                                                        </div>
                                                                                    </th>
                                                                                    <th rowspan="2"
                                                                                        class="wd-12 text-center">
                                                                                        <div
                                                                                            class="p-d-flex p-jc-between p-ai-center ml-75">
                                                                                            Module
                                                                                            <div
                                                                                                class="Sort_Filter_Position">
                                                                                                <p-sortIcon
                                                                                                    field="moduleIdList"
                                                                                                    pSortableColumn="moduleIdList">
                                                                                                </p-sortIcon>
                                                                                                <p-columnFilter
                                                                                                    type="text"
                                                                                                    field="text"
                                                                                                    display="menu"
                                                                                                    class="p-ml-auto">
                                                                                                </p-columnFilter>
                                                                                            </div>
                                                                                        </div>
                                                                                    </th>
                                                                                    <th rowspan="2"
                                                                                        class="wd-12 text-center">
                                                                                        <div
                                                                                            class="p-d-flex p-jc-between p-ai-center ml-75">
                                                                                            Derived Type
                                                                                            <div
                                                                                                class="Sort_Filter_Position">
                                                                                                <p-sortIcon
                                                                                                    field="sdmDerivedTypeName"
                                                                                                    pSortableColumn="sdmDerivedTypeName">
                                                                                                </p-sortIcon>
                                                                                                <p-columnFilter
                                                                                                    type="text"
                                                                                                    field="text"
                                                                                                    display="menu"
                                                                                                    class="p-ml-auto">
                                                                                                </p-columnFilter>
                                                                                            </div>
                                                                                        </div>
                                                                                    </th>
                                                                                    <th rowspan="2"
                                                                                        class="wd-12 text-center"
                                                                                        *ngIf="derivedTypeName == 'Percentage' || showPercentageFlag">
                                                                                        <div
                                                                                            class="p-d-flex p-jc-between p-ai-center ml-55">
                                                                                            Percentage (%) of
                                                                                            <div
                                                                                                class="Sort_Filter_Position">
                                                                                                <p-sortIcon
                                                                                                    field="percentageOf"
                                                                                                    pSortableColumn="percentageOf">
                                                                                                </p-sortIcon>
                                                                                                <p-columnFilter
                                                                                                    type="text"
                                                                                                    field="text"
                                                                                                    display="menu"
                                                                                                    class="p-ml-auto">
                                                                                                </p-columnFilter>
                                                                                            </div>
                                                                                        </div>
                                                                                    </th>
                                                                                    <th rowspan="2"
                                                                                        class="wd-12 text-center">
                                                                                        <div
                                                                                            class="p-d-flex p-jc-between p-ai-center ml-75">
                                                                                            Table Name
                                                                                            <div
                                                                                                class="Sort_Filter_Position">
                                                                                                <p-sortIcon
                                                                                                    field="sdmDerivedTableId"
                                                                                                    pSortableColumn="sdmDerivedTableId">
                                                                                                </p-sortIcon>
                                                                                                <p-columnFilter
                                                                                                    type="text"
                                                                                                    field="text"
                                                                                                    display="menu"
                                                                                                    class="p-ml-auto">
                                                                                                </p-columnFilter>
                                                                                            </div>
                                                                                        </div>
                                                                                    </th>
                                                                                    <th rowspan="2"
                                                                                        class="wd-12 text-center">
                                                                                        <div
                                                                                            class="p-d-flex p-jc-between p-ai-center ml-75">
                                                                                            Field Name
                                                                                            <div
                                                                                                class="Sort_Filter_Position">
                                                                                                <p-sortIcon
                                                                                                    field="sourceObjectName"
                                                                                                    pSortableColumn="sourceObjectName">
                                                                                                </p-sortIcon>
                                                                                                <p-columnFilter
                                                                                                    type="text"
                                                                                                    field="text"
                                                                                                    display="menu"
                                                                                                    class="p-ml-auto">
                                                                                                </p-columnFilter>
                                                                                            </div>
                                                                                        </div>
                                                                                    </th>

                                                                                    <th rowspan="2"
                                                                                        class="wd-12 text-center" *ngIf="derivedTableName == 'NonRecurringTransactionGroup' || 
                                                                                        derivedTableName == 'GarnishmentMaster' ||
                                                                                        derivedTableName == 'NonRecurringQuantity' || derivedTableName == 'FinancialMaster'">
                                                                                        <div
                                                                                            class="p-d-flex p-jc-between p-ai-center ml-75">
                                                                                            Head
                                                                                            <div
                                                                                                class="Sort_Filter_Position">
                                                                                                <p-sortIcon
                                                                                                    field="sourceObjectName"
                                                                                                    pSortableColumn="sourceObjectName">
                                                                                                </p-sortIcon>
                                                                                                <p-columnFilter
                                                                                                    type="text"
                                                                                                    field="text"
                                                                                                    display="menu"
                                                                                                    class="p-ml-auto">
                                                                                                </p-columnFilter>
                                                                                            </div>
                                                                                        </div>
                                                                                    </th>
                                                                                    <th rowspan="2"
                                                                                        class="wd-12 text-center">
                                                                                        <div
                                                                                            class="p-d-flex p-jc-between p-ai-center ml-75">
                                                                                            Action
                                                                                        </div>
                                                                                    </th>
                                                                                    <!-- //Asked to remove in 9th Dec 2021 by rakesh sir -->
                                                                                    <!-- <th rowspan="2"
                                                                                        class="wd-12 text-center"
                                                                                        *ngIf="isUomFlag">
                                                                                        UOM
                                                                                    </th> -->
                                                                                </tr>
                                                                            </ng-template>
                                                                            <ng-template pTemplate="body" let-data
                                                                                let-rowIndex=rowIndex>
                                                                                <tr class="p-selectable-row"
                                                                                    *ngIf="data.sdmDerivedMasterId != 0">
                                                                                    <td class="text-center">
                                                                                        {{rowIndex + 1}}
                                                                                        <!-- <br>
                                                                                        {{data.sdmDerivedMasterId == 0
                                                                                        ? rowIndex + 1 : rowIndex}}  -->
                                                                                    </td>
                                                                                    <td class="text-center">
                                                                                        {{data.derivedName}}
                                                                                    </td>
                                                                                    <td class="text-center">
                                                                                        {{data.modulename}}
                                                                                    </td>
                                                                                    <td>
                                                                                        <span
                                                                                            *ngIf="data.sdmDerivedTypeName != 'JobField'">
                                                                                            {{data.sdmDerivedTypeName}}
                                                                                        </span>
                                                                                        <span
                                                                                            *ngIf="data.sdmDerivedTypeName == 'JobField'">
                                                                                            Master
                                                                                        </span>
                                                                                    </td>
                                                                                    <td
                                                                                        *ngIf="data.sdmDerivedTypeName == 'Percentage' || derivedTypeName == 'Percentage' || showPercentageFlag">
                                                                                        <span
                                                                                            *ngIf="data.percentageOf != 0">{{data.percentageOf}}</span>
                                                                                    </td>
                                                                                    <td class="text-center">
                                                                                        {{data.sdmDerivedTableId}}
                                                                                    </td>
                                                                                    <td class="text-center">
                                                                                        {{data.sourceObjectName}}
                                                                                    </td>
                                                                                    <td *ngIf="derivedTableName == 'NonRecurringTransactionGroup' || 
                                                                                    derivedTableName == 'GarnishmentMaster' ||
                                                                                    derivedTableName == 'NonRecurringQuantity' || derivedTableName == 'FinancialMaster'">
                                                                                    
                                                                                    </td>
                                                                                    <td class="text-center">
                                                                                        <!-- commented on 09/12/2021 -->
                                                                                        <!-- <i *ngIf="data.sdmDerivedMasterId"
                                                                                            class="fa fa-edit font-16 text-dark-green cursor-pointer"
                                                                                            (click)="edittempDerivedData(data,rowIndex)"
                                                                                            tooltip="Edit"></i>&nbsp; -->

                                                                                        <i *ngIf="!data.sdmDerivedMasterId || !editFlag"
                                                                                            (click)="deletetempDerivedData(data,rowIndex)"
                                                                                            class="fa fa-times font-16 text-red cursor-pointer"
                                                                                            tooltip="DeleteTemp"></i>

                                                                                        <i *ngIf="data.sdmDerivedMasterId && editFlag"
                                                                                            (click)="deleteSourceDerive(data)"
                                                                                            class="fa fa-times font-16 text-red cursor-pointer"
                                                                                            tooltip="Delete"></i>
                                                                                        <!-- <i class="fa fa-eye font-16 text-blue cursor-pointer"
                                                                                            tooltip="View"></i>&nbsp;
                                                                                        <i class="fa fa-trash font-16 text-red cursor-pointer"
                                                                                            tooltip="Delete"></i> -->
                                                                                    </td>
                                                                                    <!-- <td class="text-center"
                                                                                        *ngIf="isUomFlag">
                                                                                        {{data.uom}}
                                                                                    </td> -->
                                                                                </tr>
                                                                            </ng-template>
                                                                            <ng-template pTemplate="emptymessage">
                                                                                <tr>
                                                                                    <td colspan="15"
                                                                                        class="font-14 font500 text-center text-red">
                                                                                        <span>No Data
                                                                                            Available</span>
                                                                                    </td>
                                                                                </tr>
                                                                            </ng-template>
                                                                        </p-table>
                                                                    </div>
                                                                </div>
                                                            </div>
                                                        </div>

                                                        <div class="row mt-15 float-right">
                                                            <div class="float-right ">
                                                                <!-- derivedTablesFields(); -->
                                                                <!-- [hidden]="derivedApplicableFlag == 0" -->
                                                                
                                                                <!-- next(); -->

                                                                <!-- filter() -->

                                                                <!-- [hidden]="derivedApplicableFlag == 0" -->

                                                                <button type="submit" (click)=resetsdmForm3();
                                                                    [hidden]="derivedApplicableFlag == 0"
                                                                    class="custom_button custom_btn bg-teal-400 btn-labeled btn-labeled-left ripple"
                                                                    tooltip="Reset"><b>
                                                                        <i class="fa fa-refresh"></i></b>
                                                                    Reset</button>&nbsp;
                                                                <button type="submit" (click)="saveDerived();"
                                                                    [style.cursor]="saveDerivedData.length == 'not-allowed' ? null : 'pointer'"
                                                                    [disabled]="saveDerivedData.length == 0"
                                                                    [ngClass]="{'disabled-btn-bg-green' : saveDerivedData.length == 0,'btn-bg-green': saveDerivedData.length > 0}"
                                                                    class="custom_button custom_btn btn-bg-green btn-labeled btn-labeled-left ripple"
                                                                    tooltip="Save"><b>
                                                                        <i class="fa fa-floppy-o"></i></b>
                                                                    Save</button>&nbsp;
                                                                    <button type="button"
                                                                    (click)="getStepper(3);previous();derivedType();KeywordMasterDetails();sourceCombination();"
                                                                    class="custom_button custom_btn bg-teal-400 btn-labeled btn-labeled-left ripple"
                                                                    tooltip="Previous"><b>
                                                                        <i class="fa fa-angle-double-left"></i></b>
                                                                    Previous</button>&nbsp;

                                                                <button type="button"
                                                                    (click)="getStepper(3);next();getMatrixTableData();derivedMaster();sourceCombination();"
                                                                    class="custom_button custom_btn bg-teal-400 btn-labeled btn-labeled-left ripple"
                                                                    tooltip="Next"><b>
                                                                        <i
                                                                            class="fa fa-angle-double-right"></i></b>Next</button>&nbsp;
                                                            </div>
                                                        </div>
                                                        <!-- end of row -->
                                                    </fieldset>
                                                </div>
                                            </div>
                                        </form>
                                    </div>

                                    <div *ngSwitchCase="4" [@slideInOut]>
                                        <div class="row mt-20">
                                            <div class="col-md-12">
                                            </div>
                                            <div class="col-md-12 bg-color-light_gray p-10 m-0">
                                                <div class="float-left d-flex justify-content">
                                                    <label class="form-label mb-0  mt-2 float-left">Derived
                                                        Name </label>&nbsp;
                                                    <select name="custom-select" class="form-control"
                                                        style="width:205px;" *ngIf="tempSelectedDerivedName == ''"
                                                        (change)="onChangeDriveName($event.target.value)">
                                                        <option value="Select">Select</option>
                                                        <option *ngFor="let derivedData of derivedMastersData">
                                                            {{derivedData.derivedName}}</option>
                                                    </select>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
                                                    <select name="custom-select" class="form-control"
                                                        style="width:205px;" *ngIf="tempSelectedDerivedName != '' "
                                                        (change)="onChangeDriveName($event.target.value)">
                                                        <option *ngFor="let derivedData of derivedMastersData"
                                                            [selected]="tempSelectedDerivedName == derivedData.derivedName">
                                                            {{derivedData.derivedName}}</option>
                                                    </select>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
                                                    <label class="form-label mb-0 mt-2">Derived Type</label>
                                                    &nbsp;&nbsp;&nbsp; <span
                                                        style="margin-right: 20px;margin-top: 7px;font-size: 13px;">
                                                        <span *ngIf="deriType != 'JobField'">{{deriType}}</span>
                                                        <span *ngIf="deriType == 'JobField'">Master</span>
                                                    </span>
                                                </div>
                                                <div class="float-right d-flex justify-content-end">
                                                    <div class="form-group mb-0  mt-1 SMDatepickerWidth">
                                                        <div class="input-group">
                                                            <label class="form-label mt-2">From &nbsp;</label>

                                                            <div class="input-group-prepend">
                                                                <span class="input-group-text">
                                                                    <i class="fa fa-calendar"></i>
                                                                </span>
                                                            </div>
                                                            <input data-provide="datepicker" data-date-autoclose="true"
                                                                class="form-control" placeholder="Date" bsDatepicker>
                                                        </div>
                                                    </div>
                                                    <div class="form-group mb-0  mt-1 SMDatepickerWidth">
                                                        <div class="input-group">
                                                            <label class="form-label mt-2">To &nbsp;</label>
                                                            <div class="input-group-prepend">
                                                                <span class="input-group-text">
                                                                    <i class="fa fa-calendar"></i>
                                                                </span>
                                                            </div>
                                                            <input data-provide="datepicker" data-date-autoclose="true"
                                                                class="form-control" placeholder="Date" bsDatepicker>
                                                        </div>
                                                    </div>
                                                    <button type="button" tooltip=""
                                                        class="custom_button custom_btn btn-bg-green btn-labeled btn-labeled-left mr-10"><b><i
                                                                class="fa fa-download"></i></b> Format For
                                                        Upload</button> &nbsp;
                                                    <button type="button" tooltip=""
                                                        class="custom_button custom_btn btn-bg-green btn-labeled btn-labeled-left mr-10"><b><i
                                                                class="fa fa-upload"></i></b> Upload</button> &nbsp;
                                                    <a (click)="excelMatrixDownload('tblData1', 'Matrix Data')"> <i
                                                            class="fa fa-file-excel-o font-24 mt-2 text-dark-green cursor-pointer"
                                                            tooltip="View"></i></a>
                                                </div>
                                            </div>
                                        </div>
                                        <br>
                                        <div class="row">
                                            <div class="col-12">
                                                <div class="card">
                                                    <div class="table-responsive Custom_Table" >
                                                        <table class="table table-bordered" style="border: 1px solid #dee2e6;">
                                                            <thead>
                                                                <tr>
                                                                    <th [attr.colspan]="sourceFieldListData.length"
                                                                        class="wd-16 text-center thClassDataTable">
                                                                        <div class="p-d-flex p-jc-between p-ai-center text-center"
                                                                            style="margin-left: 120px;">Source
                                                                        </div>
                                                                    </th>
                                                                    <th colspan="2" class="wd-16 text-center thClassDataTable"
                                                                        *ngIf="isRangeApplicableFlag == true">
                                                                        <div class="p-d-flex p-jc-between p-ai-center"
                                                                            style="margin-left:100px;">Source Range
                                                                        </div>
                                                                    </th>
                                                                    <th colspan="1" class="wd-6 text-center thClassDataTable" *ngIf="!noDerivedFlag">
                                                                        <div class="p-d-flex p-jc-between p-ai-center">
                                                                            Derived
                                                                        </div>
                                                                    </th>
                                                                    <th colspan="1" class="wd-6 text-center thClassDataTable" *ngIf="noDerivedFlag && isRangeApplicableFlag == false">
                                                                        <div class="p-d-flex p-jc-between p-ai-center">
                                                                            Derived
                                                                        </div>
                                                                    </th>
                                                                    <th colspan="2" class="wd-8 text-center thClassDataTable" *ngIf="!noDerivedFlag">
                                                                        <div class="p-d-flex p-jc-between p-ai-center"
                                                                            style="margin-left:140px;">Date Range
                                                                            
                                                                        </div>
                                                                    </th>
                                                                    <th rowspan="3" class="wd-4 text-center thClassDataTable" *ngIf="isRangeApplicableFlag == true || !noDerivedFlag">
                                                                        <div class="p-d-flex p-jc-between p-ai-center">
                                                                            Action
                                                                        </div>
                                                                    </th>
                                                                </tr>
                                                                <tr>
                                                                    <th rowspan="2" class=" text-center thClassDataTable"
                                                                        *ngFor="let header of matrixTableData">
                                                                        <div class="p-d-flex p-jc-between p-ai-center">
                                                                            {{header}}
                                                                           
                                                                        </div>
                                                                    </th>
                                                                    <th rowspan="2" class="text-center thClassDataTable"
                                                                        *ngIf="isRangeApplicableFlag == true">
                                                                        <div class="p-d-flex p-jc-between p-ai-center">
                                                                            From
                                                                           
                                                                        </div>
                                                                    </th>
                                                                    <th rowspan="2" class=" text-center thClassDataTable"
                                                                        *ngIf="isRangeApplicableFlag == true">
                                                                        <div class="p-d-flex p-jc-between p-ai-center"
                                                                            style="margin-left: 70px;"> To
                                                                           
                                                                        </div>
                                                                    </th>
                                                                    <th rowspan="2" class=" text-center thClassDataTable" *ngIf="!noDerivedFlag">
                                                                        <!--  -->
                                                                        <div class="p-d-flex p-jc-between p-ai-center">
                                                                            {{derivedFieldName}}
                                                                           
                                                                        </div>
                                                                    </th>
                                                                    <th rowspan="2" class=" text-center thClassDataTable" *ngIf="noDerivedFlag && isRangeApplicableFlag == false">
                                                                        <!--  -->
                                                                        <div class="p-d-flex p-jc-between p-ai-center">
                                                                            {{derivedFieldName}}
                                                                           
                                                                        </div>
                                                                    </th>
                                                                    <!-- rowspan="2" -->
                                                                    <th class="text-center thClassDataTable" *ngIf="!noDerivedFlag"> 
                                                                        <div class="p-d-flex p-jc-between p-ai-center">
                                                                            From Date
                                                                           
                                                                        </div>
                                                                    </th>
                                                                    <!-- rowspan="2" -->
                                                                    <th class=" text-center thClassDataTable" *ngIf="!noDerivedFlag">
                                                                        <div class="p-d-flex p-jc-between p-ai-center">
                                                                            To Date
                                                                           
                                                                        </div>
                                                                    </th>
                                                                </tr>
                                                            </thead>
                                                            <tbody>
                                                                <!-- <pre>HERE {{tempEditMatrixData | json}}</pre> -->
                                                                <tr class="p-selectable-row text-center"
                                                                    [class.trhidden]="data.showElement == false"
                                                                    *ngFor="let data of tempEditMatrixData;let rowIndex = index;">

                                                                    <td *ngFor="let header of sourceFieldListData">
                                                                        <span
                                                                            *ngIf="header == 'payrollArea' && data.showElement == true">{{data.selectedCombData.payrollAreaId}}</span>
                                                                        <span
                                                                            *ngIf="header == 'Establishment' && data.showElement == true">{{data.selectedCombData.establishmentMasterId}}</span>
                                                                        <span
                                                                            *ngIf="header == 'SubLocation' && data.showElement == true">{{data.selectedCombData.subLocationMasterId}}</span>
                                                                        <span
                                                                            *ngIf="header == 'Location' && data.showElement == true">{{data.selectedCombData.subLocationMasterId}}</span>
                                                                        <span
                                                                            *ngIf="header == 'WorkLocation' && data.showElement == true">{{data.selectedCombData.workLocationMasterId}}</span>
                                                                        <span
                                                                            *ngIf="header == 'BusinessArea' && data.showElement == true">{{data.selectedCombData.businessAreaMasterId}}</span>
                                                                        <span
                                                                            *ngIf="header == 'SubArea' && data.showElement == true">{{data.selectedCombData.subAreaId}}</span>
                                                                        <span
                                                                            *ngIf="header == 'StrategicBusinessUnit' && data.showElement == true">{{data.selectedCombData.strategicBusinessUnitId}}</span>
                                                                        <span
                                                                            *ngIf="header == 'Division' && data.showElement == true">{{data.selectedCombData.divisionMasterId}}</span>
                                                                        <span
                                                                            *ngIf="header == 'Department' && data.showElement == true">{{data.selectedCombData.departmentMasterId}}</span>
                                                                        <span
                                                                            *ngIf="header == 'SubDepartment' && data.showElement == true">{{data.selectedCombData.subDepartmentId}}</span>
                                                                        <span
                                                                            *ngIf="header == 'CostCentre' && data.showElement == true">{{data.selectedCombData.costCentreId}}</span>
                                                                        <span
                                                                            *ngIf="header == 'SubCostCenter' && data.showElement == true">{{data.selectedCombData.subCostCenterId}}</span>
                                                                        <span
                                                                            *ngIf="header == 'ProfitCentre' && data.showElement == true">{{data.selectedCombData.profitCentreMasterId}}</span>
                                                                        <span
                                                                            *ngIf="header == 'Grade' && data.showElement == true">{{data.selectedCombData.gradeMasterId}}</span>
                                                                        <span
                                                                            *ngIf="header == 'Designation1' && data.showElement == true">{{data.selectedCombData.designation1MasterId}}</span>
                                                                        <span
                                                                            *ngIf="header == 'Designation2' && data.showElement == true">{{data.selectedCombData.designation2MasterId}}</span>

                                                                        <span
                                                                            *ngIf="header == 'functionName' && data.showElement == true">{{data.selectedCombData.spAndFunctionMasterId}}</span>
                                                                        <span
                                                                            *ngIf="header == 'genderType' && data.showElement == true">{{data.selectedCombData.genderId}}</span>
                                                                        <span
                                                                            *ngIf="header == 'employeeTaxCategoryId' && data.showElement == true">{{data.selectedCombData.employeeTaxCategoryId}}</span>

                                                                        <span
                                                                            *ngIf="header == 'employeeTypeId' && data.showElement == true">{{data.selectedCombData.employeeTypeId}}</span>
                                                                    </td>
                                                                    <td
                                                                        *ngIf="isRangeApplicableFlag == true && data.showElement == true">
                                                                        <input type="text" class="form-control"
                                                                            (focusout)="getEditedSourceRangeFrom($event.target.value,data)"
                                                                            value="{{data.sourceRangeFrom}}">
                                                                        <!-- [disabled]="data.disableFlag == true" -->

                                                                    </td>
                                                                    <td
                                                                        *ngIf="isRangeApplicableFlag == true && data.showElement == true">
                                                                        <input type="text" class="form-control"
                                                                            (focusout)="getEditedSourceRangeTo($event.target.value,data)"
                                                                            value="{{data.sourceRangeTo}}">
                                                                        <!-- [disabled]="data.disableFlag == true" -->
                                                                    </td>
                                                                    <td
                                                                        *ngIf="data.showElement == true">
                                                                        <!-- && !noDerivedFlag -->
                                                                        <!-- {{showSearchLeans}}
                                                                        {{selectedIndex}}
                                                                        {{rowIndex}}
                                                                        {{showEditTextBox}} -->
                                                                        <div class="input-group">
                                                                            <!-- [disabled]="data.disableFlag == true" -->
                                                                            <input type="text" class="form-control"
                                                                                *ngIf="!showDropdown && !showSearchLeans"
                                                                                (focusout)="getEditedApplicableValue($event.target.value,data)"
                                                                                value="{{data.applicableValue}}">
                                                                            <!-- <pre>{{showSearchLeans && showEditTextBox}}</pre> -->
                                                                            <input type="text" class="form-control"
                                                                                *ngIf="showSearchLeans && showEditTextBox"
                                                                                (focusout)="getEditedApplicableValue($event.target.value,data)"
                                                                                value="{{data.applicableValue}}">
                                                                            <!-- [disabled]="data.disableFlag == true" -->

                                                                            <input type="text" class="form-control"
                                                                            *ngIf="noDerivedFlag && showEditTextBox"
                                                                            (focusout)="getEditedApplicableValue($event.target.value,data)"
                                                                            value="{{data.applicableValue}}">

                                                                            <input type="text" class="form-control"
                                                                                *ngIf="showSearchLeans && selectedIndex != rowIndex && !showEditTextBox"
                                                                                (focusout)="getEditedApplicableValue($event.target.value,data)"
                                                                                value="{{data.applicableValue}}">
                                                                            <!-- [disabled]="data.disableFlag == true" -->

                                                                            <span class="input-group-append"
                                                                                *ngIf="showSearchLeans">
                                                                                <button class="btn btn-primary"
                                                                                    type="button">
                                                                                    <span class="fe fe-search"
                                                                                        (click)="largepopup (template1,rowIndex,data,'tempEditMatrixData')"><i></i>
                                                                                    </span>
                                                                                </button>
                                                                            </span>
                                                                        </div>
                                                                        <select type="text" class="form-control"
                                                                            *ngIf="showDropdown"
                                                                            (change)="getEditedApplicableValue($event.target.value,data)">
                                                                            <!-- [disabled]="data.disableFlag == true" -->
                                                                            <option>Select</option>
                                                                            <option
                                                                                *ngFor="let d of derivedDropdownValue"
                                                                                [selected]="data.applicableValue == d">
                                                                                {{d}}</option>
                                                                        </select>
                                                                        <!-- <input type="text" class="form-control"
                                                                             (focusout)="getEditedApplicableValue($event.target.value,data)"
                                                                            value="{{data.applicableValue}}" [disabled]="data.disableFlag == true"> -->
                                                                    </td>
                                                                    <td *ngIf="data.showElement == true && !noDerivedFlag" >

                                                                        <input data-provide="datepicker"
                                                                            data-date-autoclose="true"
                                                                            [bsConfig]="{ dateInputFormat: 'DD-MMM-YY' }"
                                                                            class="form-control"
                                                                            value="{{data.derivedFromDate | date: 'dd-MMM-yyyy'}}"
                                                                            (bsValueChange)="getEditFromDateForSave($event,data)"
                                                                            [disabled]="data.disableFlag == true"
                                                                            placeholder="Date" bsDatepicker>
                                                                        <!-- <input type="text" class="form-control"
                                                                            
                                                                            value="{{data.derivedFromDate | date: 'dd-MMM-yyyy'}}"> -->
                                                                    </td>
                                                                    <td *ngIf="data.showElement == true && !noDerivedFlag">
                                                                        <!-- {{data.derivedFromDate}} -->
                                                                        <input data-provide="datepicker"
                                                                            data-date-autoclose="true"
                                                                            [bsConfig]="{ dateInputFormat: 'DD-MMM-YY' }"
                                                                            class="form-control"
                                                                            [minDate]="data.derivedFromDate"
                                                                            value="{{data.derivedToDate | date: 'dd-MMM-yyyy'}}"
                                                                            [disabled]="data.disableFlag == true"
                                                                            (bsValueChange)="getEditToDateForSave($event,data)"
                                                                            placeholder="Date" bsDatepicker>

                                                                        <!-- <input type="text" class="form-control"
                                                                            
                                                                            value="{{data.derivedToDate | date: 'dd-MMM-yyyy'}}"> -->
                                                                    </td>
                                                                    <td
                                                                        *ngIf="data.showElement == true || data.disableFlag == true && !noDerivedFlag">
                                                                        <i class="fa fa-eye font-18 text-dark-blue"
                                                                            tooltip="View History"
                                                                            (click)="viewMatrixDataHistory(data);extralargepopup(template4)">
                                                                        </i> &nbsp;&nbsp;

                                                                        <!-- New Functionality 17th Dec2021 -->
                                                                        <!-- <i class="fa fa-plus-circle font-18 text-dark-green"
                                                                        tooltip="Add"
                                                                        (click)="addMatrixData(srcCombData,rowIndex)"
                                                                        *ngIf="isRangeApplicableFlag == true"></i> -->
                                                                        <!-- [style.opacity]="addbtnflag && selectedIndex == rowIndex ? null : '0.6 '" -->
                                                                        <!-- [ngClass]="{'cursor-pointer': addbtnflag && selectedIndex == rowIndex, 'cursorStyle': selectedIndex != rowIndex }" -->
                                                                    </td>
                                                                  
                                                                </tr>

                                                                <tr class="p-selectable-row"
                                                                    [class.trhidden]="srcCombData.showElement == false || srcCombData.active == false"
                                                                    *ngFor="let srcCombData of matrixsdmSourceCombinationList | paginate: { itemsPerPage: 10, currentPage: p }; let rowIndex = index;">
                                                                    <td *ngFor="let header of sourceFieldListData">
                                                                        <span
                                                                            *ngIf="header == 'payrollArea' && srcCombData.showElement == true && srcCombData.active == true">{{srcCombData.payrollAreaId}}</span>
                                                                        <span
                                                                            *ngIf="header == 'Establishment' && srcCombData.showElement == true && srcCombData.active == true">{{srcCombData.establishmentMasterId}}</span>
                                                                        <span
                                                                            *ngIf="header == 'SubLocation' && srcCombData.showElement == true && srcCombData.active == true">{{srcCombData.subLocationMasterId}}</span>
                                                                        <span
                                                                            *ngIf="header == 'Location' && srcCombData.showElement == true && srcCombData.active == true">{{srcCombData.subLocationMasterId}}</span>
                                                                        <span
                                                                            *ngIf="header == 'WorkLocation' && srcCombData.showElement == true && srcCombData.active == true">{{srcCombData.workLocationMasterId}}</span>
                                                                        <span
                                                                            *ngIf="header == 'BusinessArea' && srcCombData.showElement == true && srcCombData.active == true">{{srcCombData.businessAreaMasterId}}</span>
                                                                        <span
                                                                            *ngIf="header == 'SubArea' && srcCombData.showElement == true && srcCombData.active == true">{{srcCombData.subAreaId}}</span>
                                                                        <span
                                                                            *ngIf="header == 'StrategicBusinessUnit' && srcCombData.showElement == true && srcCombData.active == true">{{srcCombData.strategicBusinessUnitId}}</span>
                                                                        <span
                                                                            *ngIf="header == 'Division' && srcCombData.showElement == true && srcCombData.active == true">{{srcCombData.divisionMasterId}}</span>
                                                                        <span
                                                                            *ngIf="header == 'Department' && srcCombData.showElement == true && srcCombData.active == true">{{srcCombData.departmentMasterId}}</span>
                                                                        <span
                                                                            *ngIf="header == 'SubDepartment' && srcCombData.showElement == true && srcCombData.active == true">{{srcCombData.subDepartmentId}}</span>
                                                                        <span
                                                                            *ngIf="header == 'CostCentre' && srcCombData.showElement == true && srcCombData.active == true">{{srcCombData.costCentreId}}</span>
                                                                        <span
                                                                            *ngIf="header == 'SubCostCenter' && srcCombData.showElement == true && srcCombData.active == true">{{srcCombData.subCostCenterId}}</span>
                                                                        <span
                                                                            *ngIf="header == 'ProfitCentre' && srcCombData.showElement == true && srcCombData.active == true">{{srcCombData.profitCentreMasterId}}</span>
                                                                        <span
                                                                            *ngIf="header == 'Grade' && srcCombData.showElement == true && srcCombData.active == true">{{srcCombData.gradeMasterId}}</span>
                                                                        <span
                                                                            *ngIf="header == 'Designation1' && srcCombData.showElement == true && srcCombData.active == true">{{srcCombData.designation1MasterId}}</span>
                                                                        <span
                                                                            *ngIf="header == 'Designation2' && srcCombData.showElement == true && srcCombData.active == true">{{srcCombData.designation2MasterId}}</span>
                                                                        <span
                                                                            *ngIf="header == 'functionName' && srcCombData.showElement == true && srcCombData.active == true">{{srcCombData.spAndFunctionMasterId}}</span>
                                                                        <span
                                                                            *ngIf="header == 'genderType' && srcCombData.showElement == true && srcCombData.active == true">{{srcCombData.genderId}}</span>
                                                                        <span
                                                                            *ngIf="header == 'employeeTaxCategoryId' && srcCombData.showElement == true && srcCombData.active == true">{{srcCombData.employeeTaxCategoryId}}</span>

                                                                        <span
                                                                            *ngIf="header == 'employeeTypeId' && srcCombData.showElement == true && srcCombData.active == true">{{srcCombData.employeeTypeId}}</span>
                                                                    </td>
                                                                    <td
                                                                        *ngIf="isRangeApplicableFlag == true && srcCombData.showElement == true">

                                                                        <input type="text" class="form-control"
                                                                            [value]="selectedIndex == rowIndex ? sourceRangeFrom : '' "
                                                                            [ngClass]="{'is-invalid': srcCombData.invalidFromrange}"
                                                                            (focusout)="sourceRangeFromData($event.target.value,rowIndex,srcCombData)">
                                                                    </td>
                                                                    <td
                                                                        *ngIf="isRangeApplicableFlag == true && srcCombData.showElement == true">

                                                                        <input type="text" class="form-control"
                                                                            [value]="selectedIndex == rowIndex ? sourceRangeTo : '' "
                                                                            [ngClass]="{'is-invalid': srcCombData.invalidTorange}"
                                                                            (focusout)="sourceRangeToData($event.target.value,rowIndex,srcCombData)">
                                                                    </td>
                                                                    <td
                                                                        *ngIf='srcCombData.showElement == true && !noDerivedFlag'>
                                                                        <!-- applicableValue: {{applicableValue}} <br>
                                                                        {{srcCombData.applicableValue}} -->
                                                                        <div class="input-group">
                                                                            <!-- selectedIndex == rowIndex ? applicableValue : ''  -->
                                                                            <input type="text" class="form-control"
                                                                                *ngIf="!showDropdown && !showSearchLeans"
                                                                                [value]="srcCombData.applicableValue"
                                                                                (focusout)="applicableValueData($event.target.value,srcCombData,rowIndex)">

                                                                            <input type="text" class="form-control"
                                                                                *ngIf="showSearchLeans"
                                                                                [value]="srcCombData.applicableValue1"
                                                                                (focusout)="applicableValueData($event.target.value,srcCombData,rowIndex)">

                                                                            <input type="text" class="form-control"
                                                                                *ngIf="showSearchLeans && selectedIndex != rowIndex"
                                                                                (focusout)="applicableValueData($event.target.value,srcCombData,rowIndex)">

                                                                            <span class="input-group-append"
                                                                                *ngIf="showSearchLeans">
                                                                                <button class="btn btn-primary"
                                                                                    type="button">
                                                                                    <span class="fe fe-search"
                                                                                        (click)="largepopup (template1,rowIndex,srcCombData,'matrixsdmSourceCombinationList')"><i></i>
                                                                                    </span>
                                                                                </button>
                                                                            </span>
                                                                        </div>
                                                                        <select type="text" class="form-control"
                                                                            *ngIf="showDropdown"
                                                                            [value]="selectedIndex == rowIndex ? applicableValue : '' "
                                                                            (change)="applicableValueData($event.target.value,srcCombData,rowIndex)">
                                                                            <option>Select</option>
                                                                            <option
                                                                                *ngFor="let data of derivedDropdownValue">
                                                                                {{data}}</option>
                                                                        </select>
                                                                    </td>

                                                                    <td *ngIf='noDerivedFlag && isRangeApplicableFlag == false'>
                                                                        <div class="input-group">
                                                                               <input type="text" class="form-control"
                                                                                [value]="srcCombData.applicableValue1"
                                                                                (focusout)="applicableValueData($event.target.value,srcCombData,rowIndex)">
                                                                        </div>
                                                                    </td>
                                                                    <td class="p-d-inline-flex"
                                                                        *ngIf='srcCombData.showElement == true && !noDerivedFlag '>
                                                                        
                                                                        <div class="p-d-inline-flex">
                                                                            <span
                                                                                *ngIf='isRangeApplicableFlag != true'><i
                                                                                    (click)="copyFromDateToAll(srcCombData,rowIndex);"
                                                                                    style="cursor: pointer;"
                                                                                    class="fa fa-clone text-blue font-16 mr-2 mt-2"></i>
                                                                            </span>
                                                                            <div
                                                                                class="form-group mb-0  mt-1 SMDatepickerWidth">
                                                                                <div class="input-group">
                                                                                    <div class="input-group-prepend">
                                                                                        <span class="input-group-text">
                                                                                            <i
                                                                                                class="fa fa-calendar"></i>
                                                                                        </span>
                                                                                    </div>
                                                                                    <!--  [(ngModel)]="srcCombData.derivedFromDate"
                                                                                        [ngModelOptions]="{standalone: true}"
                                                                                        -->
                                                                                  
                                                                                    <input data-provide="datepicker"
                                                                                        data-date-autoclose="true"
                                                                                        class="form-control"
                                                                                        [bsConfig]="{ dateInputFormat: 'DD-MMM-YY' }"
                                                                                        value="{{srcCombData.derivedFromDate | date:'dd-MMM-yyyy'}}"
                                                                                        (bsValueChange)="getFromDateForSave($event,srcCombData,rowIndex)"
                                                                                        placeholder="Date" bsDatepicker>
                                                                                </div>
                                                                            </div>
                                                                        </div>
                                                                    </td>
                                                                    <td *ngIf='srcCombData.showElement == true && !noDerivedFlag'>
                                                                        <div
                                                                            class="form-group mb-0  mt-1 SMDatepickerWidth">
                                                                            <div class="input-group">
                                                                                <div class="input-group-prepend">
                                                                                    <span class="input-group-text">
                                                                                        <i class="fa fa-calendar"></i>
                                                                                    </span>
                                                                                </div>
                                                                                <input data-provide="datepicker"
                                                                                    data-date-autoclose="true"
                                                                                    [bsConfig]="{ dateInputFormat: 'DD-MMM-YY' }"
                                                                                    class="form-control"
                                                                                    [value]="srcCombData.derivedToDate | date:'dd-MMM-yyyy'"
                                                                                    [minDate]="srcCombData.derivedFromDate || selectedFromDateForSave"
                                                                                    (bsValueChange)="getToDateForSave($event,srcCombData,rowIndex)"
                                                                                    placeholder="Date" bsDatepicker>
                                                                            </div>
                                                                        </div>
                                                                    </td>
                                                                    <!-- <td class="text-center"
                                                                        *ngIf='srcCombData.showElement == true && !noDerivedFlag'>
                                                                        <i [style.opacity]="addbtnflag && selectedIndex == rowIndex ? null : '0.6 '"
                                                                            [ngClass]="{'cursor-pointer': addbtnflag && selectedIndex == rowIndex, 'cursorStyle': selectedIndex != rowIndex }"
                                                                            class="fa fa-plus-circle font-18 text-dark-green  "
                                                                            tooltip="Add"
                                                                            (click)="addMatrixData(srcCombData,rowIndex)"
                                                                            *ngIf="isRangeApplicableFlag == true">
                                                                        </i>
                                                                    </td> -->

                                                                    <td class="text-center"
                                                                        *ngIf='isRangeApplicableFlag == true'>
                                                                        <i [style.opacity]="addbtnflag && selectedIndex == rowIndex ? null : '0.6 '"
                                                                            [ngClass]="{'cursor-pointer': addbtnflag && selectedIndex == rowIndex, 'cursorStyle': selectedIndex != rowIndex }"
                                                                            class="fa fa-plus-circle font-18 text-dark-green  "
                                                                            tooltip="Add"
                                                                            (click)="addMatrixData(srcCombData,rowIndex)"
                                                                            *ngIf="isRangeApplicableFlag == true">
                                                                        </i>
                                                                    </td>
                                                                    
                                                                </tr>

                                                                <tr class="p-selectable-row text-center"
                                                                    *ngFor="let data of tempMatrixData;let i = index;">
                                                                    <td *ngFor="let header of sourceFieldListData">
                                                                        <span
                                                                            *ngIf="header == 'payrollArea'">{{data.selectedCombData.payrollAreaId}}</span>
                                                                        <span
                                                                            *ngIf="header == 'Establishment'">{{data.selectedCombData.establishmentMasterId}}</span>
                                                                        <span
                                                                            *ngIf="header == 'SubLocation'">{{data.selectedCombData.subLocationMasterId}}</span>
                                                                        <span
                                                                            *ngIf="header == 'Location'">{{data.selectedCombData.subLocationMasterId}}</span>
                                                                        <span
                                                                            *ngIf="header == 'WorkLocation'">{{data.selectedCombData.workLocationMasterId}}</span>
                                                                        <span
                                                                            *ngIf="header == 'BusinessArea'">{{data.selectedCombData.businessAreaMasterId}}</span>
                                                                        <span
                                                                            *ngIf="header == 'SubArea'">{{data.selectedCombData.subAreaId}}</span>
                                                                        <span
                                                                            *ngIf="header == 'StrategicBusinessUnit'">{{data.selectedCombData.strategicBusinessUnitId}}</span>
                                                                        <span
                                                                            *ngIf="header == 'Division'">{{data.selectedCombData.divisionMasterId}}</span>
                                                                        <span
                                                                            *ngIf="header == 'Department'">{{data.selectedCombData.departmentMasterId}}</span>
                                                                        <span
                                                                            *ngIf="header == 'SubDepartment'">{{data.selectedCombData.subDepartmentId}}</span>
                                                                        <span
                                                                            *ngIf="header == 'CostCentre'">{{data.selectedCombData.costCentreId}}</span>
                                                                        <span
                                                                            *ngIf="header == 'SubCostCenter'">{{data.selectedCombData.subCostCenterId}}</span>
                                                                        <span
                                                                            *ngIf="header == 'ProfitCentre'">{{data.selectedCombData.profitCentreMasterId}}</span>
                                                                        <span
                                                                            *ngIf="header == 'Grade'">{{data.selectedCombData.gradeMasterId}}</span>
                                                                        <span
                                                                            *ngIf="header == 'Designation1'">{{data.selectedCombData.designation1MasterId}}</span>
                                                                        <span
                                                                            *ngIf="header == 'Designation2'">{{data.selectedCombData.designation2MasterId}}</span>

                                                                        <span
                                                                            *ngIf="header == 'functionName'">{{data.selectedCombData.spAndFunctionMasterId}}</span>
                                                                        <span
                                                                            *ngIf="header == 'genderType'">{{data.selectedCombData.genderId}}</span>
                                                                        <span
                                                                            *ngIf="header == 'employeeTaxCategoryId'">{{data.selectedCombData.employeeTaxCategoryId}}</span>

                                                                        <span
                                                                            *ngIf="header == 'employeeTypeId'">{{data.selectedCombData.employeeTypeId}}</span>
                                                                    </td>
                                                                    <td>{{data.sourceRangeFrom}}</td>
                                                                    <td>{{data.sourceRangeTo}}</td>
                                                                    <td *ngIf="!noDerivedFlag">{{data.applicableValue}}</td>
                                                                    <td *ngIf="!noDerivedFlag">{{data.derivedFromDate | date: 'dd-MMM-yyyy'}}</td>
                                                                    <td *ngIf="!noDerivedFlag">{{data.derivedToDate | date: 'dd-MMM-yyyy'}}</td>
                                                                    <td></td>
                                                                </tr>

                                                            </tbody>
                                                           
                                                        </table>
                                                        <br>
                                                       
                                                        <!-- <span> Showing {{p}} of {{sdmSourceCombinationListData.length}} entries</span> -->
                                                        <pagination-controls (pageChange)="p = $event">
                                                            
                                                        </pagination-controls>
                                                    </div>
                                                </div>
                                            </div>

                                            <div class="col-md-12 mt-15 float-right" style="margin-bottom: 50px;">
                                                <div class="float-right">
                                                    <!-- [disabled]="setPrevDisabled" -->
                                                    <!-- [ngClass]="{'disabled-btn-bg-green' : setPrevDisabled}" -->
                                                    <button type="submit"
                                                        (click)="getStepper(4);previous();getMatrixTableData();derivedMaster();combinationMatrix();"
                                                        class="custom_button custom_btn bg-teal-400 btn-labeled btn-labeled-left ripple"
                                                        tooltip="Previous"><b>
                                                            <i class="fa fa-angle-double-left"></i></b>
                                                        Previous</button>&nbsp;
                                                    <!-- [disabled]="saveMatrixData.length == 0" -->
                                                    <!-- <pre>{{selectedFromDateForSave == '' && selectedToDateForSave == ''}}</pre> -->
                                                    <!-- [ngClass]="{'disabled-btn-bg-green' : saveMatrixData.length == 0 || (selectedFromDateForSave == '' && selectedToDateForSave == '')}" -->

                                                    <!-- <button type="submit"
                                                        class="custom_button custom_btn bg-teal-400 btn-labeled btn-labeled-left ripple"
                                                        tooltip="Reset"><b>
                                                            <i class="fa fa-refresh"></i></b> Reset</button>&nbsp; -->

                                                    <button type="submit" (click)="saveMatrix()"
                                                        class="custom_button custom_btn btn-bg-green btn-labeled btn-labeled-left ripple"
                                                        tooltip="Save"><b>
                                                            <i class="fa fa-floppy-o"></i></b> Save</button>&nbsp;
                                                </div>
                                            </div>

                                        </div>
                                    </div>
                                    <div *ngSwitchDefault>Saved Successfully<i class="fa-check-circle"></i></div>
                                </div>
                            </div>

                        </div>
                    </div>
                </div>

                <div class="scroll-to-top" [ngClass]="{ 'show-scrollTop': windowScrolled }">
                    <button type="button" class="btn active" data-toggle="button" aria-pressed="true" tooltip="Top"
                        (click)="scrollToTop()">
                        <i class="fa fa-angle-double-up text-white font-18"></i>
                    </button>
                </div>

            </div>
        </div>
        <app-footer></app-footer>
    </div>
</div>



<div id="tblData" style="display: none;">
    <table>
        <thead>
            <!-- <tr>
                <th colspan="10" style="border: 1px solid black; background-color: yellow;">Source Fields</th>
            </tr> -->
            <tr>
                <th rowspan="2" style="border: 1px solid black;background-color: yellow;"
                    *ngFor="let header of sourceFieldListData">
                    {{header}}
                </th>
            </tr>
        </thead>
        <tbody>
            <tr></tr>
            <tr *ngFor="let srcCombData of sdmSourceCombinationListData">
                <td class="text-center" style="border: 1px solid black;" *ngFor="let header of sourceFieldListData">
                    <span *ngIf="header == 'payrollArea'">{{srcCombData.payrollAreaId}}</span>
                    <span *ngIf="header == 'Establishment'">{{srcCombData.establishmentMasterId}}</span>
                    <span *ngIf="header == 'SubLocation'">{{srcCombData.subLocationMasterId}}</span>
                    <span *ngIf="header == 'Location'">{{srcCombData.subLocationMasterId}}</span>
                    <span *ngIf="header == 'WorkLocation'">{{srcCombData.workLocationMasterId}}</span>
                    <span *ngIf="header == 'BusinessArea'">{{srcCombData.businessAreaMasterId}}</span>
                    <span *ngIf="header == 'SubArea'">{{srcCombData.subAreaId}}</span>
                    <span *ngIf="header == 'StrategicBusinessUnit'">{{srcCombData.strategicBusinessUnitId}}</span>
                    <span *ngIf="header == 'Division'">{{srcCombData.divisionMasterId}}</span>
                    <span *ngIf="header == 'Department'">{{srcCombData.departmentMasterId}}</span>
                    <span *ngIf="header == 'SubDepartment'">{{srcCombData.subDepartmentId}}</span>
                    <span *ngIf="header == 'CostCentre'">{{srcCombData.costCentreId}}</span>
                    <span *ngIf="header == 'SubCostCenter'">{{srcCombData.subCostCenterId}}</span>
                    <span *ngIf="header == 'ProfitCentre'">{{srcCombData.profitCentreMasterId}}</span>
                    <span *ngIf="header == 'Grade'">{{srcCombData.gradeMasterId}}</span>
                    <span *ngIf="header == 'Designation1'">{{srcCombData.designation1MasterId}}</span>
                    <span *ngIf="header == 'Designation2'">{{srcCombData.designation2MasterId}}</span>
                    <span *ngIf="header == 'functionName'">{{srcCombData.spAndFunctionMasterId}}</span>
                    <span *ngIf="header == 'genderType'">{{srcCombData.genderId}}</span>
                    <span *ngIf="header == 'employeeTaxCategoryId'">{{srcCombData.employeeTaxCategoryId}}</span>

                    <span *ngIf="header == 'employeeTypeId'">{{srcCombData.employeeTypeId}}</span>
                </td>
            </tr>
        </tbody>
    </table>
</div>

<div id="tblData1" style="display: none;">
    <table>
        <thead>
            <tr *ngIf="sourceFieldListData">
                <th [attr.colspan]="sourceFieldListData.length"
                    style="border: 1px solid black; background-color: yellow;">Source</th>
                <th colspan="2" *ngIf="isRangeApplicableFlag == true"
                    style="border: 1px solid black; background-color: yellow;">Source Range</th>
                <th colspan="1" style="border: 1px solid black; background-color: yellow;">Derived</th>
                <th colspan="2" style="border: 1px solid black; background-color: yellow;">Date Range</th>
            </tr>
            <tr>
                <th rowspan="2" *ngFor="let header of matrixTableData"
                    style="border: 1px solid black; background-color: yellow;">
                    {{header}}
                </th>
                <th rowspan="2" *ngIf="isRangeApplicableFlag == true"
                    style="border: 1px solid black; background-color: yellow;">
                    From
                </th>
                <th rowspan="2" *ngIf="isRangeApplicableFlag == true"
                    style="border: 1px solid black; background-color: yellow;">
                    To
                </th>
                <th rowspan="2" style="border: 1px solid black; background-color: yellow;">
                    {{derivedFieldName}}
                </th>
                <th rowspan="2" style="border: 1px solid black; background-color: yellow;">
                    From Date
                </th>
                <th rowspan="2" style="border: 1px solid black; background-color: yellow;">
                    To Date
                </th>
            </tr>
        </thead>
        <tbody>
            <tr></tr>
            <tr class="p-selectable-row text-center" [class.trhidden]="data.showElement == false"
                *ngFor="let data of tempEditMatrixData;let rowIndex = index;">

                <td *ngFor="let header of sourceFieldListData" style="border: 1px solid black;">
                    <span
                        *ngIf="header == 'payrollArea' && data.showElement == true">{{data.selectedCombData.payrollAreaId}}</span>
                    <span
                        *ngIf="header == 'Establishment' && data.showElement == true">{{data.selectedCombData.establishmentMasterId}}</span>
                    <span
                        *ngIf="header == 'SubLocation' && data.showElement == true">{{data.selectedCombData.subLocationMasterId}}</span>
                    <span
                        *ngIf="header == 'Location' && data.showElement == true">{{data.selectedCombData.subLocationMasterId}}</span>
                    <span
                        *ngIf="header == 'WorkLocation' && data.showElement == true">{{data.selectedCombData.workLocationMasterId}}</span>
                    <span
                        *ngIf="header == 'BusinessArea' && data.showElement == true">{{data.selectedCombData.businessAreaMasterId}}</span>
                    <span
                        *ngIf="header == 'SubArea' && data.showElement == true">{{data.selectedCombData.subAreaId}}</span>
                    <span
                        *ngIf="header == 'StrategicBusinessUnit' && data.showElement == true">{{data.selectedCombData.strategicBusinessUnitId}}</span>
                    <span
                        *ngIf="header == 'Division' && data.showElement == true">{{data.selectedCombData.divisionMasterId}}</span>
                    <span
                        *ngIf="header == 'Department' && data.showElement == true">{{data.selectedCombData.departmentMasterId}}</span>
                    <span
                        *ngIf="header == 'SubDepartment' && data.showElement == true">{{data.selectedCombData.subDepartmentId}}</span>
                    <span
                        *ngIf="header == 'CostCentre' && data.showElement == true">{{data.selectedCombData.costCentreId}}</span>
                    <span
                        *ngIf="header == 'SubCostCenter' && data.showElement == true">{{data.selectedCombData.subCostCenterId}}</span>
                    <span
                        *ngIf="header == 'ProfitCentre' && data.showElement == true">{{data.selectedCombData.profitCentreMasterId}}</span>
                    <span
                        *ngIf="header == 'Grade' && data.showElement == true">{{data.selectedCombData.gradeMasterId}}</span>
                    <span
                        *ngIf="header == 'Designation1' && data.showElement == true">{{data.selectedCombData.designation1MasterId}}</span>
                    <span
                        *ngIf="header == 'Designation2' && data.showElement == true">{{data.selectedCombData.designation2MasterId}}</span>

                    <span
                        *ngIf="header == 'functionName' && data.showElement == true">{{data.selectedCombData.spAndFunctionMasterId}}</span>
                    <span
                        *ngIf="header == 'genderType' && data.showElement == true">{{data.selectedCombData.genderId}}</span>
                    <span
                        *ngIf="header == 'employeeTaxCategoryId' && data.showElement == true">{{data.selectedCombData.employeeTaxCategoryId}}</span>

                    <span
                        *ngIf="header == 'employeeTypeId' && data.showElement == true">{{data.selectedCombData.employeeTypeId}}</span>
                </td>
                <td *ngIf="isRangeApplicableFlag == true && data.showElement == true" style="border: 1px solid black;">
                    {{data.sourceRangeFrom}}
                </td>
                <td *ngIf="isRangeApplicableFlag == true && data.showElement == true" style="border: 1px solid black;">
                    {{data.sourceRangeTo}}
                </td>
                <td *ngIf="data.showElement == true" style="border: 1px solid black;">
                    <div class="input-group">
                        {{data.applicableValue}}
                    </div>
                </td>
                <td *ngIf="data.showElement == true" style="border: 1px solid black;">
                    {{data.derivedFromDate | date: 'dd-MMM-yyyy'}}
                </td>
                <td *ngIf="data.showElement == true" style="border: 1px solid black;">
                    {{data.derivedToDate | date: 'dd-MMM-yyyy'}}
                </td>
            </tr>

            <tr class="p-selectable-row" [class.trhidden]="srcCombData.showElement == false"
                *ngFor="let srcCombData of matrixsdmSourceCombinationList; let rowIndex = index;">
                <td *ngFor="let header of matrixTableData" style="border: 1px solid black;">
                    <span
                        *ngIf="header == 'payrollArea' && srcCombData.showElement == true">{{srcCombData.payrollAreaId}}</span>
                    <span
                        *ngIf="header == 'Establishment' && srcCombData.showElement == true">{{srcCombData.establishmentMasterId}}</span>
                    <span
                        *ngIf="header == 'SubLocation' && srcCombData.showElement == true">{{srcCombData.subLocationMasterId}}</span>
                    <span
                        *ngIf="header == 'Location' && srcCombData.showElement == true">{{srcCombData.subLocationMasterId}}</span>
                    <span
                        *ngIf="header == 'WorkLocation' && srcCombData.showElement == true">{{srcCombData.workLocationMasterId}}</span>
                    <span
                        *ngIf="header == 'BusinessArea' && srcCombData.showElement == true">{{srcCombData.businessAreaMasterId}}</span>
                    <span
                        *ngIf="header == 'SubArea' && srcCombData.showElement == true">{{srcCombData.subAreaId}}</span>
                    <span
                        *ngIf="header == 'StrategicBusinessUnit' && srcCombData.showElement == true">{{srcCombData.strategicBusinessUnitId}}</span>
                    <span
                        *ngIf="header == 'Division' && srcCombData.showElement == true">{{srcCombData.divisionMasterId}}</span>
                    <span
                        *ngIf="header == 'Department' && srcCombData.showElement == true">{{srcCombData.departmentMasterId}}</span>
                    <span
                        *ngIf="header == 'SubDepartment' && srcCombData.showElement == true">{{srcCombData.subDepartmentId}}</span>
                    <span
                        *ngIf="header == 'CostCentre' && srcCombData.showElement == true">{{srcCombData.costCentreId}}</span>
                    <span
                        *ngIf="header == 'SubCostCenter' && srcCombData.showElement == true">{{srcCombData.subCostCenterId}}</span>
                    <span
                        *ngIf="header == 'ProfitCentre' && srcCombData.showElement == true">{{srcCombData.profitCentreMasterId}}</span>
                    <span
                        *ngIf="header == 'Grade' && srcCombData.showElement == true">{{srcCombData.gradeMasterId}}</span>
                    <span
                        *ngIf="header == 'Designation1' && srcCombData.showElement == true">{{srcCombData.designation1MasterId}}</span>
                    <span
                        *ngIf="header == 'Designation2' && srcCombData.showElement == true">{{srcCombData.designation2MasterId}}</span>

                    <span
                        *ngIf="header == 'functionName' && srcCombData.showElement == true">{{srcCombData.spAndFunctionMasterId}}</span>
                    <span
                        *ngIf="header == 'genderType' && srcCombData.showElement == true">{{srcCombData.genderId}}</span>
                    <span
                        *ngIf="header == 'employeeTaxCategoryId' && srcCombData.showElement == true">{{srcCombData.employeeTaxCategoryId}}</span>

                    <span
                        *ngIf="header == 'employeeTypeId' && srcCombData.showElement == true">{{srcCombData.employeeTypeId}}</span>
                </td>
                <td *ngIf="isRangeApplicableFlag == true && srcCombData.showElement == true"
                    style="border: 1px solid black;">

                    <input type="text" class="form-control" [value]="selectedIndex == rowIndex ? sourceRangeFrom : '' "
                        [ngClass]="{'is-invalid': srcCombData.invalidFromrange}"
                        (focusout)="sourceRangeFromData($event.target.value,rowIndex,srcCombData)">
                </td>
                <td *ngIf="isRangeApplicableFlag == true && srcCombData.showElement == true"
                    style="border: 1px solid black;">

                    <input type="text" class="form-control" [value]="selectedIndex == rowIndex ? sourceRangeTo : '' "
                        [ngClass]="{'is-invalid': srcCombData.invalidTorange}"
                        (focusout)="sourceRangeToData($event.target.value,rowIndex,srcCombData)">
                </td>
                <td *ngIf='srcCombData.showElement == true' style="border: 1px solid black;">
                    <div class="input-group">
                        <input type="text" class="form-control" *ngIf="!showDropdown && !showSearchLeans"
                            [value]="selectedIndex == rowIndex ? applicableValue : '' "
                            (focusout)="applicableValueData($event.target.value,srcCombData,rowIndex)">

                        <input type="text" class="form-control" *ngIf="showSearchLeans"
                            [value]="srcCombData.applicableValue1"
                            (focusout)="applicableValueData($event.target.value,srcCombData,rowIndex)">

                        <input type="text" class="form-control" *ngIf="showSearchLeans && selectedIndex != rowIndex"
                            (focusout)="applicableValueData($event.target.value,srcCombData,rowIndex)">

                        <span class="input-group-append" *ngIf="showSearchLeans">
                            <button class="btn btn-primary" type="button">
                                <span class="fe fe-search" (click)="largepopup (template1,rowIndex,srcCombData,'matrixsdmSourceCombinationList')"><i></i>
                                </span>
                            </button>
                        </span>
                    </div>
                    <select type="text" class="form-control" *ngIf="showDropdown"
                        [value]="selectedIndex == rowIndex ? applicableValue : '' "
                        (change)="applicableValueData($event.target.value,srcCombData,rowIndex)">
                        <option>Select</option>
                        <option *ngFor="let data of derivedDropdownValue">
                            {{data}}</option>
                    </select>
                </td>
                <td class="p-d-inline-flex" *ngIf='srcCombData.showElement == true' style="border: 1px solid black;">
                    <div class="p-d-inline-flex">
                        <span *ngIf='isRangeApplicableFlag != true'><i
                                (click)="copyFromDateToAll(srcCombData,rowIndex);" style="cursor: pointer;"
                                class="fa fa-clone text-blue font-16 mr-2 mt-2"></i>
                        </span>
                        <div class="form-group mb-0  mt-1 SMDatepickerWidth">
                            <div class="input-group">
                                <div class="input-group-prepend">
                                    <span class="input-group-text">
                                        <i class="fa fa-calendar"></i>
                                    </span>
                                </div>

                                <input data-provide="datepicker" data-date-autoclose="true" class="form-control"
                                    [bsConfig]="{ dateInputFormat: 'DD-MMM-YY' }"
                                    value="{{srcCombData.derivedFromDate | date: 'dd-MMM-yyyy'}}"
                                    (bsValueChange)="getFromDateForSave($event,srcCombData,rowIndex)" placeholder="Date"
                                    bsDatepicker>
                            </div>
                        </div>
                    </div>
                </td>
                <td *ngIf='srcCombData.showElement == true' style="border: 1px solid black;">
                    <div class="form-group mb-0  mt-1 SMDatepickerWidth">
                        <div class="input-group">
                            <div class="input-group-prepend">
                                <span class="input-group-text">
                                    <i class="fa fa-calendar"></i>
                                </span>
                            </div>
                            <input data-provide="datepicker" data-date-autoclose="true"
                                [bsConfig]="{ dateInputFormat: 'DD-MMM-YY' }" class="form-control"
                                value="{{srcCombData.derivedToDate | date:'dd-MMM-yyyy'}}"
                                [minDate]="srcCombData.derivedFromDate || selectedFromDateForSave"
                                (bsValueChange)="getToDateForSave($event,srcCombData,rowIndex)" placeholder="Date"
                                bsDatepicker>
                        </div>
                    </div>
                </td>
            </tr>

            <tr class="p-selectable-row text-center" *ngFor="let data of tempMatrixData;let i = index;">
                <td *ngFor="let header of sourceFieldListData" style="border: 1px solid black;">
                    <span *ngIf="header == 'payrollArea'">{{data.selectedCombData.payrollAreaId}}</span>
                    <span *ngIf="header == 'Establishment'">{{data.selectedCombData.establishmentMasterId}}</span>
                    <span *ngIf="header == 'SubLocation'">{{data.selectedCombData.subLocationMasterId}}</span>
                    <span *ngIf="header == 'Location'">{{data.selectedCombData.subLocationMasterId}}</span>
                    <span *ngIf="header == 'WorkLocation'">{{data.selectedCombData.workLocationMasterId}}</span>
                    <span *ngIf="header == 'BusinessArea'">{{data.selectedCombData.businessAreaMasterId}}</span>
                    <span *ngIf="header == 'SubArea'">{{data.selectedCombData.subAreaId}}</span>
                    <span
                        *ngIf="header == 'StrategicBusinessUnit'">{{data.selectedCombData.strategicBusinessUnitId}}</span>
                    <span *ngIf="header == 'Division'">{{data.selectedCombData.divisionMasterId}}</span>
                    <span *ngIf="header == 'Department'">{{data.selectedCombData.departmentMasterId}}</span>
                    <span *ngIf="header == 'SubDepartment'">{{data.selectedCombData.subDepartmentId}}</span>
                    <span *ngIf="header == 'CostCentre'">{{data.selectedCombData.costCentreId}}</span>
                    <span *ngIf="header == 'SubCostCenter'">{{data.selectedCombData.subCostCenterId}}</span>
                    <span *ngIf="header == 'ProfitCentre'">{{data.selectedCombData.profitCentreMasterId}}</span>
                    <span *ngIf="header == 'Grade'">{{data.selectedCombData.gradeMasterId}}</span>
                    <span *ngIf="header == 'Designation1'">{{data.selectedCombData.designation1MasterId}}</span>
                    <span *ngIf="header == 'Designation2'">{{data.selectedCombData.designation2MasterId}}</span>

                    <span *ngIf="header == 'functionName'">{{data.selectedCombData.spAndFunctionMasterId}}</span>
                    <span *ngIf="header == 'genderType'">{{data.selectedCombData.genderId}}</span>
                    <span
                        *ngIf="header == 'employeeTaxCategoryId'">{{data.selectedCombData.employeeTaxCategoryId}}</span>

                    <span *ngIf="header == 'employeeTypeId'">{{data.selectedCombData.employeeTypeId}}</span>
                </td>
                <td style="border: 1px solid black;">{{data.sourceRangeFrom}}</td>
                <td style="border: 1px solid black;">{{data.sourceRangeTo}}</td>
                <td style="border: 1px solid black;">{{data.applicableValue}}</td>
                <td style="border: 1px solid black;">{{data.derivedFromDate | date: 'dd-MMM-yyyy'}}
                </td>
                <td style="border: 1px solid black;">{{data.derivedToDate | date: 'dd-MMM-yyyy'}}
                </td>
            </tr>
        </tbody>
    </table>
</div>


<ng-template #template1>
    <div class="modal-header">
        <h5 class="modal-title" id="UploadModalLabel">Employee Selection</h5>
        <button type="button" (click)="modalRef.hide()" class="close" data-dismiss="modal" aria-label="Close"><span
                aria-hidden="true"></span></button>
    </div>
    <div class="modal-body">
        <div class="card">
            <div class="card-body">

                <div class="row mt-15">
                    <div class="col-12">
                        <div class="mb-15">
                            <div class="form-group">
                                <label class="form-label"></label>
                                <!-- <div class="input-icon mb-3" style="width: 250px;">
                                    <input type="text" class="form-control" placeholder="Search...">
                                    <span class="input-icon-addon"><i class="fe fe-search"></i></span>
                                </div> -->
                            </div>
                        </div>
                    </div>
                </div>
                <div class="row clearfix">

                    <div class="col-md-12">

                        <p-table [value]="EmployeeData" [paginator]="true" [rows]="10" [showCurrentPageReport]="true"
                            currentPageReportTemplate="Showing {first} to {last} of {totalRecords} entries"
                            [rowsPerPageOptions]="[10,25,50]" #dt [globalFilterFields]="['employeeCode','fullName']">
                            <ng-template pTemplate="caption">
                                <div style="text-align: right">
                                    <!-- <i class="pi pi-search" style="margin:4px 4px 0 0"></i> -->
                                    <input type="text" pInputText size="50" placeholder="Search"
                                        (input)="dt.filterGlobal($event.target.value, 'contains')"
                                        style="width: 203px;margin-right: 37px;">


                                </div>
                            </ng-template>
                            <ng-template pTemplate="header">
                                <tr>

                                    <th>
                                        <div class="p-d-flex p-jc-between p-ai-center">
                                            Select


                                            <div class="Sort_Filter_Position">
                                                <p-sortIcon field="Attribute" pSortableColumn="Attribute"></p-sortIcon>
                                                <p-columnFilter type="text" field="name" display="menu"
                                                    class="p-ml-auto"></p-columnFilter>
                                            </div>
                                        </div>
                                    </th>

                                    <th rowspan="2">
                                        <div class="p-d-flex p-jc-between p-ai-center">
                                            Emp. Code

                                            <div class="Sort_Filter_Position">
                                                <p-sortIcon field="Attribute" pSortableColumn="Attribute"></p-sortIcon>
                                                <p-columnFilter type="text" field="name" display="menu"
                                                    class="p-ml-auto"></p-columnFilter>
                                            </div>
                                        </div>
                                    </th>


                                    <th rowspan="2">
                                        <div class="p-d-flex p-jc-between p-ai-center">
                                            Emp. Name
                                            <div class="Sort_Filter_Position">
                                                <p-sortIcon field="Attribute" pSortableColumn="Attribute"></p-sortIcon>
                                                <p-columnFilter type="date" field="text" display="menu"
                                                    class="p-ml-auto"></p-columnFilter>
                                            </div>
                                        </div>
                                    </th>

                                </tr>


                            </ng-template>


                            <ng-template pTemplate="body" let-emp let-rowIndex=rowIndex>
                                <tr class="p-selectable-row">

                                    <td class="text-center bg-color-light_gray">
                                        <label class="custom-control custom-checkbox checkbox-center">
                                            <input (click)="selectedEmpId(emp,$event.target,rowIndex)" type="checkbox"
                                                class="custom-control-input" name="select"
                                                [disabled]="emp.checkboxFlag" />
                                            <span class="custom-control-label"></span>
                                        </label>

                                    </td>

                                    <td class="bg-color-light_gray"><label class="form-lable mb-0">{{emp.employeeCode}}
                                        </label></td>
                                    <td class="bg-color-light_gray"><label class="form-lable mb-0">{{emp.fullName}}
                                        </label></td>



                                </tr>


                            </ng-template>
                            <ng-template pTemplate="emptymessage">
                                <tr>
                                    <td colspan="15" class="font-14 font500 text-center text-red"><span>No Data
                                            Available</span></td>
                                </tr>
                            </ng-template>
                        </p-table>
                    </div>

                </div>
            </div>
        </div>
    </div>
    <div class="modal-footer">
        <button type="button" class="custom_button custom_btn bg-teal-400 btn-labeled btn-labeled-left " tooltip="Reset"
            (click)="resetSelectedEmpData()"><b>
                <i class="fa fa-refresh"></i></b> Reset</button>&nbsp;

        <button type="button" class="custom_button custom_btn bg-btn-red btn-labeled btn-labeled-left " tooltip="Close"
            (click)="modalRef.hide()"><b>
                <i class="fa fa-times"></i></b> Close</button>&nbsp;
    </div>
</ng-template>


<ng-template #template4>
    <div class="modal-header">
        <h5 class="modal-title" id="UploadModalLabel">History</h5>
        <button type="button" (click)="modalRef.hide()" class="close" data-dismiss="modal" aria-label="Close"><span
                aria-hidden="true"></span></button>
    </div>
    <div class="modal-body">
        <div class="card">
            <div class="card-body">
                <div class="row clearfix">
                    <div class="col-md-12">
                        <div class="cycle-table mt-4">

                            <p-table [value]="users1" [paginator]="true" [rows]="10" (sortFunction)="customSort($event)"
                                [customSort]="true" [showCurrentPageReport]="true"
                                currentPageReportTemplate="Showing {first} to {last} of {totalRecords} entries"
                                [rowsPerPageOptions]="[10,25,50,100,200]">
                                <ng-template pTemplate="header">
                                    <tr>
                                        <th [attr.colspan]="sourceFieldListData.length" class="wd-16 text-center">
                                            <div class="p-d-flex p-jc-between p-ai-center text-center"
                                                style="margin-left: 120px;">Source
                                            </div>
                                        </th>
                                        <th colspan="2" class="wd-21 text-center" *ngIf="isRangeApplicableFlag == true">
                                            <div class="p-d-flex p-jc-between p-ai-center" style="margin-left:100px;">
                                                Source Range
                                            </div>
                                        </th>
                                        <th colspan="1" class="wd-6 text-center">
                                            <div class="p-d-flex p-jc-between p-ai-center">
                                                Derived

                                            </div>
                                        </th>
                                        <th colspan="2" class="wd-8 text-center">
                                            <div class="p-d-flex p-jc-between p-ai-center" style="margin-left:140px;">
                                                Date Range
                                                <!-- <div class="Sort_Filter_Position">
                                                <p-sortIcon field="Payroll"
                                                    pSortableColumn="Payroll">
                                                </p-sortIcon>
                                                <p-columnFilter type="date" field="text"
                                                    display="menu" class="p-ml-auto">
                                                </p-columnFilter>
                                            </div> -->
                                            </div>
                                        </th>

                                    </tr>
                                    <tr>
                                        <th rowspan="2" class=" text-center" *ngFor="let header of matrixTableData">
                                            <div class="p-d-flex p-jc-between p-ai-center">
                                                {{header}}
                                                <!-- <div class="Sort_Filter_Position">
                                                <p-sortIcon field="Payroll"
                                                    pSortableColumn="Payroll">
                                                </p-sortIcon>
                                                <p-columnFilter type="date" field="text"
                                                    display="menu" class="p-ml-auto">
                                                </p-columnFilter>
                                            </div> -->
                                            </div>
                                        </th>
                                        <th rowspan="2" class="text-center" *ngIf="isRangeApplicableFlag == true">
                                            <div class="p-d-flex p-jc-between p-ai-center">
                                                From
                                                <!-- <div class="Sort_Filter_Position">
                                                <p-sortIcon field="DateRange"
                                                    pSortableColumn="DateRange">
                                                </p-sortIcon>
                                                <p-columnFilter type="date" field="text"
                                                    display="menu" class="p-ml-auto">
                                                </p-columnFilter>
                                            </div> -->
                                            </div>
                                        </th>
                                        <th rowspan="2" class=" text-center " *ngIf="isRangeApplicableFlag == true">
                                            <div class="p-d-flex p-jc-between p-ai-center" style="margin-left: 70px;">
                                                To
                                                <!-- <div class="Sort_Filter_Position">
                                                <p-sortIcon field="DateRange"
                                                    pSortableColumn="DateRange">
                                                </p-sortIcon>
                                                <p-columnFilter type="date" field="text"
                                                    display="menu" class="p-ml-auto">
                                                </p-columnFilter>
                                            </div> -->
                                            </div>
                                        </th>
                                        <th rowspan="2" class=" text-center">
                                            <div class="p-d-flex p-jc-between p-ai-center">
                                                {{derivedFieldName}}
                                                <!-- <div class="Sort_Filter_Position">
                                                <p-sortIcon field="Value"
                                                    pSortableColumn="Value">
                                                </p-sortIcon>
                                                <p-columnFilter type="date" field="text"
                                                    display="menu" class="p-ml-auto">
                                                </p-columnFilter>
                                            </div> -->
                                            </div>
                                        </th>
                                        <!-- rowspan="2" -->
                                        <th class="text-center">
                                            <div class="p-d-flex p-jc-between p-ai-center">
                                                From Date
                                                <!-- <div class="Sort_Filter_Position">

                                                <p-sortIcon field="FromDate"
                                                    pSortableColumn="FromDate">
                                                </p-sortIcon>
                                                <p-columnFilter type="date" field="text"
                                                    display="menu" class="p-ml-auto">
                                                </p-columnFilter>
                                            </div> -->
                                            </div>
                                        </th>
                                        <!-- rowspan="2" -->
                                        <th class=" text-center ">
                                            <div class="p-d-flex p-jc-between p-ai-center">
                                                To Date
                                                <!-- <div class="Sort_Filter_Position">
                                                <p-sortIcon field="ToDate"
                                                    pSortableColumn="ToDate">
                                                </p-sortIcon>
                                                <p-columnFilter type="date" field="text"
                                                    display="menu" class="p-ml-auto">
                                                </p-columnFilter>
                                            </div> -->
                                            </div>
                                        </th>
                                    </tr>
                                </ng-template>
                                <!-- let-srcCombData let-rowIndex = rowIndex -->
                                <ng-template pTemplate="body">


                                    <tr class="p-selectable-row text-center" *ngFor="let history of matrixHistory">
                                        <!-- let data of tempEditMatrixData; -->
                                        <td *ngFor="let header of sourceFieldListData">
                                            <span
                                                *ngIf="header == 'payrollArea'">{{history.selectedCombData.payrollAreaId}}</span>
                                            <span
                                                *ngIf="header == 'Establishment'">{{history.selectedCombData.establishmentMasterId}}</span>
                                            <span
                                                *ngIf="header == 'SubLocation'">{{history.selectedCombData.subLocationMasterId}}</span>
                                            <span
                                                *ngIf="header == 'Location'">{{history.selectedCombData.subLocationMasterId}}</span>
                                            <span
                                                *ngIf="header == 'WorkLocation'">{{history.selectedCombData.workLocationMasterId}}</span>
                                            <span
                                                *ngIf="header == 'BusinessArea'">{{history.selectedCombData.businessAreaMasterId}}</span>
                                            <span
                                                *ngIf="header == 'SubArea'">{{history.selectedCombData.subAreaId}}</span>
                                            <span
                                                *ngIf="header == 'StrategicBusinessUnit'">{{history.selectedCombData.strategicBusinessUnitId}}</span>
                                            <span
                                                *ngIf="header == 'Division'">{{history.selectedCombData.divisionMasterId}}</span>
                                            <span
                                                *ngIf="header == 'Department'">{{history.selectedCombData.departmentMasterId}}</span>
                                            <span
                                                *ngIf="header == 'SubDepartment'">{{history.selectedCombData.subDepartmentId}}</span>
                                            <span
                                                *ngIf="header == 'CostCentre'">{{history.selectedCombData.costCentreId}}</span>
                                            <span
                                                *ngIf="header == 'SubCostCenter'">{{history.selectedCombData.subCostCenterId}}</span>
                                            <span
                                                *ngIf="header == 'ProfitCentre'">{{history.selectedCombData.profitCentreMasterId}}</span>
                                            <span
                                                *ngIf="header == 'Grade'">{{history.selectedCombData.gradeMasterId}}</span>
                                            <span
                                                *ngIf="header == 'Designation1'">{{history.selectedCombData.designation1MasterId}}</span>
                                            <span
                                                *ngIf="header == 'Designation2'">{{history.selectedCombData.designation2MasterId}}</span>

                                            <span
                                                *ngIf="header == 'functionName'">{{history.selectedCombData.spAndFunctionMasterId}}</span>
                                            <span
                                                *ngIf="header == 'genderType'">{{history.selectedCombData.genderId}}</span>
                                            <span
                                                *ngIf="header == 'employeeTaxCategoryId'">{{history.selectedCombData.employeeTaxCategoryId}}</span>

                                            <span
                                                *ngIf="header == 'employeeTypeId'">{{history.selectedCombData.employeeTypeId}}</span>
                                        </td>
                                        <td *ngIf="isRangeApplicableFlag == true">
                                            {{history.sourceRangeFrom}}
                                        </td>
                                        <td *ngIf="isRangeApplicableFlag == true">
                                            {{history.sourceRangeTo}}
                                        </td>
                                        <td>{{history.applicableValue}}</td>
                                        <td>
                                            {{history.derivedFromDate | date: 'dd-MMM-yyyy'}}
                                        </td>
                                        <td>
                                            {{history.derivedToDate | date: 'dd-MMM-yyyy'}}
                                        </td>

                                    </tr>
                                </ng-template>
                                <ng-template pTemplate="emptymessage">
                                    <tr>
                                        <td colspan="15" class="font-14 font500 text-center text-red">
                                            <span>No Data
                                                Available</span>
                                        </td>
                                    </tr>
                                </ng-template>
                            </p-table>


                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <div class="modal-footer">
        <button type="button" class="btn btn-secondary" (click)="modalRef.hide()">Ok</button>
    </div>
</ng-template>