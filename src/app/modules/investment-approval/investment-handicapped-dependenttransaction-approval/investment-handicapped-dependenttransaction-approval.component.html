<!-- <p>investment-handicapped-dependenttransaction-approval works!</p> -->
<app-leftmenu></app-leftmenu>
<!-- Main body part -->
<div class="page">
  <!-- Header -->
  <app-header></app-header>
  <!-- Header End-->
  <div class="section-body mt-3">
    <div class="container-fluid">
      <div class="row">
        <div class="col-12">
          <div class="card">
            <div class="card-body">
              <div class="">
              <!-- Back to Dashboard Button -->
              <div class="row">
                <div class="col-md-11"></div>
                <div class="col-md-1">
                  <a
          [routerLink]="['/investment-approval/dashboard']" tooltip="Back to Dashboard">
                  <i class="fa fa-arrow-left fa-pull-right" aria-hidden="true"></i></a>
                </div>
              </div>
              <!-- Back to Dashboard Button End -->

              <!-- Employee And PSID Information -->
              <div class="row">
                <div class="col-md-12">
                  <div class="bg-color-light_gray pt-10 pl-10 pr-10">
                    <div class="row">
                      <div class="col-md-2">
                        <label class="form-label mt-1 mb-0"
                          >Employee No. & Name</label
                        >
                        <label class="font-12 text-ellipsis mt-1 mb-0">
                          {{ employeeInfo.employeeCode }}-{{
                            employeeInfo.fullName
                          }}</label
                        >
                      </div>
                      <div class="col-md-2">
                        <label class="form-label mt-1 mb-0"
                          >Employee Type</label
                        >
                        <label class="font-12 text-ellipsis mt-1 mb-0">
                          {{ employeeInfo.employeeType }}
                        </label>
                      </div>
                      <div class="col-md-1">
                        <label class="form-label mt-1 mb-0">Grade</label>
                        <label class="font-12 text-ellipsis mt-1 mb-0">
                          {{ employeeInfo.grade }}
                        </label>
                      </div>
                      <div class="col-md-2">
                        <label class="form-label mt-1 mb-0"
                          >Date of Joining</label
                        >
                        <label class="font-12 text-ellipsis mt-1 mb-0">
                          {{ employeeInfo.joiningDate | date: "dd-MMM-yyyy" }}
                        </label>
                      </div>
                      <div class="col-md-2">
                        <label class="form-label mt-1 mb-0"
                          >Date of Leaving</label
                        >
                        <label class="font-12 text-ellipsis mt-1 mb-0">
                          {{ employeeInfo.joiningDate | date: "dd-MMM-yyyy" }}
                        </label>
                      </div>

                      <div class="col-md-1">
                        <label class="form-label mt-1 mb-0">Designation</label>
                        <label class="font-12 text-ellipsis mt-1 mb-0">
                          {{ employeeInfo.designation }}
                        </label>
                      </div>
                      <div class="col-md-2">
                        <label class="form-label mt-1 mb-0">Emp. Status</label>
                        <label class="font-12 text-ellipsis mt-1 mb-0">
                          {{ employeeInfo.establishment }}
                        </label>
                      </div>
                    </div>
                  </div>
                </div>
              </div>

              <div class="row mt-15">
                <div class="col-md-12">
                  <div class="bg-color-light_gray pt-10 pl-10 pr-10">
                    <div class="row">
                      <div class="col-md-2">
                        <label class="form-label mt-1 mb-0">Group</label>
                        <label class="font-12 text-ellipsis mt-1 mb-0">
                          {{ transactionInfo.psidDetail.groupName }}</label
                        >
                      </div>
                      <div class="col-md-2">
                        <label class="form-label mt-1 mb-0">Section</label>
                        <label class="font-12 text-ellipsis mt-1 mb-0">
                          {{ transactionInfo.psidDetail.section }}
                        </label>
                      </div>
                      <div class="col-md-1">
                        <label class="form-label mt-1 mb-0">Type</label>
                        <label class="font-12 text-ellipsis mt-1 mb-0">
                          {{ transactionInfo.psidDetail.type }}
                        </label>
                      </div>
                      <div class="col-md-2">
                        <label class="form-label mt-1 mb-0">PS ID</label>
                        <label class="font-12 text-ellipsis mt-1 mb-0">
                          {{ transactionInfo.psidDetail.psid }}
                        </label>
                      </div>

                      <div class="col-md-2">
                        <label class="form-label mt-1 mb-0"
                          >Date Of Submission</label
                        >
                        <label class="font-12 text-ellipsis mt-1 mb-0">
                          {{
                            transactionInfo.psidDetail.dateOfSubmission
                              | date: "dd-MMM-yyyy"
                          }}
                        </label>
                      </div>
                      <div class="col-md-1">
                        <label class="form-label mt-1 mb-0">PS ID Status</label>
                        <label class="font-12 text-ellipsis mt-1 mb-0">
                          {{ transactionInfo.psidDetail.proofSubmissionStatus }}
                        </label>
                      </div>

                      <div class="col-md-2">
                        <label class="form-label mt-1 mb-0">Date & Time</label>
                        <label class="font-12 text-ellipsis mt-1 mb-0">
                          {{
                            transactionInfo.psidDetail.lastModifiedDateTime
                              | date: "dd-MMM-yyyy HH:mm"
                          }}
                        </label>
                      </div>
                    </div>
                  </div>
                </div>
              </div>
              <!-- Employee And PSID Information end-->
</div>
              <div class="row">
                <div class="col-md-12">
                  <div class="card mt-15">
                    <!-- Approval Details -->
                    <div class="card-body">
                      <div class="">
                        <div class="row">
                          <!-- Transaction Details Heading -->
                          <div class="col-md-6">
                            <h6
                              _ngcontent-emo-c439=""
                              class="font-14 text-purple font-bold mb-3"
                            >
                              Transaction Details
                            </h6>
                          </div>
                          <!-- Transaction Details Heading -->

                          <!-- Master Popup Button -->
                          <!-- <div class="col-md-6">
                            <div class="float-right">
                              <button
                                type="submit"
                                tooltip="view master"
                                class="badge badge-success ripple badge1"
                                (click)="Confirmation(template)"
                              >
                                <b> <i class="fa fa-check-square-o fax"></i></b>
                                Master
                              </button>
                            </div>
                          </div> -->
                          <!-- Master Popup Button End-->
                        </div>

                        <!-- Transaction Details For Loop Started -->
                        <div
                          *ngFor="
                            let transactionDetail of transactionInfo.transactionDetail;
                            let transactionDetailIndex = index
                          "
                        >
                          <!-- Master Popup Button -->
                          <div class="row mt-10">
                            <div class="col-md-12">
                              <div class="float-right">
                                <button
                                  type="submit"
                                  tooltip="view master"
                                  class="badge badge-success ripple badge1"
                                  (click)="openMasterDetailInPopUp(masterDetailtemplate, transactionDetail.masterPSID)"
                                >
                                  <b>
                                    <i class="fa fa-check-square-o fax"></i
                                  ></b>
                                  Master
                                </button>
                              </div>
                            </div>
                          </div>
                          <!-- Master Popup Button End-->
                          <!-- Master Details Line -->
                          <div class="row">
                            <div class="col-md-3 col-xs-12">
                              <h6 class="font-12 mb-3 font-normal">
                                <strong>Famliy Member Name : </strong
                                >{{ transactionDetail.familyMemberName }}
                              </h6>
                            </div>
                            <div class="col-md-3 col-xs-12">
                                <h6 class="font-12 mb-3 font-normal">
                                  <strong>Relationship : </strong
                                  >{{ transactionDetail.relationship }}
                                </h6>
                              </div>
                            <div class="col-md-3 col-xs-12">
                              <h6 class="font-12 mb-3 font-normal">
                                <strong>Disability Type : </strong
                                >{{ transactionDetail.disabilityType }}
                              </h6>
                            </div>
                            <div class="col-md-3 col-xs-12">
                              <h6 class="font-12 mb-3 font-normal">
                                <strong>Severity Level : </strong
                                >{{ transactionDetail.severity }}
                              </h6>
                            </div>
                           
                          </div>
                          <!-- Master Details Line End -->

                          <!-- Transaction  Details Table -->
                          <div class="row mt-10">
                            <div class="col-md-12">
                              <div class="table-responsive">
                                <p-table
                                  [value]="
                                    transactionDetail.transactionDetailList
                                  "
                                >

                                 <!-- P-Table ng-template header is started -->
                                  <ng-template pTemplate="header">
                                    <tr>
                                      <th>
                                        <p-tableHeaderCheckbox>
                                        </p-tableHeaderCheckbox>
                                      </th>

                                      <th class="wd-10">Previous Employer</th>
                                      <th class="wd-10">Family Member Name</th>
                                      <!-- <th class="wd-10">Due Date</th>
                                      <th class="wd-10">Date of Payment</th> -->
                                      <th class="wd-10">Actual</th>
                                      <th class="primeng-table-header-center wd-10">
                                        Rejected
                                      </th>
                                      <th class="primeng-table-header-center wd-10">
                                        Approved
                                      </th>
                                      <th
                                        class="
                                          primeng-table-header-center
                                          wd-15
                                        "
                                      >
                                        Remark
                                      </th>
                                      <th >Status</th>
                                      <th >Action</th>
                                    </tr>
                                  </ng-template>
                                 <!-- P-Table ng-template header is End -->

                                 <!-- P-Table ng-template body is started -->
                                  <ng-template
                                    pTemplate="body"
                                    let-transaction
                                    let-transactionIndex="rowIndex"
                                  >
                                  <tr
                                  class="p-selectable-row"
                                  [pSelectableRow]="transaction"
                                >
                                      <td>
                                        <p-tableCheckbox [value]="transaction"
                                        (click)="
                                        selectTransactionForProcess(
                                          e.checked,
                                          transaction
                                        )
                                      "
                                      #e
                                      [class.disableCheckbox]="
                                      transaction.transactionStatus ==
                                      'Approved'"
                                        >
                                        </p-tableCheckbox>
                                      </td>
                                      <td aria-disabled="true" class="disabled">
                                        {{ transaction.previousEmployer }}
                                      </td>
                                      <td aria-disabled="true" class="disabled">
                                        {{ transaction.familyMemberName }}
                                      </td>
                                      <!-- <td class="disabled">
                                        {{
                                          transaction.dueDate
                                            | date: "dd-MMM-yyyy"
                                        }}
                                      </td> -->
                                      <!-- <td class="disabled">
                                        {{
                                          transaction.dateOfPayment
                                            | date: "dd-MMM-yyyy"
                                        }}
                                      </td> -->
                                      <td class="disabled align-right">
                                        {{ transaction.actualAmount | number: "1.2-2"}}
                                      </td>

                                      <td>
                                        <input
                                          type="text"
                                          [(ngModel)]="
                                            transaction.amountRejected
                                          "
                                          onkeypress="return /[0-9']/i.test(event.key)"
                                          (change)="
                                          onChangeRejectedAmount(
                                                transactionDetail,
                                                transactionIndex,
                                                $event
                                              )
                                            "
                                            [disabled]="
                                              transaction.transactionStatus ==
                                                'Approved'
                                            "

                                          class="form-control align-right"
                                        />
                                      </td>
                                      <td>
                                        <input
                                          type="text"
                                          [(ngModel)]="
                                            transaction.amountApproved
                                          "
                                          (change)="
                                          onChangeApprovedAmount(
                                                transactionDetail,
                                                transactionIndex,
                                                $event
                                              )
                                            "
                                            [disabled]="
                                            transaction.transactionStatus ==
                                              'Approved'
                                          "
                                          onkeypress="return /[0-9']/i.test(event.key)"
                                          class="form-control align-right"
                                        />
                                      </td>
                                      <td>

                                          <div class="d-flex">
                                          <input
                                            type="text"
                                            class="form-control"
                                            (change)="
                                              onChangeTransactionalRemark(
                                                transactionDetail,
                                                transactionIndex,
                                                $event
                                              )
                                            "
                                            [disabled]="
                                              transaction.transactionStatus ==
                                                'Approved'
                                            "
                                          />
                                          <div
                                            _ngcontent-ykc-c443=""
                                            class="custom_Label_badge mr-2 ml-2"
                                          >
                                            <b>
                                              <i
                                                (click)="
                                                  docRemarkModal(
                                                    template3,
                                                    transactionIndex,
                                                    transaction.documentRemarkDetailList
                                                  )
                                                "
                                                class="
                                                  fa fa-commenting
                                                  text-dark-green
                                                  fa-2x
                                                  cursor-pointer
                                                "
                                              >
                                              </i
                                            ></b>
                                            <span
                                              _ngcontent-ykc-c443=""
                                              class="Label_badge "
                                              >{{
                                                transaction.remarkList.length
                                              }}</span
                                            >
                                          </div>
                                        </div>

                                      </td>

                                      <td class="disabled">
                                        {{ transaction.transactionStatus }}
                                      </td>
                                      <td>
                                        <i
                                        *ngIf="

                                         transaction.transactionStatus == 'Approved' "
                                          class="
                                            fa fa-edit
                                            font-16
                                            text-blue
                                            cursor-pointer
                                          "
                                          tooltip="Edit"
                                          (click)="editTransactionLineItem(transaction)"
                                        ></i>
                                      </td>
                                    </tr>
                                  </ng-template>
                                  <!-- P-Table ng-template body is Ended -->

                                </p-table>
                              </div>
                            </div>
                          </div>
                          <!-- Transaction  Details Table -->

                          <hr />
                        </div>
                        <!-- Transaction Details For Loop End -->

                        <!-- Grand Total Table Row -->
                        <div class="row mt-15">
                          <div class="col-md-12">
                            <div class="table-responsive Custom_Table">
                              <table
                                class="
                                  table table-striped table-hover table-bordered
                                  m-b-0
                                "
                              >
                                <tbody>
                                  <tr>
                                    <td class="bg-gray font-18 font700 wd-12">
                                      Grand Total
                                    </td>

                                    <!-- <td
                                      class="
                                        bg-gray
                                        font-18
                                        font700
                                        align-right
                                        wd-10
                                      "
                                    ></td> -->
                                    <td
                                      class="
                                        bg-gray
                                        font-18
                                        font700
                                        align-right
                                        wd-9
                                      "
                                    >
                                      <span
                                        class="padding-right-12"
                                        placement="left"
                                        tooltip=""
                                      >

                                      </span>
                                    </td>
                                    <td
                                      class="
                                        bg-gray
                                        font-18
                                        font700
                                        align-right
                                        wd-8
                                      "
                                    ></td>
                                    <td
                                      class="
                                        bg-gray
                                        font-18
                                        font700
                                        align-right
                                        wd-9
                                      "
                                    >
                                      <span
                                        class="padding-right-12"
                                        placement="left"
                                        tooltip=""
                                      >
                                        {{
                                          transactionInfo.grandTotalActual
                                            | number: "1.2-2"
                                        }}
                                      </span>
                                    </td>
                                    <td
                                      class="
                                        bg-gray
                                        font-18
                                        font700
                                        align-right
                                        wd-9
                                      "
                                    >
                                      <span
                                        class="padding-right-12"
                                        placement="left"
                                        tooltip=""
                                      >
                                        {{
                                          transactionInfo.grandTotalRejected
                                            | number: "1.2-2"
                                        }}
                                      </span>
                                    </td>
                                    <td
                                      class="
                                        bg-gray
                                        font-18
                                        font700
                                        align-right
                                        wd-8
                                      "
                                    >
                                      <span
                                        class="padding-right-12"
                                        placement="left"
                                        tooltip=""
                                      >
                                        {{  transactionInfo.grantTotalApproved| number: "1.2-2" }}
                                      </span>
                                    </td>
                                    <td
                                      class="bg-gray font-18 font700 wd-10"
                                    ></td>
                                    <td
                                      class="bg-gray font-18 font700 wd-10"
                                    ></td>
                                    <td
                                      class="bg-gray font-18 font700 wd-10"
                                    ></td>
                                  </tr>
                                </tbody>
                              </table>
                            </div>
                          </div>
                        </div>
                        <!-- Grand Total Table Row End-->
                      </div>
                    </div>
                    <!-- Approval Details End -->

                     <!-- Buttons of Approval -->
                     <div class="row mt-10 mb-15">
                      <div class="col-md-12">
                        <div class="float-right">
                          <!-- <button
                            *ngIf="
                              transactionInfo.psidDetail.proofSubmissionStatus ==
                              'Approved'
                            "
                            type="button"
                            tooltip="Edit Approval"
                            class="
                              custom_button custom_btn
                              btn-bg-green btn-labeled
                              ripple
                              mr-2
                            "
                            (click)="changePSIDStatusOfTransaction('Re-Open')"
                          >
                            Edit Approval
                          </button> -->
                          <button
                            type="button"
                            tooltip="Send Back"
                            class="
                              custom_button custom_btn
                              bg-btn-red
                              btn-labeled btn-labeled-left
                              mr-2
                            "
                            [class.disableredbutton]=" transactionList.length == 0 ||
                              transactionInfo.psidDetail.proofSubmissionStatus == '' ||
                              transactionInfo.psidDetail.proofSubmissionStatus ==
                                'Approved'
                                ||
                                  transactionInfo.psidDetail.proofSubmissionStatus ==
                                    'SendBack'
                            "
                            [disabled]=" transactionList.length == 0 ||
                              transactionInfo.psidDetail.proofSubmissionStatus == '' ||
                              transactionInfo.psidDetail.proofSubmissionStatus ==
                                'Approved'
                                ||
                                  transactionInfo.psidDetail.proofSubmissionStatus ==
                                    'SendBack'
                            "
                            (click)="changePSIDStatusOfTransaction('SendBack')"
                          >
                            <b><i class="fa fa-reply-all"></i></b>
                            SendBack
                          </button>
                          <button
                            type="button"
                            tooltip="Forward"
                            class="
                              custom_button custom_btn
                              btn-bg-green btn-labeled btn-labeled-left
                              ripple
                              mr-2
                            "
                            [disabled]="transactionList.length == 0 ||
                              transactionInfo.psidDetail.proofSubmissionStatus == '' ||
                              transactionInfo.psidDetail.proofSubmissionStatus ==
                                'Approved' ||
                                transactionInfo.psidDetail.proofSubmissionStatus ==
                                  'SendBack'
                            "
                            [class.disablegreenbutton]="transactionList.length == 0 ||
                              transactionInfo.psidDetail.proofSubmissionStatus == '' ||
                              transactionInfo.psidDetail.proofSubmissionStatus ==
                                'Approved' ||
                                transactionInfo.psidDetail.proofSubmissionStatus ==
                                  'SendBack'
                            "
                          >
                            <b> <i class="fa fa-share"></i></b> Forward
                          </button>
                          <button
                            type="button"
                            class="
                              custom_button custom_btn
                              btn-bg-green btn-labeled btn-labeled-left
                              ripple
                              mr-2
                            "
                            [class.disablegreenbutton]=" approved1Disabled 
                            "
                            [disabled]=" approved1Disabled
                            "
                            (click)="changePSIDStatusOfTransaction('Approved')"
                            tooltip="Approve"
                          >
                            <b> <i class="fa fa-floppy-o"></i></b> Approve 
                          </button>

                          <button
                            type="button"
                            tooltip="Previous"
                            class="
                              custom_button custom_btn
                              bg-teal-400
                              btn-labeled btn-labeled-left
                              mr-2
                            "
                            [class.disablegraybutton]="proofSubmissionIdListIndex==0"
                                [disabled]="proofSubmissionIdListIndex==0"
                            (click)="changePSID(globalPSID, 'Previous')"
                          >
                            <b
                              ><i
                                class="fa fa-angle-double-left"
                                aria-hidden="true"
                              ></i></b
                            >Previous
                          </button>

                          <button
                            type="button"
                            tooltip="Next"
                            class="
                              custom_button custom_btn
                              bg-teal-400
                              btn-labeled btn-labeled-left
                              mr-2
                            "
                            [class.disablegraybutton]="
                               proofSubmissionIdListIndex==localStorageProofSubmissionIdList.length-1 ||
                              transactionInfo.psidDetail.proofSubmissionStatus == ''
                            "
                            [disabled]="
                               proofSubmissionIdListIndex==localStorageProofSubmissionIdList.length-1 ||
                              transactionInfo.psidDetail.proofSubmissionStatus == ''
                            "
                            (click)="changePSID(globalPSID, 'Next')"
                          >
                            <b><i class="fa fa-angle-double-right"></i></b
                            >Next {{proofSubmissionIdListIndex==localStorageProofSubmissionIdList.length-1}}
                          </button>

                          <button
                            type="button"
                            tooltip="Send Back"
                            class="
                              custom_button custom_btn
                              bg-btn-red
                              btn-labeled btn-labeled-left
                              mr-2
                            "
                            [class.disableredbutton]=" transactionList.length == 0 ||
                              proofSubmissionIdListIndex==localStorageProofSubmissionIdList.length-1 ||
                              transactionInfo.psidDetail.proofSubmissionStatus == '' ||
                              transactionInfo.psidDetail.proofSubmissionStatus ==
                                'Approved' ||
                                transactionInfo.psidDetail.proofSubmissionStatus ==
                                  'SendBack'
                            "
                            [disabled]="transactionList.length == 0 ||
                              proofSubmissionIdListIndex==localStorageProofSubmissionIdList.length-1 ||
                              transactionInfo.psidDetail.proofSubmissionStatus == '' ||
                              transactionInfo.psidDetail.proofSubmissionStatus ==
                                'Approved' ||
                                transactionInfo.psidDetail.proofSubmissionStatus ==
                                  'SendBack'
                            "
                            (click)="changeStatusWithNextPrevious('SendBack',globalPSID, 'Next')"
                          >
                            <b><i class="fa fa-reply-all"></i></b>
                            SendBack &
                            <i class="fa fa-angle-double-right"></i>
                          </button>

                          <button
                            type="button"
                            tooltip="Forward & Next"
                            class="
                              custom_button custom_btn
                              btn-bg-green btn-labeled btn-labeled-left
                              mr-2
                            "
                            [class.disablegreenbutton]="transactionList.length == 0 ||
                              proofSubmissionIdListIndex==localStorageProofSubmissionIdList.length-1 ||
                              transactionInfo.psidDetail.proofSubmissionStatus == '' ||
                              transactionInfo.psidDetail.proofSubmissionStatus ==
                                'Approved'  ||
                                transactionInfo.psidDetail.proofSubmissionStatus ==
                                  'SendBack'
                            "
                            [disabled]="transactionList.length == 0 ||
                              proofSubmissionIdListIndex==localStorageProofSubmissionIdList.length-1 ||
                              transactionInfo.psidDetail.proofSubmissionStatus == '' ||
                              transactionInfo.psidDetail.proofSubmissionStatus ==
                                'Approved'  ||
                                transactionInfo.psidDetail.proofSubmissionStatus ==
                                  'SendBack'
                            "
                          >
                            <b><i class="fa fa-share"></i></b> Forward &
                            <i class="fa fa-angle-double-right"></i>
                          </button>
                          <button
                            type="button"
                            tooltip="Approve & Next"
                            class="
                              custom_button custom_btn
                              btn-bg-green btn-labeled btn-labeled-left
                              ripple
                              mr-2
                            "
                            [class.disablegreenbutton]="transactionList.length == 0 || approvedDisabled ||
                              proofSubmissionIdListIndex==localStorageProofSubmissionIdList.length-1 ||
                              transactionInfo.psidDetail.proofSubmissionStatus == '' ||
                              transactionInfo.psidDetail.proofSubmissionStatus ==
                                'Approved'
                            "
                            [disabled]="transactionList.length == 0 || approvedDisabled ||
                              proofSubmissionIdListIndex==localStorageProofSubmissionIdList.length-1 ||
                              transactionInfo.psidDetail.proofSubmissionStatus == '' ||
                              transactionInfo.psidDetail.proofSubmissionStatus ==
                                'Approved'
                            "
                            (click)="changeStatusWithNextPrevious('Approved',globalPSID, 'Next')"
                          >
                            <b> <i class="fa fa-floppy-o"></i></b> Approve &
                            <i class="fa fa-angle-double-right"></i>
                          </button>
                        </div>
                      </div>
                    </div>
                    <!-- Buttons of Approval End -->

                  </div>
                </div>
              </div>

              <!-- Document Information Table -->
              <div class="row">
                <div class="col-md-12">
                  <div class="border-box">
                    <div class="row mt-30">
                      <div class="col-12">
                        <div class="card">
                          <!-- Document Header -->
                          <div class="mb-0">
                            <h3 class="font-14 text-purple font-bold">
                              Document
                            </h3>
                          </div>
                          <!-- Document Header End-->

                          <!-- Document Details Table  -->
                          <div class="col-12 col-md-12 col-sm-12">
                            <div class="table-responsive Custom_Table">
                              <p-table
                                #dt2
                                [value]="transactionInfo.documentList"
                                [selection]="documentList"
                                [paginator]="true"
                                [rows]="10"
                                [showCurrentPageReport]="true"
                                (sortFunction)="customSort($event)"
                                [customSort]="true"
                                currentPageReportTemplate="Showing {first} to {last} of {totalRecords} entries"
                                [rowsPerPageOptions]="[10, 25, 50]"
                                [globalFilterFields]="[
                                  'dateOfSubmission',
                                  'fileName',
                                  'documentType',
                                  'password',
                                  'remark',
                                  'documentStatus',
                                  'lastModifiedBy',
                                  'lastModifiedDateTime'
                                ]"
                              >
                                <!-- P-Table ng-template header with filter, sort is started -->
                                <ng-template pTemplate="header">
                                  <tr>
                                    <th style="width: 3rem">
                                      <!-- <p-tableHeaderCheckbox
                                        (click)="
                                          selectDocumentForApprovalOrDiscard(
                                            e.checked,
                                            '',
                                            masterInfo
                                          )
                                        "
                                        #e
                                      ></p-tableHeaderCheckbox> -->
                                      <p-tableHeaderCheckbox></p-tableHeaderCheckbox>
                                    </th>

                                    <th>
                                      <div
                                        class="
                                          p-d-flex
                                          p-jc-between
                                          p-ai-center
                                        "
                                      >
                                        Date Of Submission
                                        <div
                                          class="Sort_Filter_Position"
                                        >
                                          <p-sortIcon
                                            field="dateOfSubmission"
                                            pSortableColumn="dateOfSubmission"
                                          ></p-sortIcon>
                                          <p-columnFilter
                                            field="dateOfSubmission"
                                            display="menu"
                                            class="p-ml-auto"
                                          >
                                          </p-columnFilter>
                                        </div>
                                      </div>
                                    </th>
                                    <th>
                                      <div
                                        class="
                                          p-d-flex
                                          p-jc-between
                                          p-ai-center
                                        "
                                      >
                                        Document Name
                                        <div
                                          class="Sort_Filter_Position"
                                        >
                                          <p-sortIcon
                                            field="fileName"
                                            pSortableColumn="fileName"
                                          ></p-sortIcon>
                                          <p-columnFilter
                                            field="fileName"
                                            display="menu"
                                            class="p-ml-auto"
                                          >
                                          </p-columnFilter>
                                        </div>
                                      </div>
                                    </th>
                                    <th>
                                      <div
                                        class="
                                          p-d-flex
                                          p-jc-between
                                          p-ai-center
                                        "
                                      >
                                        Document Type
                                        <div
                                          class="Sort_Filter_Position"
                                        >
                                          <p-sortIcon
                                            field="documentType"
                                            pSortableColumn="documentType"
                                          ></p-sortIcon>
                                          <p-columnFilter
                                            field="documentType"
                                            display="menu"
                                            class="p-ml-auto"
                                          >
                                          </p-columnFilter>
                                        </div>
                                      </div>
                                    </th>
                                    <th>
                                      <div
                                        class="
                                          p-d-flex
                                          p-jc-between
                                          p-ai-center
                                        "
                                      >
                                        Password
                                        <div
                                          class="Sort_Filter_Position"
                                        >
                                          <p-sortIcon
                                            field="password"
                                            pSortableColumn="password"
                                          ></p-sortIcon>
                                          <p-columnFilter
                                            field="password"
                                            display="menu"
                                            class="p-ml-auto"
                                          >
                                          </p-columnFilter>
                                        </div>
                                      </div>
                                    </th>
                                    <th>
                                      <div
                                        class="
                                          p-d-flex
                                          p-jc-between
                                          p-ai-center
                                        "
                                      >
                                        Remark
                                        <div
                                          class="Sort_Filter_Position"
                                        >
                                          <p-sortIcon
                                            field="remark"
                                            pSortableColumn="remark"
                                          ></p-sortIcon>
                                          <p-columnFilter
                                            field="remark"
                                            display="menu"
                                            class="p-ml-auto"
                                          >
                                          </p-columnFilter>
                                        </div>
                                      </div>
                                    </th>
                                    <th>
                                      <div
                                        class="
                                          p-d-flex
                                          p-jc-between
                                          p-ai-center
                                        "
                                      >
                                        Status
                                        <div
                                          class="Sort_Filter_Position"
                                        >
                                          <p-sortIcon
                                            field="documentStatus"
                                            pSortableColumn="documentStatus"
                                          ></p-sortIcon>
                                          <p-columnFilter
                                            field="documentStatus"
                                            display="menu"
                                            class="p-ml-auto"
                                          >
                                          </p-columnFilter>
                                        </div>
                                      </div>
                                    </th>
                                    <th>
                                      <div
                                        class="
                                          p-d-flex
                                          p-jc-between
                                          p-ai-center
                                        "
                                      >
                                        Approver Name
                                        <div
                                          class="Sort_Filter_Position"
                                        >
                                          <p-sortIcon
                                            field="lastModifiedBy"
                                            pSortableColumn="lastModifiedBy"
                                          ></p-sortIcon>
                                          <p-columnFilter
                                            field="lastModifiedBy"
                                            display="menu"
                                            class="p-ml-auto"
                                          >
                                          </p-columnFilter>
                                        </div>
                                      </div>
                                    </th>
                                    <th>
                                      <div
                                        class="
                                          p-d-flex
                                          p-jc-between
                                          p-ai-center
                                        "
                                      >
                                        Date & Time
                                        <div
                                          class="Sort_Filter_Position"
                                        >
                                          <p-sortIcon
                                            field="lastModifiedDateTime"
                                            pSortableColumn="lastModifiedDateTime"
                                          ></p-sortIcon>
                                          <p-columnFilter
                                            field="lastModifiedDateTime"
                                            display="menu"
                                            class="p-ml-auto"
                                          >
                                          </p-columnFilter>
                                        </div>
                                      </div>
                                    </th>
                                    <th>Action</th>
                                  </tr>
                                </ng-template>
                                <!-- P-Table ng-template header with filter, sort is ended -->

                                <!-- P-Table ng-template body is started -->
                                <ng-template
                                  pTemplate="body"
                                  let-documentDetail
                                  let-documentDetailIndex="rowIndex"
                                >
                                  <tr
                                    class="p-selectable-row"
                                    [pSelectableRow]="documentDetail"
                                  >
                                    <td>
                                      <p-tableCheckbox
                                        [value]="documentDetail"
                                        (click)="
                                          selectDocumentForApprovalOrDiscard(
                                            e.checked,
                                            documentDetail,
                                            transactionInfo
                                          )
                                        "
                                        #e
                                        [class.disableCheckbox]="
                                          documentDetail.documentStatus ==
                                            'Approved' ||
                                          documentDetail.documentStatus ==
                                            'Discarded' ||
                                          documentDetail.documentStatus ==
                                            'Discard'
                                        "
                                        [disabled]="
                                          documentDetail.documentStatus ==
                                            'Approved' ||
                                          documentDetail.documentStatus ==
                                            'Discarded' ||
                                          documentDetail.documentStatus ==
                                            'Discard'
                                        "
                                      >
                                      </p-tableCheckbox>
                                    </td>
                                    <td>
                                      {{
                                        documentDetail.dateOfSubmission
                                          | date: "dd-MMM-yyyy"
                                      }}
                                    </td>
                                    <td class="text-blue cursor">
                                      <div class="d-flex"><a
                                        (click)="
                                          navigateToDocumentViewer(
                                            documentDetail.documentInformationId
                                          )
                                        "
                                      >
                                        <i
                                          class="fa fa-paperclip text-orange"
                                        ></i>
                                        &nbsp;
                                        {{ documentDetail.fileName }}
                                      </a></div>
                                    </td>
                                    <td>
                                      {{ documentDetail.documentType }}
                                    </td>
                                    <td>
                                      {{ documentDetail.password }}
                                    </td>
                                    <td>
                                      <div class="d-flex">
                                        <input
                                          type="text"
                                          class="form-control"
                          
                                          (change)="
                                            onChangeDocumentRemark(
                                              documentDetail,
                                              $event
                                            )
                                          "
                                          [disabled]="
                                            documentDetail.documentStatus ==
                                              'Approved' ||
                                            documentDetail.documentStatus ==
                                              'Discarded' ||
                                            documentDetail.documentStatus ==
                                              'Discard'
                                          "
                                        />
                                        <div
                                          _ngcontent-ykc-c443=""
                                          class="custom_Label_badge mr-2 ml-2"
                                        >
                                          <b>
                                            <i
                                              (click)="
                                                docRemarkModal(
                                                  template3,
                                                  documentDetailIndex,
                                                  documentDetail.documentRemarkDetailList
                                                )
                                              "
                                              class="
                                                fa fa-commenting
                                                text-dark-green
                                                fa-2x
                                                cursor-pointer
                                              "
                                            >
                                            </i
                                          ></b>
                                          <span
                                            _ngcontent-ykc-c443=""
                                            class="Label_badge"
                                            >{{
                                              documentDetail
                                                .documentRemarkDetailList.length
                                            }}</span
                                          >
                                        </div>
                                      </div>
                                    </td>
                                    <td>
                                      {{ documentDetail.documentStatus }}
                                    </td>
                                    <td>
                                      {{ documentDetail.lastModifiedBy }}
                                    </td>
                                    <td>
                                      {{
                                        documentDetail.lastModifiedDateTime
                                          | date: "dd-MMM-yyyy HH:mm"
                                      }}
                                    </td>
                                    <td>
                                      <i
                                        *ngIf="
                                          documentDetail.documentStatus ==
                                            'Approved' ||
                                          documentDetail.documentStatus ==
                                            'Discarded' ||
                                          documentDetail.documentStatus ==
                                            'Discard'
                                        "
                                        class="
                                          fa fa-edit
                                          font-16
                                          text-blue
                                          cursor-pointer
                                        "
                                        tooltip="Edit"
                                        (click)="editDocument(documentDetail)"
                                      ></i>
                                    </td>
                                  </tr>
                                </ng-template>
                                <!-- P-Table ng-template body is started -->
                              </p-table>
                            </div>
                          </div>
                          <!-- Document Details Table  End-->

                          <!-- Document Approval Buttons  -->
                          <div class="row mt-25">
                            <div class="col-md-12">
                              <div class="float-right">
                                <button
                                  type="button"
                                  class="
                                    custom_button custom_btn
                                    btn-bg-green btn-labeled btn-labeled-left
                                    ripple
                                    mr-2
                                  "
                                  (click)="changeDocumentStatus('Approved')"
                                  tooltip="Approve"
                                  [class.disablegreenbutton]="
                                    documentList.length == 0
                                  "
                                  [disabled]="documentList.length == 0"
                                >
                                  <b> <i class="fa fa-floppy-o"></i></b>
                                  Approve
                                </button>

                                <button
                                  type="button"
                                  tooltip="Send Back"
                                  class="
                                    custom_button custom_btn
                                    bg-btn-red
                                    btn-labeled btn-labeled-left
                                    mr-2
                                  "
                                  (click)="changeDocumentStatus('Discarded')"
                                  [class.disableredbutton]="
                                    documentList.length == 0
                                  "
                                  [disabled]="documentList.length == 0"
                                >
                                  <b><i class="fa fa-times"></i></b>
                                  Discard
                                </button>
                              </div>
                            </div>
                          </div>
                          <!-- Document Approval Buttons End -->
                        </div>
                      </div>
                    </div>
                  </div>
                </div>
              </div>
              <!-- Document Information Table End -->

              <!-- Master Details Pop Up Started -->
              <ng-template #masterDetailtemplate>
                <!-- Master Detail Header -->
                <div class="modal-header">
                  <h5 class="modal-title" id="UploadModalLabel">
                    Master Details
                  </h5>
                  <button
                    type="button"
                    (click)="modalRef.hide()"
                    class="close"
                    data-dismiss="modal"
                    aria-label="Close"
                  >
                    <span aria-hidden="true">×</span>
                  </button>
                </div>
                <!-- Master Detail Header End-->

                <!-- Master Detail Body -->
                <div class="modal-body">
                  <div class="card">
                    <div class="card-body">
                      <div class="row clearfix">
                        <div class="col-md-12">
                          <div class="border-box">
                            <div class="row">
                              <div class="col-md-12">
                                <h6
                                  _ngcontent-emo-c439=""
                                  class="font-14 text-purple font-bold mb-3"
                                >
                                  Master Details
                                </h6>
                              </div>
                            </div>
                            <div class="row mt-10">
                              <!-- <div class="col-md-3">
                                <label class="form-label">Institution</label>
                                <input
                                  class="form-control"
                                  disabled
                                  value="{{
                                    masterInfo.masterDetail.institutionName
                                  }}"
                                />
                              </div> -->
                              <div class="col-md-3">
                                <label class="form-label">Famliy Member Name</label>
                                <input
                                  class="form-control"
                                  disabled
                                  value="{{
                                    masterInfo.masterDetail.policyholdername
                                  }}"
                                />
                              </div>
                              <!-- <div class="col-md-3">
                                <label class="form-label">Policy No.</label>
                                <input
                                  class="form-control"
                                  disabled
                                  value="{{ masterInfo.masterDetail.policyNo }}"
                                />
                              </div> -->
                              <div class="col-md-3">
                                <label class="form-label">Relationship</label>
                                <input
                                  class="form-control"
                                  disabled
                                  value="{{ masterInfo.masterDetail.relationship }}"
                                />
                              </div>
                              <!-- <div class="col-md-3">
                                <label class="form-label">Policy Holder Name</label>
                                <input
                                  class="form-control"
                                  disabled
                                  value="{{
                                    masterInfo.masterDetail.policyholdername
                                  }}"
                                />
                              </div> -->
                              <!-- <div class="col-md-3">
                                <label class="form-label">Relationship</label>
                                <input
                                  class="form-control"
                                  disabled
                                  value="{{ masterInfo.masterDetail.relationship }}"
                                />
                              </div> -->
                              <div class="col-md-3">
                                <label class="form-label">Disability Type</label>
                                <input
                                  class="form-control"
                                  disabled
                                  value="{{ masterInfo.masterDetail.disabilityType }}"
                                />
                              </div>
                              <div class="col-md-3">
                                <label class="form-label">Severity Level</label>
                                <input
                                  class="form-control"
                                  disabled
                                  value="{{ masterInfo.masterDetail.severity }}"
                                />
                              </div>
                            </div>
                            <div class="row mt-15">
                              <!-- <div class="col-md-3">
                                <label class="form-label">Policy Start Date</label>
                                <input
                                  class="form-control"
                                  disabled
                                  value="{{
                                    masterInfo.masterDetail.policyStartDate
                                      | date: 'dd-MMM-yyyy'
                                  }}"
                                />
                              </div> -->
                              <!-- <div class="col-md-3">
                                <label class="form-label"> Policy End Date</label>
                                <input
                                  class="form-control"
                                  disabled
                                  value="{{
                                    masterInfo.masterDetail.policyEndDate
                                      | date: 'dd-MMM-yyyy'
                                  }}"
                                />
                              </div> -->
                            </div>
                          </div>

                          <!-- <div class="row mt-25"> -->
                            <!-- <fieldset> -->
                              <!-- <div class="col-12 col-md-12 col-sm-12">
                              <legend>Payment Details</legend>
                            </div> -->
                              <!-- <div class="row mt-15">
                                <div class="col-md-3">
                                  <label class="form-label"
                                    >Frequency Of Payment</label
                                  >
                                  <input
                                    type="text"
                                    disabled
                                    class="form-control"
                                  />
                                </div>
                                <div class="col-md-3">
                                  <label class="form-label"
                                    >Premium Amount</label
                                  >
                                  <input
                                    type="text"
                                    disabled
                                    class="form-control"
                                  />
                                </div>
                                <div class="col-md-3">
                                  <label class="form-label"
                                    >Annual Amount</label
                                  >
                                  <input
                                    type="text"
                                    disabled
                                    class="form-control"
                                  />
                                </div>
                                <div class="col-md-3">
                                  <label class="form-label">ECS</label>
                                  <div class="custom-controls-stacked">
                                    <label
                                      class="
                                        custom-control
                                        custom-radio
                                        custom-control-inline
                                      "
                                    >
                                      <input
                                        type="radio"
                                        class="custom-control-input"
                                        name="example-inline-radios"
                                        value="option1"
                                        checked
                                      />
                                      <span class="custom-control-label"
                                        >Yes
                                      </span>
                                    </label>
                                    <label
                                      class="
                                        custom-control
                                        custom-radio
                                        custom-control-inline
                                      "
                                    >
                                      <input
                                        type="radio"
                                        class="custom-control-input"
                                        name="example-inline-radios"
                                        value="option2"
                                      />
                                      <span class="custom-control-label"
                                        >No</span
                                      >
                                    </label>
                                  </div>
                                </div>
                              </div>
                              <div class="row mt-15">
                                <div class="col-md-3">
                                  <label class="form-label"> From Date </label>
                                  <div class="form-group">
                                    <div class="input-group">
                                      <div class="input-group-prepend">
                                        <span class="input-group-text">
                                          <i class="fa fa-calendar"></i>
                                        </span>
                                      </div>
                                      <input
                                        data-provide="datepicker"
                                        disabled
                                        data-date-autoclose="true"
                                        class="form-control"
                                        bsDatepicker
                                      />
                                    </div>
                                  </div>
                                </div>
                                <div class="col-md-3">
                                  <label class="form-label"> To Date </label>
                                  <div class="form-group">
                                    <div class="input-group">
                                      <div class="input-group-prepend">
                                        <span class="input-group-text">
                                          <i class="fa fa-calendar"></i>
                                        </span>
                                      </div>
                                      <input
                                        data-provide="datepicker"
                                        disabled
                                        data-date-autoclose="true"
                                        class="form-control"
                                        bsDatepicker
                                      />
                                    </div>
                                  </div>
                                </div>
                              </div> -->

                              <!-- Master Payment Details -->
                              <!-- <div class="col-12 col-md-12 col-sm-12">
                        <div class="row mt-15">
                          <div class="col-12 col-md-12 col-sm-12">
                            <div class="table-responsive Custom_Table">
                              <p-table
                                [value]="
                                  masterInfo.masterDetail.paymentDetailList
                                "
                              >
                                <ng-template pTemplate="header">
                                  <tr>
                                    <th>Sr. No.</th>
                                    <th>From Date</th>
                                    <th>To Date</th>
                                    <th>Frequency</th>
                                    <th class="align-right">Premium Amount</th>
                                    <th class="align-right">Annual Amount</th>
                                    <th>ECS</th>
                                  </tr>
                                </ng-template>
                                <ng-template
                                  pTemplate="body"
                                  let-paymentDetail
                                  let-paymentDetailIndex="rowIndex"
                                >
                                  <tr>
                                    <td aria-disabled="true" class="disabled">
                                      {{ paymentDetailIndex + 1 }}
                                    </td>
                                    <td class="disabled">
                                      {{
                                        paymentDetail.fromDate
                                          | date: "dd-MMM-yyyy"
                                      }}
                                    </td>
                                    <td class="disabled">
                                      {{
                                        paymentDetail.toDate
                                          | date: "dd-MMM-yyyy"
                                      }}
                                    </td>
                                    <td class="disabled">
                                      {{ paymentDetail.frequencyOfPayment }}
                                    </td>
                                    <td class="disabled align-right">
                                      {{
                                        paymentDetail.premiumAmount
                                          | number: "1.2-2"
                                      }}
                                    </td>
                                    <td class="disabled align-right">
                                      {{
                                        paymentDetail.annualAmount
                                          | number: "1.2-2"
                                      }}
                                    </td>
                                    <td class="disabled">
                                      <span
                                        *ngIf="paymentDetail.ecs"
                                        tooltip="Yes"
                                        >Yes</span
                                      >

                                      <span
                                        *ngIf="!paymentDetail.ecs"
                                        tooltip="No"
                                        >No</span
                                      >
                                    </td>
                                  </tr>
                                </ng-template>
                              </p-table>
                            </div>
                          </div>
                        </div>
                      </div>
                        Master Payment Details End

                             </fieldset> 
                          </div> -->
                        </div>
                      </div>
                    </div>
                  </div>
                </div>
                <!-- Master Detail Body End -->

                <!-- Master Detail Footer -->
                <div class="modal-footer">
                  <button
                    type="button"
                    class="btn btn-secondary"
                    (click)="modalRef.hide()"
                  >
                    Ok
                  </button>
                </div>
                <!-- Master Detail Footer -->

              </ng-template>
              <!-- Master Details Pop Up Ended -->

              <!-- Remark Modal started -->
              <ng-template #template3>
                <div class="modal-header">
                  <h5 class="modal-title" id="jasdjgh">View Remark</h5>
                  <button
                    type="button"
                    (click)="modalRef.hide()"
                    class="close"
                    data-dismiss="modal"
                    aria-label="Close"
                  >
                    <span aria-hidden="true">×</span>
                  </button>
                </div>

                <div class="card-body">
                  <div *ngFor="let documentRemark of documentRemarkList">
                    <div class="row">
                      <div class="col-md-6">
                        <span class="form-label"
                          >{{ documentRemark.role }}:
                          <b class="text-gray">{{
                            documentRemark.remarkBy
                          }}</b></span
                        >
                      </div>
                      <div class="col-md-6">
                        <div class="float-right">
                          <span class="form-label">
                            Date:
                            <b class="text-gray">{{
                              documentRemark.remarkDate
                                | date: "dd-MMM-yyyy HH:mm"
                            }}</b>
                          </span>
                        </div>
                      </div>
                    </div>
                    <div class="row">
                      <textarea class="form-control remarktext" disabled>
                    {{ documentRemark.remark }}
                    </textarea
                      >
                    </div>
                  </div>
                </div>

                <div class="modal-footer">
                  <button
                    type="button"
                    class="btn btn-secondary"
                    (click)="modalRef.hide()"
                  >
                    Ok
                  </button>
                </div>
              </ng-template>
              <!-- Remark Modal End -->

              <div
                class="scroll-to-top"
                [ngClass]="{ 'show-scrollTop': windowScrolled }"
              >
                <button
                  type="button"
                  class="btn active"
                  data-toggle="button"
                  aria-pressed="true"
                  tooltip="Top"
                  (click)="scrollToTop()"
                >
                  <i class="fa fa-angle-double-up text-white font-18"></i>
                </button>
              </div>

              <div
                class="scroll-to-bottom"
                [ngClass]="{ 'show-scrollbottom': windowScrolled }"
              >
                <button
                  type="button"
                  class="btn active"
                  data-toggle="button"
                  aria-pressed="true"
                  tooltip="Top"
                  (click)="scrollToTop()"
                >
                  <i class="fa fa-angle-double-up text-white font-18"></i>
                </button>
              </div>

            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>

