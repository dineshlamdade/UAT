<!-- <p>investment-housing-loan-master-approval works!</p> -->
<app-leftmenu></app-leftmenu>
<!-- Main body part -->
<div class="page">
  <!-- Header -->
  <app-header></app-header>
  <!-- Header End-->

  <div class="section-body mt-3">
    <div class="container-fluid">
      <div class="row">
        <div class="col-12">
          <div class="card">
            <div class="card-body">
              <div class="">
                <!-- Back to Dashboard Button -->
                <div class="row">
                  <div class="col-md-11"></div>
                  <div class="col-md-1">
                    <a
                      [routerLink]="['/investment-approval/dashboard']"
                      tooltip="Back to Dashboard"
                    >
                      <i
                        class="fa fa-arrow-left fa-pull-right"
                        aria-hidden="true"
                      ></i
                    ></a>
                  </div>
                </div>
                <!-- Back to Dashboard Button End -->

                <!-- Employee And PSID Information -->
                <div class="row">
                  <div class="col-md-12">
                    <div class="bg-color-light_gray pt-10 pl-10 pr-10">
                      <div class="row">
                        <div class="col-md-2">
                          <label class="form-label mt-1 mb-0"
                            >Employee No. & Name</label
                          >
                          <label class="font-12 text-ellipsis mt-1 mb-0">
                            {{ employeeInfo.employeeCode }}-{{
                              employeeInfo.fullName
                            }}</label
                          >
                        </div>
                        <div class="col-md-2">
                          <label class="form-label mt-1 mb-0"
                            >Employee Type</label
                          >
                          <label class="font-12 text-ellipsis mt-1 mb-0">
                            {{ employeeInfo.employeeType }}
                          </label>
                        </div>
                        <div class="col-md-1">
                          <label class="form-label mt-1 mb-0">Grade</label>
                          <label class="font-12 text-ellipsis mt-1 mb-0">
                            {{ employeeInfo.grade }}
                          </label>
                        </div>
                        <div class="col-md-2">
                          <label class="form-label mt-1 mb-0"
                            >Date of Joining</label
                          >
                          <label class="font-12 text-ellipsis mt-1 mb-0">
                            {{ employeeInfo.joiningDate | date: "dd-MMM-yyyy" }}
                          </label>
                        </div>
                        <div class="col-md-2">
                          <label class="form-label mt-1 mb-0"
                            >Date of Leaving</label
                          >
                          <label class="font-12 text-ellipsis mt-1 mb-0">
                            {{ employeeInfo.joiningDate | date: "dd-MMM-yyyy" }}
                          </label>
                        </div>

                        <div class="col-md-1">
                          <label class="form-label mt-1 mb-0"
                            >Designation</label
                          >
                          <label class="font-12 text-ellipsis mt-1 mb-0">
                            {{ employeeInfo.designation }}
                          </label>
                        </div>
                        <div class="col-md-2">
                          <label class="form-label mt-1 mb-0"
                            >Emp. Status</label
                          >
                          <label class="font-12 text-ellipsis mt-1 mb-0">
                            {{ employeeInfo.establishment }}
                          </label>
                        </div>
                      </div>
                    </div>
                  </div>
                </div>

                <div class="row mt-15">
                  <div class="col-md-12">
                    <div class="bg-color-light_gray pt-10 pl-10 pr-10">
                      <div class="row">
                        <div class="col-md-2">
                          <label class="form-label mt-1 mb-0">Group</label>
                          <label class="font-12 text-ellipsis mt-1 mb-0">
                            {{ masterInfo.psidDetail.groupName }}</label
                          >
                        </div>
                        <div class="col-md-2">
                          <label class="form-label mt-1 mb-0">Section</label>
                          <label class="font-12 text-ellipsis mt-1 mb-0">
                            {{ masterInfo.psidDetail.section }}
                          </label>
                        </div>
                        <div class="col-md-1">
                          <label class="form-label mt-1 mb-0">Type</label>
                          <label class="font-12 text-ellipsis mt-1 mb-0">
                            {{ masterInfo.psidDetail.type }}
                          </label>
                        </div>
                        <div class="col-md-2">
                          <label class="form-label mt-1 mb-0">PS ID</label>
                          <label class="font-12 text-ellipsis mt-1 mb-0">
                            {{ masterInfo.psidDetail.psid }}
                          </label>
                        </div>

                        <div class="col-md-2">
                          <label class="form-label mt-1 mb-0"
                            >Date Of Submission</label
                          >
                          <label class="font-12 text-ellipsis mt-1 mb-0">
                            {{
                              masterInfo.psidDetail.dateOfSubmission
                                | date: "dd-MMM-yyyy"
                            }}
                          </label>
                        </div>
                        <div class="col-md-1">
                          <label class="form-label mt-1 mb-0"
                            >PS ID Status</label
                          >
                          <label class="font-12 text-ellipsis mt-1 mb-0">
                            {{ masterInfo.psidDetail.proofSubmissionStatus }}
                          </label>
                        </div>

                        <div class="col-md-2">
                          <label class="form-label mt-1 mb-0"
                            >Date & Time</label
                          >
                          <label class="font-12 text-ellipsis mt-1 mb-0">
                            {{
                              masterInfo.psidDetail.lastModifiedDateTime
                                | date: "dd-MMM-yyyy HH:mm"
                            }}
                          </label>
                        </div>
                      </div>
                    </div>
                  </div>
                </div>
                <!-- Employee And PSID Information end-->
              </div>
              <div class="row">
                <div class="col-md-12">
                  <div class="card cardnew mt-15">
                    <div class="card-body">
                      <!-- MASTER Information TAB -->
                      <div class="border-box">
                        <div class="row">
                          <div class="col-md-12">
                            <h6
                              _ngcontent-emo-c439=""
                              class="font-14 text-purple font-bold mb-3"
                            >
                              Master Details
                            </h6>
                          </div>
                        </div>
                        <div class="row mt-10">
                          <div class="col-md-3">
                            <label class="form-label">Property Name</label>
                            <input
                              class="form-control"
                              disabled
                              value="{{
                                masterInfo.masterDetail.propertyName
                              }}"
                            />
                          </div>
                          <div class="col-md-3">
                            <label class="form-label">Possession Date</label>
                            <input
                              class="form-control"
                              disabled
                              value="{{
                                masterInfo.masterDetail.possessionDate
                                  | date: 'dd-MMM-yyyy'
                              }}"
                            />
                          </div>
                          <div class="col-md-3">
                            <label class="form-label">Address (Copy From)</label>
                            <input
                              class="form-control"
                              disabled
                              value="{{ masterInfo.masterDetail.addressType }}"
                            />
                          </div>
                          <div class="col-md-3">
                            <label class="form-label">Address 1</label>
                            <input
                              class="form-control"
                              disabled
                              value="{{
                                masterInfo.masterDetail.address1
                              }}"
                            />
                          </div>
                          <!-- <div class="col-md-3">
                            <label class="form-label">Relationship</label>
                            <input
                              class="form-control"
                              disabled
                              value="{{ masterInfo.masterDetail.relationship }}"
                            />
                          </div> -->
                        </div>
                        <div class="row mt-15">
                          <!-- <div class="col-md-3">
                            <label class="form-label">Policy Start Date</label>
                            <input
                              class="form-control"
                              disabled
                              value="{{
                                masterInfo.masterDetail.policyStartDate
                                  | date: 'dd-MMM-yyyy'
                              }}"
                            />
                          </div> -->
                          <div class="col-md-3">
                            <label class="form-label">Address 2</label>
                            <input
                              class="form-control"
                              disabled
                              value="{{
                                masterInfo.masterDetail.address2
                              }}"
                            />
                          </div>
                          <div class="col-md-3">
                            <label class="form-label">Address 3</label>
                            <input
                              class="form-control"
                              disabled
                              value="{{
                                masterInfo.masterDetail.address3
                              }}"
                            />
                          </div>
                          <div class="col-md-3">
                            <label class="form-label">Country</label>
                            <input
                              class="form-control"
                              disabled
                              value="{{
                                masterInfo.masterDetail.country
                              }}"
                            />
                          </div>
                          <div class="col-md-3">
                            <label class="form-label">PIN</label>
                            <input
                              class="form-control"
                              disabled
                              value="{{
                                masterInfo.masterDetail.pinCode
                              }}"
                            />
                          </div>
                          <!-- <div class="col-md-3">
                            <label class="form-label"> Policy End Date</label>
                            <input
                              class="form-control"
                              disabled
                              value="{{
                                masterInfo.masterDetail.policyEndDate
                                  | date: 'dd-MMM-yyyy'
                              }}"
                            />
                          </div> -->
                        </div>
                        <div class="row mt-15">
                            <div class="col-md-3">
                                <label class="form-label">State</label>
                                <input
                                  class="form-control"
                                  disabled
                                  value="{{
                                    masterInfo.masterDetail.state
                                  }}"
                                />
                              </div>
                              <div class="col-md-3">
                                <label class="form-label">City</label>
                                <input
                                  class="form-control"
                                  disabled
                                  value="{{
                                    masterInfo.masterDetail.city
                                  }}"
                                />
                              </div>
                              <div class="col-md-3">
                                <label class="form-label">Town</label>
                                <input
                                  class="form-control"
                                  disabled
                                  value="{{
                                    masterInfo.masterDetail.town
                                  }}"
                                />
                              </div>
                              <div class="col-md-3">
                                <label class="form-label">Village</label>
                                <input
                                  class="form-control"
                                  disabled
                                  value="{{
                                    masterInfo.masterDetail.village
                                  }}"
                                />
                              </div>
                               </div>


                               <div class="row mt-15">

                                <div class="col-md-3">
                                    <label class="form-label">Name of Owner</label>
                                    <input
                                      class="form-control"
                                      disabled
                                      value="{{
                                        masterInfo.masterDetail.ownerName
                                      }}"
                                    />
                                  </div>
                                  <div class="col-md-3">
                                    <label class="form-label">Relationship</label>
                                    <input
                                      class="form-control"
                                      disabled
                                      value="{{
                                        masterInfo.masterDetail.relationship
                                      }}"
                                    />
                                  </div>
                                  <div class="col-md-3">
                                    <label class="form-label">1st Time Home Buyer</label>
                                    <input
                                      class="form-control"
                                      disabled
                                      value="{{
                                        masterInfo.masterDetail.firstTimeHomeBuyer
                                      }}"
                                    />
                                  </div>
                                  <div class="col-md-3">
                                    <label class="form-label">Usage Type</label>
                                    <input
                                      class="form-control"
                                      disabled
                                      value="{{
                                        masterInfo.masterDetail.usageType
                                      }}"
                                    />
                                  </div>

                               </div>

                               <div class="row mt-15">

                            <div class="col-md-3">
                            <label class="form-label">From Date</label>
                            <input
                              class="form-control"
                              disabled
                              value="{{
                                masterInfo.masterDetail.fromDate
                                  | date: 'dd-MMM-yyyy'
                              }}"
                            />
                          </div>
                          <div class="col-md-3">
                            <label class="form-label">To Date</label>
                            <input
                              class="form-control"
                              disabled
                              value="{{
                                masterInfo.masterDetail.toDate
                                  | date: 'dd-MMM-yyyy'
                              }}"
                            />
                          </div>

                         </div>
                        </div>

                      <div class="border-box mt-25">
                        <!-- <div class="mb-0">
                            <h3 class="font-14 text-purple font-bold">
                              Payment Details
                            </h3>
                          </div>

                          <div class="row mt-15">
                            <div class="col-md-3">
                              <label class="form-label"
                                >Frequency Of Payment</label
                              >
                              <input
                                type="text"
                                disabled
                                class="form-control"
                                value="{{ masterInfo.frequencyOfPayment }}"
                              />
                            </div>
                            <div class="col-md-3">
                              <label class="form-label">Premium Amount</label>
                              <input
                                type="text"
                                disabled
                                class="form-control"
                                value="{{
                                  masterInfo.premiumAmount | number: '1.2-2'
                                }}"
                              />
                            </div>
                            <div class="col-md-3">
                              <label class="form-label">Annual Amount</label>
                              <input
                                type="text"
                                disabled
                                class="form-control"
                                value="{{
                                  masterInfo.annualAmount | number: '1.2-2'
                                }}"
                              />
                            </div>
                            <div class="col-md-3">
                              <label class="form-label">ECS</label>
                              <div class="custom-controls-stacked">
                                <label *ngIf="masterInfo.ecs">
                                  <span class="">Yes</span>
                                </label>
                                <label *ngIf="!masterInfo.ecs">
                                  <span class="">No</span>
                                </label>
                              </div>
                            </div>
                          </div>

                          <div class="row mt-15">
                            <div class="col-md-3">
                              <label class="form-label"> From Date </label>
                              <div class="form-group">
                                <div class="input-group">
                                  <div class="input-group-prepend">
                                    <span class="input-group-text">
                                      <i class="fa fa-calendar"></i>
                                    </span>
                                  </div>
                                  <input
                                    data-provide="datepicker"
                                    disabled
                                    data-date-autoclose="true"
                                    class="form-control"
                                    bsDatepicker
                                    value="{{
                                      masterInfo.fromDate | date: 'dd-MMM-yyyy'
                                    }}"
                                  />
                                </div>
                              </div>
                            </div>
                            <div class="col-md-3">
                              <label class="form-label"> To Date </label>
                              <div class="form-group">
                                <div class="input-group">
                                  <div class="input-group-prepend">
                                    <span class="input-group-text">
                                      <i class="fa fa-calendar"></i>
                                    </span>
                                  </div>
                                  <input
                                    data-provide="datepicker"
                                    disabled
                                    data-date-autoclose="true"
                                    class="form-control"
                                    bsDatepicker
                                    value="{{
                                      masterInfo.toDate | date: 'dd-MMM-yyyy'
                                    }}"
                                  />
                                </div>
                              </div>
                            </div>
                          </div> -->

                        <div class="row mt-25">
                          <!-- <fieldset> -->
                          <div class="col-12 col-md-12 col-sm-12">
                            <legend>Loan Details</legend>
                          </div>
                        </div>
                        <!-- Master Payment Details -->
                        <div class="row mt-15">
                          <div class="col-12 col-md-12 col-sm-12">
                            <div class="table-responsive Custom_Table">
                              <p-table
                                [value]="
                                  masterInfo.masterDetail.paymentDetailList
                                "
                              >
                                <ng-template pTemplate="header">
                                  <tr>
                                    <!-- <th>Sr. No.</th>
                                    <th>From Date</th>
                                    <th>To Date</th>
                                    <th>Frequency</th>
                                    <th class="align-right">Premium Amount</th>
                                    <th class="align-right">Annual Amount</th>
                                    <th>ECS</th> -->
                                    <th>Sr. No.</th>
                                    <th>From Date</th>
                                    <th>To Date</th>
                                    <th>Frequency</th>
                                    <th class="align-right">Premium Amount</th>
                                    <th class="align-right">Annual Amount</th>
                                    <th>ECS</th>
                                  </tr>
                                </ng-template>
                                <ng-template
                                  pTemplate="body"
                                  let-paymentDetail
                                  let-paymentDetailIndex="rowIndex"
                                >
                                  <tr>
                                    <td aria-disabled="true" class="disabled">
                                      {{ paymentDetailIndex + 1 }}
                                    </td>
                                    <td class="disabled">
                                      {{
                                        paymentDetail.fromDate
                                          | date: "dd-MMM-yyyy"
                                      }}
                                    </td>
                                    <td class="disabled">
                                      {{
                                        paymentDetail.toDate
                                          | date: "dd-MMM-yyyy"
                                      }}
                                    </td>
                                    <td class="disabled">
                                      {{ paymentDetail.frequencyOfPayment }}
                                    </td>
                                    <td class="disabled align-right">
                                      {{
                                        paymentDetail.premiumAmount
                                          | number: "1.2-2"
                                      }}
                                    </td>
                                    <td class="disabled align-right">
                                      {{
                                        paymentDetail.annualAmount
                                          | number: "1.2-2"
                                      }}
                                    </td>
                                    <td class="disabled">
                                      <span
                                        *ngIf="paymentDetail.ecs"
                                        tooltip="Yes"
                                        >Yes</span
                                      >

                                      <span
                                        *ngIf="!paymentDetail.ecs"
                                        tooltip="No"
                                        >No</span
                                      >
                                    </td>
                                  </tr>
                                </ng-template>
                              </p-table>
                            </div>
                          </div>
                        </div>
                        <!-- Master Payment Details End -->

                        <div class="row mt-10">
                          <div class="col-md-12 mt-10 mb-15">
                            <div class="row">
                              <div class="col-md-6">
                                <div class="d-flex">
                                  <Label class="form-label mr-2"> Remark</Label>

                                  <input
                                    type="text"
                                    class="form-control"
                                    [(ngModel)]="masterRemark"
                                    [disabled]="
                                      masterInfo.masterDetail.masterStatus ==
                                        '' ||
                                      masterInfo.masterDetail.masterStatus ==
                                        'Approved'
                                    "
                                  />
                                </div>
                              </div>

                              <div class="col-md-2">
                                <div
                                  _ngcontent-ykc-c443=""
                                  class="custom_Label_badge"
                                >
                                  <b>
                                    <i
                                      (click)="
                                        masterRemarkModal(
                                          template3,
                                          masterInfo.masterDetail
                                            .masterRemarkDetailList
                                        )
                                      "
                                      class="
                                        fa fa-commenting
                                        text-dark-green
                                        fa-2x
                                        cursor-pointer
                                      "
                                    >
                                    </i
                                  ></b>
                                  <span
                                    _ngcontent-ykc-c443=""
                                    class="Label_badge"
                                    >{{
                                      masterInfo.masterDetail
                                        .masterRemarkDetailList.length
                                    }}</span
                                  >
                                </div>
                              </div>
                            </div>
                            <div class="row">
                              <div class="col-md-6">
                                <div
                                  *ngIf="remarkValidation"
                                  class="invalidRemark"
                                >
                                  <div *ngIf="remarkValidation">
                                    Remark is mandatory for Send Back
                                  </div>
                                </div>
                              </div>
                            </div>
                          </div>
                        </div>

                        <!-- Buttons of Approval -->
                        <div class="row mt-10 mb-15">
                          <div class="col-md-12">
                            <div class="float-right">
                              <button
                                *ngIf="
                                  masterInfo.masterDetail.masterStatus ==
                                  'Approved'
                                "
                                type="button"
                                tooltip="Edit Approval"
                                class="
                                  custom_button custom_btn
                                  btn-bg-green btn-labeled
                                  ripple
                                  mr-2
                                "
                                (click)="changeStatus(masterInfo, 'Re-Open')"
                              >
                                Edit Approval
                              </button>
                              <button
                                type="button"
                                tooltip="Send Back"
                                class="
                                  custom_button custom_btn
                                  bg-btn-red
                                  btn-labeled btn-labeled-left
                                  mr-2
                                "
                                [class.disableredbutton]="
                                  masterInfo.masterDetail.masterStatus == '' ||
                                  masterInfo.masterDetail.masterStatus ==
                                    'Approved' ||
                                  masterInfo.masterDetail.masterStatus ==
                                    'SendBack'
                                "
                                [disabled]="
                                  masterInfo.masterDetail.masterStatus == '' ||
                                  masterInfo.masterDetail.masterStatus ==
                                    'Approved' ||
                                  masterInfo.masterDetail.masterStatus ==
                                    'SendBack'
                                "
                                (click)="changeStatus(masterInfo, 'SendBack')"
                              >
                                <b><i class="fa fa-reply-all"></i></b>
                                SendBack
                              </button>
                              <button
                                type="button"
                                tooltip="Forward"
                                class="
                                  custom_button custom_btn
                                  btn-bg-green btn-labeled btn-labeled-left
                                  ripple
                                  mr-2
                                "
                                [disabled]="
                                  masterInfo.masterDetail.masterStatus == '' ||
                                  masterInfo.masterDetail.masterStatus ==
                                    'Approved' ||
                                  masterInfo.masterDetail.masterStatus ==
                                    'SendBack'
                                "
                                [class.disablegreenbutton]="
                                  masterInfo.masterDetail.masterStatus == '' ||
                                  masterInfo.masterDetail.masterStatus ==
                                    'Approved' ||
                                  masterInfo.masterDetail.masterStatus ==
                                    'SendBack'
                                "
                              >
                                <b> <i class="fa fa-share"></i></b> Forward
                              </button>
                              <button
                                type="button"
                                class="
                                  custom_button custom_btn
                                  btn-bg-green btn-labeled btn-labeled-left
                                  ripple
                                  mr-2
                                "
                                [class.disablegreenbutton]=" approved1Disabled ||
                                  masterInfo.masterDetail.masterStatus == '' 
                                
                                "
                                [disabled]= " approved1Disabled ||
                                  masterInfo.masterDetail.masterStatus == ''
                                
                                "
                                (click)="changeStatus(masterInfo, 'Approved')"
                                tooltip="Approve"
                              >
                                <b> <i class="fa fa-floppy-o"></i></b> Approve
                              </button>

                              <button
                                type="button"
                                tooltip="Previous"
                                class="
                                  custom_button custom_btn
                                  bg-teal-400
                                  btn-labeled btn-labeled-left
                                  mr-2
                                "
                                [class.disablegraybutton]="
                                  proofSubmissionIdListIndex == 0
                                "
                                [disabled]="proofSubmissionIdListIndex == 0"
                                (click)="changePSID(globalPSID, 'Previous')"
                              >
                                <b
                                  ><i
                                    class="fa fa-angle-double-left"
                                    aria-hidden="true"
                                  ></i></b
                                >Previous
                              </button>

                              <button
                                type="button"
                                tooltip="Next"
                                class="
                                  custom_button custom_btn
                                  bg-teal-400
                                  btn-labeled btn-labeled-left
                                  mr-2
                                "
                                [class.disablegraybutton]="
                                  proofSubmissionIdListIndex ==
                                    localStorageProofSubmissionIdList.length -
                                      1 ||
                                  masterInfo.masterDetail.masterStatus == ''
                                "
                                [disabled]="
                                  proofSubmissionIdListIndex ==
                                    localStorageProofSubmissionIdList.length -
                                      1 ||
                                  masterInfo.masterDetail.masterStatus == ''
                                "
                                (click)="changePSID(globalPSID, 'Next')"
                              >
                                <b><i class="fa fa-angle-double-right"></i></b
                                >Next
                              </button>

                              <button
                                type="button"
                                tooltip="Send Back"
                                class="
                                  custom_button custom_btn
                                  bg-btn-red
                                  btn-labeled btn-labeled-left
                                  mr-2
                                "
                                [class.disableredbutton]="
                                  proofSubmissionIdListIndex ==
                                    localStorageProofSubmissionIdList.length -
                                      1 ||
                                  masterInfo.masterDetail.masterStatus == '' ||
                                  masterInfo.masterDetail.masterStatus ==
                                    'Approved' ||
                                  masterInfo.masterDetail.masterStatus ==
                                    'SendBack'
                                "
                                [disabled]="
                                  proofSubmissionIdListIndex ==
                                    localStorageProofSubmissionIdList.length -
                                      1 ||
                                  masterInfo.masterDetail.masterStatus == '' ||
                                  masterInfo.masterDetail.masterStatus ==
                                    'Approved' ||
                                  masterInfo.masterDetail.masterStatus ==
                                    'SendBack'
                                "
                                (click)="
                                  changeStatusWithNextPrevious(
                                    masterInfo,
                                    'SendBack',
                                    globalPSID,
                                    'Next'
                                  )
                                "
                              >
                                <b><i class="fa fa-reply-all"></i></b>
                                SendBack &
                                <i class="fa fa-angle-double-right"></i>
                              </button>

                              <button
                                type="button"
                                tooltip="Forward & Next"
                                class="
                                  custom_button custom_btn
                                  btn-bg-green btn-labeled btn-labeled-left
                                  mr-2
                                "
                                [class.disablegreenbutton]="
                                  proofSubmissionIdListIndex ==
                                    localStorageProofSubmissionIdList.length -
                                      1 ||
                                  masterInfo.masterDetail.masterStatus == '' ||
                                  masterInfo.masterDetail.masterStatus ==
                                    'Approved' ||
                                  masterInfo.masterDetail.masterStatus ==
                                    'SendBack'
                                "
                                [disabled]="
                                  proofSubmissionIdListIndex ==
                                    localStorageProofSubmissionIdList.length -
                                      1 ||
                                  masterInfo.masterDetail.masterStatus == '' ||
                                  masterInfo.masterDetail.masterStatus ==
                                    'Approved' ||
                                  masterInfo.masterDetail.masterStatus ==
                                    'SendBack'
                                "
                              >
                                <b><i class="fa fa-share"></i></b> Forward &
                                <i class="fa fa-angle-double-right"></i>
                              </button>
                              <button
                                type="button"
                                tooltip="Approve & Next"
                                class="
                                  custom_button custom_btn
                                  btn-bg-green btn-labeled btn-labeled-left
                                  ripple
                                  mr-2
                                "
                                [class.disablegreenbutton]="
                                  proofSubmissionIdListIndex ==
                                    localStorageProofSubmissionIdList.length -
                                      1 ||
                                  approved1Disabled
                                "
                                [disabled]="
                                  proofSubmissionIdListIndex ==
                                    localStorageProofSubmissionIdList.length -
                                      1 ||
                                  approved1Disabled
                                "
                                (click)="
                                  changeStatusWithNextPrevious(
                                    masterInfo,
                                    'Approved',
                                    globalPSID,
                                    'Next'
                                  )
                                "
                              >
                                <b> <i class="fa fa-floppy-o"></i></b> Approve &
                                <i class="fa fa-angle-double-right"></i>
                              </button>
                            </div>
                          </div>
                        </div>
                        <!-- Buttons of Approval End -->
                      </div>
                      <!-- MASTER Information TAB end-->

                      <!-- Document Information Table -->
                      <div class="row">
                        <div class="col-md-12">
                          <div class="border-box">
                            <div class="row mt-30">
                              <div class="col-12">
                                <div class="card">
                                  <div class="mb-0">
                                    <h3 class="font-14 text-purple font-bold">
                                      Document
                                    </h3>
                                  </div>
                                  <div class="col-12 col-md-12 col-sm-12">
                                    <div class="table-responsive Custom_Table">
                                      <p-table
                                        #dt2
                                        [value]="
                                          masterInfo.masterDetail
                                            .documentDetailList
                                        "
                                        [selection]="documentList"
                                        [paginator]="true"
                                        [rows]="10"
                                        [showCurrentPageReport]="true"
                                        (sortFunction)="customSort($event)"
                                        [customSort]="true"
                                        currentPageReportTemplate="Showing {first} to {last} of {totalRecords} entries"
                                        [rowsPerPageOptions]="[10, 25, 50]"
                                        [globalFilterFields]="[
                                          'dateOfSubmission',
                                          'fileName',
                                          'documentType',
                                          'password',
                                          'remark',
                                          'documentStatus',
                                          'lastModifiedBy',
                                          'lastModifiedDateTime'
                                        ]"
                                      >
                                        <!-- P-Table ng-template header with filter, sort is started -->
                                        <ng-template pTemplate="header">
                                          <tr>
                                            <th style="width: 3rem">
                                              <!-- <p-tableHeaderCheckbox
                                                (click)="
                                                  selectDocumentForApprovalOrDiscard(
                                                    e.checked,
                                                    '',
                                                    masterInfo
                                                  )
                                                "
                                                #e
                                              ></p-tableHeaderCheckbox> -->
                                              <p-tableHeaderCheckbox></p-tableHeaderCheckbox>
                                            </th>

                                            <th>
                                              <div
                                                class="
                                                  p-d-flex
                                                  p-jc-between
                                                  p-ai-center
                                                "
                                              >
                                                Date Of Submission
                                                <div
                                                  class="Sort_Filter_Position"
                                                >
                                                  <p-sortIcon
                                                    field="dateOfSubmission"
                                                    pSortableColumn="dateOfSubmission"
                                                  ></p-sortIcon>
                                                  <p-columnFilter
                                                    field="dateOfSubmission"
                                                    display="menu"
                                                    class="p-ml-auto"
                                                  >
                                                  </p-columnFilter>
                                                </div>
                                              </div>
                                            </th>
                                            <th>
                                              <div
                                                class="
                                                  p-d-flex
                                                  p-jc-between
                                                  p-ai-center
                                                "
                                              >
                                                Document Name
                                                <div
                                                  class="Sort_Filter_Position"
                                                >
                                                  <p-sortIcon
                                                    field="fileName"
                                                    pSortableColumn="fileName"
                                                  ></p-sortIcon>
                                                  <p-columnFilter
                                                    field="fileName"
                                                    display="menu"
                                                    class="p-ml-auto"
                                                  >
                                                  </p-columnFilter>
                                                </div>
                                              </div>
                                            </th>
                                            <th>
                                              <div
                                                class="
                                                  p-d-flex
                                                  p-jc-between
                                                  p-ai-center
                                                "
                                              >
                                                Document Type
                                                <div
                                                  class="Sort_Filter_Position"
                                                >
                                                  <p-sortIcon
                                                    field="documentType"
                                                    pSortableColumn="documentType"
                                                  ></p-sortIcon>
                                                  <p-columnFilter
                                                    field="documentType"
                                                    display="menu"
                                                    class="p-ml-auto"
                                                  >
                                                  </p-columnFilter>
                                                </div>
                                              </div>
                                            </th>
                                            <th>
                                              <div
                                                class="
                                                  p-d-flex
                                                  p-jc-between
                                                  p-ai-center
                                                "
                                              >
                                                Password
                                                <div
                                                  class="Sort_Filter_Position"
                                                >
                                                  <p-sortIcon
                                                    field="password"
                                                    pSortableColumn="password"
                                                  ></p-sortIcon>
                                                  <p-columnFilter
                                                    field="password"
                                                    display="menu"
                                                    class="p-ml-auto"
                                                  >
                                                  </p-columnFilter>
                                                </div>
                                              </div>
                                            </th>
                                            <th>
                                              <div
                                                class="
                                                  p-d-flex
                                                  p-jc-between
                                                  p-ai-center
                                                "
                                              >
                                                Remark
                                                <div
                                                  class="Sort_Filter_Position"
                                                >
                                                  <p-sortIcon
                                                    field="remark"
                                                    pSortableColumn="remark"
                                                  ></p-sortIcon>
                                                  <p-columnFilter
                                                    field="remark"
                                                    display="menu"
                                                    class="p-ml-auto"
                                                  >
                                                  </p-columnFilter>
                                                </div>
                                              </div>
                                            </th>
                                            <th>
                                              <div
                                                class="
                                                  p-d-flex
                                                  p-jc-between
                                                  p-ai-center
                                                "
                                              >
                                                Status
                                                <div
                                                  class="Sort_Filter_Position"
                                                >
                                                  <p-sortIcon
                                                    field="documentStatus"
                                                    pSortableColumn="documentStatus"
                                                  ></p-sortIcon>
                                                  <p-columnFilter
                                                    field="documentStatus"
                                                    display="menu"
                                                    class="p-ml-auto"
                                                  >
                                                  </p-columnFilter>
                                                </div>
                                              </div>
                                            </th>
                                            <th>
                                              <div
                                                class="
                                                  p-d-flex
                                                  p-jc-between
                                                  p-ai-center
                                                "
                                              >
                                                Approver Name
                                                <div
                                                  class="Sort_Filter_Position"
                                                >
                                                  <p-sortIcon
                                                    field="lastModifiedBy"
                                                    pSortableColumn="lastModifiedBy"
                                                  ></p-sortIcon>
                                                  <p-columnFilter
                                                    field="lastModifiedBy"
                                                    display="menu"
                                                    class="p-ml-auto"
                                                  >
                                                  </p-columnFilter>
                                                </div>
                                              </div>
                                            </th>
                                            <th>
                                              <div
                                                class="
                                                  p-d-flex
                                                  p-jc-between
                                                  p-ai-center
                                                "
                                              >
                                                Date & Time
                                                <div
                                                  class="Sort_Filter_Position"
                                                >
                                                  <p-sortIcon
                                                    field="lastModifiedDateTime"
                                                    pSortableColumn="lastModifiedDateTime"
                                                  ></p-sortIcon>
                                                  <p-columnFilter
                                                    field="lastModifiedDateTime"
                                                    display="menu"
                                                    class="p-ml-auto"
                                                  >
                                                  </p-columnFilter>
                                                </div>
                                              </div>
                                            </th>
                                            <th>Action</th>
                                          </tr>
                                        </ng-template>
                                        <!-- P-Table ng-template header with filter, sort is ended -->

                                        <!-- P-Table ng-template body is started -->
                                        <ng-template
                                          pTemplate="body"
                                          let-documentDetail
                                          let-documentDetailIndex="rowIndex"
                                        >
                                          <tr
                                            class="p-selectable-row"
                                            [pSelectableRow]="documentDetail"
                                          >
                                            <td>
                                              <p-tableCheckbox
                                                [value]="documentDetail"
                                                (click)="
                                                  selectDocumentForApprovalOrDiscard(
                                                    e.checked,
                                                    documentDetail,
                                                    masterInfo
                                                  )
                                                "
                                                #e
                                                [class.disableCheckbox]="
                                                  documentDetail.documentStatus ==
                                                    'Approved' ||
                                                  documentDetail.documentStatus ==
                                                    'Discarded' ||
                                                  documentDetail.documentStatus ==
                                                    'Discard'
                                                "
                                                [disabled]="
                                                  documentDetail.documentStatus ==
                                                    'Approved' ||
                                                  documentDetail.documentStatus ==
                                                    'Discarded' ||
                                                  documentDetail.documentStatus ==
                                                    'Discard'
                                                "
                                              >
                                              </p-tableCheckbox>
                                            </td>
                                            <td>
                                              {{
                                                documentDetail.dateOfSubmission
                                                  | date: "dd-MMM-yyyy"
                                              }}
                                            </td>
                                            <td class="text-blue cursor-pointer">
                                              <a
                                                (click)="
                                                  navigateAssociates(
                                                    documentDetail.documentInformationId
                                                  )
                                                "
                                              >
                                                <i
                                                  class="
                                                    fa fa-paperclip
                                                    text-orange
                                                  "
                                                ></i>
                                                &nbsp;
                                                {{ documentDetail.fileName }}
                                              </a>
                                            </td>
                                            <td>
                                              {{ documentDetail.documentType }}
                                            </td>
                                            <td>
                                              {{ documentDetail.password }}
                                            </td>
                                            <td>
                                              <div class="d-flex">
                                                <input
                                                  type="text"
                                                  class="form-control"
                                                  (change)="
                                                    onChangeDocumentRemark(
                                                      documentDetail,
                                                      $event
                                                    )
                                                  "
                                                  [disabled]="
                                                    documentDetail.documentStatus ==
                                                      'Approved' ||
                                                    documentDetail.documentStatus ==
                                                      'Discarded' ||
                                                    documentDetail.documentStatus ==
                                                      'Discard'
                                                  "
                                                />
                                                <div
                                                  _ngcontent-ykc-c443=""
                                                  class="
                                                    custom_Label_badge
                                                    mr-2
                                                    ml-2
                                                  "
                                                >
                                                  <b>
                                                    <i
                                                      (click)="
                                                        docRemarkModal(
                                                          template3,
                                                          documentDetailIndex,
                                                          documentDetail.documentRemarkDetailList
                                                        )
                                                      "
                                                      class="
                                                        fa fa-commenting
                                                        text-dark-green
                                                        fa-2x
                                                        cursor-pointer
                                                      "
                                                    >
                                                    </i
                                                  ></b>
                                                  <span
                                                    _ngcontent-ykc-c443=""
                                                    class="Label_badge"
                                                    >{{
                                                      documentDetail
                                                        .documentRemarkDetailList
                                                        .length
                                                    }}</span
                                                  >
                                                </div>
                                              </div>
                                            </td>
                                            <td>
                                              {{
                                                documentDetail.documentStatus
                                              }}
                                            </td>
                                            <td>
                                              {{
                                                documentDetail.lastModifiedBy
                                              }}
                                            </td>
                                            <td>
                                              {{
                                                documentDetail.lastModifiedDateTime
                                                  | date: "dd-MMM-yyyy HH:mm"
                                              }}
                                            </td>
                                            <td>
                                              <i
                                                *ngIf="
                                                  documentDetail.documentStatus ==
                                                    'Approved' ||
                                                  documentDetail.documentStatus ==
                                                    'Discarded' ||
                                                  documentDetail.documentStatus ==
                                                    'Discard'
                                                "
                                                class="
                                                  fa fa-edit
                                                  font-16
                                                  text-blue
                                                  cursor-pointer
                                                "
                                                tooltip="Edit"
                                                (click)="
                                                  editDocument(documentDetail)
                                                "
                                              ></i>
                                            </td>
                                          </tr>
                                        </ng-template>
                                        <!-- P-Table ng-template body is Ended -->
                                      </p-table>
                                    </div>
                                  </div>

                                  <!-- Document Approval Buttons  -->
                                  <div class="row mt-25">
                                    <div class="col-md-12">
                                      <div class="float-right">
                                        <button
                                          type="button"
                                          class="
                                            custom_button custom_btn
                                            btn-bg-green
                                            btn-labeled
                                            btn-labeled-left
                                            ripple
                                            mr-2
                                          "
                                          (click)="
                                            changeDocumentStatus('Approved')
                                          "
                                          tooltip="Approve"
                                          [class.disablegreenbutton]="
                                            documentList.length == 0
                                          "
                                          [disabled]="documentList.length == 0"
                                        >
                                          <b> <i class="fa fa-floppy-o"></i></b>
                                          Approve
                                        </button>

                                        <button
                                          type="button"
                                          tooltip="Send Back"
                                          class="
                                            custom_button custom_btn
                                            bg-btn-red
                                            btn-labeled btn-labeled-left
                                            mr-2
                                          "
                                          (click)="
                                            changeDocumentStatus('Discarded')
                                          "
                                          [class.disableredbutton]="
                                            documentList.length == 0
                                          "
                                          [disabled]="documentList.length == 0"
                                        >
                                          <b><i class="fa fa-times"></i></b>
                                          Discard
                                        </button>
                                      </div>
                                    </div>
                                  </div>
                                  <!-- Document Approval Buttons End -->
                                </div>
                              </div>
                            </div>
                          </div>
                        </div>
                      </div>
                      <!-- Document Information Table End -->
                    </div>
                  </div>
                </div>
              </div>

              <div
                class="scroll-to-top"
                [ngClass]="{ 'show-scrollTop': windowScrolled }"
              >
                <button
                  type="button"
                  class="btn active"
                  data-toggle="button"
                  aria-pressed="true"
                  tooltip="Top"
                  (click)="scrollToTop()"
                >
                  <i class="fa fa-angle-double-up text-white font-18"></i>
                </button>
              </div>
            </div>

            <!-- Remark Modal started -->
            <ng-template #template3 style="max-height: 200px; overflow-y: scroll;">
              <div class="modal-header">
                <h5 class="modal-title" id="jasdjgh">View Remark</h5>
                <button
                  type="button"
                  (click)="modalRef.hide()"
                  class="close"
                  data-dismiss="modal"
                  aria-label="Close"
                >
                  <span aria-hidden="true"></span>
                </button>
              </div>
<div style ='overflow-y: scroll; height: 200px; max-height: 200px;'>
              <div class="card-body" >
                <div *ngFor="let documentRemark of documentRemarkList">
                  <div class="row">
                    <div class="col-md-6">
                      <span class="form-label"
                        >{{ documentRemark.role }}:
                        <b class="text-gray">{{
                          documentRemark.remarkBy
                        }}</b></span
                      >
                    </div>
                    <div class="col-md-6">
                      <div class="float-right">
                        <span class="form-label">
                          Date:
                          <b class="text-gray">{{
                            documentRemark.remarkDate
                              | date: "dd-MMM-yyyy HH:mm"
                          }}</b>
                        </span>
                      </div>
                    </div>
                  </div>
                  <div class="row">
                    <textarea class="form-control remarktext" disabled>
                    {{ documentRemark.remark }}
                    </textarea>
                  </div>
                </div>
              </div>
              </div>

              <div class="modal-footer">
                <button
                  type="button"
                  class="btn btn-secondary"
                  (click)="modalRef.hide()"
                >
                  Ok
                </button>
              </div>
            </ng-template>
            <!-- Remark Modal End -->
          </div>
        </div>
      </div>
    </div>
  </div>
</div>

