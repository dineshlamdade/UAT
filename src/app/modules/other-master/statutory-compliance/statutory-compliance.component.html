<app-leftmenu></app-leftmenu>
<form class="card" role="form" [formGroup]="form" #formDirective="ngForm" method="post" novalidate>
  <div class="page">
    <app-header></app-header>
    <div class="section-body mt-3">
      <div class="container-fluid" style="border: 1px solid #ccc; background-color: #fff;">
        <div class="tabview-contents">
          <div class="row">
            <div class="col-12">
              <div class="card">
                <div class="card-body p-0">

                  <fieldset>
                    <legend>Institution Details</legend>

                  <div class="row">

                    <div class="col-sm-3">
                      <label class="form-label"> Name</label>
                      <input type="text" formControlName="institutionName" class="form-control"
                        name="companyGroupCode" placeholder="Enter Institution Name"  [ngClass]="{'is-invalid' : form.get('institutionName').status == 'INVALID'}">
                    </div>

                    <div class="col-sm-3">
                      <label class="form-label">Head Name</label>
                      <select name="headName" id="headName" class="form-control" formControlName="headName"  [ngClass]="{'is-invalid' : form.get('headName').status == 'INVALID'}"
                        (change)='onSelectHeadName($event.target.value)'>
                        <option *ngFor="let headName of headNameList" [value]="headName">
                          {{headName}}
                        </option>
                      </select>
                    </div>

                      <div class="col-sm-3">
                        <label class="form-label">Country</label>
                        <select name="country1" id="country1" class="form-control"formControlName="country1"  [ngClass]="{'is-invalid' : form.get('country1').status == 'INVALID'}">

                          <option *ngFor="let country of countries" [value]="country">
                            {{country}}
                          </option>
                        </select>
                      </div>

                      <div class="col-sm-3">
                        <label class="form-label">Applicability Level </label>
                        <select name="applicabilityLevel" id="applicabilityLevel" class="form-control" [ngClass]="{'is-invalid' : form.get('applicabilityLevel').status == 'INVALID'}"
                          formControlName="applicabilityLevel">

                          <option *ngFor="let applicabilityLevel of aplicabilityLevelList" [value]="applicabilityLevel">
                            {{applicabilityLevel}}
                          </option>

                        </select>
                      </div>
                    </div>







                  <!-- end of row -->
                  <div class="row mt-20">

                    <div class="col-sm-3">
                      <label class="form-label">Type Of Office</label>
                      <select name="typeOfOffice" id="typeOfOffice" class="form-control"
                        [ngClass]="{'is-invalid' : form.get('typeOfOffice').status == 'INVALID'}"
                        formControlName="typeOfOffice" >

                        <option *ngFor="let typeOfOffice of typeOfOfficeList" [value]="typeOfOffice">
                          {{typeOfOffice}}
                        </option>

                      </select>
                    </div>
                  </div>

                </fieldset>


                <div class="row mt-10">
                  <div class="col-md-12">

                <fieldset>
                  <legend>Address Details</legend>



                  <div class="col-12">

                      <div class="row">
                        <div class="col-sm-3">
                          <label class="form-label"> Address 1</label>
                          <input type="text" formControlName="address1"  class="form-control " name="address1"  [ngClass]="{'is-invalid' : form.get('address1').status == 'INVALID'}"
                            placeholder="Enter Address 1">
                        </div>

                        <div class="col-sm-3">
                          <label class="form-label"> Address 2</label>
                          <input type="text" formControlName="address2" class="form-control " name="address2"
                            placeholder="Enter Address 2">
                        </div>

                        <div class="col-sm-3">
                          <label class="form-label"> Address 3</label>
                          <input type="text" formControlName="address3" class="form-control " name="address3"
                            placeholder="Enter Address 3">
                        </div>

                        <div class="col-sm-3">
                          <label class="form-label">Country</label>
                          <select name="country" id="country" class="form-control"  [ngClass]="{'is-invalid' : form.get('address1').status == 'INVALID'}"
                            formControlName="country">

                            <option *ngFor="let country of countries" [value]="country">
                              {{country}}
                            </option>
                          </select>
                        </div>


                      </div> <!-- end of row -->


                      <div class="row mt-20">



                        <div class="col-sm-3">
                          <label class="form-label">PIN</label>
                          <input type="text" class="form-control" placeholder="Enter PIN" minlength="1" maxlength="6"
                            formControlName="pinCode"  pattern="[0-9]{6}"
                            [ngClass]="{'is-invalid' : form.get('pinCode').status == 'INVALID'}"
                            (keyup)="checkLocalAddress(); getPermanentAddressFromPIN();">
                        </div>

                        <div class="col-sm-3">
                          <label class="form-label">State</label>
                          <input type="text" formControlName="state" class="form-control " name="state"
                            placeholder="Enter state">
                        </div>

                        <div class="col-sm-3">
                          <label class="form-label">City</label>
                          <input type="text" formControlName="city"  class="form-control " name="city"
                            placeholder="Enter City">
                        </div>


                        <div class="col-sm-3">
                          <label class="form-label">Village</label>
                          <input type="text" formControlName="village" class="form-control " name="village"
                            placeholder="Enter Village">
                        </div>

                      </div>

                        <div class="row mt-20">
                          <div class="col-3">
                               <div class="row">
                                   <div class="col-sm-3 col-md-5 country-code  pr-0">

                                    <div class="col-sm-3">
                                      <!-- <label class="form-label">Establishment</label>

                                      <ng-multiselect-dropdown [placeholder]="'None Selected'" #multiSelect
                                        style="font-size: small;" [settings]="dropdownSettings" [data]="dropdownList"
                                        (onSelect)="onSelectIsdCode($event)" (onDeSelectAll)="onDeselectAllIsdCode($event)"
                                        (onSelectAll)="onSelectAllIsdCode($event)" (onDeSelect)="onDeselect($event)"
                                        [(ngModel)]= "selectedIsdCode"
                                        formControlName="officialCountryCode">
                                      </ng-multiselect-dropdown> -->

                                    </div>
                                    <label class="form-label">Country Code</label>
                                       <select class="form-control selectpicker custom-select" placeholder="Select ISD" formControlName="officialCountryCode">
                                       <option value='' data-hidden="true">Select</option>
                                       <option *ngFor="let code of countryCode"
                                           [value]="code">
                                           {{code}}
                                       </option>
                                   </select>
                                   </div>
                                   <div class="col-sm-3 col-md-7">
                                       <label class="form-label">Tel No.</label>
                                       <input type="text" class="form-control" placeholder="Enter Mobile No." minlength="1" maxlength="10" formControlName="telephoneNumber"   [ngClass]="{'is-invalid' : form.get('telephoneNumber').status == 'INVALID'}">
                                   </div>
                               </div>

                           </div>
                        <!-- <div class="row">
                          <div class="col-sm-3 col-md-5 country-code  pr-0">
                              <label></label>
                              <select class="form-control selectpicker" placeholder="Select ISD" formControlName="officialCountryCode">
                              <option value='' data-hidden="true">Select</option>
                              <option *ngFor="let code of countryCode"
                                  [value]="code">
                                  {{code}}
                              </option>
                          </select>
                          </div>
                          <div class="col-sm-3 col-md-7 col-lg-6">
                              <label class="form-label">Tel No.</label>
                              <input type="text" class="form-control" placeholder="Enter Mobile No." minlength="1" maxlength="10" formControlName="telephoneNumber">
                          </div>
                        </div> -->




                        <div class="col-sm-3">
                          <label class="form-label">Email Id</label>
                          <input type="text" formControlName="emailId" class="form-control " name="emailId"  [ngClass]="{'is-invalid' : form.get('emailId').status == 'INVALID'}"
                            placeholder="Enter Email Id">
                        </div>










                        <!-- <div class="col-sm-3 col-md-6">
                          <label
                              class="form-label"></label>
                          <div class="row">
                              <div class="col-sm-3 col-md-5 country-code">
                                <select class="form-control selectpicker" placeholder="Select ISD"
                                    formControlName="officialCountryCode">
                                    <option value='' data-hidden="true">Select</option>
                                    <option *ngFor="let code of countryCode"
                                        [value]="code">
                                        {{code}}
                                    </option>
                                </select>
                            </div>
                              <div class="col-sm-3 col-md-7">
                                <label
                                class="form-label" style="margin-top: -20%;" >Tel No.</label>
                                  <input type="text" class="form-control"
                                      placeholder="Enter Telephone Number ." minlength="1"
                                      maxlength="10"
                                      formControlName="telephoneNumber">
                              </div>
                          </div>
                      </div> -->










                  </div>
                </div>
              </fieldset>
              </div>
              </div>



                  <!--end of row-->







                  <div class="col-12 mt-20">

                    <div class="float-right mb-15">
                      <ng-container *ngIf="showButtonSaveAndReset" >

                          <ng-container *ngIf="isSaveAndReset; else newDeb">

                            <button type="submit"[disabled]="form.invalid" class="custom_button custom_btn btn-labeled btn-labeled-left" tooltip="Save" (click)="save()" [ngClass]="{'disabled-btn-bg-green' : form.invalid, 'btn-bg-green': !form.invalid}">
                            <b><i class="fa fa-floppy-o"></i></b> Save</button>

                            <button type="button" tooltip="Reset" (click)="cancelView()" class="custom_button custom_btn bg-teal-400 btn-labeled btn-labeled-left ml-10">
                              <b><i class="fa  fa-refresh"></i></b> Reset</button>
                            </ng-container>


                           <ng-template #newDeb>

                        <button type="submit" [ngClass]="{'disabled-btn-bg-lightgrey' : form.invalid, 'btn-bg-green': !form.invalid}"  class="custom_button custom_btn btn-bg-green btn-labeled btn-labeled-left" tooltip="Update" (click)="save()" [disabled]= "form.invalid">
                          <b><i class="fa fa-floppy-o"></i></b>Update</button>


                        <button type="button" class="custom_button custom_btn bg-btn-red btn-labeled btn-labeled-left ml-10" tooltip="Cancel" (click)="cancelView()">
                          <b><i class="fa fa-times-circle"></i></b>Cancel</button>
                        </ng-template>
                      </ng-container>

                      <ng-container *ngIf="!showButtonSaveAndReset">
                        <button type="button" class="custom_button custom_btn bg-btn-red btn-labeled btn-labeled-left ml-10" tooltip="Cancel" (click)="cancelView()">
                          <b><i class="fa fa-times-circle"></i></b>Cancel</button>
                      </ng-container>

                    </div>
                  </div> <!-- <end of div col-6 -->
                </div> <!-- card body -->
              </div>
            </div>
          </div>





          <div class="row">
            <div class="col-12">
              <div class="card">
                <div class="mb-0">
                  <h3 class="font-14 text-purple font-bold">Summary</h3>
                </div>
                <!-- <div class=""> -->
                  <div class="table-responsive Custom_Table">
                    <table class="table table-striped table-hover table-bordered m-b-0">
                      <thead class="thead-dark">
                        <tr>
                          <th scope="col" class="wd-15">Sr. No.</th>
                          <th scope="col" class="wd-25"> Name</th>
                          <th scope="col" class="wd-25">Head Name</th>
                          <th scope="col" class="wd-25">Type Of Office</th>
                          <th scope="col" class="wd-10">Action</th>
                        </tr>
                      </thead>
                      <!-- <tbody>

                        <tr *ngFor="let summary of summaryHtmlDataList; let i = index">
                          <td class="wd-10"><span tooltip="{{summary.SrNo}}">{{summary.SrNo}}</span>
                          </td>
                          <td class="wd-10"><span tooltip="{{summary.institutionName}}">{{summary.institutionName}}</span>
                          </td>
                          <td class="wd-10"><span tooltip="{{summary.headName}}">{{summary.headName}}</span>
                          </td>
                          <td class="wd-10"><span tooltip="{{summary.applicabilityLevel}}">{{summary.applicabilityLevel}}</span>
                          </td>
                          <td class="wd-10">

                            <span>
                              <i class="fa fa-edit font-16 text-dark-green cursor-pointer"
                                (click)="editMaster(i,summary.complianceInstitutionMasterId)" tooltip="Edit"></i>
                              </span>

                            <i class="fa fa-eye font-16 text-blue cursor-pointer ml-3" (click)="viewMaster(i)"
                              tooltip="View"></i>
                          </td>
                        </tr>
                        <tr *ngIf="!summaryHtmlDataList?.length">
                          <td colspan="10">
                            <span class="font-14 font500 align-center text-red">No Data Available</span>
                          </td>
                        </tr>
                      </tbody> -->
                    </table>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
      <app-footer></app-footer>
    </div>
  </div>
</form>
