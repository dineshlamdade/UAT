<app-leftmenu></app-leftmenu>
<form class="card" role="form" [formGroup]="form" #formDirective="ngForm" method="post" novalidate>
  <div class="page">
    <app-header></app-header>
    <div class="section-body mt-3">
      <div class="container-fluid" style="border: 1px solid #ccc; background-color: #fff;">
        <div class="  tabview-contents">
          <div class="row">
            <div class="col-12">
              <div class="card">
                <div class="card-body p-0">
                  <div class="row">

                    <div class="col-sm-3">
                      <label class="form-label"> Code</label>
                      <input type="text" formControlName="companyGroupCode" class="form-control" name="companyGroupCode"
                        placeholder="Enter Group Code"
                        [ngClass]="{'is-invalid' : form.get('companyGroupCode').status == 'INVALID'}">
                    </div>

                    <div class="col-sm-3">
                      <label class="form-label">Name</label>
                      <input type="text" formControlName="companyGroupName" class="form-control "
                        name="companyGroupName" placeholder="Enter Group Name"
                        [ngClass]="{'is-invalid' : form.get('companyGroupName').status == 'INVALID'}">
                    </div>

                    <div class="col-sm-3">
                      <label class="form-label">Short Name</label>
                      <input type="text" formControlName="shortName" class="form-control " name="shortName"
                        placeholder="Enter Short Name"
                        [ngClass]="{'is-invalid' : form.get('shortName').status == 'INVALID'}">
                    </div>

                    <div class="col-sm-3">
                      <label class="form-label">Scale</label>
                      <select name="scale" id="scale" class="form-control" formControlName="scale"
                        [ngClass]="{'is-invalid' : form.get('scale').status == 'INVALID'}"
                        (change)='onSelectScale($event.target.value)'>
                        <option *ngFor="let scales of scaleList" [value]="scales.label">
                          {{scales.label}}
                        </option>
                      </select>
                    </div>

                  </div>
                  <!-- end of row -->
                  <div class="row mt-20">

                    <div class="col-sm-3">
                      <label class="form-label">Start Date</label>
                      <div class="input-group-prepend">
                        <span class="input-group-text"><i class="fa fa-calendar"></i></span>
                        <input [bsConfig]="{ dateInputFormat: 'DD-MMM-YYYY' }" formControlName="startDate"
                          data-provide="datepicker" data-date-autoclose="true" class="form-control"
                          placeholder="Start Date" bsDatepicker
                          [ngClass]="{'is-invalid' : form.get('startDate').status == 'INVALID'}">
                      </div>
                    </div>

                    <div class="col-sm-3">
                      <label class="form-label">End Date</label>
                      <div class="input-group-prepend">
                        <span class="input-group-text"><i class="fa fa-calendar"></i></span>
                        <input [bsConfig]="{ dateInputFormat: 'DD-MMM-YYYY' }" formControlName="endDate"
                          (bsValueChange)="setPaymentDetailToDate()" data-provide="datepicker"
                          data-date-autoclose="true" class="form-control" placeholder="End Date" bsDatepicker
                          (focusout)="onChangeEndDate($event)">
                      </div>
                    </div>

                    <div class="col-sm-3">
                      <label class="form-label">Reason for Exit</label>
                      <select name="reasonForExit" id="reasonForExit" class="form-control"
                        [ngClass]="{'is-invalid' : form.get('reasonForExit').status == 'INVALID'}"
                        formControlName="reasonForExit" (change)='onSelectReasonForExit()'>
                        <!-- <option selected [ngValue] = null>Choose... </option> -->
                        <option *ngFor="let reason of reasonForExitList" [value]="reason.label">
                          {{reason.label}}
                        </option>
                      </select>
                    </div>

                  </div>


                  <!--end of row-->

                  <div class="row mt-10">

                  </div>


                  <div class="row mt-10">

                    <div class="col-md-3">
                      <label class="form-label">Remark</label>
                      <textarea formControlName="remark"
                        [ngClass]="{'is-invalid' : form.get('remark').status == 'INVALID', 'form-submitted': formDirective.submitted}"
                        class="form-control" rows="2" placeholder="Enter Remark"></textarea>
                    </div>


                    <div class="col-md-3"><br>
                      <label class="custom-control custom-checkbox custom-control-inline pl-45">
                        <input formControlName="companyGroupActive" type="checkbox" class="custom-control-input"
                          name="example-inline-checkbox1" value="option1" checked (change)="deactiveActiveCheckBox()"
                          readonly>
                        <span class="custom-control-label">Active </span>
                      </label>
                    </div>


                  </div><!-- end of row -->



                  <div class="col-12">

                    <div class="float-right mb-15">
                      <ng-container *ngIf="showButtonSaveAndReset">

                        <ng-container *ngIf="isSaveAndReset; else newDeb">

                          <button type="submit" [disabled]="form.invalid"
                            class="custom_button custom_btn btn-labeled btn-labeled-left" tooltip="Save"
                            (click)="save()"
                            [ngClass]="{'disabled-btn-bg-green' : form.invalid, 'btn-bg-green': !form.invalid}">
                            <b><i class="fa fa-floppy-o"></i></b> Save</button>

                          <button type="button" tooltip="Reset" (click)="cancelView()"
                            class="custom_button custom_btn bg-teal-400 btn-labeled btn-labeled-left ml-10">
                            <b><i class="fa  fa-refresh"></i></b> Reset</button>

                        </ng-container>

                        <ng-template #newDeb>

                          <button type="submit"
                            [ngClass]="{'disabled-btn-bg-lightgrey' : form.invalid, 'btn-bg-green': !form.invalid}"
                            class="custom_button custom_btn btn-bg-green btn-labeled btn-labeled-left" tooltip="Update"
                            (click)="save()" [disabled]="form.invalid">
                            <b><i class="fa fa-floppy-o"></i></b>Update</button>


                          <button type="button"
                            class="custom_button custom_btn bg-btn-red btn-labeled btn-labeled-left ml-10"
                            tooltip="Cancel" (click)="cancelView()">
                            <b><i class="fa fa-times-circle"></i></b> Cancel</button>

                        </ng-template>
                      </ng-container>
                      <ng-container *ngIf="!showButtonSaveAndReset">
                        <button type="button"
                          class="custom_button custom_btn bg-btn-red btn-labeled btn-labeled-left ml-10"
                          tooltip="Cancel" (click)="cancelView()">
                          <b><i class="fa fa-times-circle"></i></b>Cancel</button>
                      </ng-container>
                    </div>
                  </div> <!-- <end of div col-6 -->
                </div> <!-- card body -->
              </div>
            </div>
          </div>





          <div class="row">
            <div class="col-12">
              <div class="card">
                <div class="mb-0">
                  <h3 class="font-14 text-purple font-bold">Summary</h3>
                </div>
                <!-- <div class=""> -->
                <div class="table-responsive Custom_Table">
                  <table class="table table-striped table-hover table-bordered m-b-0">
                    <thead class="thead-dark">
                      <tr>
                        <th scope="col" class="wd-8">Sr. No.</th>
                        <th scope="col" class="wd-8">Group Id</th>
                        <th scope="col" class="wd-10">Code</th>
                        <th scope="col" class="wd-14">Name</th>
                        <th scope="col" class="wd-12">Short Name</th>
                        <th scope="col" class="wd-10">Scale</th>
                        <th scope="col" class="wd-10">Start Date</th>
                        <th scope="col" class="wd-10">End Date</th>
                        <th scope="col" class="wd-10">Reason for Exit</th>
                        <th scope="col" class="wd-10">Action</th>
                      </tr>
                    </thead>
                    <tbody>

                      <tr *ngFor="let summary of summaryHtmlDataList; let i = index">
                        <td class="wd-10"><span tooltip="{{summary.SrNo}}">{{summary.SrNo}}</span>
                        </td>
                        <td class="wd-10"><span tooltip="{{summary.companyGroupId}}">{{summary.companyGroupId}}</span>
                        </td>
                        <td class="wd-10"><span
                            tooltip="{{summary.companyGroupCode}}">{{summary.companyGroupCode}}</span>
                        </td>

                        <td class="wd-10"><span
                            tooltip="{{summary.companyGroupName}}">{{summary.companyGroupName}}</span>
                        </td>
                        <td class="wd-10"><span tooltip="{{summary.shortName}}">{{summary.shortName}}</span>
                        </td>
                        <td class="wd-10"><span tooltip="{{summary.Scale}}">{{summary.Scale}}</span>
                        </td>
                        <td class="wd-10"><span
                            tooltip="{{summary.StartDate}}">{{summary.StartDate | date :"dd-MMM-yyyy"}}</span>
                        </td>
                        <td class="wd-10"><span
                            tooltip="{{summary.EndDate}}">{{summary.EndDate | date :"dd-MMM-yyyy"}}</span>
                        </td>
                        <td class="wd-10"><span tooltip="{{summary.ReasonforExit}}">{{summary.ReasonforExit}}</span>
                        </td>

                        <td class="wd-10">
                          <span *ngIf="summary.companyGroupActive == false">
                            <i class="fa fa-edit font-16 text-dark-green cursor-pointer" style="visibility: hidden;"
                              (click)="editMaster(i,summary.companyGroupId)" tooltip="Edit"></i> </span>
                          <span *ngIf="summary.companyGroupActive == true">
                            <i class="fa fa-edit font-16 text-dark-green cursor-pointer"
                              (click)="editMaster(i,summary.companyGroupId)" tooltip="Edit"></i> </span>

                          <i class="fa fa-eye font-16 text-blue cursor-pointer ml-3" (click)="viewMaster(i)"
                            tooltip="View"></i>
                        </td>
                      </tr>
                      <tr *ngIf="!summaryHtmlDataList?.length">
                        <td colspan="10">
                          <span class="font-14 font500 align-center text-red">No Data Available</span>
                        </td>
                      </tr>
                    </tbody>
                  </table>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
      <app-footer></app-footer>
    </div>
  </div>
</form>
