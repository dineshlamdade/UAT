<div class="row">
    <div class="col-sm-12">
        <fieldset>
            <legend>EMI Calculation</legend>
            <div class="container">
                <div class="spacer">
                    <div class="row left-content-wrap">
                        <div class="col-sm-6">
                            <div class="well">
                              <!-- <form #emiCalculatorForm="ngForm" (ngSubmit)="submitEmiCalculator()"></form> -->
                                <div class="form-group">
                                    <div class="col-md-8">
                                          <label class="form-label" style="color: rgb(26, 13, 26); font-weight: 900;">Loan Type</label>

                                        <select
                                          class="form-control"
                                          placeholder="Select" (change)="getLoanType($event.target.value)">
                                          <option [ngValue]="null" selected >Select</option>
                                          <option  *ngFor="let loan of loanTypeData ">{{loan.loanCode}}</option>
                                        </select>
                                      <br>
                                      <br>
                                        <span class="left-title">
                                            Loan Amount
                                        </span>
                                        <input type="number" style="width:44%;float:right;" class="form-control"
                                            (blur)="tbupdate(0)" [(ngModel)]="query.amount" placeholder="Loan Amount"
                                            name="pemi.highValue" />
                                    </div>
                                    <br>
                                    <ngx-slider [(value)]="pemi.value" [options]="poptions" (userChangeEnd)="update()">
                                    </ngx-slider>
                                </div>

                                <hr />

                                <div class="form-group">
                                    <div class="col-md-12">
                                        <span class="left-title">
                                            Interest Rate
                                        </span>
                                        <input type="number" style="width:44%;float:right;" class="form-control"
                                            (blur)="tbupdate(1)" [(ngModel)]="query.interest"
                                            placeholder="Interest Rate" name="remi.highValue" />
                                    </div>
                                    <br>
                                    <ngx-slider [(value)]="remi.value" [options]="roptions" (userChangeEnd)="update()">
                                    </ngx-slider>
                                </div>

                                <hr />

                                <div class="form-group">
                                    <div class="col-md-10">
                                        <span class="left-title">Loan Tenure</span>
                                        <br>
                                        <input type="number" *ngIf="yrToggel" class="form-control" (blur)="tbupdate(2)"
                                            placeholder="Loan Tenure in Yr" [(ngModel)]="query.tenureYr"
                                            style="width:30%;float:right;">
                                        <input type="number" *ngIf="!yrToggel" class="form-control" (blur)="tbupdate(3)"
                                            placeholder="Loan Tenure in Mo" [(ngModel)]="query.tenureMo"
                                            style="width:30%;float:right;">
                                    </div>
                                    <div class="col-md-2">
                                        <div class="input-group-append">
                                            <button class="btn btn-outline-secondary" [ngClass]="{'active':yrToggel}"
                                                (click)="yrToggel=true;update()" type="button">Yr</button>
                                            <button class="btn btn-outline-secondary" [ngClass]="{'active':!yrToggel}"
                                                (click)="yrToggel=false;update()" type="button">Mo</button>
                                        </div>
                                    </div>
                                    <br>
                                    <ngx-slider *ngIf="yrToggel" [(value)]="temi.value" [options]="toptions"
                                        (userChangeEnd)="update()">
                                    </ngx-slider>
                                    <ngx-slider *ngIf="!yrToggel" [(value)]="memi.value" [options]="moptions"
                                        (userChangeEnd)="update()">
                                    </ngx-slider>
                                </div>


                            </div>

                        </div>
                        <div class="col-sm-6">
                            <div class="well">

                                <div class="row">
                                    <div class="col-sm-12">
                                        <div class="pie-content row" id="pieContent">
                                            <div class="col-sm-6">
                                                <p><span class="pie-icon pie-principal"></span>Principal Amount</p>
                                                <h5 id="loan_principal">{{query.amount}}</h5>
                                            </div>

                                            <div class="col-sm-6">
                                                <p><span class="pie-icon pie-interest"></span>Total Interest Payable</p>
                                                <h5 id="loan_interest">{{result.interest || "--"}}</h5>
                                            </div>
                                        </div>
                                        <br>
                                    </div>
                                    <div class="col-sm-12">

                                        <div style="display: block;">
                                            <div style="display: block;">
                                                <canvas baseChart
                                                  [data]="doughnutChartData"
                                                  [labels]="doughnutChartLabels"
                                                  [chartType]="doughnutChartType"
                                                  [colors]="doughnutChartColors">
                                                </canvas>
                                              </div>
                                        </div>
                                       <br>
                                    </div>
                                    <div class="col-sm-12">
                                        <div class="pie-content row" id="pieContent">
                                            <div class="pie-total col-sm-6">
                                                <span>
                                                    <p>Total Payment</p>
                                                    <p>(Principal + Interest)</p>
                                                </span>
                                                <h5 id="loan_total_payment">{{result.total || "--"}}</h5>
                                            </div>
                                            <div class="pie-total col-sm-6">
                                                <p>Your Monthly Payment</p>
                                                <h5 id="loan_emi">{{result.emi || "--"}}</h5>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                           </div>
                        </div>
                        <div class="float-right" style="margin-left:89%;">
                            <button class="btn btn-success" (click)="applyLoan()">
                                <i class="fa fa-check-circle" aria-hidden="true"></i>&nbsp;
                                Apply Loan
                            </button>
                        </div>

                    </div>
                    <br>
                </div>
            </div>
        </fieldset>
    </div>
</div>
