<app-leftmenu></app-leftmenu>
<div class="page">
  <app-header></app-header>
  <div class="section-body mt-3">
    <div class="container-fluid">
      <div class="row">
        <div class="col-12">
          <div class="card">
            <div class="card-body">
              <app-emi-calculator></app-emi-calculator>
              <br><br>
              <form [formGroup]="LoanForm" (ngSubmit)="loanFormSubmit()">
                <!-- <div class="topcount" style="background-color: rgba(199, 194, 194, 0.897); padding:5px;">
                  <label>All&nbsp;<input type="text" class="form-control-sm"> <span>&#124;</span></label>
                  <label>Approved&nbsp;<input type="text" class="form-control-sm"><span>&#124;</span></label>
                  <label>Send Back&nbsp;<input type="text" class="form-control-sm"><span>&#124;</span></label>
                  <label>Submitted&nbsp;<input type="text" class="form-control-sm"><span>&#124;</span></label>
                </div> -->
              <br>
              <div class="col-md-12 col-lg-12 col-sm-12 col-xs-12">
              <div class="float-right">
              <span class="ml-10"><i class="fa fa-file-pdf-o font-18 text-dark-red" tooltip="Export to PDF" (click)="download()"></i></span>&nbsp;
              <span class="ml-10"><i class="fa fa-file-excel-o font-18 text-dark-green" (click)="exportAsXLSX()" tooltip="Export to Excel"></i ></span>
          </div>
          <br><br>
          <div class="buttons float-right">
            <button class="btn btn-success" (click)="navigateToAdd()" ><i class="fa fa-plus-circle" aria-hidden="true"></i>&nbsp; Add new Loan</button>
            <button type="button" class="btn btn-info" (click)="disbursementRequest(template1)"><i class="fa fa-money" aria-hidden="true"></i>&nbsp;Disbursement Request</button>
            <button type="button" class="btn btn-success"(click)="adhocRepayment(template2)"><i class="fa fa-credit-card" aria-hidden="true"></i>&nbsp;Adhoc Repayment</button>
            <button type="button" class="btn btn-danger" (click)="rescheduleRequest(template3)"><i class="fa fa-clock-o" aria-hidden="true"></i>&nbsp;Reschedule Request</button>
            <button type="button" class="btn btn-secondary"(click)="settlementRequest(template4)"><i class="fa fa-cogs" aria-hidden="true"></i>&nbsp;Settlement Request</button>
            <!-- <button type="button" class="btn btn-light"><i class="fa fa-search" aria-hidden="true"></i>&nbsp;Search</button> -->
            <!-- <button type="button" class="btn btn-info"><i class="fa fa-filter" aria-hidden="true"></i>Filter</button> -->
            <input class="form-control-sm" type="text" name="search" [(ngModel)]="searchText" [ngModelOptions]="{standalone: true}" autocomplete="off"
            placeholder=" &#61442; Search" >

          </div>
              <div class="table-responsive Custom_Table"  id="contentToConvert">
                  <table
                      class="table table-striped table-hover table-bordered m-b-0">
                      <thead class="thead-dark">
                          <tr>
                              <th class="wd-0">Select</th>
                              <th class="wd-0">Application No.</th>
                              <th class="wd-10">Application Date</th>
                              <th class="wd-10">Type</th>
                              <th class="wd-10">Description</th>
                              <th class="wd-10">Repayment Type</th>
                              <th class="wd-10">Loan Amount</th>
                              <!-- <th >Disbursed Amount</th> -->
                              <th class="wd-0">Remaining Installment</th>
                              <th class="wd-0">Interest Rate</th>
                              <th class="wd-10">Installment Amount</th>
                              <th class="wd-10">Balance Loan</th>
                              <th class="wd-10">End Date </th>
                              <th class="wd-10">Status</th>
                              <th class="wd-10" style="text-align: center!important">Action</th>
                          </tr>
                      </thead>
                      <tbody>
                          <tr class="align" *ngFor="let summary of summaryData | filter:searchText"  >

                              <td style="text-align: center!important;"><input type="checkbox"></td>
                              <td >{{summary.loanApplicationNumber}}</td>
                              <td >{{summary.createDateTime | date :"dd-MMM-yyyy"}}</td>
                              <td >{{summary.loanType }}</td>
                              <td >{{summary.loanType}}</td>
                              <td >{{summary.repaymentType}}</td>
                              <td >{{summary.loanAmount |number:'1.2-2'}} </td>
                              <!-- <td >{{summary.disbursedAmount |number:'1.2-2'}} </td> -->
                              <td >{{summary.noOfInstallment}} </td>
                              <td >{{summary.interestRate}}%</td>
                              <td >{{summary.installmentAmount |number:'1.2-2'}}</td>
                              <td >{{summary.balanceLoan |number:'1.2-2'}}</td>
                              <td >{{summary.endDate | date :"dd-MMM-yyyy"}}</td>
                              <td >{{summary.status}}</td>
                              <td style="text-align: center!important;">
                                <i style="padding: 5px; " class="fa fa-pencil-square-o" aria-hidden="true"
                                (click)="editLoanAppForm(summary)" tooltip="Edit"></i>
                                <i style="padding: 5px; color: darkcyan;" class="fa fa-eye" aria-hidden="true"
                                (click)="viewLoanAppForm(summary)"></i>
                                <i style="padding: 5px;" class="fa fa-trash" aria-hidden="true"
                                (click)="deleteLoanForm()"></i>
                                <i style="padding: 5px;" class="fa fa-download" aria-hidden="true"
                                (click)="downloadSchedule()"></i>
                                <i style="padding: 5px;" class="fa fa-clock-o" aria-hidden="true"></i>
                              </td>

                          </tr>
                      </tbody>
                  </table>
              </div>
               </div>
               <ng-template #template1 >
                  <div class="modal-header">
                     <h5 class="modal-title" id="UploadModalLabel">Disbursement Request</h5>
                     <button type="button" (click)="modalRef.hide()" class="close" data-dismiss="modal" aria-label="Close"><span
                        aria-hidden="true">×</span></button>
                  </div>
              <div class="modal-body" >
                <div class="cards">
                    <div class="card-bodys">
                        <div class="row clearfix">
                            <div class="col-12">
                                <div class="row">
                                    <div class="col-md-12 col-lg-12 col-sm-12 col-xs-12">
                                          <div class="row ">
                                                <div class="col-md-3">
                                                  <label class="form-label">Loan No.</label>
                                                  <input type="text"  class="form-control"  disabled>
                                                </div>
                                                <div class="col-md-3">
                                                  <label class="form-label">Application Date</label>
                                                  <input type="text"  class="form-control"  disabled>
                                                </div>
                                                <div class="col-md-3">
                                                  <label class="form-label">Type</label>
                                                  <input type="text"  class="form-control"  disabled>
                                                </div>
                                                <div class="col-md-3">
                                                  <label class="form-label">Description</label>
                                                  <input type="text"  class="form-control"  disabled>
                                                </div>
                                              </div>
                                              <br>
                                              <div class="row">
                                                <div class="col-md-3">
                                                  <label class="form-label">Approved</label>
                                                  <input type="text"  class="form-control" disabled>
                                                </div>
                                                <div class="col-md-3">
                                                  <label class="form-label">Disbursed</label>
                                                  <input type="text"  class="form-control" disabled>
                                                </div>
                                                <div class="col-md-3">
                                                  <label class="form-label">Repayment Type</label>
                                                  <!-- <input type="text"  class="form-control" disabled> -->
                                                </div>
                                                <div class="col-md-3">
                                                  <label class="form-label">Balance</label>
                                                  <input type="text"  class="form-control" disabled>
                                                </div>
                                              </div>
                                              <br><hr><br>
                                              <div class="row">
                                                <div class="col-md-3">
                                                  <label class="form-label">Expected Payment Date</label>
                                                  <input type="date"  class="form-control" >
                                                </div>
                                                <div class="col-md-3">
                                                  <label class="form-label">Amount</label>
                                                  <input type="text"  class="form-control" >
                                                </div>
                                                <div class="col-md-3">
                                                  <label class="form-label">Payee</label>
                                                  <input type="text"  class="form-control" >
                                                </div>
                                                <div class="col-md-3">
                                                  <label class="form-label">IFSC Code</label>
                                                  <input type="text"  class="form-control" >
                                                </div>
                                              </div>
                                              <br><br>
                                              <div class="row">
                                                <div class="col-md-3">
                                                  <label class="form-label">Bank Name</label>
                                                  <input type="date"  class="form-control" >
                                                </div>
                                                <div class="col-md-3">
                                                  <label class="form-label">Branch Address</label>
                                                  <input type="text"  class="form-control" >
                                                </div>
                                                <div class="col-md-3">
                                                  <label class="form-label">Account No.</label>
                                                  <input type="text"  class="form-control" >
                                                </div>
                                                <div class="col-md-3">
                                                  <label class="form-label">Remark</label>
                                                  <input type="text"  class="form-control" >
                                                </div>
                                              </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
                  <div class="modal-footer">
                     <!-- <button type="button" class="btn btn-secondary" (click)="modalRef.hide()">Ok</button> -->
                     <ng-container class="float-right">
                      <div class="row float-right" style="margin: 10px" >
                        <button type="submit"   class="custom_button btn-bg-green btn-bg-green custom_btn btn-labeled btn-labeled-left"
                        tooltip="Save" (click)="modalRef.hide()" >
                         <b> <i class="fa fa-floppy-o" aria-hidden="true"></i></b>Save</button
                        >&nbsp;
                        <button type="button"  tooltip="Reset" class="custom_button custom_btn bg-teal-400 btn-labeled btn-labeled-left ml-10">
                          <b><i class="fa fa-refresh" aria-hidden="true"></i></b>Reset</button
                        >&nbsp;
                      </div>
                    </ng-container>
                  </div>
            </ng-template>

            <ng-template #template2 >
              <div class="modal-header">
                 <h5 class="modal-title" id="UploadModalLabel">Adhoc Repayment</h5>
                 <button type="button" (click)="modalRef.hide()" class="close" data-dismiss="modal" aria-label="Close"><span
                    aria-hidden="true">×</span></button>
              </div>
          <div class="modal-body" >
            <div class="cards">
                <div class="card-bodys">
                    <div class="row clearfix">
                        <div class="col-12">
                            <div class="row">
                                <div class="col-md-12 col-lg-12 col-sm-12 col-xs-12">
                                      <div class="row ">
                                            <div class="col-md-3">
                                              <label class="form-label">Loan No.</label>
                                              <input type="text"  class="form-control"  disabled>
                                            </div>
                                            <div class="col-md-3">
                                              <label class="form-label">Application Date</label>
                                              <input type="text"  class="form-control"  disabled>
                                            </div>
                                            <div class="col-md-3">
                                              <label class="form-label">Type</label>
                                              <input type="text"  class="form-control"  disabled>
                                            </div>
                                            <div class="col-md-3">
                                              <label class="form-label">Description</label>
                                              <input type="text"  class="form-control"  disabled>
                                            </div>
                                          </div>
                                          <br>
                                          <div class="row">
                                            <div class="col-md-3">
                                              <label class="form-label">Repayment Type</label>
                                              <!-- <input type="text"  class="form-control" disabled> -->
                                            </div>
                                            <div class="col-md-3">
                                              <label class="form-label">Balance</label>
                                              <input type="text"  class="form-control" disabled>
                                            </div>
                                          </div>
                                          <br><hr><br>
                                          <div class="row">

                                            <div class="col-md-3">
                                              <label class="form-label">Amount</label>
                                              <input type="text"  class="form-control" >
                                            </div>
                                            <div class="col-md-3">
                                              <label class="form-label">Mode of Payment</label>
                                              <input type="date"  class="form-control" >
                                            </div>
                                            <div class="col-md-3">
                                              <label class="form-label">Cheque/UTR No.</label>
                                              <input type="text"  class="form-control" >
                                            </div>
                                            <div class="col-md-3">
                                              <label class="form-label">Date of Payment</label>
                                              <input type="date"  class="form-control" >
                                            </div>
                                          </div>
                                          <br><br>
                                          <div class="row">
                                            <div class="col-md-3">
                                              <label class="form-label">IFSC Code</label>
                                              <input type="date"  class="form-control" >
                                            </div>
                                            <div class="col-md-3">
                                              <label class="form-label">Bank Name</label>
                                              <input type="text"  class="form-control" >
                                            </div>
                                            <div class="col-md-3">
                                              <label class="form-label">Branch Address</label>
                                              <input type="text"  class="form-control" >
                                            </div>
                                            <div class="col-md-3">
                                              <label class="form-label">Remark</label>
                                              <input type="text"  class="form-control" >
                                            </div>
                                          </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
              <div class="modal-footer">
                 <!-- <button type="button" class="btn btn-secondary" (click)="modalRef.hide()">Ok</button> -->
                 <ng-container class="float-right">
                  <div class="row float-right" style="margin: 10px" >
                    <button type="submit"   class="custom_button btn-bg-green custom_btn btn-labeled btn-labeled-left"
                    tooltip="Save" (click)="modalRef.hide()" >
                     <b> <i class="fa fa-floppy-o" aria-hidden="true"></i></b>Save</button
                    >&nbsp;
                    <button type="button"  tooltip="Reset" class="custom_button custom_btn bg-teal-400 btn-labeled btn-labeled-left ml-10">
                      <b><i class="fa fa-refresh" aria-hidden="true"></i></b>Reset</button
                    >&nbsp;
                  </div>
                </ng-container>
              </div>
        </ng-template>

        <ng-template #template3 >
          <div class="modal-header">
             <h5 class="modal-title" id="UploadModalLabel">Reschedule Request</h5>
             <button type="button" (click)="modalRef.hide()" class="close" data-dismiss="modal" aria-label="Close"><span
                aria-hidden="true">×</span></button>
          </div>
      <div class="modal-body" >
        <div class="cards">
            <div class="card-bodys">
                <div class="row clearfix">
                    <div class="col-12">
                        <div class="row">
                            <div class="col-md-12 col-lg-12 col-sm-12 col-xs-12">
                                  <div class="row ">
                                        <div class="col-md-3">
                                          <label class="form-label">Loan No.</label>
                                          <input type="text"  class="form-control"  disabled>
                                        </div>
                                        <div class="col-md-3">
                                          <label class="form-label">Application Date</label>
                                          <input type="text"  class="form-control"  disabled>
                                        </div>
                                        <div class="col-md-3">
                                          <label class="form-label">Type</label>
                                          <input type="text"  class="form-control"  disabled>
                                        </div>
                                        <div class="col-md-3">
                                          <label class="form-label">Description</label>
                                          <input type="text"  class="form-control"  disabled>
                                        </div>
                                      </div>
                                      <br>
                                      <div class="row">

                                        <div class="col-md-3">
                                          <label class="form-label">Repayment Type</label>
                                          <!-- <input type="text"  class="form-control" disabled> -->
                                        </div>
                                        <div class="col-md-3">
                                          <label class="form-label">Balance</label>
                                          <input type="text"  class="form-control" disabled>
                                        </div>
                                      </div>
                                      <br><hr><br>
                                      <div class="row">
                                        <div class="col-md-3">
                                          <label class="form-label">Reschedule Type</label>
                                          <input type="date"  class="form-control" >
                                        </div>
                                        <div class="col-md-3">
                                          <label class="form-label">Installments to Reschedule</label>
                                          <input type="text"  class="form-control" >
                                        </div>
                                        <div class="col-md-3">
                                          <label class="form-label">Reason</label>
                                          <input type="text"  class="form-control" >
                                        </div>

                                      </div>
                                      <br><br>
                                      <div class="row">
                                <h6>Installments to Reschedule</h6>


                                      </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
          <div class="modal-footer">
             <!-- <button type="button" class="btn btn-secondary" (click)="modalRef.hide()">Ok</button> -->
             <ng-container class="float-right">
              <div class="row float-right" style="margin: 10px" >
                <button type="submit"   class="custom_button btn-bg-green custom_btn btn-labeled btn-labeled-left"
                tooltip="Save" (click)="modalRef.hide()" >
                 <b> <i class="fa fa-floppy-o" aria-hidden="true"></i></b>Save</button
                >&nbsp;
                <button type="button"  tooltip="Reset" class="custom_button custom_btn bg-teal-400 btn-labeled btn-labeled-left ml-10">
                  <b><i class="fa fa-refresh" aria-hidden="true"></i></b>Reset</button
                >&nbsp;
              </div>
            </ng-container>
          </div>
    </ng-template>

    <ng-template #template4 >
      <div class="modal-header">
         <h5 class="modal-title" id="UploadModalLabel">Settlement Request</h5>
         <button type="button" (click)="modalRef.hide()" class="close" data-dismiss="modal" aria-label="Close"><span
            aria-hidden="true">×</span></button>
      </div>
  <div class="modal-body" >
    <div class="cards">
        <div class="card-bodys">
            <div class="row clearfix">
                <div class="col-12">
                    <div class="row">
                        <div class="col-md-12 col-lg-12 col-sm-12 col-xs-12">
                              <div class="row ">
                                    <div class="col-md-3">
                                      <label class="form-label">Loan No.</label>
                                      <input type="text"  class="form-control"  disabled>
                                    </div>
                                    <div class="col-md-3">
                                      <label class="form-label">Application Date</label>
                                      <input type="text"  class="form-control"  disabled>
                                    </div>
                                    <div class="col-md-3">
                                      <label class="form-label">Type</label>
                                      <input type="text"  class="form-control"  disabled>
                                    </div>
                                    <div class="col-md-3">
                                      <label class="form-label">Description</label>
                                      <input type="text"  class="form-control"  disabled>
                                    </div>
                                  </div>
                                  <br>
                                  <div class="row">
                                    <div class="col-md-3">
                                      <label class="form-label">Repayment Type</label>
                                      <!-- <input type="text"  class="form-control" disabled> -->
                                    </div>
                                    <label  class="form-label">Outstanding</label>

                                    <div class="col-md-3">
                                      <label class="form-label">Principal</label>
                                      <input type="text"  class="form-control" disabled>
                                    </div>
                                    <div class="col-md-3">
                                      <label class="form-label">Interest</label>
                                      <input type="text"  class="form-control" disabled>
                                    </div>

                                    <div class="col-md-3">
                                      <label class="form-label">Total</label>
                                      <input type="text"  class="form-control" disabled>
                                    </div>
                                  </div>
                                  <br><hr><br>
                                  <div class="row">
                                    <div class="col-md-3">
                                      <label class="form-label">Settlement Date</label>
                                      <input type="date"  class="form-control" disabled>
                                    </div>
                                    <div class="col-md-3">
                                      <label class="form-label">Remark</label>
                                      <input type="text"  class="form-control" disabled>
                                    </div>
                                  </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
      <div class="modal-footer">
         <!-- <button type="button" class="btn btn-secondary" (click)="modalRef.hide()">Ok</button> -->
         <ng-container class="float-right">
          <div class="row float-right" style="margin: 10px" >
            <button type="submit"   class="custom_button btn-bg-green custom_btn btn-labeled btn-labeled-left"
            tooltip="Save" (click)="modalRef.hide()" >
             <b> <i class="fa fa-floppy-o" aria-hidden="true"></i></b>Save</button
            >&nbsp;
            <button type="button"  tooltip="Reset" class="custom_button custom_btn bg-teal-400 btn-labeled btn-labeled-left ml-10">
              <b><i class="fa fa-refresh" aria-hidden="true"></i></b>Reset</button
            >&nbsp;
          </div>
        </ng-container>
      </div>
</ng-template>

          </form>
            </div>
          </div>
        </div>
      </div>
    </div>
    <app-footer></app-footer>
  </div>
</div>



