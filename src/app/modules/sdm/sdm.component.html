<app-leftmenu></app-leftmenu>
<!-- Main body part  -->
<div class="page">
    <app-header></app-header>
    <div class="section-body mt-3">
        <div class="container-fluid">
            <div class="row">
                <div class="col-12">
                    <div class="card">
                        <div class="card-body">
                          <!--stepper indexes open-->
                          <div class="row divided">
                            <div class="col-sm-3">
                               <button class="stepbutton" (click)="abc(0)">Summary</button>
                             </div>
                             
                             <div class="col-sm-3 ">
                               <button class="stepbutton" (click)="abc(1)">
                                 <div *ngIf="stepperIndex > 1 then thenBlock1 else elseBlock1"></div>
                                 <ng-template #thenBlock1>
                                  <i class="fa fa-check"></i>
                                  </ng-template>
                                  <ng-template #elseBlock1>
                                    <i class="fa fa-edit" *ngIf="stepperIndex ===1"></i>
                                    <span *ngIf="stepperIndex !=1">1</span>
                                  </ng-template>
                                </button>
                             </div>
                             <span [@stateAnimation] class="divider-grey" *ngIf="stepperIndex < 2"></span>
                             <span [@stateAnimation] class="divider-green" *ngIf="stepperIndex >= 2"></span>
                             <div class="col-sm-3">
                               <button class="stepbutton" (click)="abc(2)">
                                  <div *ngIf="stepperIndex > 2 then thenBlock2 else elseBlock2"></div>
                                  <ng-template #thenBlock2>
                                  <i class="fa fa-check"></i>
                                  </ng-template>
                                  <ng-template #elseBlock2>
                                    <i class="fa fa-edit" *ngIf="stepperIndex ===2"></i>
                                    <span *ngIf="stepperIndex !=2">2</span>
                                  </ng-template>
                                </button>
                             </div>
                            <span [@stateAnimation] class="divider-grey" *ngIf="stepperIndex < 3"></span>
                             <span [@stateAnimation] class="divider-green" *ngIf="stepperIndex >= 3"></span>
                             <div class="col-sm-3">
                               <button class="stepbutton" (click)="abc(3)">
                                  <div *ngIf="stepperIndex > 3 then thenBlock3 else elseBlock3"></div>
                                  <ng-template #thenBlock3>
                                  <i class="fa fa-check"></i>
                                  </ng-template>
                                  <ng-template #elseBlock3>
                                    <i class="fa fa-edit" *ngIf="stepperIndex ===3"></i>
                                    <span *ngIf="stepperIndex !=3">3</span>
                                  </ng-template>
                                </button>
                             </div>
                             <span [@stateAnimation] class="divider-grey" *ngIf="stepperIndex < 4"></span>
                             <span [@stateAnimation] class="divider-green" *ngIf="stepperIndex >= 4"></span>
                             <div class="col-sm-3">
                               <button class="stepbutton" (click)="abc(4)">
                                  <div *ngIf="stepperIndex > 4 then thenBlock4 else elseBlock4"></div>
                                  <ng-template #thenBlock4>
                                  <i class="fa fa-check"></i>
                                  </ng-template>
                                  <ng-template #elseBlock4>
                                    <i class="fa fa-edit" *ngIf="stepperIndex ===4"></i>
                                    <span *ngIf="stepperIndex !=4">4</span>
                                  </ng-template>
                                </button>
                             </div>
                           </div>
                          <!--stepper indexes exit-->

                           <div class="row divided">
                            <div class="col-sm-3"></div>
                            <div class="col-sm-3 stepperIndex">Create SDM</div>
                            <div class="col-sm-3 stepperIndex">Source</div>
                            <div class="col-sm-3 stepperIndex">Derived</div>
                            <div class="col-sm-3 stepperIndex">Source Derived Details</div>
                           </div>


                      <div class="tabview-contents">
                          <div [ngSwitch]="stepperIndex">
                            <div *ngSwitchCase="0" [@slideInOut]>
                                <div class="row mt-20">
                                  <div class="col-12">
                                    <div class="table-responsive Custom_Table">
                                      <table class="table table-striped table-hover table-bordered m-b-0">
                                        <thead class="thead-dark">
                                          <tr>
                                            <th rowspan="2" class="wd-20" scope="col">Sr. No.</th>
                                            <th rowspan="2" class="wd-20" scope="col">Code</th>
                                            <th rowspan="2" class="wd-20" scope="col">Description</th>
                                            <th rowspan="2" class="wd-20" scope="col">Module</th>
                                            <th colspan="5" class="wd-30" scope="col">Source</th>
                                            <th rowspan="2" scope="col">No. of Derived</th>
                                            <th rowspan="2" scope="col">Action</th>
                                            </tr>
                                            <tr>
                                            <th scope="col">1</th>
                                            <th scope="col">2</th>
                                            <th scope="col">3</th>
                                            <th scope="col">4</th>
                                            <th scope="col">5</th>
                                              
                                            </tr>
                                        </thead>
                                        <tbody>
                                          <tr *ngFor="let summary of summaryGridData; let i = index">
                                            <td >
                                              {{summary.loanCode}}
                                            </td>
                                            <td >{{summary.loanDescription}}
                                            </td>
                                            <!-- <td class="wd-20">
                                              <span tooltip="{{summary.accountHolderName}}">
                                                {{summary.accountHolderName}}
                                              </span>
                                            </td> -->
                                            <td>
                                              <span>
                                                {{summary.recoveryMethod}}
                                              </span>
                                            </td>
                                            <td>
                                                {{summary.intRate}}
                                            </td>
                                            <td>
                                                {{summary.recoveryNoOfInstallments}}
                                            </td>
                                            <td class="wd-10"><i class="fa fa-edit font-16 text-dark-green cursor-pointer"
                                                (click)="editSummary(summary)" tooltip="Edit"></i>&nbsp;&nbsp;
                                                <i (click)="viewSummary(summary)" class="fa fa-eye font-16 text-blue cursor-pointer" tooltip="View"></i>
                                              </td>
                                          </tr>
                                          <tr *ngIf="!summaryGridData?.length">
                                            <td colspan="13">
                                              <span class="font-14 font500 align-center text-red">No Data
                                                Available</span>
                                            </td>
                                          </tr>
                                        </tbody>
                                      </table>
                                    </div>
                                  </div>
                                </div>
                            </div>
                            <div *ngSwitchCase="1" [@slideInOut]>
                              <div  class="">
                              <form class="card" role="form" [formGroup]="sdmFormStep1" #formDirective="ngForm" method="post" novalidate>

                                  <div class="row mt-37">
                                    <div class="col-sm-6 col-md-3">
                                      <label class="form-label">Code</label>
                                      <input type="text" formControlName="sdmName" class="form-control align-right" 
                                      [ngClass]="{'is-invalid' : sdmFormStep1.get('sdmName').status == 'INVALID'}">
                                        <div style="color: red;" *ngIf="sdmFormStep1.get('sdmName').status == null">
                                          <small>mandatory*</small></div>
                                    </div>
                                    <div class="col-sm-6 col-md-3">
                                      <label class="form-label">Description</label>
                                      <input type="text" formControlName="sdmDescription" class="form-control align-right" 
                                      [ngClass]="{'is-invalid' : sdmFormStep1.get('sdmDescription').status == 'INVALID'}">
                                        <div style="color: red;" *ngIf="sdmFormStep1.get('sdmDescription').status == null">
                                          <small>mandatory*</small></div>
                                    </div>
                                    <div class="col-sm-6 col-md-3">
                                      <label class="form-label">No. of sources</label>
                                      <select
                                          formControlName="noOfSourceCount" class="form-control custom-select"
                                          [ngClass]="{'is-invalid' : sdmFormStep1.get('noOfSourceCount').status == 'INVALID'}">
                                          <option value="null" disabled>Select</option>
                                        <option *ngFor="let sourceValue of sourceCountArray">
                                          {{sourceValue}}
                                        </option>
                                      </select>
                                  </div>
                                  <div class="col-sm-6 col-md-3">
                                    <label class="form-label">Source Period</label>
                                    <select
                                        formControlName="sourcePeriod" class="form-control custom-select"
                                        [ngClass]="{'is-invalid' : sdmFormStep1.get('sourcePeriod').status == 'INVALID'}">
                                      <option *ngFor="let sourceValue of sourcePeriodArrayList">
                                        {{sourceValue}}
                                      </option>
                                    </select>
                                </div>
                                  </div>
                                  </form>
                                </div>
                          </div>
                            
                            <div *ngSwitchCase="2" [@slideInOut]>
                              
                              <div class="row mt-20">
                                <div class="col-12">
                                  <div class="table-responsive Custom_Table">
                                    <table class="table table-striped table-hover table-bordered m-b-0">
                                      <thead class="thead-dark">
                                        <tr>
                                          <th class="wd-20" scope="col">Sr. No.</th>
                                          <th class="wd-20" scope="col">Table Type</th>
                                          <th class="wd-20" scope="col">Field Type</th>
                                          <th class="wd-20" scope="col">Values</th>
                                          <th class="wd-30" scope="col">In Range Applicable</th>
                                          <th class="wd-30" scope="col">Action</th>
                                          </tr>
                                      </thead>
                                      <tbody>
                                        <tr *ngFor="let summary of sourceArray; let i = index">
                                          <td >
                                            {{i+1}}
                                          </td>
                                          <td >
                                            <select class="form-control custom-select" [(ngModel)]="summary.sdmMasterDetailsId"
                                              [ngClass]="{'is-invalid' : summary.sdmMasterDetailsId == 'null'}">
                                              <option *ngFor="let sourceValue of sourcePeriodArrayList">
                                                {{sourceValue}}
                                              </option>
                                            </select>
                                          </td>
                                          <td>
                                          <select class="form-control custom-select" [(ngModel)]="summary.sdmSourceDerivedFieldMappingId"
                                              [ngClass]="{'is-invalid' : summary.sdmSourceDerivedFieldMappingId == 'null'}">
                                              <option *ngFor="let sourceValue of sourcePeriodArrayList">
                                                {{sourceValue}}
                                              </option>
                                            </select>
                                          <td>
                                            <select class="form-control custom-select" [(ngModel)]="summary.sourceValue"
                                                [ngClass]="{'is-invalid' : summary.sdmMasterDetailsId == 'null'}">
                                                <option *ngFor="let sourceValue of sourcePeriodArrayList">
                                                  {{sourceValue}}
                                                </option>
                                            </select>
                                          </td>
                                          <td>
                                              {{summary.intRate}}
                                          </td>
                                          <td class="wd-10"><i class="fa fa-edit font-16 text-dark-green cursor-pointer"
                                              (click)="editSummary(summary)" tooltip="Edit"></i>&nbsp;&nbsp;
                                              <i (click)="viewSummary(summary)" class="fa fa-eye font-16 text-blue cursor-pointer" tooltip="View"></i>
                                            </td>
                                        </tr>
                                        <tr *ngIf="!sourceArray?.length">
                                          <td colspan="6">
                                            <span class="font-14 font500 align-center text-red">No Data
                                              Available</span>
                                          </td>
                                        </tr>
                                      </tbody>
                                    </table>
                                  </div>
                                </div>
                              </div>
                            </div>
                            <div *ngSwitchCase="3" [@slideInOut]>
                              <div class="row mt-37">
                                <div class="col-12">
                                  <fieldset>
                                    <legend>Derived</legend>
                                    
                                    <div class="row mt-37">
                                      <div class="col-sm-6 col-md-3">
                                        <label class="form-label">Derived Name</label>
                                        <input type="text" formControlName="loanCode" class="form-control align-right" 
                                        [ngClass]="{'is-invalid' : sdmForm.get('loanCode').status == 'INVALID'}">
                                          <div style="color: red;" *ngIf="sdmForm.get('loanCode').status == null">
                                            <small>mandatory*</small></div>
                                      </div>
                                      <div class="col-sm-6 col-md-3">
                                        <label class="form-label">Module</label>
                                        <select
                                            formControlName="approvalWorkFlowSDM" class="form-control custom-select"
                                            [ngClass]="{'is-invalid' : sdmForm.get('Code').status == 'INVALID'}">
                                          <option *ngFor="let sourceValue of sourceArrayList">
                                            {{sourceValue}}
                                          </option>
                                        </select>
                                    </div>
                                    <div class="col-sm-6 col-md-3">
                                        <label class="form-label">Field Name</label>
                                        <select
                                            formControlName="approvalWorkFlowSDM" class="form-control custom-select"
                                            [ngClass]="{'is-invalid' : sdmForm.get('Code').status == 'INVALID'}">
                                          <option *ngFor="let sourceValue of sourceArrayList">
                                            {{sourceValue}}
                                          </option>
                                        </select>
                                    </div>
                                    <div class="col-sm-6 col-md-3">
                                        <label class="form-label">Derived Type</label>
                                        <select
                                            formControlName="approvalWorkFlowSDM" class="form-control custom-select"
                                            [ngClass]="{'is-invalid' : sdmForm.get('Code').status == 'INVALID'}">
                                          <option *ngFor="let sourceValue of sourceArrayList">
                                            {{sourceValue}}
                                          </option>
                                        </select>
                                    </div>
                                    </div>
                                  <!-- end of row -->
                                  <div class="row mt-20">
                                      <div class="col-sm-6 col-md-3">
                                        <label class="form-label">Field Type</label>
                                        <select
                                            formControlName="approvalWorkFlowSDM" class="form-control custom-select"
                                            [ngClass]="{'is-invalid' : sdmForm.get('Code').status == 'INVALID'}">
                                          <option *ngFor="let sourceValue of sourceArrayList">
                                            {{sourceValue}}
                                          </option>
                                        </select>
                                    </div>
                                    <div class="col-sm-6 col-md-3">
                                      <label class="form-label">%Percentage of</label>
                                      <select
                                          formControlName="approvalWorkFlowSDM" class="form-control custom-select"
                                          [ngClass]="{'is-invalid' : sdmForm.get('Code').status == 'INVALID'}">
                                        <option *ngFor="let sourceValue of sourcePeriodArrayList">
                                          {{sourceValue}}
                                        </option>
                                      </select>
                                  </div>
                                  </div>

                                  <!-- end of row -->

                                  <div class="row mt-15">
                                    <div class="col-12">
                                       <div class="float-right mb-15">
                                        <button  (click)="submit()" class="custom_button custom_btn btn-bg-green btn-labeled btn-labeled-left ripple">
                                          <b><i class="fa fa-plus-circle"></i></b>
                                          <span>Add</span>
                                        </button>           
                                      <button (click)="reset()" class="custom_button custom_btn bg-teal-400 btn-labeled btn-labeled-left ml-10">
                                        <b><i class="fa fa-refresh"></i></b> Reset</button> &nbsp;
                                     </div>
                                     </div>
                                   </div>

                                  <!-- end of row -->

                                  <div class="row mt-20">
                                    <div class="col-12">
                                      <div class="table-responsive Custom_Table">
                                        <table class="table table-striped table-hover table-bordered m-b-0">
                                          <thead class="thead-dark">
                                            <tr>
                                              <th class="wd-20" scope="col">Sr. No.</th>
                                              <th class="wd-20" scope="col">Derived Name</th>
                                              <th class="wd-20" scope="col">Module</th>
                                              <th class="wd-20" scope="col">Derived Type</th>
                                              <th class="wd-20" scope="col">Field Type</th>
                                              <th class="wd-20" scope="col">%Percentage of </th>
                                              <th class="wd-30" scope="col">In Range Applicable</th>
                                              </tr>
                                          </thead>
                                          <tbody>
                                            <tr *ngFor="let summary of summaryGridData; let i = index">
                                              <td >
                                                {{i+1}}
                                              </td>
                                              <td >
                                                <select class="form-control custom-select"
                                                  [ngClass]="{'is-invalid' : sdmForm.get('Code').status == 'INVALID'}">
                                                  <option *ngFor="let sourceValue of sourcePeriodArrayList">
                                                    {{sourceValue}}
                                                  </option>
                                                </select>
                                              </td>
                                              <select class="form-control custom-select"
                                                  [ngClass]="{'is-invalid' : sdmForm.get('Code').status == 'INVALID'}">
                                                  <option *ngFor="let sourceValue of sourcePeriodArrayList">
                                                    {{sourceValue}}
                                                  </option>
                                                </select>
                                              <td>
                                                <select class="form-control custom-select"
                                                [ngClass]="{'is-invalid' : sdmForm.get('Code').status == 'INVALID'}">
                                                <option *ngFor="let sourceValue of sourcePeriodArrayList">
                                                  {{sourceValue}}
                                                </option>
                                              </select>
                                              </td>
                                              <td>
                                                  {{summary.intRate}}
                                              </td>
                                              <td>
                                                  {{summary.recoveryNoOfInstallments}}
                                              </td>
                                              <td class="wd-10"><i class="fa fa-save"></i>
                                                </td>
                                            </tr>
                                            <tr *ngIf="!summaryGridData?.length">
                                              <td colspan="5">
                                                <span class="font-14 font500 align-center text-red">No Data
                                                  Available</span>
                                              </td>
                                            </tr>
                                          </tbody>
                                        </table>
                                      </div>
                                    </div>
                                  </div>

                                      </fieldset>
                                    </div>
                                    </div>
                            </div>
                            <div *ngSwitchCase="4" [@slideInOut]>AS
                            </div>
                            <div *ngSwitchDefault>Saved Successfully<i class="fa-check-circle"></i></div>
                          </div>
                        </div>
                        <div class="row mt-15">
                          <div class="col-12">
                             <div class="float-right mb-15">          
                            <button  (click)="previous()" class="custom_button custom_btn btn-bg-green btn-labeled btn-labeled-left ripple">
                              <b><i class="fa fa-previous"></i></b>Previous</button> &nbsp;
                             
                              <button (click)="next()" class="custom_button custom_btn btn-bg-green btn-labeled btn-labeled-left ripple">
                                <b><i class="fa fa-forward"></i></b>Next</button> &nbsp;
                           </div>
                           </div>
                         </div>
                        </div>
                    </div>
                </div>
                <div class="scroll-to-top" [ngClass]="{ 'show-scrollTop': windowScrolled }">
                    <button type="button" class="btn active" data-toggle="button" aria-pressed="true" tooltip="Top" (click)="scrollToTop()">
              <i class="fa fa-angle-double-up text-white font-18"></i>
            </button>
                </div>
            </div>
        </div>
        <app-footer></app-footer>
    </div>
</div> 