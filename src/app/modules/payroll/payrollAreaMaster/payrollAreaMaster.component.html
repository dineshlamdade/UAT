<app-leftmenu></app-leftmenu>
  <div class="page">
    <app-header></app-header>
    <div class="section-body mt-3">
       <div class="container-fluid" style="border: 1px solid #ccc; background-color: #fff;">
        <div class="tabview-contents">
          <form class="card" role="form" [formGroup]="form" #formDirective="ngForm" method="post" novalidate>
            <div class="row">
             <div class="col-12">
                <div class="card">
                   <div class="card-body p-0">
                    <div class="row">
                      <div class="col-sm-3">
                        <label class="form-label">Code</label>
                        <input type="text" formControlName="code" class="form-control"
                        [ngClass]="{'is-invalid' : form.get('code').status == 'INVALID'}">
                      </div>

                      <div class="col-sm-3">
                        <label class="form-label">Description</label>
                        <input type="text" formControlName="description" class="form-control"
                        [ngClass]="{'is-invalid' : form.get('description').status == 'INVALID'}">
                      </div>


                    <div class="col-sm-3">
                      <label class="form-label ml-15" placement="left">
                        Cycle Definition
                      </label>
                      <ng-multiselect-dropdown
                      [placeholder]="'custom placeholder'"
                      [settings]="dropdownSettings"
                      [data]="dropdownList"
                      [(ngModel)]="selectedItems"
                      (onSelect)="onItemSelect($event)"
                      (onSelectAll)="onSelectAll($event)" [ngModelOptions]="{standalone: true}"
                    >
                    </ng-multiselect-dropdown>
                    </div>

                    <div class="col-sm-3">
                      <label class="form-label ml-15" placement="left">
                        PHG
                      </label>
                        <select
                            formControlName="numberOfApprover" class="form-control custom-select"
                            [ngClass]="{'is-invalid' : form.get('numberOfApprover').status == 'INVALID'}">
                            <option [ngValue]="null">Select</option>
                            <option *ngFor="let data of noOfApprovers"  [value]=data>
                            {{data}}
                          </option>
                        </select>
                    </div>



                  </div>
                  <!-- end of row -->
                  <div class="row mt-15">
                      <div class="col-sm-3">
                        <label class="form-label">Currency</label>
                          <select
                              formControlName="numberOfApprover" class="form-control custom-select"
                              [ngClass]="{'is-invalid' : form.get('numberOfApprover').status == 'INVALID'}">
                              <option [ngValue]="null">Select</option>
                              <option *ngFor="let data of noOfApprovers"  [value]=data>
                              {{data}}
                            </option>
                          </select>
                      </div>
                      <div class="col-sm-3">
                        <label class="form-label ml-15" placement="left">
                         Default Attendance
                        </label>
                        <div class="custom-controls-stacked ml-15 mt-10">
                           <label class="custom-control custom-radio custom-control-inline">
                           <input formControlName="changeOfApproverByManager" type="radio"
                              class="custom-control-input" [value]="false">
                           <span class="custom-control-label">0</span>
                           </label>
                           <label class="custom-control custom-radio custom-control-inline">
                           <input formControlName="changeOfApproverByManager" type="radio"
                              class="custom-control-input" [value]="true">
                           <span class="custom-control-label">1</span>
                           </label>
                        </div>
                      </div>

                      <div class="col-sm-3">
                        <label class="form-label ml-15" placement="left">
                         Default Language
                        </label>
                          <select formControlName="numberOfApprover" class="form-control custom-select"
                            [ngClass]="{'is-invalid' : form.get('numberOfApprover').status == 'INVALID'}">
                              <option [ngValue]="null">Select</option>
                              <option *ngFor="let data of noOfApprovers"  [value]=data>
                              {{data}}
                            </option>
                          </select>
                      </div>

                      <div class="col-sm-3">
                        <label class="form-label ml-15" placement="left">
                         Min Net Pay_SDM
                        </label>
                          <select formControlName="numberOfApprover" class="form-control custom-select"
                            [ngClass]="{'is-invalid' : form.get('numberOfApprover').status == 'INVALID'}">
                              <option [ngValue]="null">Select</option>
                              <option *ngFor="let data of noOfApprovers"  [value]=data>
                              {{data}}
                            </option>
                          </select>
                      </div>
                      
                    </div>
                  
                    <!-- end of row -->
                    <div class="row mt-15">
                      <div class="col-sm-3">
                        <label class="form-label ml-15" placement="left">
                         Company
                        </label>
                          <select formControlName="numberOfApprover" class="form-control custom-select"
                            [ngClass]="{'is-invalid' : form.get('numberOfApprover').status == 'INVALID'}">
                              <option [ngValue]="null">Select</option>
                              <option *ngFor="let data of noOfApprovers"  [value]=data>
                              {{data}}
                            </option>
                          </select>
                      </div>

                      <div class="col-sm-3">
                        <label class="form-label">From Date</label>
                        <div class="form-group">
                           <div class="input-group">
                              <div class="input-group-prepend">
                                 <span class="input-group-text"><i class="fa fa-calendar"></i></span>
                              </div>
                              <input [bsConfig]="{ dateInputFormat: 'DD-MMM-YYYY' }" formControlName="numberOfApprover"
                               data-provide="datepicker" data-date-autoclose="true" class="form-control"
                               (bsValueChange)="setPolicyEndDate()" placeholder="Policy Start Date" bsDatepicker
                               [ngClass]="{ 'is-invalid': submitted && masterForm.numberOfApprover.errors }"
                               [maxDate]="today">
                              <div *ngIf="submitted && masterForm.numberOfApprover.errors" class="invalid-feedback">
                                 <div *ngIf="masterForm.numberOfApprover.errors.required">Policy Start Date is mandatory</div>
                              </div>
                           </div>
                        </div>
                      </div>


                    <div class="col-sm-3">
                      <label class="form-label">To Date</label>
                      <div class="form-group">
                         <div class="input-group">
                            <div class="input-group-prepend">
                               <span class="input-group-text"><i class="fa fa-calendar"></i></span>
                            </div>
                            <input [bsConfig]="{ dateInputFormat: 'DD-MMM-YYYY' }" formControlName="numberOfApprover"
                             data-provide="datepicker" data-date-autoclose="true" class="form-control"
                             (bsValueChange)="setPolicyEndDate()" placeholder="Policy Start Date" bsDatepicker
                             [ngClass]="{ 'is-invalid': submitted && masterForm.numberOfApprover.errors }"
                             [maxDate]="today">
                            <div *ngIf="submitted && masterForm.numberOfApprover.errors" class="invalid-feedback">
                               <div *ngIf="masterForm.numberOfApprover.errors.required">Policy Start Date is mandatory</div>
                            </div>
                         </div>
                      </div>
                    </div>



                  </div>
                  <!-- end of row -->
                  <div class="row mt-15">
                     
                    <div class="col-sm-3">
                      <label class="form-label">Active</label>
                      <input type="checkbox" formControlName="active">
                    </div>

                    <div class="col-sm-3" *ngIf="form.get('active').value === false">
                      <label class="form-label">Remark</label>
                      <textarea formControlName="remark" class="form-control" [ngClass]="{'is-invalid' : form.get('remark').status == 'INVALID'}"></textarea>
                    </div>
               </div>
                <!-- end of row -->



                </div> <!-- card body -->
              </div>
            </div>
          </div>


       
        </form>
      </div>

      <div class="row mt-15">
        <div class="col-12">
           <div class="float-right mb-15">
            <button *ngIf="!cancelButtonShow" (click)="submit()" class="custom_button custom_btn btn-bg-green btn-labeled btn-labeled-left ripple">
              <b><i class="fa fa-save"></i></b>
              <span *ngIf="form.get('id').value === 0"> Save</span>
              <span *ngIf="form.get('id').value !=0">Update</span>
            </button>           
          <button *ngIf="(form.get('id').value ===0)" (click)="reset()" class="custom_button custom_btn bg-teal-400 btn-labeled btn-labeled-left ml-10">
            <b><i class="fa fa-refresh"></i></b> Reset</button> &nbsp;
           
            <button *ngIf="cancelButtonShow" (click)="reset()" class="custom_button custom_btn bg-btn-red btn-labeled btn-labeled-left ml-10">
              <b><i class="fa fa-close"></i></b> Cancel</button> &nbsp;
         </div>
         </div>
       </div>

       
      <div class="row">
        <div class="col-12">
          <div class="card">
            <div class="mb-0">
              <h3 class="font-14 text-purple font-bold">Summary</h3>
           </div>
              <div class="table-responsive Custom_Table">
                <table class="table table-striped table-hover table-bordered m-b-0">
                  <thead class="thead-dark">
                    <tr>
                      <th scope="col" class="wd-8">Sr No.</th>
                      <th scope="col" class="wd-5">Code</th>
                      <th scope="col" class="wd-20">Description</th>
                      <th scope="col" class="wd-5">PHG</th>
                      <th scope="col" class="wd-15">Company</th>
                      <th scope="col" class="wd-15">From Date</th>
                      <th scope="col" class="wd-15">To Date</th>
                      <!-- <th scope="col" class="wd-5">Active</th> -->
                      <th scope="col" class="wd-8">Action</th>
                    </tr>
                  </thead>
                  <tbody>

                    <tr *ngFor="let item of summary; let i = index"> 
                      
                      <td> {{i+1}}
                      </td>
                      <td>
                       {{item.workflowMasterHeaderResponseDTO.workflowCode}}
                      </td>
                      <td>
                        {{item.workflowMasterHeaderResponseDTO.description}}
                      </td>
                      
                      <td>
                        {{item.workflowMasterHeaderResponseDTO.numberOfApprover}}
                      </td>
                      <td [ngStyle]="{
                        color: item.workflowMasterHeaderResponseDTO.autoApproval
                          ? 'hsl(141, 53%, 53%)'
                          : 'hsl(348, 100%, 61%)'
                      }">
                        {{item.workflowMasterHeaderResponseDTO.autoApproval | yesNo}}
                      </td>
                      <!-- <td [ngStyle]="{
                        color: item.workflowMasterHeaderResponseDTO.active
                          ? 'hsl(141, 53%, 53%)'
                          : 'hsl(348, 100%, 61%)'
                      }">
                        {{item.workflowMasterHeaderResponseDTO.active | yesNo}}
                      </td> -->
                      <td>
                        <i class="fa fa-edit font-16 text-dark-green cursor-pointer"
                          (click)="edit(item)" tooltip="Edit"></i>
                      <i class="fa fa-eye font-16 text-blue cursor-pointer ml-3" (click)="view(item)"
                        tooltip="View"></i>
                        <i class="fa fa-trash font-16 text-red cursor-pointer ml-3" *ngIf="(!item.assigned) || (item.assigned === 0)"
                        tooltip="Delete" (click)="delete(item)"></i>
                    </td>
                    </tr>
                    <tr *ngIf="!summary.length">
                      <td colspan="10">
                        <span class="font-14 font500 align-center text-red">No Data Available</span>
                      </td>
                    </tr>
                  </tbody>
                </table>
            </div>
            
          </div>
        </div>
      </div>
      </div>
      </div>
      <app-footer></app-footer>
    </div>
