<app-leftmenu></app-leftmenu>
<!-- Main body part  -->
<div class="page">
    <app-header></app-header>
    <div class="section-body mt-3">
        <div class="container-fluid">
            <div class="row">
                <div class="col-12">
                    <div class="card">
                        <div class="card-body">
                            <form [formGroup]="ContactInfoForm">

                                <!-- Contact Details Section -->
                                <fieldset>
                                    <legend><i class="icon-call-out"></i>&nbsp;&nbsp;{{
                                        'ContactInformationForm.ContactDetails' | transloco }}
                                    </legend>
                                    <div class="col-12">
                                        <legend>{{ 'ContactInformationForm.official' | transloco }}</legend>
                                        <div class="row">
                                            <!-- <div class="col-12"> -->
                                            <div class="col-6">
                                                <div class="row">
                                                    <div class="col-sm-3 col-md-6">
                                                        <label class="form-label">{{
                                                            'ContactInformationForm.officialMobileNumber' | transloco
                                                            }}</label>
                                                        <div class="row">
                                                            <div class="col-sm-3 col-md-5 country-code">
                                                                <select class="form-control selectpicker"
                                                                    placeholder="ISD" (change)="formTouch()"
                                                                    formControlName="officialCountryCode"
                                                                    [(ngModel)]="ngOfficialCountryCode"
                                                                    [ngClass]="{'is-invalid' : ContactInfoForm.get('officialCountryCode').status == 'INVALID'}">
                                                                    <option value="" data-hidden="true" class="placeholder-control">ISD
                                                                    </option>
                                                                    <option *ngFor="let code of countryCode"
                                                                        [value]="code">
                                                                        {{code}}
                                                                    </option>
                                                                </select>
                                                            </div>
                                                            <div class="col-sm-3 col-md-7 ml-2">
                                                                <input type="text" class="form-control"
                                                                    placeholder="Enter Mobile No." minlength="1"
                                                                    maxlength="10" (keypress)="keyPress($event)"
                                                                    formControlName="officialMobileNumber" (keyup)="formTouch()"
                                                                    [(ngModel)]="contactInformation.employeePersonalInfoRequestDTO.officialMobileNumber"
                                                                    [ngClass]="{'is-invalid' : ContactInfoForm.get('officialMobileNumber').status == 'INVALID'}">
                                                            </div>
                                                        </div>
                                                    </div>
                                                    <div class="col-sm-4 col-md-4">
                                                        <label class="form-label">{{
                                                            'ContactInformationForm.officialemail' | transloco
                                                            }}</label>
                                                        <input type="text" class="form-control"
                                                            placeholder="Enter Email" formControlName="officialEmail" tooltip="{{contactInformation.employeeMasterRequestDTO.officialEmailId}}"
                                                            pattern="\S+@\S+\.\S+" (change)="validateOfficialEmail(contactInformation.employeeMasterRequestDTO.officialEmailId)"
                                                            [(ngModel)]="contactInformation.employeeMasterRequestDTO.officialEmailId" (keyup)="formTouch()"
                                                            [ngClass]="{'is-invalid' : ContactInfoForm.get('officialEmail').status == 'INVALID'}">
                                                    </div>
                                                </div>
                                            </div>


                                            <div class="col-6 personal-col">
                                                <legend>{{ 'ContactInformationForm.personal' | transloco }}</legend>
                                                <div class="row">
                                                    <div class="col-sm-3 col-md-6">
                                                        <label class="form-label">{{
                                                            'ContactInformationForm.officialMobileNumber' | transloco
                                                            }}</label>
                                                        <div class="row">
                                                            <div class="col-sm-3 col-md-5 country-code">
                                                                <select class="form-control" placeholder="ISD"
                                                                    formControlName="personalCountryCode"
                                                                    [(ngModel)]="ngPersonalCountryCode"
                                                                    (change)="validatePersonalMobile(ngPersonalCountryCode);formTouch()"
                                                                    [ngClass]="{'is-invalid' : ContactInfoForm.get('personalCountryCode').status == 'INVALID'}">
                                                                    <option value="" selected disabled>ISD
                                                                    </option>
                                                                    <option *ngFor="let code of countryCode"
                                                                        [value]="code">
                                                                        {{code}}
                                                                    </option>
                                                                </select>
                                                            </div>
                                                            <div class="col-sm-3 col-md-7 ml-2">
                                                                <input type="text" class="form-control"
                                                                    placeholder="Enter Mobile No." minlength="1"
                                                                    maxlength="10" (keypress)="keyPress($event)"
                                                                    formControlName="personalmobileNumber" (keyup)="formTouch()"
                                                                    (change)="validatePersonalMobile(ngPersonalCountryCode)"
                                                                    [(ngModel)]="contactInformation.employeeMasterRequestDTO.personalMobileNumber"
                                                                    [ngClass]="{'is-invalid' : ContactInfoForm.get('personalmobileNumber').status == 'INVALID'}">
                                                            </div>
                                                        </div>
                                                    </div>
                                                    <div class="col-sm-4 col-md-4">
                                                        <label class="form-label">{{
                                                            'ContactInformationForm.officialemail' | transloco
                                                            }}</label>
                                                        <input type="text" class="form-control"
                                                            placeholder="Enter Email" formControlName="personalEmail" (keyup)="formTouch()"
                                                            tooltip="{{contactInformation.employeePersonalInfoRequestDTO.personalEmailID}}"
                                                            pattern="\S+@\S+\.\S+" (change)="validatePersonalEmailId(contactInformation.employeePersonalInfoRequestDTO.personalEmailID)"
                                                            [(ngModel)]="contactInformation.employeePersonalInfoRequestDTO.personalEmailID"
                                                            [ngClass]="{'is-invalid' : ContactInfoForm.get('personalEmail').status == 'INVALID'}">
                                                    </div>
                                                </div>

                                            </div>
                                            <!-- </div> -->
                                        </div>
                                    </div>

                                    <br>
                                    <legend>{{ 'ContactInformationForm.EmergencyContactDetails' | transloco }}</legend>
                                    <div class="col-6">
                                        <div class="row">
                                            <div class="col-sm-4 col-md-4">
                                                <label class="form-label">{{
                                                    'ContactInformationForm.emergencyContactName' | transloco }}</label>
                                                <input type="text" class="form-control" placeholder="Enter Name"
                                                    formControlName="emergencyContactName" (keyup)="formTouch()"
                                                    [(ngModel)]="contactInformation.employeePersonalInfoRequestDTO.emergencyContactName1">
                                            </div>

                                            <div class="col-sm-3 col-md-6 ">
                                                <label class="form-label">{{
                                                    'ContactInformationForm.officialMobileNumber' | transloco }}</label>
                                                <div class="row">
                                                    <div class="col-sm-3 col-md-5 country-code ">
                                                        <select class="form-control" placeholder="Select"
                                                            formControlName="emergencyCountryCode"  (change)="formTouch()"
                                                            [(ngModel)]="ngEmergencyCountryCode">
                                                            <option value="" selected disabled>ISD</option>
                                                            <option *ngFor="let code of countryCode" [value]="code">
                                                                {{code}}
                                                            </option>
                                                        </select>
                                                    </div>
                                                    <div class="col-sm-3 col-md-7 ml-2">
                                                        <input type="text" class="form-control"
                                                            placeholder="Enter Mobile No." minlength="1" maxlength="10"
                                                            formControlName="emergencyContactNumber"
                                                            (keypress)="keyPress($event)" (keyup)="formTouch()"
                                                            [(ngModel)]="contactInformation.employeePersonalInfoRequestDTO.emergencyContactNumber"
                                                            [ngClass]="{'is-invalid' : ContactInfoForm.get('emergencyContactNumber').status == 'INVALID'}">
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </fieldset>
                                <br>

                                <!-- Address Section -->
                                <fieldset>
                                    <legend><i class="icon-pointer"></i> {{ 'ContactInformationForm.addressDetails' |
                                        transloco }}</legend>

                                    <div class="col-12">
                                        <div class="row center-fieldset">
                                            <div class="col-5">
                                                <fieldset>
                                                    <legend>{{ 'ContactInformationForm.localAddressTitle' | transloco }}
                                                    </legend>
                                                    <div class="row">
                                                        <div class="col-sm-6 col-md-12">
                                                            <label class="form-label">{{
                                                                'ContactInformationForm.Address1' | transloco }}</label>
                                                            <input type="text" class="form-control"
                                                                placeholder="Enter Address 1"
                                                                formControlName="localAddress1"
                                                                [(ngModel)]="localAddressInformation.address1"
                                                                (keyup)="checkLocalAddress();formTouch()"
                                                                tooltip="{{localAddressInformation.address1}}"
                                                                [ngClass]="{'is-invalid' : ContactInfoForm.get('localAddress1').status == 'INVALID'}">
                                                        </div>
                                                        <div class="col-sm-6 col-md-6 mt-10">
                                                            <label class="form-label">{{
                                                                'ContactInformationForm.Address2' | transloco }}</label>
                                                            <input type="text" class="form-control"
                                                                placeholder="Enter Address 2"
                                                                formControlName="localAddress2"
                                                                [(ngModel)]="localAddressInformation.address2"
                                                                (keyup)="checkLocalAddress();formTouch()"
                                                                tooltip="{{localAddressInformation.address2}}">
                                                        </div>
                                                        <div class="col-sm-6 col-md-6 mt-10">
                                                            <label class="form-label">{{
                                                                'ContactInformationForm.Address3' | transloco }}</label>
                                                            <input type="text" class="form-control"
                                                                placeholder="Enter Address 3"
                                                                formControlName="localAddress3"
                                                                [(ngModel)]="localAddressInformation.address3"
                                                                (keyup)="checkLocalAddress();formTouch()"
                                                                tooltip="{{localAddressInformation.address3}}">
                                                        </div>

                                                        <div class="col-sm-6 col-md-6 mt-10">
                                                            <label class="form-label">{{
                                                                'ContactInformationForm.Country' | transloco }}</label>
                                                            <select class="form-control" placeholder="Select"
                                                                formControlName="localCountry"
                                                                [(ngModel)]="localAddressInformation.country"
                                                                (change)="checkLocalAddress(); clearLocalAddressFields();formTouch()">
                                                                <option value="" selected disabled>Select</option>
                                                                <option *ngFor="let country of countries"
                                                                    [value]="country">
                                                                    {{country}}
                                                                </option>
                                                            </select>
                                                        </div>
                                                        <div class="col-sm-6 col-md- mt-10">
                                                            <label class="form-label">{{ 'ContactInformationForm.Pin' |
                                                                transloco }}</label>
                                                            <input type="text" class="form-control"
                                                                placeholder="Enter PIN" minlength="1" maxlength="6"
                                                                formControlName="localPin"
                                                                [(ngModel)]="localAddressInformation.postalCode"
                                                                pattern="[0-9]{6}" (keypress)="keyPress($event)"
                                                                (keyup)="checkLocalAddress(); getLocalAddressFromPIN();formTouch()"
                                                                [ngClass]="{'is-invalid' : ContactInfoForm.get('localPin').status == 'INVALID'}">
                                                        </div>
                                                        <div class="col-sm-6 col-md-6 mt-10">
                                                            <label class="form-label">{{ 'ContactInformationForm.State'
                                                                | transloco }}</label>
                                                            <input type="text" class="form-control"
                                                                placeholder="Enter State" formControlName="localState"
                                                                [(ngModel)]="localAddressInformation.state"
                                                                (keyup)="checkLocalAddress()">
                                                        </div>
                                                        <div class="col-sm-6 col-md-6 mt-10">
                                                            <label class="form-label">{{
                                                                'ContactInformationForm.District' | transloco }}</label>
                                                            <input type="text" class="form-control"
                                                                placeholder="Enter District"
                                                                formControlName="localDistrict"
                                                                [(ngModel)]="localAddressInformation.district"
                                                                (keyup)="checkLocalAddress()">
                                                        </div>
                                                        <div class="col-sm-6 col-md-6 mt-10">
                                                            <label class="form-label">{{ 'ContactInformationForm.City' |
                                                                transloco }}</label>
                                                            <input type="text" class="form-control"
                                                                placeholder="Enter City" formControlName="localCity"
                                                                [(ngModel)]="localAddressInformation.city"
                                                                (keyup)="checkLocalAddress()">
                                                        </div>
                                                        <div class="col-sm-6 col-md-6 mt-10">
                                                            <label class="form-label">{{
                                                                'ContactInformationForm.Village' | transloco }}</label>
                                                            <input type="text" class="form-control"
                                                                placeholder="Enter Village"
                                                                formControlName="localVillege"
                                                                [(ngModel)]="localAddressInformation.village"
                                                                (keyup)="checkLocalAddress();formTouch()">
                                                        </div>
                                                    </div>

                                                </fieldset>
                                            </div>
                                            <div class="copy-from-btn">
                                                <i class="fa fa-arrow-circle-right" style="font-size: 29px;"
                                                    tooltip="Copy Local Address to Permanent Address"
                                                    (click)="ConfirmationFromLocalToPermanent()"></i>
                                                <!-- <mat-icon tooltip="Copy from Local to Permanent Address"
                                                    (click)="ConfirmationFromLocalToPermanent()">
                                                    arrow_forward</mat-icon> -->
                                                <br>
                                                <i class="fa fa-arrow-circle-left" style="font-size: 29px;"
                                                    tooltip="Copy Permanent Address to Local Address"                                                   (click)="ConfirmationFromPermanentToLocal()"></i>
                                                <!-- <mat-icon tooltip="Copy from Permanent to Local Address"
                                                    (click)="ConfirmationFromPermanentToLocal()">
                                                    arrow_back</mat-icon> -->
                                            </div>
                                            <div class="col-5">
                                                <fieldset>
                                                    <legend>
                                                        {{ 'ContactInformationForm.permanentAddressTitle' | transloco }}
                                                    </legend>

                                                    <div class="row">
                                                        <div class="col-sm-6 col-md-12">
                                                            <label class="form-label">{{
                                                                'ContactInformationForm.Address1' | transloco }}</label>
                                                            <input type="text" class="form-control"
                                                                placeholder="Enter Address 1"
                                                                formControlName="permanentAddress1"
                                                                [(ngModel)]="permanentAddressInformation.address1"
                                                                (keyup)="checkLocalAddress();formTouch()"
                                                                tooltip="{{permanentAddressInformation.address1}}"
                                                                [ngClass]="{'is-invalid' : ContactInfoForm.get('permanentAddress1').status == 'INVALID'}">
                                                        </div>
                                                        <div class="col-sm-6 col-md-6 mt-10">
                                                            <label class="form-label">{{
                                                                'ContactInformationForm.Address2' | transloco }}</label>
                                                            <input type="text" class="form-control"
                                                                placeholder="Enter Address 2"
                                                                formControlName="permanentAddress2"
                                                                [(ngModel)]="permanentAddressInformation.address2"
                                                                (keyup)="checkLocalAddress();formTouch()"
                                                                tooltip="{{permanentAddressInformation.address2}}">
                                                        </div>
                                                        <div class="col-sm-6 col-md-6 mt-10">
                                                            <label class="form-label">{{
                                                                'ContactInformationForm.Address3' | transloco }}</label>
                                                            <input type="text" class="form-control"
                                                                placeholder="Enter Address 3"
                                                                formControlName="permanentAddress3"
                                                                [(ngModel)]="permanentAddressInformation.address3"
                                                                (keyup)="checkLocalAddress();formTouch()"
                                                                tooltip="{{permanentAddressInformation.address3}}">
                                                        </div>

                                                        <div class="col-sm-6 col-md-6 mt-10">
                                                            <label class="form-label">{{
                                                                'ContactInformationForm.Country' | transloco }}</label>
                                                            <select class="form-control" placeholder="Select"
                                                                formControlName="permanentCountry"
                                                                [(ngModel)]="permanentAddressInformation.country"
                                                                (change)="checkLocalAddress(); clearPermanentAddressFields();formTouch()">
                                                                <option value="" selected disabled>Select
                                                                </option>
                                                                <option *ngFor="let country of countries"
                                                                    [value]="country">
                                                                    {{country}}
                                                                </option>
                                                            </select>
                                                        </div>
                                                        <div class="col-sm-6 col-md- mt-10">
                                                            <label class="form-label">{{ 'ContactInformationForm.Pin' |
                                                                transloco }}</label>
                                                            <input type="text" class="form-control"
                                                                placeholder="Enter PIN" minlength="1" maxlength="6"
                                                                formControlName="permanentPin"
                                                                [(ngModel)]="permanentAddressInformation.postalCode"
                                                                pattern="[0-9]{6}" (keypress)="keyPress($event)"
                                                                (keyup)="checkLocalAddress(); getPermanentAddressFromPIN();formTouch()"
                                                                [ngClass]="{'is-invalid' : ContactInfoForm.get('permanentPin').status == 'INVALID'}">
                                                        </div>
                                                        <div class="col-sm-6 col-md-6 mt-10">
                                                            <label class="form-label">{{ 'ContactInformationForm.State'
                                                                | transloco }}</label>
                                                            <input type="text" class="form-control"
                                                                placeholder="Enter State"
                                                                formControlName="permanentState"
                                                                [(ngModel)]="permanentAddressInformation.state"
                                                                (keyup)="checkLocalAddress();formTouch()">
                                                        </div>
                                                        <div class="col-sm-6 col-md-6 mt-10">
                                                            <label class="form-label">{{
                                                                'ContactInformationForm.District' | transloco }}</label>
                                                            <input type="text" class="form-control"
                                                                placeholder="Enter District"
                                                                formControlName="permanentDistrict"
                                                                [(ngModel)]="permanentAddressInformation.district"
                                                                (keyup)="checkLocalAddress();formTouch()">
                                                        </div>
                                                        <div class="col-sm-6 col-md-6 mt-10">
                                                            <label class="form-label">{{ 'ContactInformationForm.City' |
                                                                transloco }}</label>
                                                            <input type="text" class="form-control"
                                                                placeholder="Enter City" formControlName="permanentCity"
                                                                [(ngModel)]="permanentAddressInformation.city"
                                                                (keyup)="checkLocalAddress();formTouch()">
                                                        </div>
                                                        <div class="col-sm-6 col-md-6 mt-10">
                                                            <label class="form-label">{{
                                                                'ContactInformationForm.Village' | transloco }}</label>
                                                            <input type="text" class="form-control"
                                                                placeholder="Enter Village"
                                                                formControlName="permanentVillege"
                                                                [(ngModel)]="permanentAddressInformation.village"
                                                                (keyup)="checkLocalAddress();formTouch()">
                                                        </div>
                                                    </div>
                                                </fieldset>
                                            </div>
                                        </div>
                                    </div>

                                    <br>
                                    <div class="form-group">
                                        <legend
                                            [ngClass]="{'invalid-feedback' : ContactInfoForm.get('communicationAddress').status == 'INVALID'}">
                                            {{ 'ContactInformationForm.communicationAddress' | transloco }}</legend>
                                        <div class="custom-controls-stacked">
                                            <label class="custom-control custom-radio custom-control-inline">
                                                <input type="radio" class="custom-control-input"
                                                    name="example-inline-radios" value="local"
                                                    (change)="selectionChallenged($event)"
                                                    formControlName="communicationAddress"
                                                    [(ngModel)]="communicationAddress">
                                                <span class="custom-control-label">
                                                    {{ 'ContactInformationForm.localBoolean' | transloco }}</span>
                                            </label>
                                            <label class="custom-control custom-radio custom-control-inline">
                                                <input type="radio" class="custom-control-input"
                                                    name="example-inline-radios" value="permanent"
                                                    (change)="selectionChallenged($event)"
                                                    formControlName="communicationAddress"
                                                    [(ngModel)]="communicationAddress">
                                                <span class="custom-control-label">
                                                    {{ 'ContactInformationForm.permanentBoolean' | transloco }}</span>
                                            </label>
                                        </div>
                                        <mat-error *ngIf="!communicationAddress">
                                            {{ 'ContactInformationForm.communicationErrorMsg' | transloco }}</mat-error>
                                    </div>
                                </fieldset>


                                <!-- <div>
                                    <legend>{{ 'ContactInformationForm.communicationAddress' | transloco }}</legend>
                                    <mat-radio-group
                                        (change)="selectionChallenged($event)" formControlName="communicationAddress"
                                        [(ngModel)]="communicationAddress">
                                        <mat-radio-button value="local" class="wj-label-color">
                                            {{ 'ContactInformationForm.localBoolean' | transloco }}</mat-radio-button>
                                        &nbsp;&nbsp;
                                        <mat-radio-button value="permanent" class="wj-label-color">
                                            {{ 'ContactInformationForm.permanentBoolean' | transloco }}
                                        </mat-radio-button>
                                    </mat-radio-group>
                                </div> -->

                                <div class="row mt-15">
                                    <div class="col-12">
                                        <div class="float-right mb-15">
                                            <button type="button" tooltip="Previous"
                                                [routerLink]="['/employee-master/employment-information/joining-information']"
                                                class="custom_button custom_btn btn-labeled btn-labeled-left ml-10 bg-teal-400"><b><i
                                                        class="fa fa-chevron-circle-left"
                                                        aria-hidden="true"></i></b>Previous</button>

                                            <button type="button" tooltip="Next"
                                                [routerLink]="['/employee-master/bank-information']"
                                                class="custom_button custom_btn btn-labeled btn-labeled-left ml-15 mr-15 bg-teal-400"><b><i
                                                        class="fa fa-chevron-circle-right"
                                                        aria-hidden="true"></i></b>Next</button>

                                            <button type="button" (click)="contactSaveNextSubmit(contactInformation)"
                                                [disabled]="ContactInfoForm.invalid || !communicationAddress || ContactInfoForm.untouched"
                                                class="custom_button custom_btn btn-labeled btn-labeled-left mr-15"
                                                tooltip="Save & Next"
                                                [ngClass]="{'disabled-btn-bg-green' : ContactInfoForm.invalid || !communicationAddress || ContactInfoForm.untouched,
                                                'btn-bg-green': !ContactInfoForm.invalid || communicationAddress}"><b><i
                                                        class="fa fa-floppy-o"></i></b>
                                                Save & Next</button>

                                            <button type="submit"
                                                [disabled]="ContactInfoForm.invalid || !communicationAddress || ContactInfoForm.untouched"
                                                (click)="contactFormSubmit(contactInformation)" [ngClass]="{'disabled-btn-bg-green' : ContactInfoForm.invalid || !communicationAddress || ContactInfoForm.untouched,
                                               'btn-bg-green': !ContactInfoForm.invalid || communicationAddress || ContactInfoForm.touched}"
                                                class="custom_button custom_btn btn-labeled btn-labeled-left"
                                                tooltip="Save"><b><i class="fa fa-floppy-o"></i></b> Save</button>


                                            <button type="button" tooltip="Reset" (click)="resetForm()"
                                                class="custom_button custom_btn bg-teal-400 btn-labeled btn-labeled-left ml-10"><b><i
                                                        class="fa fa-refresh" aria-hidden="true"></i></b> Reset</button>
                                            <!-- <button type="button" *ngIf="isCancel" (click)="cancelView()"
                                             class="custom_button custom_btn bg-btn-red btn-labeled btn-labeled-left ml-10"
                                             tooltip="Cancel"><b><i class="fa fa-times-circle" ></i></b> Cancel</button> -->
                                        </div>
                                    </div>
                                </div>
                            </form>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>